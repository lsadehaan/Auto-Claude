function hB(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function nh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qv={exports:{}},Zu={};var XC;function fB(){if(XC)return Zu;XC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:c,ref:i!==void 0?i:null,props:o}}return Zu.Fragment=t,Zu.jsx=n,Zu.jsxs=n,Zu}var ZC;function mB(){return ZC||(ZC=1,qv.exports=fB()),qv.exports}var s=mB();const ut=e=>typeof e=="string",Qu=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},QC=e=>e==null?"":""+e,pB=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},gB=/###/g,JC=e=>e&&e.indexOf("###")>-1?e.replace(gB,"."):e,eN=e=>!e||ut(e),xd=(e,t,n)=>{const r=ut(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(eN(e))return{};const o=JC(r[i]);!e[o]&&n&&(e[o]=new n),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++i}return eN(e)?{}:{obj:e,k:JC(r[i])}},tN=(e,t,n)=>{const{obj:r,k:i}=xd(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let o=t[t.length-1],c=t.slice(0,t.length-1),l=xd(e,c,Object);for(;l.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),l=xd(e,c,Object),l?.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=n},xB=(e,t,n,r)=>{const{obj:i,k:o}=xd(e,t,Object);i[o]=i[o]||[],i[o].push(n)},Lm=(e,t)=>{const{obj:n,k:r}=xd(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},vB=(e,t,n)=>{const r=Lm(e,n);return r!==void 0?r:Lm(t,n)},DA=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?ut(e[r])||e[r]instanceof String||ut(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):DA(e[r],t[r],n):e[r]=t[r]);return e},sc=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var yB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const bB=e=>ut(e)?e.replace(/[&<>"'\/]/g,t=>yB[t]):e;class wB{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const SB=[" ",",","?","!",";"],jB=new wB(20),_B=(e,t,n)=>{t=t||"",n=n||"";const r=SB.filter(c=>t.indexOf(c)<0&&n.indexOf(c)<0);if(r.length===0)return!0;const i=jB.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!i.test(e);if(!o){const c=e.indexOf(n);c>0&&!i.test(e.substring(0,c))&&(o=!0)}return o},yb=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let c,l="";for(let d=o;d<r.length;++d)if(d!==o&&(l+=n),l+=r[d],c=i[l],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<r.length-1)continue;o+=d-o+1;break}i=c}return i},Td=e=>e?.replace("_","-"),CB={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Im{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||CB,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(ut(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Im(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Im(this.logger,t)}}var mi=new Im;class wp{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i.apply(i,[t,...n])})}}class sN extends wp{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,n],r&&(Array.isArray(r)?l.push(...r):ut(r)&&o?l.push(...r.split(o)):l.push(r)));const d=Lm(this.data,l);return!d&&!n&&!r&&t.indexOf(".")>-1&&(t=l[0],n=l[1],r=l.slice(2).join(".")),d||!c||!ut(r)?d:yb(this.data?.[t]?.[n],r,o)}addResource(t,n,r,i,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[t,n];r&&(l=l.concat(c?r.split(c):r)),t.indexOf(".")>-1&&(l=t.split("."),i=n,n=l[1]),this.addNamespaces(n),tN(this.data,l,i),o.silent||this.emit("added",t,n,r,i)}addResources(t,n,r,i={silent:!1}){for(const o in r)(ut(r[o])||Array.isArray(r[o]))&&this.addResource(t,n,o,r[o],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,o,c={silent:!1,skipCopy:!1}){let l=[t,n];t.indexOf(".")>-1&&(l=t.split("."),i=r,r=n,n=l[1]),this.addNamespaces(n);let d=Lm(this.data,l)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?DA(d,r,o):d={...d,...r},tN(this.data,l,d),c.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var RA={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(o=>{t=this.processors[o]?.process(t,n,r,i)??t}),t}};const PA=Symbol("i18next/PATH_KEY");function NB(){const e=[],t=Object.create(null);let n;return t.get=(r,i)=>(n?.revoke?.(),i===PA?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}function bb(e,t){const{[PA]:n}=e(NB());return n.join(t?.keySeparator??".")}const nN={},Wv=e=>!ut(e)&&typeof e!="boolean"&&typeof e!="number";class Om extends wp{constructor(t,n={}){super(),pB(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mi.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const r={...n};if(t==null)return!1;const i=this.resolve(t,r);if(i?.res===void 0)return!1;const o=Wv(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const c=r&&t.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!_B(t,r,i);if(c&&!l){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:ut(o)?[o]:o};const h=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),t=h.join(i)}return{key:t,namespaces:ut(o)?[o]:o}}translate(t,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=bb(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:d}=this.extractFromKey(t[t.length-1],i),h=d[d.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const f=i.lng||this.language,g=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return g?o?{res:`${h}${m}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${m}${l}`:o?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:l;const x=this.resolve(t,i);let C=x?.res;const _=x?.usedKey||l,b=x?.exactUsedKey||l,w=["[object Number]","[object Function]","[object RegExp]"],j=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,N=i.count!==void 0&&!ut(i.count),T=Om.hasDefaultValue(i),E=N?this.pluralResolver.getSuffix(f,i.count,i):"",D=i.ordinal&&N?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",A=N&&!i.ordinal&&i.count===0,P=A&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${E}`]||i[`defaultValue${D}`]||i.defaultValue;let M=C;S&&!C&&T&&(M=P);const B=Wv(M),F=Object.prototype.toString.apply(M);if(S&&M&&B&&w.indexOf(F)<0&&!(ut(j)&&Array.isArray(M))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,M,{...i,ns:d}):`key '${l} (${this.language})' returned an object instead of string.`;return o?(x.res=U,x.usedParams=this.getUsedParamsDetails(i),x):U}if(c){const U=Array.isArray(M),G=U?[]:{},$=U?b:_;for(const V in M)if(Object.prototype.hasOwnProperty.call(M,V)){const Y=`${$}${c}${V}`;T&&!C?G[V]=this.translate(Y,{...i,defaultValue:Wv(P)?P[V]:void 0,joinArrays:!1,ns:d}):G[V]=this.translate(Y,{...i,joinArrays:!1,ns:d}),G[V]===Y&&(G[V]=M[V])}C=G}}else if(S&&ut(j)&&Array.isArray(C))C=C.join(j),C&&(C=this.extendTranslation(C,t,i,r));else{let U=!1,G=!1;!this.isValidLookup(C)&&T&&(U=!0,C=P),this.isValidLookup(C)||(G=!0,C=l);const V=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:C,Y=T&&P!==C&&this.options.updateMissing;if(G||U||Y){if(this.logger.log(Y?"updateKey":"missingKey",f,h,l,Y?P:C),c){const I=this.resolve(l,{...i,keySeparator:!1});I&&I.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&O&&O[0])for(let I=0;I<O.length;I++)K.push(O[I]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(i.lng||this.language):K.push(i.lng||this.language);const L=(I,q,z)=>{const ee=T&&z!==C?z:V;this.options.missingKeyHandler?this.options.missingKeyHandler(I,h,q,ee,Y,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(I,h,q,ee,Y,i),this.emit("missingKey",I,h,q,C)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?K.forEach(I=>{const q=this.pluralResolver.getSuffixes(I,i);A&&i[`defaultValue${this.options.pluralSeparator}zero`]&&q.indexOf(`${this.options.pluralSeparator}zero`)<0&&q.push(`${this.options.pluralSeparator}zero`),q.forEach(z=>{L([I],l+z,i[`defaultValue${z}`]||P)})}):L(K,l,P))}C=this.extendTranslation(C,t,i,x,r),G&&C===l&&this.options.appendNamespaceToMissingKey&&(C=`${h}${m}${l}`),(G||U)&&this.options.parseMissingKeyHandler&&(C=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${l}`:l,U?C:void 0,i))}return o?(x.res=C,x.usedParams=this.getUsedParamsDetails(i),x):C}extendTranslation(t,n,r,i,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=ut(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const f=t.match(this.interpolator.nestingRegexp);h=f&&f.length}let m=r.replace&&!ut(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,r.lng||this.language||i.usedLng,r),d){const f=t.match(this.interpolator.nestingRegexp),g=f&&f.length;h<g&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>o?.[0]===f[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):this.translate(...f,n),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,l=ut(c)?[c]:c;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=RA.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,n={}){let r,i,o,c,l;return ut(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(d,n),m=h.key;i=m;let f=h.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const g=n.count!==void 0&&!ut(n.count),x=g&&!n.ordinal&&n.count===0,C=n.context!==void 0&&(ut(n.context)||typeof n.context=="number")&&n.context!=="",_=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(b=>{this.isValidLookup(r)||(l=b,!nN[`${_[0]}-${b}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(nN[`${_[0]}-${b}`]=!0,this.logger.warn(`key "${i}" for languages "${_.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(w=>{if(this.isValidLookup(r))return;c=w;const j=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(j,m,w,b,n);else{let N;g&&(N=this.pluralResolver.getSuffix(w,n.count,n));const T=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(n.ordinal&&N.indexOf(E)===0&&j.push(m+N.replace(E,this.options.pluralSeparator)),j.push(m+N),x&&j.push(m+T)),C){const D=`${m}${this.options.contextSeparator||"_"}${n.context}`;j.push(D),g&&(n.ordinal&&N.indexOf(E)===0&&j.push(D+N.replace(E,this.options.pluralSeparator)),j.push(D+N),x&&j.push(D+T))}}let S;for(;S=j.pop();)this.isValidLookup(r)||(o=S,r=this.getResource(w,b,S,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:c,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!ut(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class rN{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mi.create("languageUtils")}getScriptPartFromCode(t){if(t=Td(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Td(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(ut(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),ut(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),i=[],o=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return ut(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):ut(t)&&o(this.formatLanguageCode(t)),r.forEach(c=>{i.indexOf(c)<0&&o(this.formatLanguageCode(c))}),i}}const iN={zero:0,one:1,two:2,few:3,many:4,other:5},aN={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kB{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=mi.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const r=Td(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),aN;if(!t.match(/-|_/))return aN;const d=this.languageUtils.getLanguagePartFromCode(t);c=this.getRule(d,n)}return this.pluralRulesCache[o]=c,c}needsPlural(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n,r={}){return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>iN[i]-iN[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,n,r={}){const i=this.getRule(t,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const oN=(e,t,n,r=".",i=!0)=>{let o=vB(e,t,n);return!o&&i&&ut(n)&&(o=yb(e,n,r),o===void 0&&(o=yb(t,n,r))),o},Kv=e=>e.replace(/\$/g,"$$$$");class lN{constructor(t={}){this.logger=mi.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:c,suffix:l,suffixEscaped:d,formatSeparator:h,unescapeSuffix:m,unescapePrefix:f,nestingPrefix:g,nestingPrefixEscaped:x,nestingSuffix:C,nestingSuffixEscaped:_,nestingOptionsSeparator:b,maxReplaces:w,alwaysFormat:j}=t.interpolation;this.escape=n!==void 0?n:bB,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?sc(o):c||"{{",this.suffix=l?sc(l):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=g?sc(g):x||sc("$t("),this.nestingSuffix=C?sc(C):_||sc(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=w||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let o,c,l;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const w=oN(n,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...i,...n,interpolationkey:x}):w}const C=x.split(this.formatSeparator),_=C.shift().trim(),b=C.join(this.formatSeparator).trim();return this.format(oN(n,d,_,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...i,...n,interpolationkey:_})};this.resetRegExp();const m=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>Kv(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?Kv(this.escape(x)):Kv(x)}].forEach(x=>{for(l=0;o=x.regex.exec(t);){const C=o[1].trim();if(c=h(C),c===void 0)if(typeof m=="function"){const b=m(t,o,i);c=ut(b)?b:""}else if(i&&Object.prototype.hasOwnProperty.call(i,C))c="";else if(f){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${t}`),c="";else!ut(c)&&!this.useRawValueToEscape&&(c=QC(c));const _=x.safeValue(c);if(t=t.replace(o[0],_),f?(x.regex.lastIndex+=c.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,n,r={}){let i,o,c;const l=(d,h)=>{const m=this.nestingOptionsSeparator;if(d.indexOf(m)<0)return d;const f=d.split(new RegExp(`${m}[ ]*{`));let g=`{${f[1]}`;d=f[0],g=this.interpolate(g,c);const x=g.match(/'/g),C=g.match(/"/g);((x?.length??0)%2===0&&!C||C.length%2!==0)&&(g=g.replace(/'/g,'"'));try{c=JSON.parse(g),h&&(c={...h,...c})}catch(_){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,_),`${d}${m}${g}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;i=this.nestingRegexp.exec(t);){let d=[];c={...r},c=c.replace&&!ut(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(d=i[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),o=n(l.call(this,i[1].trim(),c),c),o&&i[0]===t&&!ut(o))return o;ut(o)||(o=QC(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),d.length&&(o=d.reduce((m,f)=>this.format(m,f,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}const EB=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(c=>{if(c){const[l,...d]=c.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),m=l.trim();n[m]||(n[m]=h),h==="false"&&(n[m]=!1),h==="true"&&(n[m]=!0),isNaN(h)||(n[m]=parseInt(h,10))}})}return{formatName:t,formatOptions:n}},cN=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const c=r+JSON.stringify(o);let l=t[c];return l||(l=e(Td(r),i),t[c]=l),l(n)}},AB=e=>(t,n,r)=>e(Td(n),r)(t);class TB{constructor(t={}){this.logger=mi.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?cN:AB;this.formats={number:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o});return l=>c.format(l)}),currency:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o,style:"currency"});return l=>c.format(l)}),datetime:r((i,o)=>{const c=new Intl.DateTimeFormat(i,{...o});return l=>c.format(l)}),relativetime:r((i,o)=>{const c=new Intl.RelativeTimeFormat(i,{...o});return l=>c.format(l,o.range||"day")}),list:r((i,o)=>{const c=new Intl.ListFormat(i,{...o});return l=>c.format(l)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=cN(n)}format(t,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,d)=>{const{formatName:h,formatOptions:m}=EB(d);if(this.formats[h]){let f=l;try{const g=i?.formatParams?.[i.interpolationkey]||{},x=g.locale||g.lng||i.locale||i.lng||r;f=this.formats[h](l,x,{...m,...i,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${h}`);return l},t)}}const DB=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class RB extends wp{constructor(t,n,r,i={}){super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=mi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(t,n,r,i){const o={},c={},l={},d={};return t.forEach(h=>{let m=!0;n.forEach(f=>{const g=`${h}|${f}`;!r.reload&&this.store.hasResourceBundle(h,f)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?c[g]===void 0&&(c[g]=!0):(this.state[g]=1,m=!1,c[g]===void 0&&(c[g]=!0),o[g]===void 0&&(o[g]=!0),d[f]===void 0&&(d[f]=!0)))}),m||(l[h]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(d)}}loaded(t,n,r){const i=t.split("|"),o=i[0],c=i[1];n&&this.emit("failedLoading",o,c,n),!n&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const l={};this.queue.forEach(d=>{xB(d.loaded,[o],c),DB(d,t),n&&d.errors.push(n),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{l[h]||(l[h]={});const m=d.loaded[h];m.length&&m.forEach(f=>{l[h][f]===void 0&&(l[h][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(d=>!d.done)}read(t,n,r,i=0,o=this.retryTimeout,c){if(!t.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:o,callback:c});return}this.readingCalls++;const l=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(h&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,o*2,c)},o);return}c(h,m)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const h=d(t,n);h&&typeof h.then=="function"?h.then(m=>l(null,m)).catch(l):l(null,h)}catch(h){l(h)}return}return d(t,n,l)}prepareLoading(t,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ut(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ut(n)&&(n=[n]);const o=this.queueLoad(t,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t,n=""){const r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(c,l)=>{c&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,c),!c&&l&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,l),this.loaded(t,c,l)})}saveMissing(t,n,r,i,o,c={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const d={...c,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(t,n,r,i,d):m=h(t,n,r,i),m&&typeof m.then=="function"?m.then(f=>l(null,f)).catch(l):l(null,m)}catch(m){l(m)}else h(t,n,r,i,l,d)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const uN=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ut(e[1])&&(t.defaultValue=e[1]),ut(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),dN=e=>(ut(e.ns)&&(e.ns=[e.ns]),ut(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ut(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Kf=()=>{},PB=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class vd extends wp{constructor(t={},n){if(super(),this.options=dN(t),this.services={},this.logger=mi,this.modules={external:[]},PB(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(ut(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=uN();this.options={...r,...this.options,...dN(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?mi.init(i(this.modules.logger),this.options):mi.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=TB;const m=new rN(this.options);this.store=new sN(this.options.resources,this.options);const f=this.services;f.logger=mi,f.resourceStore=this.store,f.languageUtils=m,f.pluralResolver=new kB(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=i(h),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new lN(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new RB(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(x,...C)=>{this.emit(x,...C)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Om(this.services,this.options),this.translator.on("*",(x,...C)=>{this.emit(x,...C)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Kf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const l=Qu(),d=()=>{const h=(m,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),n(m,f)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t,n=Kf){let r=n;const i=ut(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],c=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};i?c(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(l=>c(l)),this.services.backendConnector.load(o,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(t,n,r){const i=Qu();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Kf),this.services.backendConnector.reload(t,n,o=>{i.resolve(),r(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&RA.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const r=Qu();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,d)=>{d?this.isLanguageChangingTo===t&&(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(l,(...h)=>this.t(...h))},c=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=ut(l)?l:l&&l[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(ut(l)?[l]:l);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(t),r}getFixedT(t,n,r){const i=(o,c,...l)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(l)):d={...c},d.lng=d.lng||i.lng,d.lngs=d.lngs||i.lngs,d.ns=d.ns||i.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let m;return d.keyPrefix&&Array.isArray(o)?m=o.map(f=>(typeof f=="function"&&(f=bb(f,{...this.options,...c})),`${d.keyPrefix}${h}${f}`)):(typeof o=="function"&&(o=bb(o,{...this.options,...c})),m=d.keyPrefix?`${d.keyPrefix}${h}${o}`:o),this.t(m,d)};return ut(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=r,i}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(l,d)=>{const h=this.services.backendConnector.state[`${l}|${d}`];return h===-1||h===0||h===2};if(n.precheck){const l=n.precheck(this,c);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,t)&&(!i||c(o,t)))}loadNamespaces(t,n){const r=Qu();return this.options.ns?(ut(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Qu();ut(t)&&(t=[t]);const i=this.options.preload||[],o=t.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=i.concat(o),this.loadResources(c=>{r.resolve(),n&&n(c)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const i=new Intl.Locale(t);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new rN(uN());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){const r=new vd(t,n);return r.createInstance=vd.createInstance,r}cloneInstance(t={},n=Kf){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new vd(i);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const l=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((m,f)=>(m[f]={...d[h][f]},m),d[h]),d),{});o.store=new sN(l,i),o.services.resourceStore=o.store}return t.interpolation&&(o.services.interpolator=new lN(i)),o.translator=new Om(o.services,i),o.translator.on("*",(l,...d)=>{o.emit(l,...d)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const zn=vd.createInstance();zn.createInstance;zn.dir;zn.init;zn.loadResources;zn.reloadResources;zn.use;zn.changeLanguage;zn.getFixedT;zn.t;zn.exists;zn.setDefaultNamespace;zn.hasLoadedNamespace;zn.loadNamespaces;zn.loadLanguages;var Yv={exports:{}},ht={};var hN;function MB(){if(hN)return ht;hN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),g=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=g&&I[g]||I["@@iterator"],typeof I=="function"?I:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function w(I,q,z){this.props=I,this.context=q,this.refs=b,this.updater=z||C}w.prototype.isReactComponent={},w.prototype.setState=function(I,q){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,q,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function j(){}j.prototype=w.prototype;function S(I,q,z){this.props=I,this.context=q,this.refs=b,this.updater=z||C}var N=S.prototype=new j;N.constructor=S,_(N,w.prototype),N.isPureReactComponent=!0;var T=Array.isArray;function E(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function P(I,q,z){var ee=z.ref;return{$$typeof:e,type:I,key:q,ref:ee!==void 0?ee:null,props:z}}function M(I,q){return P(I.type,q,I.props)}function B(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function F(I){var q={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(z){return q[z]})}var U=/\/+/g;function G(I,q){return typeof I=="object"&&I!==null&&I.key!=null?F(""+I.key):q.toString(36)}function $(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(E,E):(I.status="pending",I.then(function(q){I.status==="pending"&&(I.status="fulfilled",I.value=q)},function(q){I.status==="pending"&&(I.status="rejected",I.reason=q)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function V(I,q,z,ee,ie){var re=typeof I;(re==="undefined"||re==="boolean")&&(I=null);var X=!1;if(I===null)X=!0;else switch(re){case"bigint":case"string":case"number":X=!0;break;case"object":switch(I.$$typeof){case e:case t:X=!0;break;case m:return X=I._init,V(X(I._payload),q,z,ee,ie)}}if(X)return ie=ie(I),X=ee===""?"."+G(I,0):ee,T(ie)?(z="",X!=null&&(z=X.replace(U,"$&/")+"/"),V(ie,q,z,"",function(se){return se})):ie!=null&&(B(ie)&&(ie=M(ie,z+(ie.key==null||I&&I.key===ie.key?"":(""+ie.key).replace(U,"$&/")+"/")+X)),q.push(ie)),1;X=0;var W=ee===""?".":ee+":";if(T(I))for(var Q=0;Q<I.length;Q++)ee=I[Q],re=W+G(ee,Q),X+=V(ee,q,z,re,ie);else if(Q=x(I),typeof Q=="function")for(I=Q.call(I),Q=0;!(ee=I.next()).done;)ee=ee.value,re=W+G(ee,Q++),X+=V(ee,q,z,re,ie);else if(re==="object"){if(typeof I.then=="function")return V($(I),q,z,ee,ie);throw q=String(I),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return X}function Y(I,q,z){if(I==null)return I;var ee=[],ie=0;return V(I,ee,"","",function(re){return q.call(z,re,ie++)}),ee}function K(I){if(I._status===-1){var q=I._result;q=q(),q.then(function(z){(I._status===0||I._status===-1)&&(I._status=1,I._result=z)},function(z){(I._status===0||I._status===-1)&&(I._status=2,I._result=z)}),I._status===-1&&(I._status=0,I._result=q)}if(I._status===1)return I._result.default;throw I._result}var O=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},L={map:Y,forEach:function(I,q,z){Y(I,function(){q.apply(this,arguments)},z)},count:function(I){var q=0;return Y(I,function(){q++}),q},toArray:function(I){return Y(I,function(q){return q})||[]},only:function(I){if(!B(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return ht.Activity=f,ht.Children=L,ht.Component=w,ht.Fragment=n,ht.Profiler=i,ht.PureComponent=S,ht.StrictMode=r,ht.Suspense=d,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ht.__COMPILER_RUNTIME={__proto__:null,c:function(I){return D.H.useMemoCache(I)}},ht.cache=function(I){return function(){return I.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function(I,q,z){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ee=_({},I.props),ie=I.key;if(q!=null)for(re in q.key!==void 0&&(ie=""+q.key),q)!A.call(q,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&q.ref===void 0||(ee[re]=q[re]);var re=arguments.length-2;if(re===1)ee.children=z;else if(1<re){for(var X=Array(re),W=0;W<re;W++)X[W]=arguments[W+2];ee.children=X}return P(I.type,ie,ee)},ht.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},ht.createElement=function(I,q,z){var ee,ie={},re=null;if(q!=null)for(ee in q.key!==void 0&&(re=""+q.key),q)A.call(q,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ie[ee]=q[ee]);var X=arguments.length-2;if(X===1)ie.children=z;else if(1<X){for(var W=Array(X),Q=0;Q<X;Q++)W[Q]=arguments[Q+2];ie.children=W}if(I&&I.defaultProps)for(ee in X=I.defaultProps,X)ie[ee]===void 0&&(ie[ee]=X[ee]);return P(I,re,ie)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(I){return{$$typeof:l,render:I}},ht.isValidElement=B,ht.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:K}},ht.memo=function(I,q){return{$$typeof:h,type:I,compare:q===void 0?null:q}},ht.startTransition=function(I){var q=D.T,z={};D.T=z;try{var ee=I(),ie=D.S;ie!==null&&ie(z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(E,O)}catch(re){O(re)}finally{q!==null&&z.types!==null&&(q.types=z.types),D.T=q}},ht.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ht.use=function(I){return D.H.use(I)},ht.useActionState=function(I,q,z){return D.H.useActionState(I,q,z)},ht.useCallback=function(I,q){return D.H.useCallback(I,q)},ht.useContext=function(I){return D.H.useContext(I)},ht.useDebugValue=function(){},ht.useDeferredValue=function(I,q){return D.H.useDeferredValue(I,q)},ht.useEffect=function(I,q){return D.H.useEffect(I,q)},ht.useEffectEvent=function(I){return D.H.useEffectEvent(I)},ht.useId=function(){return D.H.useId()},ht.useImperativeHandle=function(I,q,z){return D.H.useImperativeHandle(I,q,z)},ht.useInsertionEffect=function(I,q){return D.H.useInsertionEffect(I,q)},ht.useLayoutEffect=function(I,q){return D.H.useLayoutEffect(I,q)},ht.useMemo=function(I,q){return D.H.useMemo(I,q)},ht.useOptimistic=function(I,q){return D.H.useOptimistic(I,q)},ht.useReducer=function(I,q,z){return D.H.useReducer(I,q,z)},ht.useRef=function(I){return D.H.useRef(I)},ht.useState=function(I){return D.H.useState(I)},ht.useSyncExternalStore=function(I,q,z){return D.H.useSyncExternalStore(I,q,z)},ht.useTransition=function(){return D.H.useTransition()},ht.version="19.2.3",ht}var fN;function Sp(){return fN||(fN=1,Yv.exports=MB()),Yv.exports}var y=Sp();const Lt=nh(y),jp=hB({__proto__:null,default:Lt},[y]),LB=(e,t,n,r)=>{const i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);Qo(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},mN={},MA=(e,t,n,r)=>{Qo(n)&&mN[n]||(Qo(n)&&(mN[n]=new Date),LB(e,t,n,r))},LA=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},wb=(e,t,n)=>{e.loadNamespaces(t,LA(e,n))},pN=(e,t,n,r)=>{if(Qo(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return wb(e,n,r);n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,LA(e,r))},IB=(e,t,n={})=>!t.languages||!t.languages.length?(MA(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),Qo=e=>typeof e=="string",OB=e=>typeof e=="object"&&e!==null,BB=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,zB={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},FB=e=>zB[e],HB=e=>e.replace(BB,FB);let Sb={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:HB,transDefaultProps:void 0};const UB=(e={})=>{Sb={...Sb,...e}},$B=()=>Sb;let IA;const VB=e=>{IA=e},GB=()=>IA,qB={type:"3rdParty",init(e){UB(e.options.react),VB(e)}},WB=y.createContext();class KB{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Xv={exports:{}},Zv={};var gN;function YB(){if(gN)return Zv;gN=1;var e=Sp();function t(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,c=e.useDebugValue;function l(f,g){var x=g(),C=r({inst:{value:x,getSnapshot:g}}),_=C[0].inst,b=C[1];return o(function(){_.value=x,_.getSnapshot=g,d(_)&&b({inst:_})},[f,x,g]),i(function(){return d(_)&&b({inst:_}),f(function(){d(_)&&b({inst:_})})},[f]),c(x),x}function d(f){var g=f.getSnapshot;f=f.value;try{var x=g();return!n(f,x)}catch{return!0}}function h(f,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Zv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Zv}var xN;function XB(){return xN||(xN=1,Xv.exports=YB()),Xv.exports}var ZB=XB();const QB=(e,t)=>Qo(t)?t:OB(t)&&Qo(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,JB={t:QB,ready:!1},ez=()=>()=>{},rs=(e,t={})=>{const{i18n:n}=t,{i18n:r,defaultNS:i}=y.useContext(WB)||{},o=n||r||GB();o&&!o.reportNamespaces&&(o.reportNamespaces=new KB),o||MA(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=y.useMemo(()=>({...$B(),...o?.options?.react,...t}),[o,t]),{useSuspense:l,keyPrefix:d}=c,h=e||i||o?.options?.defaultNS,m=Qo(h)?[h]:h||["translation"],f=y.useMemo(()=>m,m);o?.reportNamespaces?.addUsedNamespaces?.(f);const g=y.useRef(0),x=y.useCallback(P=>{if(!o)return ez;const{bindI18n:M,bindI18nStore:B}=c,F=()=>{g.current+=1,P()};return M&&o.on(M,F),B&&o.store.on(B,F),()=>{M&&M.split(" ").forEach(U=>o.off(U,F)),B&&B.split(" ").forEach(U=>o.store.off(U,F))}},[o,c]),C=y.useRef(),_=y.useCallback(()=>{if(!o)return JB;const P=!!(o.isInitialized||o.initializedStoreOnce)&&f.every($=>IB($,o,c)),M=t.lng||o.language,B=g.current,F=C.current;if(F&&F.ready===P&&F.lng===M&&F.keyPrefix===d&&F.revision===B)return F;const G={t:o.getFixedT(M,c.nsMode==="fallback"?f:f[0],d),ready:P,lng:M,keyPrefix:d,revision:B};return C.current=G,G},[o,f,d,c,t.lng]),[b,w]=y.useState(0),{t:j,ready:S}=ZB.useSyncExternalStore(x,_,_);y.useEffect(()=>{if(o&&!S&&!l){const P=()=>w(M=>M+1);t.lng?pN(o,t.lng,f,P):wb(o,f,P)}},[o,t.lng,f,S,l,b]);const N=o||{},T=y.useRef(null),E=y.useRef(),D=P=>{const M=Object.getOwnPropertyDescriptors(P);M.__original&&delete M.__original;const B=Object.create(Object.getPrototypeOf(P),M);if(!Object.prototype.hasOwnProperty.call(B,"__original"))try{Object.defineProperty(B,"__original",{value:P,writable:!1,enumerable:!1,configurable:!1})}catch{}return B},A=y.useMemo(()=>{const P=N,M=P?.language;let B=P;P&&(T.current&&T.current.__original===P?E.current!==M?(B=D(P),T.current=B,E.current=M):B=T.current:(B=D(P),T.current=B,E.current=M));const F=[j,B,S];return F.t=j,F.i18n=B,F.ready=S,F},[j,N,S,N.resolvedLanguage,N.language,N.languages]);if(o&&l&&!S)throw new Promise(P=>{const M=()=>P();t.lng?pN(o,t.lng,f,M):wb(o,f,M)});return A},tz={save:"Save",cancel:"Cancel",skip:"Skip",next:"Next",back:"Back",close:"Close",initialize:"Initialize",delete:"Delete",confirm:"Confirm",retry:"Retry",create:"Create",open:"Open",start:"Start",stop:"Stop",refresh:"Refresh",merge:"Merge",discard:"Discard",switch:"Switch",add:"Add",gotIt:"Got it",continue:"Continue",saving:"Saving..."},sz={loading:"Loading...",error:"Error",success:"Success",initializing:"Initializing...",saving:"Saving...",noData:"No data",optional:"Optional",required:"Required",dismiss:"Dismiss"},nz={justNow:"Just now",minutesAgo:"{{count}}m ago",hoursAgo:"{{count}}h ago",daysAgo:"{{count}}d ago"},rz={generic:"An error occurred",networkError:"Network error",notFound:"Not found",unauthorized:"Unauthorized"},iz={accountSwitched:"Account Switched",swapFrom:"Switched from",swapTo:"to",swapReason:"({{reason}} swap)"},az={title:"Rate Limited",resetsAt:"Resets {{time}}",hitLimit:"{{source}} hit usage limit",clickToManage:"Click to manage ",modalTitle:"Claude Code Usage Limit Reached",modalDescription:"You've reached your Claude Code usage limit for this period.",profile:"Profile: {{name}}",autoSwitching:"Auto-switching to {{name}}",autoSwitchingDescription:"Claude will restart with your other account automatically",resetsTime:"Resets {{time}}",usageRestored:"Your usage will be restored at this time",switchAccount:"Switch Claude Account",useAnotherAccount:"Use Another Account",recommended:"Recommended: {{name}} has more capacity available.",otherSubscriptions:"You have other Claude subscriptions configured. Switch to continue working:",selectAccount:"Select account...",switching:"Switching...",addNewAccount:"Add new account...",addAnotherSubscription:"Add another Claude subscription to automatically switch when you hit rate limits.",addAnotherAccount:"Add another account:",connectAccount:"Connect a Claude account:",accountNamePlaceholder:"Account name (e.g., Work, Personal)",willOpenLogin:"This will open Claude login to authenticate the new account.",autoSwitchOnRateLimit:"Auto-switch on rate limit",upgradeTitle:"Upgrade for more usage",upgradeDescription:"Upgrade your Claude subscription for higher usage limits.",upgradeSubscription:"Upgrade Subscription",sources:{changelog:"Changelog",task:"Task",roadmap:"Roadmap",ideation:"Ideation",titleGenerator:"Title Generator",claude:"Claude"}},oz={buttons:tz,labels:sz,time:nz,errors:rz,notification:iz,rateLimit:az},lz={project:"Project",tools:"Tools"},cz={kanban:"Kanban Board",terminals:"Agent Terminals",insights:"Insights",roadmap:"Roadmap",ideation:"Ideation",changelog:"Changelog",context:"Context",githubIssues:"GitHub Issues",gitlabIssues:"GitLab Issues",worktrees:"Worktrees"},uz={settings:"Settings",help:"Help & Feedback",newTask:"New Task"},dz={settings:"Application Settings",help:"Help & Feedback"},hz={initializeToCreateTasks:"Initialize Auto Claude to create tasks"},fz={sections:lz,items:cz,actions:uz,tooltips:dz,messages:hz},mz="Settings",pz={app:"App Settings",project:"Project Settings"},gz={appearance:{title:"Appearance",description:"Customize how Auto Claude looks"},display:{title:"Display",description:"Adjust the size of UI elements"},language:{title:"Language",description:"Choose your preferred language"},agent:{title:"Agent Settings",description:"Default model and framework"},paths:{title:"Paths",description:"Python and framework paths"},integrations:{title:"Integrations",description:"API keys & Claude accounts"},updates:{title:"Updates",description:"Auto Claude updates"},notifications:{title:"Notifications",description:"Alert preferences"}},xz={label:"Interface Language",description:"Select the language for the application interface"},vz={presets:"Scale Presets",presetsDescription:"Quick scale options for common preferences",fineTune:"Fine-tune Scale",fineTuneDescription:"Adjust from 75% to 200% in 5% increments",default:"Default",comfortable:"Comfortable",large:"Large",preview:"Changes preview immediately. Click Save Settings to persist."},yz={otherAgentSettings:"Other Agent Settings",otherAgentSettingsDescription:"Additional agent configuration options",agentFramework:"Agent Framework",agentFrameworkDescription:"The coding framework used for autonomous tasks",agentFrameworkAutoClaude:"Auto Claude",aiTerminalNaming:"AI Terminal Naming",aiTerminalNamingDescription:"Automatically name terminals based on commands (uses Haiku)",featureModelSettings:"Feature Model Settings",featureModelSettingsDescription:"Model and thinking level for Insights, Ideation, and Roadmap",model:"Model",thinkingLevel:"Thinking Level",paths:"Paths",pathsDescription:"Configure executable and framework paths",pythonPath:"Python Path",pythonPathDescription:"Path to Python executable (leave empty for default)",pythonPathPlaceholder:"python3 (default)",autoClaudePath:"Auto Claude Path",autoClaudePathDescription:"Relative path to auto-claude directory in projects",autoClaudePathPlaceholder:"auto-claude (default)",autoNameTerminals:"Automatically name terminals",autoNameTerminalsDescription:"Use AI to generate descriptive names for terminal tabs based on their activity"},bz={title:"Appearance",description:"Customize how Auto Claude looks",mode:"Mode",modeDescription:"Choose between light and dark themes",light:"Light",dark:"Dark",system:"System",colorTheme:"Color Theme",colorThemeDescription:"Choose your preferred color palette"},wz={title:"Updates",description:"Manage Auto Claude updates",appUpdateReady:"App Update Ready",newVersion:"New Version",released:"Released",downloading:"Downloading...",updateDownloaded:"Update downloaded! Click Install to restart and apply the update.",installAndRestart:"Install and Restart",downloadUpdate:"Download Update",version:"Version",loading:"Loading...",checkingForUpdates:"Checking for updates...",newVersionAvailable:"New version available:",latestVersion:"You're running the latest version.",viewRelease:"View full release on GitHub",unableToCheck:"Unable to check for updates",checkForUpdates:"Check for Updates",autoUpdateProjects:"Auto-Update Projects",autoUpdateProjectsDescription:"Automatically update Auto Claude in projects when a new version is available",betaUpdates:"Beta Updates",betaUpdatesDescription:"Receive pre-release beta versions with new features (may be less stable)"},Sz={title:"Notifications",description:"Configure default notification preferences",onTaskComplete:"On Task Complete",onTaskCompleteDescription:"Notify when a task finishes successfully",onTaskFailed:"On Task Failed",onTaskFailedDescription:"Notify when a task encounters an error",onReviewNeeded:"On Review Needed",onReviewNeededDescription:"Notify when QA requires your review",sound:"Sound",soundDescription:"Play sound with notifications"},jz={save:"Save Settings",rerunWizard:"Re-run Wizard",rerunWizardDescription:"Start the setup wizard again"},_z={general:{title:"General",description:"Auto-Build and agent config"},claude:{title:"Claude Auth",description:"Claude authentication"},linear:{title:"Linear",description:"Linear integration"},github:{title:"GitHub",description:"GitHub issues sync"},memory:{title:"Memory",description:"Graphiti memory backend"}},Cz={label:"Agent Profile",title:"Default Agent Profile",sectionDescription:"Select a preset configuration for model and thinking level",profilesInfo:"Agent profiles provide preset configurations for Claude model and thinking level. When you create a new task, these settings will be used as defaults. You can always override them in the task creation wizard.",custom:"Custom",customConfiguration:"Custom Configuration",customDescription:"Choose model & thinking level",phaseConfiguration:"Phase Configuration",phaseConfigurationDescription:"Customize model and thinking level for each phase",clickToCustomize:"Click to customize",model:"Model",thinking:"Thinking",thinkingLevel:"Thinking Level",selectModel:"Select model",selectThinkingLevel:"Select thinking level",perPhaseOptimization:"(per-phase optimization)",resetToDefaults:"Reset to defaults",phaseConfigNote:"These settings will be used as defaults when creating new tasks with the Auto profile. You can override them per-task in the task creation wizard.",phases:{spec:{label:"Spec Creation",description:"Discovery, requirements, context gathering"},planning:{label:"Planning",description:"Implementation planning and architecture"},coding:{label:"Coding",description:"Actual code implementation"},qa:{label:"QA Review",description:"Quality assurance and validation"}}},Nz={roles:{backend:"Backend",frontend:"Frontend",mobile:"Mobile",shared:"Shared",apiGateway:"API Gateway",worker:"Worker",other:"Other"}},kz={title:"Integrations",description:"Manage Claude accounts and API keys",claudeAccounts:"Claude Accounts",claudeAccountsDescription:"Add multiple Claude subscriptions to automatically switch between them when you hit rate limits.",noAccountsYet:"No accounts configured yet",default:"Default",active:"Active",authenticated:"Authenticated",needsAuth:"Needs Auth",authenticate:"Authenticate",setActive:"Set Active",manualTokenEntry:"Manual Token Entry",runSetupToken:"Run claude setup-token to get your token",tokenPlaceholder:"sk-ant-oat01-...",emailPlaceholder:"Email (optional, for display)",saveToken:"Save Token",accountNamePlaceholder:"Account name (e.g., Work, Personal)",autoSwitching:"Automatic Account Switching",autoSwitchingDescription:"Automatically switch between Claude accounts to avoid interruptions. Configure proactive monitoring to switch before hitting limits.",enableAutoSwitching:"Enable automatic switching",masterSwitch:"Master switch for all auto-swap features",proactiveMonitoring:"Proactive Monitoring",proactiveDescription:"Check usage regularly and swap before hitting limits",checkUsageEvery:"Check usage every",seconds15:"15 seconds",seconds30:"30 seconds (recommended)",minute1:"1 minute",disabled:"Disabled",sessionThreshold:"Session usage threshold",sessionThresholdDescription:"Switch when session usage reaches this level (recommended: 95%)",weeklyThreshold:"Weekly usage threshold",weeklyThresholdDescription:"Switch when weekly usage reaches this level (recommended: 99%)",reactiveRecovery:"Reactive Recovery",reactiveDescription:"Auto-swap when unexpected rate limit is hit",apiKeys:"API Keys",apiKeysInfo:"Keys set here are used as defaults. Individual projects can override these in their settings.",openaiKey:"OpenAI API Key",openaiKeyDescription:"Required for Graphiti memory backend (embeddings)"},Ez={title:mz,tabs:pz,sections:gz,language:xz,scale:vz,general:yz,theme:bz,updates:wz,notifications:Sz,actions:jz,projectSections:_z,agentProfile:Cz,workspace:Nz,integrations:kz},Az={backlog:"Backlog",todo:"To Do",in_progress:"In Progress",review:"Review",complete:"Complete",archived:"Archived"},Tz={start:"Start",stop:"Stop",recover:"Recover",resume:"Resume",archive:"Archive",delete:"Delete",view:"View Details"},Dz={running:"Running",aiReview:"AI Review",needsReview:"Needs Review",pending:"Pending",stuck:"Stuck",incomplete:"Incomplete",recovering:"Recovering...",needsRecovery:"Needs Recovery",needsResume:"Needs Resume"},Rz={completed:"Completed",hasErrors:"Has Errors",qaIssues:"QA Issues",approvePlan:"Approve Plan"},Pz={archiveTask:"Archive task",archiveAllDone:"Archive all done tasks"},Mz={title:"Create New Task",description:"Describe what you want to build",placeholder:"Describe your task..."},Lz={title:"No tasks yet",description:"Create your first task to get started"},Iz={emptyBacklog:"No tasks planned",emptyBacklogHint:"Add a task to get started",emptyInProgress:"Nothing running",emptyInProgressHint:"Start a task from Backlog",emptyAiReview:"No tasks in review",emptyAiReviewHint:"AI will review completed tasks",emptyHumanReview:"Nothing to review",emptyHumanReviewHint:"Tasks await your approval here",emptyDone:"No completed tasks",emptyDoneHint:"Approved tasks appear here",emptyDefault:"No tasks",dropHere:"Drop here",showArchived:"Show archived"},Oz={phases:{idle:"Idle",planning:"Planning",coding:"Coding",reviewing:"Reviewing",fixing:"Fixing",complete:"Complete",failed:"Failed"},labels:{interrupted:"Interrupted",progress:"Progress",entry:"entry",entries:"entries"},shortPhases:{plan:"Plan",code:"Code",qa:"QA"}},Bz={status:Az,actions:Tz,labels:Dz,reviewReason:Rz,tooltips:Pz,creation:Mz,empty:Lz,kanban:Iz,execution:Oz},zz={title:"Welcome to Auto Claude",subtitle:"Build software autonomously with AI-powered agents"},Fz={newProject:"New Project",openProject:"Open Project"},Hz={title:"Recent Projects",empty:"No projects yet",emptyDescription:"Create a new project or open an existing one to get started",openFolder:"Open Folder"},Uz={hero:zz,actions:Fz,recentProjects:Hz},$z={title:"Setup Wizard",description:"Configure your Auto Claude environment in a few simple steps",helpText:"This wizard will help you set up your environment in just a few steps. You can configure your Claude OAuth token, set up memory features, and create your first task."},Vz={title:"Welcome to Auto Claude",subtitle:"Build software autonomously with AI-powered agents",getStarted:"Get Started",skip:"Skip Setup",features:{aiPowered:{title:"AI-Powered Development",description:"Generate code and build features using Claude Code agents"},specDriven:{title:"Spec-Driven Workflow",description:"Define tasks with clear specifications and let Auto Claude handle the implementation"},memory:{title:"Memory & Context",description:"Persistent memory across sessions with Graphiti"},parallel:{title:"Parallel Execution",description:"Run multiple agents in parallel for faster development cycles"}}},Gz={title:"Claude Authentication",description:"Connect your Claude account to enable AI features"},qz={title:"Memory",description:"Auto Claude Memory helps remember context across your coding sessions"},Wz={title:"You're All Set!",subtitle:"Auto Claude is ready to help you build amazing software",setupComplete:"Setup Complete",setupCompleteDescription:"Your environment is configured and ready. You can start creating tasks immediately or explore the application at your own pace.",whatsNext:"What's Next?",createTask:{title:"Create a Task",description:"Start by creating your first task to see Auto Claude in action.",action:"Open Task Creator"},customizeSettings:{title:"Customize Settings",description:"Fine-tune your preferences, configure integrations, or re-run this wizard.",action:"Open Settings"},exploreDocs:{title:"Explore Documentation",description:"Learn more about advanced features, best practices, and troubleshooting."},finish:"Finish & Start Building",rerunHint:"You can always re-run this wizard from Settings  Application"},Kz={welcome:"Welcome",auth:"Auth",memory:"Memory",done:"Done"},Yz={wizard:$z,welcome:Vz,oauth:Gz,memory:qz,completion:Wz,steps:Kz},Xz={title:"Initialize Auto Claude",description:"This project doesn't have Auto Claude initialized. Would you like to set it up now?",willDo:"This will:",createFolder:"Create a .auto-claude folder in your project",copyFramework:"Copy the Auto Claude framework files",setupSpecs:"Set up the specs directory for your tasks",sourcePathNotConfigured:"Source path not configured",sourcePathNotConfiguredDescription:"Please set the Auto Claude source path in App Settings before initializing.",initFailed:"Initialization Failed",initFailedDescription:"Failed to initialize Auto Claude. Please try again."},Zz={title:"Git Repository Required",description:"Auto Claude uses git to safely build features in isolated workspaces",notGitRepo:"This folder is not a git repository",noCommits:"Git repository has no commits",needsInit:"Git needs to be initialized before Auto Claude can manage your code.",needsCommit:"At least one commit is required for Auto Claude to create worktrees.",willSetup:"We'll set up git for you:",initRepo:"Initialize a new git repository",createCommit:"Create an initial commit with your current files",manual:"Prefer to do it manually?",settingUp:"Setting up Git",initializingRepo:"Initializing git repository and creating initial commit...",success:"Git Initialized",readyToUse:"Your project is now ready to use with Auto Claude!"},Qz={connectTitle:"Connect to GitHub",connectDescription:"Auto Claude requires GitHub to manage your code branches and keep tasks up to date.",claudeTitle:"Connect to Claude AI",claudeDescription:"Auto Claude uses Claude AI for intelligent features like Roadmap generation, Task automation, and Ideation.",selectRepo:"Select Repository",repoDescription:"Auto Claude will use this repository for managing task branches and keeping your code up to date.",selectBranch:"Select Base Branch",branchDescription:"Choose which branch Auto Claude should use as the base for creating task branches.",whyBranch:"Why select a branch?",branchExplanation:"Auto Claude creates isolated workspaces for each task. Selecting the right base branch ensures your tasks start with the latest code from your main development line.",ready:"Auto Claude is ready to use! You can now create tasks that will be automatically based on the {{branchName}} branch."},Jz={title:"Worktrees",description:"Manage isolated workspaces for your Auto Claude tasks",empty:"No Worktrees",emptyDescription:"Worktrees are created automatically when Auto Claude builds features. They provide isolated workspaces for each task.",merge:"Merge Worktree",mergeDescription:"Merge changes from this worktree into the base branch.",delete:"Delete Worktree?",deleteDescription:"This will permanently delete the worktree and all uncommitted changes. This action cannot be undone."},e6={title:"Auto Claude",projectInitialized:"Project is initialized."},t6={title:"Add Feature",description:"Add a new feature to your roadmap. Provide details about what you want to build and how it fits into your product strategy.",featureTitle:"Feature Title",featureTitlePlaceholder:"e.g., User Authentication, Dark Mode Support",featureDescription:"Description",featureDescriptionPlaceholder:"Describe what this feature does and why it's valuable to users.",rationale:"Rationale",optional:"optional",rationalePlaceholder:"Explain why this feature should be built and how it fits the product vision.",phase:"Phase",selectPhase:"Select phase",priority:"Priority",selectPriority:"Select priority",complexity:"Complexity",selectComplexity:"Select complexity",impact:"Impact",selectImpact:"Select impact",lowComplexity:"Low",mediumComplexity:"Medium",highComplexity:"High",lowImpact:"Low Impact",mediumImpact:"Medium Impact",highImpact:"High Impact",titleRequired:"Title is required",descriptionRequired:"Description is required",phaseRequired:"Please select a phase",cancel:"Cancel",adding:"Adding...",addFeature:"Add Feature",failedToAdd:"Failed to add feature. Please try again."},s6={title:"Add Project",description:"Choose how you'd like to add a project",openExisting:"Open Existing Folder",openExistingDescription:"Browse to an existing project on your computer",createNew:"Create New Project",createNewDescription:"Start fresh with a new project folder",createNewTitle:"Create New Project",createNewSubtitle:"Set up a new project folder",projectName:"Project Name",projectNamePlaceholder:"my-awesome-project",projectNameHelp:"This will be the folder name. Use lowercase with hyphens.",location:"Location",locationPlaceholder:"Select a folder...",willCreate:"Will create:",browse:"Browse",initGit:"Initialize git repository",back:"Back",creating:"Creating...",createProject:"Create Project",nameRequired:"Please enter a project name",locationRequired:"Please select a location",failedToOpen:"Failed to open project",failedToCreate:"Failed to create project"},n6={title:"Custom Model Configuration",description:"Configure the model and thinking level for this chat session.",model:"Model",thinkingLevel:"Thinking Level",cancel:"Cancel",apply:"Apply"},r6={initialize:Xz,gitSetup:Zz,githubSetup:Qz,worktrees:Jz,update:e6,addFeature:t6,addProject:s6,customModel:n6},i6={save:"Enregistrer",cancel:"Annuler",skip:"Passer",next:"Suivant",back:"Retour",close:"Fermer",initialize:"Initialiser",delete:"Supprimer",confirm:"Confirmer",retry:"Ressayer",create:"Crer",open:"Ouvrir",start:"Dmarrer",stop:"Arrter",refresh:"Actualiser",merge:"Fusionner",discard:"Abandonner",switch:"Changer",add:"Ajouter",gotIt:"Compris",continue:"Continuer",saving:"Enregistrement..."},a6={loading:"Chargement...",error:"Erreur",success:"Succs",initializing:"Initialisation...",saving:"Enregistrement...",noData:"Aucune donne",optional:"Optionnel",required:"Requis",dismiss:"Ignorer"},o6={justNow:" l'instant",minutesAgo:"Il y a {{count}} min",hoursAgo:"Il y a {{count}}h",daysAgo:"Il y a {{count}}j"},l6={generic:"Une erreur s'est produite",networkError:"Erreur rseau",notFound:"Non trouv",unauthorized:"Non autoris"},c6={accountSwitched:"Compte chang",swapFrom:"Passage de",swapTo:"",swapReason:"(changement {{reason}})"},u6={title:"Limite atteinte",resetsAt:"Rinitialisation {{time}}",hitLimit:"{{source}} a atteint la limite d'utilisation",clickToManage:"Cliquez pour grer ",modalTitle:"Limite d'utilisation Claude Code atteinte",modalDescription:"Vous avez atteint votre limite d'utilisation Claude Code pour cette priode.",profile:"Profil : {{name}}",autoSwitching:"Changement automatique vers {{name}}",autoSwitchingDescription:"Claude va redmarrer avec votre autre compte automatiquement",resetsTime:"Rinitialisation {{time}}",usageRestored:"Votre utilisation sera restaure  ce moment",switchAccount:"Changer de compte Claude",useAnotherAccount:"Utiliser un autre compte",recommended:"Recommand : {{name}} a plus de capacit disponible.",otherSubscriptions:"Vous avez d'autres abonnements Claude configurs. Changez pour continuer  travailler :",selectAccount:"Slectionner un compte...",switching:"Changement...",addNewAccount:"Ajouter un nouveau compte...",addAnotherSubscription:"Ajoutez un autre abonnement Claude pour basculer automatiquement quand vous atteignez les limites.",addAnotherAccount:"Ajouter un autre compte :",connectAccount:"Connecter un compte Claude :",accountNamePlaceholder:"Nom du compte (ex. Travail, Personnel)",willOpenLogin:"Cela ouvrira la connexion Claude pour authentifier le nouveau compte.",autoSwitchOnRateLimit:"Changement auto en cas de limite",upgradeTitle:"Passez  la version suprieure pour plus d'utilisation",upgradeDescription:"Mettez  niveau votre abonnement Claude pour des limites d'utilisation plus leves.",upgradeSubscription:"Mettre  niveau l'abonnement",sources:{changelog:"Changelog",task:"Tche",roadmap:"Feuille de route",ideation:"Idation",titleGenerator:"Gnrateur de titre",claude:"Claude"}},d6={buttons:i6,labels:a6,time:o6,errors:l6,notification:c6,rateLimit:u6},h6={project:"Projet",tools:"Outils"},f6={kanban:"Tableau Kanban",terminals:"Terminaux Agent",insights:"Insights",roadmap:"Feuille de route",ideation:"Idation",changelog:"Journal des modifications",context:"Contexte",githubIssues:"Issues GitHub",gitlabIssues:"Issues GitLab",worktrees:"Worktrees"},m6={settings:"Paramtres",help:"Aide & Feedback",newTask:"Nouvelle tche"},p6={settings:"Paramtres de l'application",help:"Aide & Feedback"},g6={initializeToCreateTasks:"Initialisez Auto Claude pour crer des tches"},x6={sections:h6,items:f6,actions:m6,tooltips:p6,messages:g6},v6="Paramtres",y6={app:"Paramtres de l'app",project:"Paramtres du projet"},b6={appearance:{title:"Apparence",description:"Personnalisez l'apparence de Auto Claude"},display:{title:"Affichage",description:"Ajustez la taille des lments de l'interface"},language:{title:"Langue",description:"Choisissez votre langue prfre"},agent:{title:"Paramtres de l'agent",description:"Modle par dfaut et framework"},paths:{title:"Chemins",description:"Chemins Python et framework"},integrations:{title:"Intgrations",description:"Cls API & comptes Claude"},updates:{title:"Mises  jour",description:"Mises  jour Auto Claude"},notifications:{title:"Notifications",description:"Prfrences d'alertes"}},w6={label:"Langue de l'interface",description:"Slectionnez la langue de l'interface de l'application"},S6={presets:"Prrglages d'chelle",presetsDescription:"Options d'chelle rapides pour les prfrences courantes",fineTune:"Ajustement fin",fineTuneDescription:"Ajustez de 75%  200% par incrments de 5%",default:"Par dfaut",comfortable:"Confortable",large:"Grand",preview:"Les changements sont prvisualiss immdiatement. Cliquez sur Enregistrer pour les conserver."},j6={otherAgentSettings:"Autres paramtres de l'agent",otherAgentSettingsDescription:"Options de configuration supplmentaires de l'agent",agentFramework:"Framework de l'agent",agentFrameworkDescription:"Le framework de codage utilis pour les tches autonomes",agentFrameworkAutoClaude:"Auto Claude",aiTerminalNaming:"Nommage IA des terminaux",aiTerminalNamingDescription:"Nommer automatiquement les terminaux en fonction des commandes (utilise Haiku)",featureModelSettings:"Paramtres du modle de fonctionnalit",featureModelSettingsDescription:"Modle et niveau de rflexion pour Insights, Idation et Roadmap",model:"Modle",thinkingLevel:"Niveau de rflexion",paths:"Chemins",pathsDescription:"Configurer les chemins des excutables et du framework",pythonPath:"Chemin Python",pythonPathDescription:"Chemin vers l'excutable Python (laisser vide pour la valeur par dfaut)",pythonPathPlaceholder:"python3 (par dfaut)",autoClaudePath:"Chemin Auto Claude",autoClaudePathDescription:"Chemin relatif vers le rpertoire auto-claude dans les projets",autoClaudePathPlaceholder:"auto-claude (par dfaut)",autoNameTerminals:"Nommer automatiquement les terminaux",autoNameTerminalsDescription:"Utiliser l'IA pour gnrer des noms descriptifs pour les onglets de terminal en fonction de leur activit"},_6={title:"Apparence",description:"Personnalisez l'apparence de Auto Claude",mode:"Mode",modeDescription:"Choisir entre les thmes clair et sombre",light:"Clair",dark:"Sombre",system:"Systme",colorTheme:"Thme de couleur",colorThemeDescription:"Choisissez votre palette de couleurs prfre"},C6={title:"Mises  jour",description:"Grer les mises  jour de Auto Claude",appUpdateReady:"Mise  jour de l'app prte",newVersion:"Nouvelle version",released:"Publie le",downloading:"Tlchargement...",updateDownloaded:"Mise  jour tlcharge ! Cliquez sur Installer pour redmarrer et appliquer la mise  jour.",installAndRestart:"Installer et redmarrer",downloadUpdate:"Tlcharger la mise  jour",version:"Version",loading:"Chargement...",checkingForUpdates:"Vrification des mises  jour...",newVersionAvailable:"Nouvelle version disponible :",latestVersion:"Vous utilisez la dernire version.",viewRelease:"Voir la version complte sur GitHub",unableToCheck:"Impossible de vrifier les mises  jour",checkForUpdates:"Vrifier les mises  jour",autoUpdateProjects:"Mise  jour automatique des projets",autoUpdateProjectsDescription:"Mettre  jour automatiquement Auto Claude dans les projets quand une nouvelle version est disponible",betaUpdates:"Mises  jour bta",betaUpdatesDescription:"Recevoir les versions bta pr-release avec de nouvelles fonctionnalits (peut tre moins stable)"},N6={title:"Notifications",description:"Configurer les prfrences de notification par dfaut",onTaskComplete:" la fin d'une tche",onTaskCompleteDescription:"Notifier quand une tche se termine avec succs",onTaskFailed:"En cas d'chec",onTaskFailedDescription:"Notifier quand une tche rencontre une erreur",onReviewNeeded:"Rvision requise",onReviewNeededDescription:"Notifier quand le QA ncessite votre rvision",sound:"Son",soundDescription:"Jouer un son avec les notifications"},k6={save:"Enregistrer les paramtres",rerunWizard:"Relancer l'assistant",rerunWizardDescription:"Redmarrer l'assistant de configuration"},E6={general:{title:"Gnral",description:"Auto-Build et configuration de l'agent"},claude:{title:"Auth Claude",description:"Authentification Claude"},linear:{title:"Linear",description:"Intgration Linear"},github:{title:"GitHub",description:"Synchronisation issues GitHub"},memory:{title:"Mmoire",description:"Backend mmoire Graphiti"}},A6={label:"Profil d'agent",title:"Profil d'agent par dfaut",sectionDescription:"Slectionnez une configuration prdfinie pour le modle et le niveau de rflexion",profilesInfo:"Les profils d'agent fournissent des configurations prdfinies pour le modle Claude et le niveau de rflexion. Quand vous crez une nouvelle tche, ces paramtres seront utiliss par dfaut. Vous pouvez toujours les modifier dans l'assistant de cration de tche.",custom:"Personnalis",customConfiguration:"Configuration personnalise",customDescription:"Choisir le modle et le niveau de rflexion",phaseConfiguration:"Configuration par phase",phaseConfigurationDescription:"Personnaliser le modle et le niveau de rflexion pour chaque phase",clickToCustomize:"Cliquer pour personnaliser",model:"Modle",thinking:"Rflexion",thinkingLevel:"Niveau de rflexion",selectModel:"Slectionner un modle",selectThinkingLevel:"Slectionner un niveau de rflexion",perPhaseOptimization:"(optimisation par phase)",resetToDefaults:"Rinitialiser par dfaut",phaseConfigNote:"Ces paramtres seront utiliss par dfaut lors de la cration de nouvelles tches avec le profil Auto. Vous pouvez les modifier par tche dans l'assistant de cration.",phases:{spec:{label:"Cration de spec",description:"Dcouverte, exigences, collecte de contexte"},planning:{label:"Planification",description:"Planification de l'implmentation et architecture"},coding:{label:"Codage",description:"Implmentation du code"},qa:{label:"Rvision QA",description:"Assurance qualit et validation"}}},T6={roles:{backend:"Backend",frontend:"Frontend",mobile:"Mobile",shared:"Partag",apiGateway:"Passerelle API",worker:"Worker",other:"Autre"}},D6={title:"Intgrations",description:"Grer les comptes Claude et les cls API",claudeAccounts:"Comptes Claude",claudeAccountsDescription:"Ajoutez plusieurs abonnements Claude pour basculer automatiquement entre eux quand vous atteignez les limites.",noAccountsYet:"Aucun compte configur",default:"Par dfaut",active:"Actif",authenticated:"Authentifi",needsAuth:"Auth requise",authenticate:"Authentifier",setActive:"Dfinir actif",manualTokenEntry:"Saisie manuelle du token",runSetupToken:"Excutez claude setup-token pour obtenir votre token",tokenPlaceholder:"sk-ant-oat01-...",emailPlaceholder:"Email (optionnel, pour l'affichage)",saveToken:"Enregistrer le token",accountNamePlaceholder:"Nom du compte (ex: Travail, Personnel)",autoSwitching:"Basculement automatique de compte",autoSwitchingDescription:"Basculer automatiquement entre les comptes Claude pour viter les interruptions. Configurez la surveillance proactive pour changer avant d'atteindre les limites.",enableAutoSwitching:"Activer le basculement automatique",masterSwitch:"Interrupteur principal pour toutes les fonctionnalits auto-swap",proactiveMonitoring:"Surveillance proactive",proactiveDescription:"Vrifier l'utilisation rgulirement et changer avant d'atteindre les limites",checkUsageEvery:"Vrifier l'utilisation toutes les",seconds15:"15 secondes",seconds30:"30 secondes (recommand)",minute1:"1 minute",disabled:"Dsactiv",sessionThreshold:"Seuil d'utilisation de session",sessionThresholdDescription:"Changer quand l'utilisation de session atteint ce niveau (recommand: 95%)",weeklyThreshold:"Seuil d'utilisation hebdomadaire",weeklyThresholdDescription:"Changer quand l'utilisation hebdomadaire atteint ce niveau (recommand: 99%)",reactiveRecovery:"Rcupration ractive",reactiveDescription:"Basculer automatiquement quand une limite inattendue est atteinte",apiKeys:"Cls API",apiKeysInfo:"Les cls dfinies ici sont utilises par dfaut. Les projets individuels peuvent les remplacer dans leurs paramtres.",openaiKey:"Cl API OpenAI",openaiKeyDescription:"Requise pour le backend mmoire Graphiti (embeddings)"},R6={title:v6,tabs:y6,sections:b6,language:w6,scale:S6,general:j6,theme:_6,updates:C6,notifications:N6,actions:k6,projectSections:E6,agentProfile:A6,workspace:T6,integrations:D6},P6={backlog:"Backlog",todo:" faire",in_progress:"En cours",review:"Rvision",complete:"Termin",archived:"Archiv"},M6={start:"Dmarrer",stop:"Arrter",recover:"Rcuprer",resume:"Reprendre",archive:"Archiver",delete:"Supprimer",view:"Voir les dtails"},L6={running:"En cours",aiReview:"Rvision IA",needsReview:" rviser",pending:"En attente",stuck:"Bloqu",incomplete:"Incomplet",recovering:"Rcupration...",needsRecovery:"Rcupration requise",needsResume:"Reprise requise"},I6={completed:"Termin",hasErrors:"Contient des erreurs",qaIssues:"Problmes QA",approvePlan:"Approuver le plan"},O6={archiveTask:"Archiver la tche",archiveAllDone:"Archiver toutes les tches termines"},B6={title:"Crer une nouvelle tche",description:"Dcrivez ce que vous voulez construire",placeholder:"Dcrivez votre tche..."},z6={title:"Aucune tche",description:"Crez votre premire tche pour commencer"},F6={emptyBacklog:"Aucune tche planifie",emptyBacklogHint:"Ajoutez une tche pour commencer",emptyInProgress:"Rien en cours",emptyInProgressHint:"Dmarrez une tche depuis le Backlog",emptyAiReview:"Aucune tche en rvision",emptyAiReviewHint:"L'IA rvisera les tches termines",emptyHumanReview:"Rien  rviser",emptyHumanReviewHint:"Les tches attendent votre approbation ici",emptyDone:"Aucune tche termine",emptyDoneHint:"Les tches approuves apparaissent ici",emptyDefault:"Aucune tche",dropHere:"Dposer ici",showArchived:"Afficher les archives"},H6={phases:{idle:"Inactif",planning:"Planification",coding:"Codage",reviewing:"Rvision",fixing:"Correction",complete:"Termin",failed:"chou"},labels:{interrupted:"Interrompu",progress:"Progression",entry:"entre",entries:"entres"},shortPhases:{plan:"Plan",code:"Code",qa:"QA"}},U6={status:P6,actions:M6,labels:L6,reviewReason:I6,tooltips:O6,creation:B6,empty:z6,kanban:F6,execution:H6},$6={title:"Bienvenue sur Auto Claude",subtitle:"Construisez des logiciels de manire autonome avec des agents IA"},V6={newProject:"Nouveau projet",openProject:"Ouvrir un projet"},G6={title:"Projets rcents",empty:"Aucun projet",emptyDescription:"Crez un nouveau projet ou ouvrez-en un existant pour commencer",openFolder:"Ouvrir le dossier"},q6={hero:$6,actions:V6,recentProjects:G6},W6={title:"Assistant de configuration",description:"Configurez votre environnement Auto Claude en quelques tapes simples",helpText:"Cet assistant vous aidera  configurer votre environnement en quelques tapes. Vous pouvez configurer votre token OAuth Claude, activer les fonctionnalits de mmoire et crer votre premire tche."},K6={title:"Bienvenue sur Auto Claude",subtitle:"Construisez des logiciels de manire autonome avec des agents IA",getStarted:"Commencer",skip:"Passer la configuration",features:{aiPowered:{title:"Dveloppement assist par IA",description:"Gnrez du code et construisez des fonctionnalits avec les agents Claude Code"},specDriven:{title:"Workflow bas sur les specs",description:"Dfinissez des tches avec des spcifications claires et laissez Auto Claude grer l'implmentation"},memory:{title:"Mmoire & Contexte",description:"Mmoire persistante entre les sessions avec Graphiti"},parallel:{title:"Excution parallle",description:"Excutez plusieurs agents en parallle pour des cycles de dveloppement plus rapides"}}},Y6={title:"Authentification Claude",description:"Connectez votre compte Claude pour activer les fonctionnalits IA"},X6={title:"Mmoire",description:"La mmoire Auto Claude aide  retenir le contexte entre vos sessions de code"},Z6={title:"Vous tes prt !",subtitle:"Auto Claude est prt  vous aider  construire des logiciels incroyables",setupComplete:"Configuration termine",setupCompleteDescription:"Votre environnement est configur et prt. Vous pouvez commencer  crer des tches immdiatement ou explorer l'application  votre rythme.",whatsNext:"Et maintenant ?",createTask:{title:"Crer une tche",description:"Commencez par crer votre premire tche pour voir Auto Claude en action.",action:"Ouvrir le crateur de tches"},customizeSettings:{title:"Personnaliser les paramtres",description:"Affinez vos prfrences, configurez les intgrations ou relancez cet assistant.",action:"Ouvrir les paramtres"},exploreDocs:{title:"Explorer la documentation",description:"En savoir plus sur les fonctionnalits avances, les bonnes pratiques et le dpannage."},finish:"Terminer et commencer  construire",rerunHint:"Vous pouvez toujours relancer cet assistant depuis Paramtres  Application"},Q6={welcome:"Bienvenue",auth:"Auth",memory:"Mmoire",done:"Termin"},J6={wizard:W6,welcome:K6,oauth:Y6,memory:X6,completion:Z6,steps:Q6},eF={title:"Initialiser Auto Claude",description:"Ce projet n'a pas Auto Claude initialis. Voulez-vous le configurer maintenant ?",willDo:"Ceci va :",createFolder:"Crer un dossier .auto-claude dans votre projet",copyFramework:"Copier les fichiers du framework Auto Claude",setupSpecs:"Configurer le rpertoire des spcifications pour vos tches",sourcePathNotConfigured:"Chemin source non configur",sourcePathNotConfiguredDescription:"Veuillez dfinir le chemin source Auto Claude dans les paramtres de l'application avant d'initialiser.",initFailed:"chec de l'initialisation",initFailedDescription:"chec de l'initialisation de Auto Claude. Veuillez ressayer."},tF={title:"Dpt Git requis",description:"Auto Claude utilise git pour construire des fonctionnalits en toute scurit dans des espaces de travail isols",notGitRepo:"Ce dossier n'est pas un dpt git",noCommits:"Le dpt git n'a pas de commits",needsInit:"Git doit tre initialis avant que Auto Claude puisse grer votre code.",needsCommit:"Au moins un commit est requis pour que Auto Claude puisse crer des worktrees.",willSetup:"Nous allons configurer git pour vous :",initRepo:"Initialiser un nouveau dpt git",createCommit:"Crer un commit initial avec vos fichiers actuels",manual:"Prfrez-vous le faire manuellement ?",settingUp:"Configuration de Git",initializingRepo:"Initialisation du dpt git et cration du commit initial...",success:"Git initialis",readyToUse:"Votre projet est maintenant prt  tre utilis avec Auto Claude !"},sF={connectTitle:"Connecter  GitHub",connectDescription:"Auto Claude ncessite GitHub pour grer vos branches de code et maintenir les tches  jour.",claudeTitle:"Connecter  Claude AI",claudeDescription:"Auto Claude utilise Claude AI pour des fonctionnalits intelligentes comme la gnration de feuille de route, l'automatisation des tches et l'idation.",selectRepo:"Slectionner le dpt",repoDescription:"Auto Claude utilisera ce dpt pour grer les branches de tches et maintenir votre code  jour.",selectBranch:"Slectionner la branche de base",branchDescription:"Choisissez quelle branche Auto Claude doit utiliser comme base pour crer les branches de tches.",whyBranch:"Pourquoi slectionner une branche ?",branchExplanation:"Auto Claude cre des espaces de travail isols pour chaque tche. Slectionner la bonne branche de base garantit que vos tches dmarrent avec le code le plus rcent de votre ligne de dveloppement principale.",ready:"Auto Claude est prt  l'emploi ! Vous pouvez maintenant crer des tches qui seront automatiquement bases sur la branche {{branchName}}."},nF={title:"Worktrees",description:"Grez les espaces de travail isols pour vos tches Auto Claude",empty:"Aucun worktree",emptyDescription:"Les worktrees sont crs automatiquement quand Auto Claude construit des fonctionnalits. Ils fournissent des espaces de travail isols pour chaque tche.",merge:"Fusionner le worktree",mergeDescription:"Fusionner les modifications de ce worktree dans la branche de base.",delete:"Supprimer le worktree ?",deleteDescription:"Ceci supprimera dfinitivement le worktree et toutes les modifications non committes. Cette action est irrversible."},rF={title:"Auto Claude",projectInitialized:"Le projet est initialis."},iF={title:"Ajouter une fonctionnalit",description:"Ajoutez une nouvelle fonctionnalit  votre feuille de route. Fournissez des dtails sur ce que vous voulez construire et comment cela s'intgre dans votre stratgie produit.",featureTitle:"Titre de la fonctionnalit",featureTitlePlaceholder:"ex. Authentification utilisateur, Mode sombre",featureDescription:"Description",featureDescriptionPlaceholder:"Dcrivez ce que fait cette fonctionnalit et pourquoi elle est utile aux utilisateurs.",rationale:"Justification",optional:"optionnel",rationalePlaceholder:"Expliquez pourquoi cette fonctionnalit devrait tre construite et comment elle s'intgre dans la vision produit.",phase:"Phase",selectPhase:"Slectionner une phase",priority:"Priorit",selectPriority:"Slectionner une priorit",complexity:"Complexit",selectComplexity:"Slectionner la complexit",impact:"Impact",selectImpact:"Slectionner l'impact",lowComplexity:"Faible",mediumComplexity:"Moyen",highComplexity:"lev",lowImpact:"Impact faible",mediumImpact:"Impact moyen",highImpact:"Impact lev",titleRequired:"Le titre est requis",descriptionRequired:"La description est requise",phaseRequired:"Veuillez slectionner une phase",cancel:"Annuler",adding:"Ajout en cours...",addFeature:"Ajouter la fonctionnalit",failedToAdd:"chec de l'ajout de la fonctionnalit. Veuillez ressayer."},aF={title:"Ajouter un projet",description:"Choisissez comment vous souhaitez ajouter un projet",openExisting:"Ouvrir un dossier existant",openExistingDescription:"Parcourir vers un projet existant sur votre ordinateur",createNew:"Crer un nouveau projet",createNewDescription:"Commencer avec un nouveau dossier de projet",createNewTitle:"Crer un nouveau projet",createNewSubtitle:"Configurer un nouveau dossier de projet",projectName:"Nom du projet",projectNamePlaceholder:"mon-super-projet",projectNameHelp:"Ce sera le nom du dossier. Utilisez des minuscules avec des tirets.",location:"Emplacement",locationPlaceholder:"Slectionner un dossier...",willCreate:"Va crer :",browse:"Parcourir",initGit:"Initialiser un dpt git",back:"Retour",creating:"Cration en cours...",createProject:"Crer le projet",nameRequired:"Veuillez entrer un nom de projet",locationRequired:"Veuillez slectionner un emplacement",failedToOpen:"chec de l'ouverture du projet",failedToCreate:"chec de la cration du projet"},oF={title:"Configuration du modle personnalis",description:"Configurez le modle et le niveau de rflexion pour cette session de chat.",model:"Modle",thinkingLevel:"Niveau de rflexion",cancel:"Annuler",apply:"Appliquer"},lF={initialize:eF,gitSetup:tF,githubSetup:sF,worktrees:nF,update:rF,addFeature:iF,addProject:aF,customModel:oF},cF="common",uF={en:{common:oz,navigation:fz,settings:Ez,tasks:Bz,welcome:Uz,onboarding:Yz,dialogs:r6},fr:{common:d6,navigation:x6,settings:R6,tasks:U6,welcome:q6,onboarding:J6,dialogs:lF}};zn.use(qB).init({resources:uF,lng:"en",fallbackLng:"en",defaultNS:cF,ns:["common","navigation","settings","tasks","welcome","onboarding","dialogs"],interpolation:{escapeValue:!1},react:{useSuspense:!1}});var Qv={exports:{}},Ju={},Jv={exports:{}},ey={};var vN;function dF(){return vN||(vN=1,(function(e){function t(V,Y){var K=V.length;V.push(Y);e:for(;0<K;){var O=K-1>>>1,L=V[O];if(0<i(L,Y))V[O]=Y,V[K]=L,K=O;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var Y=V[0],K=V.pop();if(K!==Y){V[0]=K;e:for(var O=0,L=V.length,I=L>>>1;O<I;){var q=2*(O+1)-1,z=V[q],ee=q+1,ie=V[ee];if(0>i(z,K))ee<L&&0>i(ie,z)?(V[O]=ie,V[ee]=K,O=ee):(V[O]=z,V[q]=K,O=q);else if(ee<L&&0>i(ie,K))V[O]=ie,V[ee]=K,O=ee;else break e}}return Y}function i(V,Y){var K=V.sortIndex-Y.sortIndex;return K!==0?K:V.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,l=c.now();e.unstable_now=function(){return c.now()-l}}var d=[],h=[],m=1,f=null,g=3,x=!1,C=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function N(V){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=V)r(h),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=n(h)}}function T(V){if(_=!1,N(V),!C)if(n(d)!==null)C=!0,E||(E=!0,F());else{var Y=n(h);Y!==null&&$(T,Y.startTime-V)}}var E=!1,D=-1,A=5,P=-1;function M(){return b?!0:!(e.unstable_now()-P<A)}function B(){if(b=!1,E){var V=e.unstable_now();P=V;var Y=!0;try{e:{C=!1,_&&(_=!1,j(D),D=-1),x=!0;var K=g;try{t:{for(N(V),f=n(d);f!==null&&!(f.expirationTime>V&&M());){var O=f.callback;if(typeof O=="function"){f.callback=null,g=f.priorityLevel;var L=O(f.expirationTime<=V);if(V=e.unstable_now(),typeof L=="function"){f.callback=L,N(V),Y=!0;break t}f===n(d)&&r(d),N(V)}else r(d);f=n(d)}if(f!==null)Y=!0;else{var I=n(h);I!==null&&$(T,I.startTime-V),Y=!1}}break e}finally{f=null,g=K,x=!1}Y=void 0}}finally{Y?F():E=!1}}}var F;if(typeof S=="function")F=function(){S(B)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=B,F=function(){G.postMessage(null)}}else F=function(){w(B,0)};function $(V,Y){D=w(function(){V(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(V){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var K=g;g=Y;try{return V()}finally{g=K}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,Y){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=g;g=V;try{return Y()}finally{g=K}},e.unstable_scheduleCallback=function(V,Y,K){var O=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?O+K:O):K=O,V){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=K+L,V={id:m++,callback:Y,priorityLevel:V,startTime:K,expirationTime:L,sortIndex:-1},K>O?(V.sortIndex=K,t(h,V),n(d)===null&&V===n(h)&&(_?(j(D),D=-1):_=!0,$(T,K-O))):(V.sortIndex=L,t(d,V),C||x||(C=!0,E||(E=!0,F()))),V},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(V){var Y=g;return function(){var K=g;g=Y;try{return V.apply(this,arguments)}finally{g=K}}}})(ey)),ey}var yN;function hF(){return yN||(yN=1,Jv.exports=dF()),Jv.exports}var ty={exports:{}},_n={};var bN;function fF(){if(bN)return _n;bN=1;var e=Sp();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,h,m){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:d,containerInfo:h,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,m)},_n.flushSync=function(d){var h=c.T,m=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=h,r.p=m,r.d.f()}},_n.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},_n.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},_n.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,f=l(m,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:g,fetchPriority:x}):m==="script"&&r.d.X(d,{crossOrigin:f,integrity:g,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_n.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=l(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},_n.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,f=l(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_n.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=l(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},_n.requestFormReset=function(d){r.d.r(d)},_n.unstable_batchedUpdates=function(d,h){return d(h)},_n.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.2.3",_n}var wN;function OA(){if(wN)return ty.exports;wN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ty.exports=fF(),ty.exports}var SN;function mF(){if(SN)return Ju;SN=1;var e=hF(),t=Sp(),n=OA();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var u=a,p=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(p=u.return),a=u.return;while(a)}return u.tag===3?p:null}function c(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(a.tag===31){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function d(a){if(o(a)!==a)throw Error(r(188))}function h(a){var u=a.alternate;if(!u){if(u=o(a),u===null)throw Error(r(188));return u!==a?null:a}for(var p=a,v=u;;){var k=p.return;if(k===null)break;var R=k.alternate;if(R===null){if(v=k.return,v!==null){p=v;continue}break}if(k.child===R.child){for(R=k.child;R;){if(R===p)return d(k),a;if(R===v)return d(k),u;R=R.sibling}throw Error(r(188))}if(p.return!==v.return)p=k,v=R;else{for(var H=!1,Z=k.child;Z;){if(Z===p){H=!0,p=k,v=R;break}if(Z===v){H=!0,v=k,p=R;break}Z=Z.sibling}if(!H){for(Z=R.child;Z;){if(Z===p){H=!0,p=R,v=k;break}if(Z===v){H=!0,v=R,p=k;break}Z=Z.sibling}if(!H)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?a:u}function m(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=m(a),u!==null)return u;a=a.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),S=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var U=Symbol.for("react.client.reference");function G(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===U?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case C:return"Portal";case S:return a.displayName||"Context";case j:return(a._context.displayName||"Context")+".Consumer";case N:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return u=a.displayName||null,u!==null?u:G(a.type)||"Memo";case A:u=a._payload,a=a._init;try{return G(a(u))}catch{}}return null}var $=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},O=[],L=-1;function I(a){return{current:a}}function q(a){0>L||(a.current=O[L],O[L]=null,L--)}function z(a,u){L++,O[L]=a.current,a.current=u}var ee=I(null),ie=I(null),re=I(null),X=I(null);function W(a,u){switch(z(re,u),z(ie,a),z(ee,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?yC(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=yC(u),a=bC(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}q(ee),z(ee,a)}function Q(){q(ee),q(ie),q(re)}function se(a){a.memoizedState!==null&&z(X,a);var u=ee.current,p=bC(u,a.type);u!==p&&(z(ie,a),z(ee,p))}function he(a){ie.current===a&&(q(ee),q(ie)),X.current===a&&(q(X),Wu._currentValue=K)}var de,Ne;function Re(a){if(de===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);de=u&&u[1]||"",Ne=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+a+Ne}var ce=!1;function ge(a,u){if(!a||ce)return"";ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(be){var xe=be}Reflect.construct(a,[],Te)}else{try{Te.call()}catch(be){xe=be}a.call(Te.prototype)}}else{try{throw Error()}catch(be){xe=be}(Te=a())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(be){if(be&&xe&&typeof be.stack=="string")return[be.stack,xe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=v.DetermineComponentFrameRoot(),H=R[0],Z=R[1];if(H&&Z){var ne=H.split(`
`),pe=Z.split(`
`);for(k=v=0;v<ne.length&&!ne[v].includes("DetermineComponentFrameRoot");)v++;for(;k<pe.length&&!pe[k].includes("DetermineComponentFrameRoot");)k++;if(v===ne.length||k===pe.length)for(v=ne.length-1,k=pe.length-1;1<=v&&0<=k&&ne[v]!==pe[k];)k--;for(;1<=v&&0<=k;v--,k--)if(ne[v]!==pe[k]){if(v!==1||k!==1)do if(v--,k--,0>k||ne[v]!==pe[k]){var Ce=`
`+ne[v].replace(" at new "," at ");return a.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",a.displayName)),Ce}while(1<=v&&0<=k);break}}}finally{ce=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?Re(p):""}function ae(a,u){switch(a.tag){case 26:case 27:case 5:return Re(a.type);case 16:return Re("Lazy");case 13:return a.child!==u&&u!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return ge(a.type,!1);case 11:return ge(a.type.render,!1);case 1:return ge(a.type,!0);case 31:return Re("Activity");default:return""}}function Ee(a){try{var u="",p=null;do u+=ae(a,p),p=a,a=a.return;while(a);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Be=Object.prototype.hasOwnProperty,et=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Me=e.unstable_shouldYield,qe=e.unstable_requestPaint,st=e.unstable_now,_t=e.unstable_getCurrentPriorityLevel,fe=e.unstable_ImmediatePriority,Ae=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,We=e.unstable_LowPriority,ve=e.unstable_IdlePriority,Fe=e.log,Ue=e.unstable_setDisableYieldValue,Ct=null,Ot=null;function Ke(a){if(typeof Fe=="function"&&Ue(a),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Ct,a)}catch{}}var Xe=Math.clz32?Math.clz32:vr,Ft=Math.log,js=Math.LN2;function vr(a){return a>>>=0,a===0?32:31-(Ft(a)/js|0)|0}var ye=256,Jn=262144,ds=4194304;function Zt(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Qt(a,u,p){var v=a.pendingLanes;if(v===0)return 0;var k=0,R=a.suspendedLanes,H=a.pingedLanes;a=a.warmLanes;var Z=v&134217727;return Z!==0?(v=Z&~R,v!==0?k=Zt(v):(H&=Z,H!==0?k=Zt(H):p||(p=Z&~a,p!==0&&(k=Zt(p))))):(Z=v&~R,Z!==0?k=Zt(Z):H!==0?k=Zt(H):p||(p=v&~a,p!==0&&(k=Zt(p)))),k===0?0:u!==0&&u!==k&&(u&R)===0&&(R=k&-k,p=u&-u,R>=p||R===32&&(p&4194048)!==0)?u:k}function Se(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function ze(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var a=ds;return ds<<=1,(ds&62914560)===0&&(ds=4194304),a}function Nt(a){for(var u=[],p=0;31>p;p++)u.push(a);return u}function qt(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function $t(a,u,p,v,k,R){var H=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var Z=a.entanglements,ne=a.expirationTimes,pe=a.hiddenUpdates;for(p=H&~p;0<p;){var Ce=31-Xe(p),Te=1<<Ce;Z[Ce]=0,ne[Ce]=-1;var xe=pe[Ce];if(xe!==null)for(pe[Ce]=null,Ce=0;Ce<xe.length;Ce++){var be=xe[Ce];be!==null&&(be.lane&=-536870913)}p&=~Te}v!==0&&Yt(a,v,0),R!==0&&k===0&&a.tag!==0&&(a.suspendedLanes|=R&~(H&~u))}function Yt(a,u,p){a.pendingLanes|=u,a.suspendedLanes&=~u;var v=31-Xe(u);a.entangledLanes|=u,a.entanglements[v]=a.entanglements[v]|1073741824|p&261930}function ot(a,u){var p=a.entangledLanes|=u;for(a=a.entanglements;p;){var v=31-Xe(p),k=1<<v;k&u|a[v]&u&&(a[v]|=u),p&=~k}}function is(a,u){var p=u&-u;return p=(p&42)!==0?1:Zs(p),(p&(a.suspendedLanes|u))!==0?0:p}function Zs(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Sn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Hs(){var a=Y.p;return a!==0?a:(a=window.event,a===void 0?32:$C(a.type))}function nn(a,u){var p=Y.p;try{return Y.p=a,u()}finally{Y.p=p}}var rn=Math.random().toString(36).slice(2),Ds="__reactFiber$"+rn,jn="__reactProps$"+rn,xa="__reactContainer$"+rn,Og="__reactEvents$"+rn,tI="__reactListeners$"+rn,sI="__reactHandles$"+rn,a1="__reactResources$"+rn,lu="__reactMarker$"+rn;function Bg(a){delete a[Ds],delete a[jn],delete a[Og],delete a[tI],delete a[sI]}function yl(a){var u=a[Ds];if(u)return u;for(var p=a.parentNode;p;){if(u=p[xa]||p[Ds]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(a=kC(a);a!==null;){if(p=a[Ds])return p;a=kC(a)}return u}a=p,p=a.parentNode}return null}function bl(a){if(a=a[Ds]||a[xa]){var u=a.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return a}return null}function cu(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function wl(a){var u=a[a1];return u||(u=a[a1]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function an(a){a[lu]=!0}var o1=new Set,l1={};function jo(a,u){Sl(a,u),Sl(a+"Capture",u)}function Sl(a,u){for(l1[a]=u,a=0;a<u.length;a++)o1.add(u[a])}var nI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),c1={},u1={};function rI(a){return Be.call(u1,a)?!0:Be.call(c1,a)?!1:nI.test(a)?u1[a]=!0:(c1[a]=!0,!1)}function Lh(a,u,p){if(rI(u))if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+p)}}function Ih(a,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+p)}}function Ti(a,u,p,v){if(v===null)a.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(u,p,""+v)}}function yr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function d1(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function iI(a,u,p){var v=Object.getOwnPropertyDescriptor(a.constructor.prototype,u);if(!a.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var k=v.get,R=v.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return k.call(this)},set:function(H){p=""+H,R.call(this,H)}}),Object.defineProperty(a,u,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(H){p=""+H},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function zg(a){if(!a._valueTracker){var u=d1(a)?"checked":"value";a._valueTracker=iI(a,u,""+a[u])}}function h1(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var p=u.getValue(),v="";return a&&(v=d1(a)?a.checked?"true":"false":a.value),a=v,a!==p?(u.setValue(a),!0):!1}function Oh(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var aI=/[\n"\\]/g;function br(a){return a.replace(aI,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Fg(a,u,p,v,k,R,H,Z){a.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?a.type=H:a.removeAttribute("type"),u!=null?H==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+yr(u)):a.value!==""+yr(u)&&(a.value=""+yr(u)):H!=="submit"&&H!=="reset"||a.removeAttribute("value"),u!=null?Hg(a,H,yr(u)):p!=null?Hg(a,H,yr(p)):v!=null&&a.removeAttribute("value"),k==null&&R!=null&&(a.defaultChecked=!!R),k!=null&&(a.checked=k&&typeof k!="function"&&typeof k!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?a.name=""+yr(Z):a.removeAttribute("name")}function f1(a,u,p,v,k,R,H,Z){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.type=R),u!=null||p!=null){if(!(R!=="submit"&&R!=="reset"||u!=null)){zg(a);return}p=p!=null?""+yr(p):"",u=u!=null?""+yr(u):p,Z||u===a.value||(a.value=u),a.defaultValue=u}v=v??k,v=typeof v!="function"&&typeof v!="symbol"&&!!v,a.checked=Z?a.checked:!!v,a.defaultChecked=!!v,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.name=H),zg(a)}function Hg(a,u,p){u==="number"&&Oh(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function jl(a,u,p,v){if(a=a.options,u){u={};for(var k=0;k<p.length;k++)u["$"+p[k]]=!0;for(p=0;p<a.length;p++)k=u.hasOwnProperty("$"+a[p].value),a[p].selected!==k&&(a[p].selected=k),k&&v&&(a[p].defaultSelected=!0)}else{for(p=""+yr(p),u=null,k=0;k<a.length;k++){if(a[k].value===p){a[k].selected=!0,v&&(a[k].defaultSelected=!0);return}u!==null||a[k].disabled||(u=a[k])}u!==null&&(u.selected=!0)}}function m1(a,u,p){if(u!=null&&(u=""+yr(u),u!==a.value&&(a.value=u),p==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=p!=null?""+yr(p):""}function p1(a,u,p,v){if(u==null){if(v!=null){if(p!=null)throw Error(r(92));if($(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),u=p}p=yr(u),a.defaultValue=p,v=a.textContent,v===p&&v!==""&&v!==null&&(a.value=v),zg(a)}function _l(a,u){if(u){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=u;return}}a.textContent=u}var oI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function g1(a,u,p){var v=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":v?a.setProperty(u,p):typeof p!="number"||p===0||oI.has(u)?u==="float"?a.cssFloat=p:a[u]=(""+p).trim():a[u]=p+"px"}function x1(a,u,p){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?a.setProperty(v,""):v==="float"?a.cssFloat="":a[v]="");for(var k in u)v=u[k],u.hasOwnProperty(k)&&p[k]!==v&&g1(a,k,v)}else for(var R in u)u.hasOwnProperty(R)&&g1(a,R,u[R])}function Ug(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bh(a){return cI.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Di(){}var $g=null;function Vg(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cl=null,Nl=null;function v1(a){var u=bl(a);if(u&&(a=u.stateNode)){var p=a[jn]||null;e:switch(a=u.stateNode,u.type){case"input":if(Fg(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+br(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var v=p[u];if(v!==a&&v.form===a.form){var k=v[jn]||null;if(!k)throw Error(r(90));Fg(v,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(u=0;u<p.length;u++)v=p[u],v.form===a.form&&h1(v)}break e;case"textarea":m1(a,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&jl(a,!!p.multiple,u,!1)}}}var Gg=!1;function y1(a,u,p){if(Gg)return a(u,p);Gg=!0;try{var v=a(u);return v}finally{if(Gg=!1,(Cl!==null||Nl!==null)&&(Nf(),Cl&&(u=Cl,a=Nl,Nl=Cl=null,v1(u),a)))for(u=0;u<a.length;u++)v1(a[u])}}function uu(a,u){var p=a.stateNode;if(p===null)return null;var v=p[jn]||null;if(v===null)return null;p=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qg=!1;if(Ri)try{var du={};Object.defineProperty(du,"passive",{get:function(){qg=!0}}),window.addEventListener("test",du,du),window.removeEventListener("test",du,du)}catch{qg=!1}var va=null,Wg=null,zh=null;function b1(){if(zh)return zh;var a,u=Wg,p=u.length,v,k="value"in va?va.value:va.textContent,R=k.length;for(a=0;a<p&&u[a]===k[a];a++);var H=p-a;for(v=1;v<=H&&u[p-v]===k[R-v];v++);return zh=k.slice(a,1<v?1-v:void 0)}function Fh(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Hh(){return!0}function w1(){return!1}function Un(a){function u(p,v,k,R,H){this._reactName=p,this._targetInst=k,this.type=v,this.nativeEvent=R,this.target=H,this.currentTarget=null;for(var Z in a)a.hasOwnProperty(Z)&&(p=a[Z],this[Z]=p?p(R):R[Z]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Hh:w1,this.isPropagationStopped=w1,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Hh)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Hh)},persist:function(){},isPersistent:Hh}),u}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=Un(_o),hu=f({},_o,{view:0,detail:0}),uI=Un(hu),Kg,Yg,fu,$h=f({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fu&&(fu&&a.type==="mousemove"?(Kg=a.screenX-fu.screenX,Yg=a.screenY-fu.screenY):Yg=Kg=0,fu=a),Kg)},movementY:function(a){return"movementY"in a?a.movementY:Yg}}),S1=Un($h),dI=f({},$h,{dataTransfer:0}),hI=Un(dI),fI=f({},hu,{relatedTarget:0}),Xg=Un(fI),mI=f({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),pI=Un(mI),gI=f({},_o,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),xI=Un(gI),vI=f({},_o,{data:0}),j1=Un(vI),yI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SI(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=wI[a])?!!u[a]:!1}function Zg(){return SI}var jI=f({},hu,{key:function(a){if(a.key){var u=yI[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Fh(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bI[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zg,charCode:function(a){return a.type==="keypress"?Fh(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Fh(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),_I=Un(jI),CI=f({},$h,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_1=Un(CI),NI=f({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zg}),kI=Un(NI),EI=f({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),AI=Un(EI),TI=f({},$h,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),DI=Un(TI),RI=f({},_o,{newState:0,oldState:0}),PI=Un(RI),MI=[9,13,27,32],Qg=Ri&&"CompositionEvent"in window,mu=null;Ri&&"documentMode"in document&&(mu=document.documentMode);var LI=Ri&&"TextEvent"in window&&!mu,C1=Ri&&(!Qg||mu&&8<mu&&11>=mu),N1=" ",k1=!1;function E1(a,u){switch(a){case"keyup":return MI.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var kl=!1;function II(a,u){switch(a){case"compositionend":return A1(u);case"keypress":return u.which!==32?null:(k1=!0,N1);case"textInput":return a=u.data,a===N1&&k1?null:a;default:return null}}function OI(a,u){if(kl)return a==="compositionend"||!Qg&&E1(a,u)?(a=b1(),zh=Wg=va=null,kl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return C1&&u.locale!=="ko"?null:u.data;default:return null}}var BI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T1(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!BI[a.type]:u==="textarea"}function D1(a,u,p,v){Cl?Nl?Nl.push(v):Nl=[v]:Cl=v,u=Pf(u,"onChange"),0<u.length&&(p=new Uh("onChange","change",null,p,v),a.push({event:p,listeners:u}))}var pu=null,gu=null;function zI(a){fC(a,0)}function Vh(a){var u=cu(a);if(h1(u))return a}function R1(a,u){if(a==="change")return u}var P1=!1;if(Ri){var Jg;if(Ri){var ex="oninput"in document;if(!ex){var M1=document.createElement("div");M1.setAttribute("oninput","return;"),ex=typeof M1.oninput=="function"}Jg=ex}else Jg=!1;P1=Jg&&(!document.documentMode||9<document.documentMode)}function L1(){pu&&(pu.detachEvent("onpropertychange",I1),gu=pu=null)}function I1(a){if(a.propertyName==="value"&&Vh(gu)){var u=[];D1(u,gu,a,Vg(a)),y1(zI,u)}}function FI(a,u,p){a==="focusin"?(L1(),pu=u,gu=p,pu.attachEvent("onpropertychange",I1)):a==="focusout"&&L1()}function HI(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Vh(gu)}function UI(a,u){if(a==="click")return Vh(u)}function $I(a,u){if(a==="input"||a==="change")return Vh(u)}function VI(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var er=typeof Object.is=="function"?Object.is:VI;function xu(a,u){if(er(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var p=Object.keys(a),v=Object.keys(u);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var k=p[v];if(!Be.call(u,k)||!er(a[k],u[k]))return!1}return!0}function O1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function B1(a,u){var p=O1(a);a=0;for(var v;p;){if(p.nodeType===3){if(v=a+p.textContent.length,a<=u&&v>=u)return{node:p,offset:u-a};a=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=O1(p)}}function z1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?z1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function F1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=Oh(a.document);u instanceof a.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)a=u.contentWindow;else break;u=Oh(a.document)}return u}function tx(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var GI=Ri&&"documentMode"in document&&11>=document.documentMode,El=null,sx=null,vu=null,nx=!1;function H1(a,u,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;nx||El==null||El!==Oh(v)||(v=El,"selectionStart"in v&&tx(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),vu&&xu(vu,v)||(vu=v,v=Pf(sx,"onSelect"),0<v.length&&(u=new Uh("onSelect","select",null,u,p),a.push({event:u,listeners:v}),u.target=El)))}function Co(a,u){var p={};return p[a.toLowerCase()]=u.toLowerCase(),p["Webkit"+a]="webkit"+u,p["Moz"+a]="moz"+u,p}var Al={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},rx={},U1={};Ri&&(U1=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function No(a){if(rx[a])return rx[a];if(!Al[a])return a;var u=Al[a],p;for(p in u)if(u.hasOwnProperty(p)&&p in U1)return rx[a]=u[p];return a}var $1=No("animationend"),V1=No("animationiteration"),G1=No("animationstart"),qI=No("transitionrun"),WI=No("transitionstart"),KI=No("transitioncancel"),q1=No("transitionend"),W1=new Map,ix="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ix.push("scrollEnd");function Fr(a,u){W1.set(a,u),jo(u,[a])}var Gh=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},wr=[],Tl=0,ax=0;function qh(){for(var a=Tl,u=ax=Tl=0;u<a;){var p=wr[u];wr[u++]=null;var v=wr[u];wr[u++]=null;var k=wr[u];wr[u++]=null;var R=wr[u];if(wr[u++]=null,v!==null&&k!==null){var H=v.pending;H===null?k.next=k:(k.next=H.next,H.next=k),v.pending=k}R!==0&&K1(p,k,R)}}function Wh(a,u,p,v){wr[Tl++]=a,wr[Tl++]=u,wr[Tl++]=p,wr[Tl++]=v,ax|=v,a.lanes|=v,a=a.alternate,a!==null&&(a.lanes|=v)}function ox(a,u,p,v){return Wh(a,u,p,v),Kh(a)}function ko(a,u){return Wh(a,null,null,u),Kh(a)}function K1(a,u,p){a.lanes|=p;var v=a.alternate;v!==null&&(v.lanes|=p);for(var k=!1,R=a.return;R!==null;)R.childLanes|=p,v=R.alternate,v!==null&&(v.childLanes|=p),R.tag===22&&(a=R.stateNode,a===null||a._visibility&1||(k=!0)),a=R,R=R.return;return a.tag===3?(R=a.stateNode,k&&u!==null&&(k=31-Xe(p),a=R.hiddenUpdates,v=a[k],v===null?a[k]=[u]:v.push(u),u.lane=p|536870912),R):null}function Kh(a){if(50<Fu)throw Fu=0,gv=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var Dl={};function YI(a,u,p,v){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(a,u,p,v){return new YI(a,u,p,v)}function lx(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Pi(a,u){var p=a.alternate;return p===null?(p=tr(a.tag,u,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=u,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,u=a.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function Y1(a,u){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,u=p.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function Yh(a,u,p,v,k,R){var H=0;if(v=a,typeof a=="function")lx(a)&&(H=1);else if(typeof a=="string")H=eB(a,p,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=tr(31,p,u,k),a.elementType=P,a.lanes=R,a;case _:return Eo(p.children,k,R,u);case b:H=8,k|=24;break;case w:return a=tr(12,p,u,k|2),a.elementType=w,a.lanes=R,a;case T:return a=tr(13,p,u,k),a.elementType=T,a.lanes=R,a;case E:return a=tr(19,p,u,k),a.elementType=E,a.lanes=R,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case S:H=10;break e;case j:H=9;break e;case N:H=11;break e;case D:H=14;break e;case A:H=16,v=null;break e}H=29,p=Error(r(130,a===null?"null":typeof a,"")),v=null}return u=tr(H,p,u,k),u.elementType=a,u.type=v,u.lanes=R,u}function Eo(a,u,p,v){return a=tr(7,a,v,u),a.lanes=p,a}function cx(a,u,p){return a=tr(6,a,null,u),a.lanes=p,a}function X1(a){var u=tr(18,null,null,0);return u.stateNode=a,u}function ux(a,u,p){return u=tr(4,a.children!==null?a.children:[],a.key,u),u.lanes=p,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var Z1=new WeakMap;function Sr(a,u){if(typeof a=="object"&&a!==null){var p=Z1.get(a);return p!==void 0?p:(u={value:a,source:u,stack:Ee(u)},Z1.set(a,u),u)}return{value:a,source:u,stack:Ee(u)}}var Rl=[],Pl=0,Xh=null,yu=0,jr=[],_r=0,ya=null,li=1,ci="";function Mi(a,u){Rl[Pl++]=yu,Rl[Pl++]=Xh,Xh=a,yu=u}function Q1(a,u,p){jr[_r++]=li,jr[_r++]=ci,jr[_r++]=ya,ya=a;var v=li;a=ci;var k=32-Xe(v)-1;v&=~(1<<k),p+=1;var R=32-Xe(u)+k;if(30<R){var H=k-k%5;R=(v&(1<<H)-1).toString(32),v>>=H,k-=H,li=1<<32-Xe(u)+k|p<<k|v,ci=R+a}else li=1<<R|p<<k|v,ci=a}function dx(a){a.return!==null&&(Mi(a,1),Q1(a,1,0))}function hx(a){for(;a===Xh;)Xh=Rl[--Pl],Rl[Pl]=null,yu=Rl[--Pl],Rl[Pl]=null;for(;a===ya;)ya=jr[--_r],jr[_r]=null,ci=jr[--_r],jr[_r]=null,li=jr[--_r],jr[_r]=null}function J1(a,u){jr[_r++]=li,jr[_r++]=ci,jr[_r++]=ya,li=u.id,ci=u.overflow,ya=a}var fn=null,bs=null,Ht=!1,ba=null,Cr=!1,fx=Error(r(519));function wa(a){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bu(Sr(u,a)),fx}function ej(a){var u=a.stateNode,p=a.type,v=a.memoizedProps;switch(u[Ds]=a,u[jn]=v,p){case"dialog":Mt("cancel",u),Mt("close",u);break;case"iframe":case"object":case"embed":Mt("load",u);break;case"video":case"audio":for(p=0;p<Uu.length;p++)Mt(Uu[p],u);break;case"source":Mt("error",u);break;case"img":case"image":case"link":Mt("error",u),Mt("load",u);break;case"details":Mt("toggle",u);break;case"input":Mt("invalid",u),f1(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Mt("invalid",u);break;case"textarea":Mt("invalid",u),p1(u,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||v.suppressHydrationWarning===!0||xC(u.textContent,p)?(v.popover!=null&&(Mt("beforetoggle",u),Mt("toggle",u)),v.onScroll!=null&&Mt("scroll",u),v.onScrollEnd!=null&&Mt("scrollend",u),v.onClick!=null&&(u.onclick=Di),u=!0):u=!1,u||wa(a,!0)}function tj(a){for(fn=a.return;fn;)switch(fn.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:fn=fn.return}}function Ml(a){if(a!==fn)return!1;if(!Ht)return tj(a),Ht=!0,!1;var u=a.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||Dv(a.type,a.memoizedProps)),p=!p),p&&bs&&wa(a),tj(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));bs=NC(a)}else if(u===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));bs=NC(a)}else u===27?(u=bs,La(a.type)?(a=Iv,Iv=null,bs=a):bs=u):bs=fn?kr(a.stateNode.nextSibling):null;return!0}function Ao(){bs=fn=null,Ht=!1}function mx(){var a=ba;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),ba=null),a}function bu(a){ba===null?ba=[a]:ba.push(a)}var px=I(null),To=null,Li=null;function Sa(a,u,p){z(px,u._currentValue),u._currentValue=p}function Ii(a){a._currentValue=px.current,q(px)}function gx(a,u,p){for(;a!==null;){var v=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),a===p)break;a=a.return}}function xx(a,u,p,v){var k=a.child;for(k!==null&&(k.return=a);k!==null;){var R=k.dependencies;if(R!==null){var H=k.child;R=R.firstContext;e:for(;R!==null;){var Z=R;R=k;for(var ne=0;ne<u.length;ne++)if(Z.context===u[ne]){R.lanes|=p,Z=R.alternate,Z!==null&&(Z.lanes|=p),gx(R.return,p,a),v||(H=null);break e}R=Z.next}}else if(k.tag===18){if(H=k.return,H===null)throw Error(r(341));H.lanes|=p,R=H.alternate,R!==null&&(R.lanes|=p),gx(H,p,a),H=null}else H=k.child;if(H!==null)H.return=k;else for(H=k;H!==null;){if(H===a){H=null;break}if(k=H.sibling,k!==null){k.return=H.return,H=k;break}H=H.return}k=H}}function Ll(a,u,p,v){a=null;for(var k=u,R=!1;k!==null;){if(!R){if((k.flags&524288)!==0)R=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var H=k.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var Z=k.type;er(k.pendingProps.value,H.value)||(a!==null?a.push(Z):a=[Z])}}else if(k===X.current){if(H=k.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(a!==null?a.push(Wu):a=[Wu])}k=k.return}a!==null&&xx(u,a,p,v),u.flags|=262144}function Zh(a){for(a=a.firstContext;a!==null;){if(!er(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Do(a){To=a,Li=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function mn(a){return sj(To,a)}function Qh(a,u){return To===null&&Do(a),sj(a,u)}function sj(a,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},Li===null){if(a===null)throw Error(r(308));Li=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Li=Li.next=u;return p}var XI=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(p,v){a.push(v)}};this.abort=function(){u.aborted=!0,a.forEach(function(p){return p()})}},ZI=e.unstable_scheduleCallback,QI=e.unstable_NormalPriority,Us={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vx(){return{controller:new XI,data:new Map,refCount:0}}function wu(a){a.refCount--,a.refCount===0&&ZI(QI,function(){a.controller.abort()})}var Su=null,yx=0,Il=0,Ol=null;function JI(a,u){if(Su===null){var p=Su=[];yx=0,Il=Sv(),Ol={status:"pending",value:void 0,then:function(v){p.push(v)}}}return yx++,u.then(nj,nj),u}function nj(){if(--yx===0&&Su!==null){Ol!==null&&(Ol.status="fulfilled");var a=Su;Su=null,Il=0,Ol=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function eO(a,u){var p=[],v={status:"pending",value:null,reason:null,then:function(k){p.push(k)}};return a.then(function(){v.status="fulfilled",v.value=u;for(var k=0;k<p.length;k++)(0,p[k])(u)},function(k){for(v.status="rejected",v.reason=k,k=0;k<p.length;k++)(0,p[k])(void 0)}),v}var rj=V.S;V.S=function(a,u){H_=st(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&JI(a,u),rj!==null&&rj(a,u)};var Ro=I(null);function bx(){var a=Ro.current;return a!==null?a:hs.pooledCache}function Jh(a,u){u===null?z(Ro,Ro.current):z(Ro,u.pool)}function ij(){var a=bx();return a===null?null:{parent:Us._currentValue,pool:a}}var Bl=Error(r(460)),wx=Error(r(474)),ef=Error(r(542)),tf={then:function(){}};function aj(a){return a=a.status,a==="fulfilled"||a==="rejected"}function oj(a,u,p){switch(p=a[p],p===void 0?a.push(u):p!==u&&(u.then(Di,Di),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,cj(a),a;default:if(typeof u.status=="string")u.then(Di,Di);else{if(a=hs,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(v){if(u.status==="pending"){var k=u;k.status="fulfilled",k.value=v}},function(v){if(u.status==="pending"){var k=u;k.status="rejected",k.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,cj(a),a}throw Mo=u,Bl}}function Po(a){try{var u=a._init;return u(a._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Mo=p,Bl):p}}var Mo=null;function lj(){if(Mo===null)throw Error(r(459));var a=Mo;return Mo=null,a}function cj(a){if(a===Bl||a===ef)throw Error(r(483))}var zl=null,ju=0;function sf(a){var u=ju;return ju+=1,zl===null&&(zl=[]),oj(zl,a,u)}function _u(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function nf(a,u){throw u.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function uj(a){function u(ue,oe){if(a){var me=ue.deletions;me===null?(ue.deletions=[oe],ue.flags|=16):me.push(oe)}}function p(ue,oe){if(!a)return null;for(;oe!==null;)u(ue,oe),oe=oe.sibling;return null}function v(ue){for(var oe=new Map;ue!==null;)ue.key!==null?oe.set(ue.key,ue):oe.set(ue.index,ue),ue=ue.sibling;return oe}function k(ue,oe){return ue=Pi(ue,oe),ue.index=0,ue.sibling=null,ue}function R(ue,oe,me){return ue.index=me,a?(me=ue.alternate,me!==null?(me=me.index,me<oe?(ue.flags|=67108866,oe):me):(ue.flags|=67108866,oe)):(ue.flags|=1048576,oe)}function H(ue){return a&&ue.alternate===null&&(ue.flags|=67108866),ue}function Z(ue,oe,me,ke){return oe===null||oe.tag!==6?(oe=cx(me,ue.mode,ke),oe.return=ue,oe):(oe=k(oe,me),oe.return=ue,oe)}function ne(ue,oe,me,ke){var nt=me.type;return nt===_?Ce(ue,oe,me.props.children,ke,me.key):oe!==null&&(oe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===A&&Po(nt)===oe.type)?(oe=k(oe,me.props),_u(oe,me),oe.return=ue,oe):(oe=Yh(me.type,me.key,me.props,null,ue.mode,ke),_u(oe,me),oe.return=ue,oe)}function pe(ue,oe,me,ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==me.containerInfo||oe.stateNode.implementation!==me.implementation?(oe=ux(me,ue.mode,ke),oe.return=ue,oe):(oe=k(oe,me.children||[]),oe.return=ue,oe)}function Ce(ue,oe,me,ke,nt){return oe===null||oe.tag!==7?(oe=Eo(me,ue.mode,ke,nt),oe.return=ue,oe):(oe=k(oe,me),oe.return=ue,oe)}function Te(ue,oe,me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=cx(""+oe,ue.mode,me),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return me=Yh(oe.type,oe.key,oe.props,null,ue.mode,me),_u(me,oe),me.return=ue,me;case C:return oe=ux(oe,ue.mode,me),oe.return=ue,oe;case A:return oe=Po(oe),Te(ue,oe,me)}if($(oe)||F(oe))return oe=Eo(oe,ue.mode,me,null),oe.return=ue,oe;if(typeof oe.then=="function")return Te(ue,sf(oe),me);if(oe.$$typeof===S)return Te(ue,Qh(ue,oe),me);nf(ue,oe)}return null}function xe(ue,oe,me,ke){var nt=oe!==null?oe.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return nt!==null?null:Z(ue,oe,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case x:return me.key===nt?ne(ue,oe,me,ke):null;case C:return me.key===nt?pe(ue,oe,me,ke):null;case A:return me=Po(me),xe(ue,oe,me,ke)}if($(me)||F(me))return nt!==null?null:Ce(ue,oe,me,ke,null);if(typeof me.then=="function")return xe(ue,oe,sf(me),ke);if(me.$$typeof===S)return xe(ue,oe,Qh(ue,me),ke);nf(ue,me)}return null}function be(ue,oe,me,ke,nt){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ue=ue.get(me)||null,Z(oe,ue,""+ke,nt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case x:return ue=ue.get(ke.key===null?me:ke.key)||null,ne(oe,ue,ke,nt);case C:return ue=ue.get(ke.key===null?me:ke.key)||null,pe(oe,ue,ke,nt);case A:return ke=Po(ke),be(ue,oe,me,ke,nt)}if($(ke)||F(ke))return ue=ue.get(me)||null,Ce(oe,ue,ke,nt,null);if(typeof ke.then=="function")return be(ue,oe,me,sf(ke),nt);if(ke.$$typeof===S)return be(ue,oe,me,Qh(oe,ke),nt);nf(oe,ke)}return null}function $e(ue,oe,me,ke){for(var nt=null,Wt=null,Ze=oe,bt=oe=0,zt=null;Ze!==null&&bt<me.length;bt++){Ze.index>bt?(zt=Ze,Ze=null):zt=Ze.sibling;var Kt=xe(ue,Ze,me[bt],ke);if(Kt===null){Ze===null&&(Ze=zt);break}a&&Ze&&Kt.alternate===null&&u(ue,Ze),oe=R(Kt,oe,bt),Wt===null?nt=Kt:Wt.sibling=Kt,Wt=Kt,Ze=zt}if(bt===me.length)return p(ue,Ze),Ht&&Mi(ue,bt),nt;if(Ze===null){for(;bt<me.length;bt++)Ze=Te(ue,me[bt],ke),Ze!==null&&(oe=R(Ze,oe,bt),Wt===null?nt=Ze:Wt.sibling=Ze,Wt=Ze);return Ht&&Mi(ue,bt),nt}for(Ze=v(Ze);bt<me.length;bt++)zt=be(Ze,ue,bt,me[bt],ke),zt!==null&&(a&&zt.alternate!==null&&Ze.delete(zt.key===null?bt:zt.key),oe=R(zt,oe,bt),Wt===null?nt=zt:Wt.sibling=zt,Wt=zt);return a&&Ze.forEach(function(Fa){return u(ue,Fa)}),Ht&&Mi(ue,bt),nt}function at(ue,oe,me,ke){if(me==null)throw Error(r(151));for(var nt=null,Wt=null,Ze=oe,bt=oe=0,zt=null,Kt=me.next();Ze!==null&&!Kt.done;bt++,Kt=me.next()){Ze.index>bt?(zt=Ze,Ze=null):zt=Ze.sibling;var Fa=xe(ue,Ze,Kt.value,ke);if(Fa===null){Ze===null&&(Ze=zt);break}a&&Ze&&Fa.alternate===null&&u(ue,Ze),oe=R(Fa,oe,bt),Wt===null?nt=Fa:Wt.sibling=Fa,Wt=Fa,Ze=zt}if(Kt.done)return p(ue,Ze),Ht&&Mi(ue,bt),nt;if(Ze===null){for(;!Kt.done;bt++,Kt=me.next())Kt=Te(ue,Kt.value,ke),Kt!==null&&(oe=R(Kt,oe,bt),Wt===null?nt=Kt:Wt.sibling=Kt,Wt=Kt);return Ht&&Mi(ue,bt),nt}for(Ze=v(Ze);!Kt.done;bt++,Kt=me.next())Kt=be(Ze,ue,bt,Kt.value,ke),Kt!==null&&(a&&Kt.alternate!==null&&Ze.delete(Kt.key===null?bt:Kt.key),oe=R(Kt,oe,bt),Wt===null?nt=Kt:Wt.sibling=Kt,Wt=Kt);return a&&Ze.forEach(function(dB){return u(ue,dB)}),Ht&&Mi(ue,bt),nt}function ls(ue,oe,me,ke){if(typeof me=="object"&&me!==null&&me.type===_&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case x:e:{for(var nt=me.key;oe!==null;){if(oe.key===nt){if(nt=me.type,nt===_){if(oe.tag===7){p(ue,oe.sibling),ke=k(oe,me.props.children),ke.return=ue,ue=ke;break e}}else if(oe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===A&&Po(nt)===oe.type){p(ue,oe.sibling),ke=k(oe,me.props),_u(ke,me),ke.return=ue,ue=ke;break e}p(ue,oe);break}else u(ue,oe);oe=oe.sibling}me.type===_?(ke=Eo(me.props.children,ue.mode,ke,me.key),ke.return=ue,ue=ke):(ke=Yh(me.type,me.key,me.props,null,ue.mode,ke),_u(ke,me),ke.return=ue,ue=ke)}return H(ue);case C:e:{for(nt=me.key;oe!==null;){if(oe.key===nt)if(oe.tag===4&&oe.stateNode.containerInfo===me.containerInfo&&oe.stateNode.implementation===me.implementation){p(ue,oe.sibling),ke=k(oe,me.children||[]),ke.return=ue,ue=ke;break e}else{p(ue,oe);break}else u(ue,oe);oe=oe.sibling}ke=ux(me,ue.mode,ke),ke.return=ue,ue=ke}return H(ue);case A:return me=Po(me),ls(ue,oe,me,ke)}if($(me))return $e(ue,oe,me,ke);if(F(me)){if(nt=F(me),typeof nt!="function")throw Error(r(150));return me=nt.call(me),at(ue,oe,me,ke)}if(typeof me.then=="function")return ls(ue,oe,sf(me),ke);if(me.$$typeof===S)return ls(ue,oe,Qh(ue,me),ke);nf(ue,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,oe!==null&&oe.tag===6?(p(ue,oe.sibling),ke=k(oe,me),ke.return=ue,ue=ke):(p(ue,oe),ke=cx(me,ue.mode,ke),ke.return=ue,ue=ke),H(ue)):p(ue,oe)}return function(ue,oe,me,ke){try{ju=0;var nt=ls(ue,oe,me,ke);return zl=null,nt}catch(Ze){if(Ze===Bl||Ze===ef)throw Ze;var Wt=tr(29,Ze,null,ue.mode);return Wt.lanes=ke,Wt.return=ue,Wt}}}var Lo=uj(!0),dj=uj(!1),ja=!1;function Sx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jx(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function _a(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ca(a,u,p){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(Xt&2)!==0){var k=v.pending;return k===null?u.next=u:(u.next=k.next,k.next=u),v.pending=u,u=Kh(a),K1(a,null,p),u}return Wh(a,v,u,p),Kh(a)}function Cu(a,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var v=u.lanes;v&=a.pendingLanes,p|=v,u.lanes=p,ot(a,p)}}function _x(a,u){var p=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var k=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};R===null?k=R=H:R=R.next=H,p=p.next}while(p!==null);R===null?k=R=u:R=R.next=u}else k=R=u;p={baseState:v.baseState,firstBaseUpdate:k,lastBaseUpdate:R,shared:v.shared,callbacks:v.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=u}var Cx=!1;function Nu(){if(Cx){var a=Ol;if(a!==null)throw a}}function ku(a,u,p,v){Cx=!1;var k=a.updateQueue;ja=!1;var R=k.firstBaseUpdate,H=k.lastBaseUpdate,Z=k.shared.pending;if(Z!==null){k.shared.pending=null;var ne=Z,pe=ne.next;ne.next=null,H===null?R=pe:H.next=pe,H=ne;var Ce=a.alternate;Ce!==null&&(Ce=Ce.updateQueue,Z=Ce.lastBaseUpdate,Z!==H&&(Z===null?Ce.firstBaseUpdate=pe:Z.next=pe,Ce.lastBaseUpdate=ne))}if(R!==null){var Te=k.baseState;H=0,Ce=pe=ne=null,Z=R;do{var xe=Z.lane&-536870913,be=xe!==Z.lane;if(be?(Bt&xe)===xe:(v&xe)===xe){xe!==0&&xe===Il&&(Cx=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var $e=a,at=Z;xe=u;var ls=p;switch(at.tag){case 1:if($e=at.payload,typeof $e=="function"){Te=$e.call(ls,Te,xe);break e}Te=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=at.payload,xe=typeof $e=="function"?$e.call(ls,Te,xe):$e,xe==null)break e;Te=f({},Te,xe);break e;case 2:ja=!0}}xe=Z.callback,xe!==null&&(a.flags|=64,be&&(a.flags|=8192),be=k.callbacks,be===null?k.callbacks=[xe]:be.push(xe))}else be={lane:xe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ce===null?(pe=Ce=be,ne=Te):Ce=Ce.next=be,H|=xe;if(Z=Z.next,Z===null){if(Z=k.shared.pending,Z===null)break;be=Z,Z=be.next,be.next=null,k.lastBaseUpdate=be,k.shared.pending=null}}while(!0);Ce===null&&(ne=Te),k.baseState=ne,k.firstBaseUpdate=pe,k.lastBaseUpdate=Ce,R===null&&(k.shared.lanes=0),Ta|=H,a.lanes=H,a.memoizedState=Te}}function hj(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function fj(a,u){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)hj(p[a],u)}var Fl=I(null),rf=I(0);function mj(a,u){a=Gi,z(rf,a),z(Fl,u),Gi=a|u.baseLanes}function Nx(){z(rf,Gi),z(Fl,Fl.current)}function kx(){Gi=rf.current,q(Fl),q(rf)}var sr=I(null),Nr=null;function Na(a){var u=a.alternate;z(Os,Os.current&1),z(sr,a),Nr===null&&(u===null||Fl.current!==null||u.memoizedState!==null)&&(Nr=a)}function Ex(a){z(Os,Os.current),z(sr,a),Nr===null&&(Nr=a)}function pj(a){a.tag===22?(z(Os,Os.current),z(sr,a),Nr===null&&(Nr=a)):ka()}function ka(){z(Os,Os.current),z(sr,sr.current)}function nr(a){q(sr),Nr===a&&(Nr=null),q(Os)}var Os=I(0);function af(a){for(var u=a;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Mv(p)||Lv(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Oi=0,vt=null,as=null,$s=null,of=!1,Hl=!1,Io=!1,lf=0,Eu=0,Ul=null,tO=0;function Rs(){throw Error(r(321))}function Ax(a,u){if(u===null)return!1;for(var p=0;p<u.length&&p<a.length;p++)if(!er(a[p],u[p]))return!1;return!0}function Tx(a,u,p,v,k,R){return Oi=R,vt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,V.H=a===null||a.memoizedState===null?Qj:Gx,Io=!1,R=p(v,k),Io=!1,Hl&&(R=xj(u,p,v,k)),gj(a),R}function gj(a){V.H=Du;var u=as!==null&&as.next!==null;if(Oi=0,$s=as=vt=null,of=!1,Eu=0,Ul=null,u)throw Error(r(300));a===null||Vs||(a=a.dependencies,a!==null&&Zh(a)&&(Vs=!0))}function xj(a,u,p,v){vt=a;var k=0;do{if(Hl&&(Ul=null),Eu=0,Hl=!1,25<=k)throw Error(r(301));if(k+=1,$s=as=null,a.updateQueue!=null){var R=a.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}V.H=Jj,R=u(p,v)}while(Hl);return R}function sO(){var a=V.H,u=a.useState()[0];return u=typeof u.then=="function"?Au(u):u,a=a.useState()[0],(as!==null?as.memoizedState:null)!==a&&(vt.flags|=1024),u}function Dx(){var a=lf!==0;return lf=0,a}function Rx(a,u,p){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~p}function Px(a){if(of){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}of=!1}Oi=0,$s=as=vt=null,Hl=!1,Eu=lf=0,Ul=null}function Dn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $s===null?vt.memoizedState=$s=a:$s=$s.next=a,$s}function Bs(){if(as===null){var a=vt.alternate;a=a!==null?a.memoizedState:null}else a=as.next;var u=$s===null?vt.memoizedState:$s.next;if(u!==null)$s=u,as=a;else{if(a===null)throw vt.alternate===null?Error(r(467)):Error(r(310));as=a,a={memoizedState:as.memoizedState,baseState:as.baseState,baseQueue:as.baseQueue,queue:as.queue,next:null},$s===null?vt.memoizedState=$s=a:$s=$s.next=a}return $s}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Au(a){var u=Eu;return Eu+=1,Ul===null&&(Ul=[]),a=oj(Ul,a,u),u=vt,($s===null?u.memoizedState:$s.next)===null&&(u=u.alternate,V.H=u===null||u.memoizedState===null?Qj:Gx),a}function uf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Au(a);if(a.$$typeof===S)return mn(a)}throw Error(r(438,String(a)))}function Mx(a){var u=null,p=vt.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var v=vt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(k){return k.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=cf(),vt.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(a),v=0;v<a;v++)p[v]=M;return u.index++,p}function Bi(a,u){return typeof u=="function"?u(a):u}function df(a){var u=Bs();return Lx(u,as,a)}function Lx(a,u,p){var v=a.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var k=a.baseQueue,R=v.pending;if(R!==null){if(k!==null){var H=k.next;k.next=R.next,R.next=H}u.baseQueue=k=R,v.pending=null}if(R=a.baseState,k===null)a.memoizedState=R;else{u=k.next;var Z=H=null,ne=null,pe=u,Ce=!1;do{var Te=pe.lane&-536870913;if(Te!==pe.lane?(Bt&Te)===Te:(Oi&Te)===Te){var xe=pe.revertLane;if(xe===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Te===Il&&(Ce=!0);else if((Oi&xe)===xe){pe=pe.next,xe===Il&&(Ce=!0);continue}else Te={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ne===null?(Z=ne=Te,H=R):ne=ne.next=Te,vt.lanes|=xe,Ta|=xe;Te=pe.action,Io&&p(R,Te),R=pe.hasEagerState?pe.eagerState:p(R,Te)}else xe={lane:Te,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ne===null?(Z=ne=xe,H=R):ne=ne.next=xe,vt.lanes|=Te,Ta|=Te;pe=pe.next}while(pe!==null&&pe!==u);if(ne===null?H=R:ne.next=Z,!er(R,a.memoizedState)&&(Vs=!0,Ce&&(p=Ol,p!==null)))throw p;a.memoizedState=R,a.baseState=H,a.baseQueue=ne,v.lastRenderedState=R}return k===null&&(v.lanes=0),[a.memoizedState,v.dispatch]}function Ix(a){var u=Bs(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=a;var v=p.dispatch,k=p.pending,R=u.memoizedState;if(k!==null){p.pending=null;var H=k=k.next;do R=a(R,H.action),H=H.next;while(H!==k);er(R,u.memoizedState)||(Vs=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),p.lastRenderedState=R}return[R,v]}function vj(a,u,p){var v=vt,k=Bs(),R=Ht;if(R){if(p===void 0)throw Error(r(407));p=p()}else p=u();var H=!er((as||k).memoizedState,p);if(H&&(k.memoizedState=p,Vs=!0),k=k.queue,zx(wj.bind(null,v,k,a),[a]),k.getSnapshot!==u||H||$s!==null&&$s.memoizedState.tag&1){if(v.flags|=2048,$l(9,{destroy:void 0},bj.bind(null,v,k,p,u),null),hs===null)throw Error(r(349));R||(Oi&127)!==0||yj(v,u,p)}return p}function yj(a,u,p){a.flags|=16384,a={getSnapshot:u,value:p},u=vt.updateQueue,u===null?(u=cf(),vt.updateQueue=u,u.stores=[a]):(p=u.stores,p===null?u.stores=[a]:p.push(a))}function bj(a,u,p,v){u.value=p,u.getSnapshot=v,Sj(u)&&jj(a)}function wj(a,u,p){return p(function(){Sj(u)&&jj(a)})}function Sj(a){var u=a.getSnapshot;a=a.value;try{var p=u();return!er(a,p)}catch{return!0}}function jj(a){var u=ko(a,2);u!==null&&Wn(u,a,2)}function Ox(a){var u=Dn();if(typeof a=="function"){var p=a;if(a=p(),Io){Ke(!0);try{p()}finally{Ke(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:a},u}function _j(a,u,p,v){return a.baseState=p,Lx(a,as,typeof v=="function"?v:Bi)}function nO(a,u,p,v,k){if(mf(a))throw Error(r(485));if(a=u.action,a!==null){var R={payload:k,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){R.listeners.push(H)}};V.T!==null?p(!0):R.isTransition=!1,v(R),p=u.pending,p===null?(R.next=u.pending=R,Cj(u,R)):(R.next=p.next,u.pending=p.next=R)}}function Cj(a,u){var p=u.action,v=u.payload,k=a.state;if(u.isTransition){var R=V.T,H={};V.T=H;try{var Z=p(k,v),ne=V.S;ne!==null&&ne(H,Z),Nj(a,u,Z)}catch(pe){Bx(a,u,pe)}finally{R!==null&&H.types!==null&&(R.types=H.types),V.T=R}}else try{R=p(k,v),Nj(a,u,R)}catch(pe){Bx(a,u,pe)}}function Nj(a,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){kj(a,u,v)},function(v){return Bx(a,u,v)}):kj(a,u,p)}function kj(a,u,p){u.status="fulfilled",u.value=p,Ej(u),a.state=p,u=a.pending,u!==null&&(p=u.next,p===u?a.pending=null:(p=p.next,u.next=p,Cj(a,p)))}function Bx(a,u,p){var v=a.pending;if(a.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=p,Ej(u),u=u.next;while(u!==v)}a.action=null}function Ej(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function Aj(a,u){return u}function Tj(a,u){if(Ht){var p=hs.formState;if(p!==null){e:{var v=vt;if(Ht){if(bs){t:{for(var k=bs,R=Cr;k.nodeType!==8;){if(!R){k=null;break t}if(k=kr(k.nextSibling),k===null){k=null;break t}}R=k.data,k=R==="F!"||R==="F"?k:null}if(k){bs=kr(k.nextSibling),v=k.data==="F!";break e}}wa(v)}v=!1}v&&(u=p[0])}}return p=Dn(),p.memoizedState=p.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aj,lastRenderedState:u},p.queue=v,p=Yj.bind(null,vt,v),v.dispatch=p,v=Ox(!1),R=Vx.bind(null,vt,!1,v.queue),v=Dn(),k={state:u,dispatch:null,action:a,pending:null},v.queue=k,p=nO.bind(null,vt,k,R,p),k.dispatch=p,v.memoizedState=a,[u,p,!1]}function Dj(a){var u=Bs();return Rj(u,as,a)}function Rj(a,u,p){if(u=Lx(a,u,Aj)[0],a=df(Bi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Au(u)}catch(H){throw H===Bl?ef:H}else v=u;u=Bs();var k=u.queue,R=k.dispatch;return p!==u.memoizedState&&(vt.flags|=2048,$l(9,{destroy:void 0},rO.bind(null,k,p),null)),[v,R,a]}function rO(a,u){a.action=u}function Pj(a){var u=Bs(),p=as;if(p!==null)return Rj(u,p,a);Bs(),u=u.memoizedState,p=Bs();var v=p.queue.dispatch;return p.memoizedState=a,[u,v,!1]}function $l(a,u,p,v){return a={tag:a,create:p,deps:v,inst:u,next:null},u=vt.updateQueue,u===null&&(u=cf(),vt.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=a.next=a:(v=p.next,p.next=a,a.next=v,u.lastEffect=a),a}function Mj(){return Bs().memoizedState}function hf(a,u,p,v){var k=Dn();vt.flags|=a,k.memoizedState=$l(1|u,{destroy:void 0},p,v===void 0?null:v)}function ff(a,u,p,v){var k=Bs();v=v===void 0?null:v;var R=k.memoizedState.inst;as!==null&&v!==null&&Ax(v,as.memoizedState.deps)?k.memoizedState=$l(u,R,p,v):(vt.flags|=a,k.memoizedState=$l(1|u,R,p,v))}function Lj(a,u){hf(8390656,8,a,u)}function zx(a,u){ff(2048,8,a,u)}function iO(a){vt.flags|=4;var u=vt.updateQueue;if(u===null)u=cf(),vt.updateQueue=u,u.events=[a];else{var p=u.events;p===null?u.events=[a]:p.push(a)}}function Ij(a){var u=Bs().memoizedState;return iO({ref:u,nextImpl:a}),function(){if((Xt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function Oj(a,u){return ff(4,2,a,u)}function Bj(a,u){return ff(4,4,a,u)}function zj(a,u){if(typeof u=="function"){a=a();var p=u(a);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function Fj(a,u,p){p=p!=null?p.concat([a]):null,ff(4,4,zj.bind(null,u,a),p)}function Fx(){}function Hj(a,u){var p=Bs();u=u===void 0?null:u;var v=p.memoizedState;return u!==null&&Ax(u,v[1])?v[0]:(p.memoizedState=[a,u],a)}function Uj(a,u){var p=Bs();u=u===void 0?null:u;var v=p.memoizedState;if(u!==null&&Ax(u,v[1]))return v[0];if(v=a(),Io){Ke(!0);try{a()}finally{Ke(!1)}}return p.memoizedState=[v,u],v}function Hx(a,u,p){return p===void 0||(Oi&1073741824)!==0&&(Bt&261930)===0?a.memoizedState=u:(a.memoizedState=p,a=$_(),vt.lanes|=a,Ta|=a,p)}function $j(a,u,p,v){return er(p,u)?p:Fl.current!==null?(a=Hx(a,p,v),er(a,u)||(Vs=!0),a):(Oi&42)===0||(Oi&1073741824)!==0&&(Bt&261930)===0?(Vs=!0,a.memoizedState=p):(a=$_(),vt.lanes|=a,Ta|=a,u)}function Vj(a,u,p,v,k){var R=Y.p;Y.p=R!==0&&8>R?R:8;var H=V.T,Z={};V.T=Z,Vx(a,!1,u,p);try{var ne=k(),pe=V.S;if(pe!==null&&pe(Z,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ce=eO(ne,v);Tu(a,u,Ce,ar(a))}else Tu(a,u,v,ar(a))}catch(Te){Tu(a,u,{then:function(){},status:"rejected",reason:Te},ar())}finally{Y.p=R,H!==null&&Z.types!==null&&(H.types=Z.types),V.T=H}}function aO(){}function Ux(a,u,p,v){if(a.tag!==5)throw Error(r(476));var k=Gj(a).queue;Vj(a,k,u,K,p===null?aO:function(){return qj(a),p(v)})}function Gj(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:K},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:p},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function qj(a){var u=Gj(a);u.next===null&&(u=a.alternate.memoizedState),Tu(a,u.next.queue,{},ar())}function $x(){return mn(Wu)}function Wj(){return Bs().memoizedState}function Kj(){return Bs().memoizedState}function oO(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var p=ar();a=_a(p);var v=Ca(u,a,p);v!==null&&(Wn(v,u,p),Cu(v,u,p)),u={cache:vx()},a.payload=u;return}u=u.return}}function lO(a,u,p){var v=ar();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},mf(a)?Xj(u,p):(p=ox(a,u,p,v),p!==null&&(Wn(p,a,v),Zj(p,u,v)))}function Yj(a,u,p){var v=ar();Tu(a,u,p,v)}function Tu(a,u,p,v){var k={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(mf(a))Xj(u,k);else{var R=a.alternate;if(a.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var H=u.lastRenderedState,Z=R(H,p);if(k.hasEagerState=!0,k.eagerState=Z,er(Z,H))return Wh(a,u,k,0),hs===null&&qh(),!1}catch{}if(p=ox(a,u,k,v),p!==null)return Wn(p,a,v),Zj(p,u,v),!0}return!1}function Vx(a,u,p,v){if(v={lane:2,revertLane:Sv(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},mf(a)){if(u)throw Error(r(479))}else u=ox(a,p,v,2),u!==null&&Wn(u,a,2)}function mf(a){var u=a.alternate;return a===vt||u!==null&&u===vt}function Xj(a,u){Hl=of=!0;var p=a.pending;p===null?u.next=u:(u.next=p.next,p.next=u),a.pending=u}function Zj(a,u,p){if((p&4194048)!==0){var v=u.lanes;v&=a.pendingLanes,p|=v,u.lanes=p,ot(a,p)}}var Du={readContext:mn,use:uf,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useLayoutEffect:Rs,useInsertionEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useSyncExternalStore:Rs,useId:Rs,useHostTransitionStatus:Rs,useFormState:Rs,useActionState:Rs,useOptimistic:Rs,useMemoCache:Rs,useCacheRefresh:Rs};Du.useEffectEvent=Rs;var Qj={readContext:mn,use:uf,useCallback:function(a,u){return Dn().memoizedState=[a,u===void 0?null:u],a},useContext:mn,useEffect:Lj,useImperativeHandle:function(a,u,p){p=p!=null?p.concat([a]):null,hf(4194308,4,zj.bind(null,u,a),p)},useLayoutEffect:function(a,u){return hf(4194308,4,a,u)},useInsertionEffect:function(a,u){hf(4,2,a,u)},useMemo:function(a,u){var p=Dn();u=u===void 0?null:u;var v=a();if(Io){Ke(!0);try{a()}finally{Ke(!1)}}return p.memoizedState=[v,u],v},useReducer:function(a,u,p){var v=Dn();if(p!==void 0){var k=p(u);if(Io){Ke(!0);try{p(u)}finally{Ke(!1)}}}else k=u;return v.memoizedState=v.baseState=k,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:k},v.queue=a,a=a.dispatch=lO.bind(null,vt,a),[v.memoizedState,a]},useRef:function(a){var u=Dn();return a={current:a},u.memoizedState=a},useState:function(a){a=Ox(a);var u=a.queue,p=Yj.bind(null,vt,u);return u.dispatch=p,[a.memoizedState,p]},useDebugValue:Fx,useDeferredValue:function(a,u){var p=Dn();return Hx(p,a,u)},useTransition:function(){var a=Ox(!1);return a=Vj.bind(null,vt,a.queue,!0,!1),Dn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,p){var v=vt,k=Dn();if(Ht){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),hs===null)throw Error(r(349));(Bt&127)!==0||yj(v,u,p)}k.memoizedState=p;var R={value:p,getSnapshot:u};return k.queue=R,Lj(wj.bind(null,v,R,a),[a]),v.flags|=2048,$l(9,{destroy:void 0},bj.bind(null,v,R,p,u),null),p},useId:function(){var a=Dn(),u=hs.identifierPrefix;if(Ht){var p=ci,v=li;p=(v&~(1<<32-Xe(v)-1)).toString(32)+p,u="_"+u+"R_"+p,p=lf++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=tO++,u="_"+u+"r_"+p.toString(32)+"_";return a.memoizedState=u},useHostTransitionStatus:$x,useFormState:Tj,useActionState:Tj,useOptimistic:function(a){var u=Dn();u.memoizedState=u.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Vx.bind(null,vt,!0,p),p.dispatch=u,[a,u]},useMemoCache:Mx,useCacheRefresh:function(){return Dn().memoizedState=oO.bind(null,vt)},useEffectEvent:function(a){var u=Dn(),p={impl:a};return u.memoizedState=p,function(){if((Xt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},Gx={readContext:mn,use:uf,useCallback:Hj,useContext:mn,useEffect:zx,useImperativeHandle:Fj,useInsertionEffect:Oj,useLayoutEffect:Bj,useMemo:Uj,useReducer:df,useRef:Mj,useState:function(){return df(Bi)},useDebugValue:Fx,useDeferredValue:function(a,u){var p=Bs();return $j(p,as.memoizedState,a,u)},useTransition:function(){var a=df(Bi)[0],u=Bs().memoizedState;return[typeof a=="boolean"?a:Au(a),u]},useSyncExternalStore:vj,useId:Wj,useHostTransitionStatus:$x,useFormState:Dj,useActionState:Dj,useOptimistic:function(a,u){var p=Bs();return _j(p,as,a,u)},useMemoCache:Mx,useCacheRefresh:Kj};Gx.useEffectEvent=Ij;var Jj={readContext:mn,use:uf,useCallback:Hj,useContext:mn,useEffect:zx,useImperativeHandle:Fj,useInsertionEffect:Oj,useLayoutEffect:Bj,useMemo:Uj,useReducer:Ix,useRef:Mj,useState:function(){return Ix(Bi)},useDebugValue:Fx,useDeferredValue:function(a,u){var p=Bs();return as===null?Hx(p,a,u):$j(p,as.memoizedState,a,u)},useTransition:function(){var a=Ix(Bi)[0],u=Bs().memoizedState;return[typeof a=="boolean"?a:Au(a),u]},useSyncExternalStore:vj,useId:Wj,useHostTransitionStatus:$x,useFormState:Pj,useActionState:Pj,useOptimistic:function(a,u){var p=Bs();return as!==null?_j(p,as,a,u):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:Mx,useCacheRefresh:Kj};Jj.useEffectEvent=Ij;function qx(a,u,p,v){u=a.memoizedState,p=p(v,u),p=p==null?u:f({},u,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Wx={enqueueSetState:function(a,u,p){a=a._reactInternals;var v=ar(),k=_a(v);k.payload=u,p!=null&&(k.callback=p),u=Ca(a,k,v),u!==null&&(Wn(u,a,v),Cu(u,a,v))},enqueueReplaceState:function(a,u,p){a=a._reactInternals;var v=ar(),k=_a(v);k.tag=1,k.payload=u,p!=null&&(k.callback=p),u=Ca(a,k,v),u!==null&&(Wn(u,a,v),Cu(u,a,v))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var p=ar(),v=_a(p);v.tag=2,u!=null&&(v.callback=u),u=Ca(a,v,p),u!==null&&(Wn(u,a,p),Cu(u,a,p))}};function e_(a,u,p,v,k,R,H){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,R,H):u.prototype&&u.prototype.isPureReactComponent?!xu(p,v)||!xu(k,R):!0}function t_(a,u,p,v){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,v),u.state!==a&&Wx.enqueueReplaceState(u,u.state,null)}function Oo(a,u){var p=u;if("ref"in u){p={};for(var v in u)v!=="ref"&&(p[v]=u[v])}if(a=a.defaultProps){p===u&&(p=f({},p));for(var k in a)p[k]===void 0&&(p[k]=a[k])}return p}function s_(a){Gh(a)}function n_(a){console.error(a)}function r_(a){Gh(a)}function pf(a,u){try{var p=a.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function i_(a,u,p){try{var v=a.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function Kx(a,u,p){return p=_a(p),p.tag=3,p.payload={element:null},p.callback=function(){pf(a,u)},p}function a_(a){return a=_a(a),a.tag=3,a}function o_(a,u,p,v){var k=p.type.getDerivedStateFromError;if(typeof k=="function"){var R=v.value;a.payload=function(){return k(R)},a.callback=function(){i_(u,p,v)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(a.callback=function(){i_(u,p,v),typeof k!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var Z=v.stack;this.componentDidCatch(v.value,{componentStack:Z!==null?Z:""})})}function cO(a,u,p,v,k){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=p.alternate,u!==null&&Ll(u,p,k,!0),p=sr.current,p!==null){switch(p.tag){case 31:case 13:return Nr===null?kf():p.alternate===null&&Ps===0&&(Ps=3),p.flags&=-257,p.flags|=65536,p.lanes=k,v===tf?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([v]):u.add(v),yv(a,v,k)),!1;case 22:return p.flags|=65536,v===tf?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([v]):p.add(v)),yv(a,v,k)),!1}throw Error(r(435,p.tag))}return yv(a,v,k),kf(),!1}if(Ht)return u=sr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=k,v!==fx&&(a=Error(r(422),{cause:v}),bu(Sr(a,p)))):(v!==fx&&(u=Error(r(423),{cause:v}),bu(Sr(u,p))),a=a.current.alternate,a.flags|=65536,k&=-k,a.lanes|=k,v=Sr(v,p),k=Kx(a.stateNode,v,k),_x(a,k),Ps!==4&&(Ps=2)),!1;var R=Error(r(520),{cause:v});if(R=Sr(R,p),zu===null?zu=[R]:zu.push(R),Ps!==4&&(Ps=2),u===null)return!0;v=Sr(v,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,a=k&-k,p.lanes|=a,a=Kx(p.stateNode,v,a),_x(p,a),!1;case 1:if(u=p.type,R=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Da===null||!Da.has(R))))return p.flags|=65536,k&=-k,p.lanes|=k,k=a_(k),o_(k,a,p,v),_x(p,k),!1}p=p.return}while(p!==null);return!1}var Yx=Error(r(461)),Vs=!1;function pn(a,u,p,v){u.child=a===null?dj(u,null,p,v):Lo(u,a.child,p,v)}function l_(a,u,p,v,k){p=p.render;var R=u.ref;if("ref"in v){var H={};for(var Z in v)Z!=="ref"&&(H[Z]=v[Z])}else H=v;return Do(u),v=Tx(a,u,p,H,R,k),Z=Dx(),a!==null&&!Vs?(Rx(a,u,k),zi(a,u,k)):(Ht&&Z&&dx(u),u.flags|=1,pn(a,u,v,k),u.child)}function c_(a,u,p,v,k){if(a===null){var R=p.type;return typeof R=="function"&&!lx(R)&&R.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=R,u_(a,u,R,v,k)):(a=Yh(p.type,null,v,u,u.mode,k),a.ref=u.ref,a.return=u,u.child=a)}if(R=a.child,!nv(a,k)){var H=R.memoizedProps;if(p=p.compare,p=p!==null?p:xu,p(H,v)&&a.ref===u.ref)return zi(a,u,k)}return u.flags|=1,a=Pi(R,v),a.ref=u.ref,a.return=u,u.child=a}function u_(a,u,p,v,k){if(a!==null){var R=a.memoizedProps;if(xu(R,v)&&a.ref===u.ref)if(Vs=!1,u.pendingProps=v=R,nv(a,k))(a.flags&131072)!==0&&(Vs=!0);else return u.lanes=a.lanes,zi(a,u,k)}return Xx(a,u,p,v,k)}function d_(a,u,p,v){var k=v.children,R=a!==null?a.memoizedState:null;if(a===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(R=R!==null?R.baseLanes|p:p,a!==null){for(v=u.child=a.child,k=0;v!==null;)k=k|v.lanes|v.childLanes,v=v.sibling;v=k&~R}else v=0,u.child=null;return h_(a,u,R,p,v)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Jh(u,R!==null?R.cachePool:null),R!==null?mj(u,R):Nx(),pj(u);else return v=u.lanes=536870912,h_(a,u,R!==null?R.baseLanes|p:p,p,v)}else R!==null?(Jh(u,R.cachePool),mj(u,R),ka(),u.memoizedState=null):(a!==null&&Jh(u,null),Nx(),ka());return pn(a,u,k,p),u.child}function Ru(a,u){return a!==null&&a.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function h_(a,u,p,v,k){var R=bx();return R=R===null?null:{parent:Us._currentValue,pool:R},u.memoizedState={baseLanes:p,cachePool:R},a!==null&&Jh(u,null),Nx(),pj(u),a!==null&&Ll(a,u,v,!0),u.childLanes=k,null}function gf(a,u){return u=vf({mode:u.mode,children:u.children},a.mode),u.ref=a.ref,a.child=u,u.return=a,u}function f_(a,u,p){return Lo(u,a.child,null,p),a=gf(u,u.pendingProps),a.flags|=2,nr(u),u.memoizedState=null,a}function uO(a,u,p){var v=u.pendingProps,k=(u.flags&128)!==0;if(u.flags&=-129,a===null){if(Ht){if(v.mode==="hidden")return a=gf(u,v),u.lanes=536870912,Ru(null,a);if(Ex(u),(a=bs)?(a=CC(a,Cr),a=a!==null&&a.data==="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:ya!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},p=X1(a),p.return=u,u.child=p,fn=u,bs=null)):a=null,a===null)throw wa(u);return u.lanes=536870912,null}return gf(u,v)}var R=a.memoizedState;if(R!==null){var H=R.dehydrated;if(Ex(u),k)if(u.flags&256)u.flags&=-257,u=f_(a,u,p);else if(u.memoizedState!==null)u.child=a.child,u.flags|=128,u=null;else throw Error(r(558));else if(Vs||Ll(a,u,p,!1),k=(p&a.childLanes)!==0,Vs||k){if(v=hs,v!==null&&(H=is(v,p),H!==0&&H!==R.retryLane))throw R.retryLane=H,ko(a,H),Wn(v,a,H),Yx;kf(),u=f_(a,u,p)}else a=R.treeContext,bs=kr(H.nextSibling),fn=u,Ht=!0,ba=null,Cr=!1,a!==null&&J1(u,a),u=gf(u,v),u.flags|=4096;return u}return a=Pi(a.child,{mode:v.mode,children:v.children}),a.ref=u.ref,u.child=a,a.return=u,a}function xf(a,u){var p=u.ref;if(p===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(a===null||a.ref!==p)&&(u.flags|=4194816)}}function Xx(a,u,p,v,k){return Do(u),p=Tx(a,u,p,v,void 0,k),v=Dx(),a!==null&&!Vs?(Rx(a,u,k),zi(a,u,k)):(Ht&&v&&dx(u),u.flags|=1,pn(a,u,p,k),u.child)}function m_(a,u,p,v,k,R){return Do(u),u.updateQueue=null,p=xj(u,v,p,k),gj(a),v=Dx(),a!==null&&!Vs?(Rx(a,u,R),zi(a,u,R)):(Ht&&v&&dx(u),u.flags|=1,pn(a,u,p,R),u.child)}function p_(a,u,p,v,k){if(Do(u),u.stateNode===null){var R=Dl,H=p.contextType;typeof H=="object"&&H!==null&&(R=mn(H)),R=new p(v,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Wx,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=v,R.state=u.memoizedState,R.refs={},Sx(u),H=p.contextType,R.context=typeof H=="object"&&H!==null?mn(H):Dl,R.state=u.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(qx(u,p,H,v),R.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(H=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),H!==R.state&&Wx.enqueueReplaceState(R,R.state,null),ku(u,v,R,k),Nu(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(a===null){R=u.stateNode;var Z=u.memoizedProps,ne=Oo(p,Z);R.props=ne;var pe=R.context,Ce=p.contextType;H=Dl,typeof Ce=="object"&&Ce!==null&&(H=mn(Ce));var Te=p.getDerivedStateFromProps;Ce=typeof Te=="function"||typeof R.getSnapshotBeforeUpdate=="function",Z=u.pendingProps!==Z,Ce||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Z||pe!==H)&&t_(u,R,v,H),ja=!1;var xe=u.memoizedState;R.state=xe,ku(u,v,R,k),Nu(),pe=u.memoizedState,Z||xe!==pe||ja?(typeof Te=="function"&&(qx(u,p,Te,v),pe=u.memoizedState),(ne=ja||e_(u,p,ne,v,xe,pe,H))?(Ce||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=pe),R.props=v,R.state=pe,R.context=H,v=ne):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{R=u.stateNode,jx(a,u),H=u.memoizedProps,Ce=Oo(p,H),R.props=Ce,Te=u.pendingProps,xe=R.context,pe=p.contextType,ne=Dl,typeof pe=="object"&&pe!==null&&(ne=mn(pe)),Z=p.getDerivedStateFromProps,(pe=typeof Z=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==Te||xe!==ne)&&t_(u,R,v,ne),ja=!1,xe=u.memoizedState,R.state=xe,ku(u,v,R,k),Nu();var be=u.memoizedState;H!==Te||xe!==be||ja||a!==null&&a.dependencies!==null&&Zh(a.dependencies)?(typeof Z=="function"&&(qx(u,p,Z,v),be=u.memoizedState),(Ce=ja||e_(u,p,Ce,v,xe,be,ne)||a!==null&&a.dependencies!==null&&Zh(a.dependencies))?(pe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(v,be,ne),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(v,be,ne)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===a.memoizedProps&&xe===a.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&xe===a.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=be),R.props=v,R.state=be,R.context=ne,v=Ce):(typeof R.componentDidUpdate!="function"||H===a.memoizedProps&&xe===a.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&xe===a.memoizedState||(u.flags|=1024),v=!1)}return R=v,xf(a,u),v=(u.flags&128)!==0,R||v?(R=u.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,a!==null&&v?(u.child=Lo(u,a.child,null,k),u.child=Lo(u,null,p,k)):pn(a,u,p,k),u.memoizedState=R.state,a=u.child):a=zi(a,u,k),a}function g_(a,u,p,v){return Ao(),u.flags|=256,pn(a,u,p,v),u.child}var Zx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qx(a){return{baseLanes:a,cachePool:ij()}}function Jx(a,u,p){return a=a!==null?a.childLanes&~p:0,u&&(a|=ir),a}function x_(a,u,p){var v=u.pendingProps,k=!1,R=(u.flags&128)!==0,H;if((H=R)||(H=a!==null&&a.memoizedState===null?!1:(Os.current&2)!==0),H&&(k=!0,u.flags&=-129),H=(u.flags&32)!==0,u.flags&=-33,a===null){if(Ht){if(k?Na(u):ka(),(a=bs)?(a=CC(a,Cr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:ya!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},p=X1(a),p.return=u,u.child=p,fn=u,bs=null)):a=null,a===null)throw wa(u);return Lv(a)?u.lanes=32:u.lanes=536870912,null}var Z=v.children;return v=v.fallback,k?(ka(),k=u.mode,Z=vf({mode:"hidden",children:Z},k),v=Eo(v,k,p,null),Z.return=u,v.return=u,Z.sibling=v,u.child=Z,v=u.child,v.memoizedState=Qx(p),v.childLanes=Jx(a,H,p),u.memoizedState=Zx,Ru(null,v)):(Na(u),ev(u,Z))}var ne=a.memoizedState;if(ne!==null&&(Z=ne.dehydrated,Z!==null)){if(R)u.flags&256?(Na(u),u.flags&=-257,u=tv(a,u,p)):u.memoizedState!==null?(ka(),u.child=a.child,u.flags|=128,u=null):(ka(),Z=v.fallback,k=u.mode,v=vf({mode:"visible",children:v.children},k),Z=Eo(Z,k,p,null),Z.flags|=2,v.return=u,Z.return=u,v.sibling=Z,u.child=v,Lo(u,a.child,null,p),v=u.child,v.memoizedState=Qx(p),v.childLanes=Jx(a,H,p),u.memoizedState=Zx,u=Ru(null,v));else if(Na(u),Lv(Z)){if(H=Z.nextSibling&&Z.nextSibling.dataset,H)var pe=H.dgst;H=pe,v=Error(r(419)),v.stack="",v.digest=H,bu({value:v,source:null,stack:null}),u=tv(a,u,p)}else if(Vs||Ll(a,u,p,!1),H=(p&a.childLanes)!==0,Vs||H){if(H=hs,H!==null&&(v=is(H,p),v!==0&&v!==ne.retryLane))throw ne.retryLane=v,ko(a,v),Wn(H,a,v),Yx;Mv(Z)||kf(),u=tv(a,u,p)}else Mv(Z)?(u.flags|=192,u.child=a.child,u=null):(a=ne.treeContext,bs=kr(Z.nextSibling),fn=u,Ht=!0,ba=null,Cr=!1,a!==null&&J1(u,a),u=ev(u,v.children),u.flags|=4096);return u}return k?(ka(),Z=v.fallback,k=u.mode,ne=a.child,pe=ne.sibling,v=Pi(ne,{mode:"hidden",children:v.children}),v.subtreeFlags=ne.subtreeFlags&65011712,pe!==null?Z=Pi(pe,Z):(Z=Eo(Z,k,p,null),Z.flags|=2),Z.return=u,v.return=u,v.sibling=Z,u.child=v,Ru(null,v),v=u.child,Z=a.child.memoizedState,Z===null?Z=Qx(p):(k=Z.cachePool,k!==null?(ne=Us._currentValue,k=k.parent!==ne?{parent:ne,pool:ne}:k):k=ij(),Z={baseLanes:Z.baseLanes|p,cachePool:k}),v.memoizedState=Z,v.childLanes=Jx(a,H,p),u.memoizedState=Zx,Ru(a.child,v)):(Na(u),p=a.child,a=p.sibling,p=Pi(p,{mode:"visible",children:v.children}),p.return=u,p.sibling=null,a!==null&&(H=u.deletions,H===null?(u.deletions=[a],u.flags|=16):H.push(a)),u.child=p,u.memoizedState=null,p)}function ev(a,u){return u=vf({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function vf(a,u){return a=tr(22,a,null,u),a.lanes=0,a}function tv(a,u,p){return Lo(u,a.child,null,p),a=ev(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function v_(a,u,p){a.lanes|=u;var v=a.alternate;v!==null&&(v.lanes|=u),gx(a.return,u,p)}function sv(a,u,p,v,k,R){var H=a.memoizedState;H===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:k,treeForkCount:R}:(H.isBackwards=u,H.rendering=null,H.renderingStartTime=0,H.last=v,H.tail=p,H.tailMode=k,H.treeForkCount=R)}function y_(a,u,p){var v=u.pendingProps,k=v.revealOrder,R=v.tail;v=v.children;var H=Os.current,Z=(H&2)!==0;if(Z?(H=H&1|2,u.flags|=128):H&=1,z(Os,H),pn(a,u,v,p),v=Ht?yu:0,!Z&&a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&v_(a,p,u);else if(a.tag===19)v_(a,p,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(k){case"forwards":for(p=u.child,k=null;p!==null;)a=p.alternate,a!==null&&af(a)===null&&(k=p),p=p.sibling;p=k,p===null?(k=u.child,u.child=null):(k=p.sibling,p.sibling=null),sv(u,!1,k,p,R,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,k=u.child,u.child=null;k!==null;){if(a=k.alternate,a!==null&&af(a)===null){u.child=k;break}a=k.sibling,k.sibling=p,p=k,k=a}sv(u,!0,p,null,R,v);break;case"together":sv(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function zi(a,u,p){if(a!==null&&(u.dependencies=a.dependencies),Ta|=u.lanes,(p&u.childLanes)===0)if(a!==null){if(Ll(a,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,p=Pi(a,a.pendingProps),u.child=p,p.return=u;a.sibling!==null;)a=a.sibling,p=p.sibling=Pi(a,a.pendingProps),p.return=u;p.sibling=null}return u.child}function nv(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Zh(a)))}function dO(a,u,p){switch(u.tag){case 3:W(u,u.stateNode.containerInfo),Sa(u,Us,a.memoizedState.cache),Ao();break;case 27:case 5:se(u);break;case 4:W(u,u.stateNode.containerInfo);break;case 10:Sa(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Ex(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Na(u),u.flags|=128,null):(p&u.child.childLanes)!==0?x_(a,u,p):(Na(u),a=zi(a,u,p),a!==null?a.sibling:null);Na(u);break;case 19:var k=(a.flags&128)!==0;if(v=(p&u.childLanes)!==0,v||(Ll(a,u,p,!1),v=(p&u.childLanes)!==0),k){if(v)return y_(a,u,p);u.flags|=128}if(k=u.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),z(Os,Os.current),v)break;return null;case 22:return u.lanes=0,d_(a,u,p,u.pendingProps);case 24:Sa(u,Us,a.memoizedState.cache)}return zi(a,u,p)}function b_(a,u,p){if(a!==null)if(a.memoizedProps!==u.pendingProps)Vs=!0;else{if(!nv(a,p)&&(u.flags&128)===0)return Vs=!1,dO(a,u,p);Vs=(a.flags&131072)!==0}else Vs=!1,Ht&&(u.flags&1048576)!==0&&Q1(u,yu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(a=Po(u.elementType),u.type=a,typeof a=="function")lx(a)?(v=Oo(a,v),u.tag=1,u=p_(null,u,a,v,p)):(u.tag=0,u=Xx(null,u,a,v,p));else{if(a!=null){var k=a.$$typeof;if(k===N){u.tag=11,u=l_(null,u,a,v,p);break e}else if(k===D){u.tag=14,u=c_(null,u,a,v,p);break e}}throw u=G(a)||a,Error(r(306,u,""))}}return u;case 0:return Xx(a,u,u.type,u.pendingProps,p);case 1:return v=u.type,k=Oo(v,u.pendingProps),p_(a,u,v,k,p);case 3:e:{if(W(u,u.stateNode.containerInfo),a===null)throw Error(r(387));v=u.pendingProps;var R=u.memoizedState;k=R.element,jx(a,u),ku(u,v,null,p);var H=u.memoizedState;if(v=H.cache,Sa(u,Us,v),v!==R.cache&&xx(u,[Us],p,!0),Nu(),v=H.element,R.isDehydrated)if(R={element:v,isDehydrated:!1,cache:H.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=g_(a,u,v,p);break e}else if(v!==k){k=Sr(Error(r(424)),u),bu(k),u=g_(a,u,v,p);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(bs=kr(a.firstChild),fn=u,Ht=!0,ba=null,Cr=!0,p=dj(u,null,v,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Ao(),v===k){u=zi(a,u,p);break e}pn(a,u,v,p)}u=u.child}return u;case 26:return xf(a,u),a===null?(p=DC(u.type,null,u.pendingProps,null))?u.memoizedState=p:Ht||(p=u.type,a=u.pendingProps,v=Mf(re.current).createElement(p),v[Ds]=u,v[jn]=a,gn(v,p,a),an(v),u.stateNode=v):u.memoizedState=DC(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return se(u),a===null&&Ht&&(v=u.stateNode=EC(u.type,u.pendingProps,re.current),fn=u,Cr=!0,k=bs,La(u.type)?(Iv=k,bs=kr(v.firstChild)):bs=k),pn(a,u,u.pendingProps.children,p),xf(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Ht&&((k=v=bs)&&(v=HO(v,u.type,u.pendingProps,Cr),v!==null?(u.stateNode=v,fn=u,bs=kr(v.firstChild),Cr=!1,k=!0):k=!1),k||wa(u)),se(u),k=u.type,R=u.pendingProps,H=a!==null?a.memoizedProps:null,v=R.children,Dv(k,R)?v=null:H!==null&&Dv(k,H)&&(u.flags|=32),u.memoizedState!==null&&(k=Tx(a,u,sO,null,null,p),Wu._currentValue=k),xf(a,u),pn(a,u,v,p),u.child;case 6:return a===null&&Ht&&((a=p=bs)&&(p=UO(p,u.pendingProps,Cr),p!==null?(u.stateNode=p,fn=u,bs=null,a=!0):a=!1),a||wa(u)),null;case 13:return x_(a,u,p);case 4:return W(u,u.stateNode.containerInfo),v=u.pendingProps,a===null?u.child=Lo(u,null,v,p):pn(a,u,v,p),u.child;case 11:return l_(a,u,u.type,u.pendingProps,p);case 7:return pn(a,u,u.pendingProps,p),u.child;case 8:return pn(a,u,u.pendingProps.children,p),u.child;case 12:return pn(a,u,u.pendingProps.children,p),u.child;case 10:return v=u.pendingProps,Sa(u,u.type,v.value),pn(a,u,v.children,p),u.child;case 9:return k=u.type._context,v=u.pendingProps.children,Do(u),k=mn(k),v=v(k),u.flags|=1,pn(a,u,v,p),u.child;case 14:return c_(a,u,u.type,u.pendingProps,p);case 15:return u_(a,u,u.type,u.pendingProps,p);case 19:return y_(a,u,p);case 31:return uO(a,u,p);case 22:return d_(a,u,p,u.pendingProps);case 24:return Do(u),v=mn(Us),a===null?(k=bx(),k===null&&(k=hs,R=vx(),k.pooledCache=R,R.refCount++,R!==null&&(k.pooledCacheLanes|=p),k=R),u.memoizedState={parent:v,cache:k},Sx(u),Sa(u,Us,k)):((a.lanes&p)!==0&&(jx(a,u),ku(u,null,null,p),Nu()),k=a.memoizedState,R=u.memoizedState,k.parent!==v?(k={parent:v,cache:v},u.memoizedState=k,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=k),Sa(u,Us,v)):(v=R.cache,Sa(u,Us,v),v!==k.cache&&xx(u,[Us],p,!0))),pn(a,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Fi(a){a.flags|=4}function rv(a,u,p,v,k){if((u=(a.mode&32)!==0)&&(u=!1),u){if(a.flags|=16777216,(k&335544128)===k)if(a.stateNode.complete)a.flags|=8192;else if(W_())a.flags|=8192;else throw Mo=tf,wx}else a.flags&=-16777217}function w_(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!IC(u))if(W_())a.flags|=8192;else throw Mo=tf,wx}function yf(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?yt():536870912,a.lanes|=u,Wl|=u)}function Pu(a,u){if(!Ht)switch(a.tailMode){case"hidden":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function ws(a){var u=a.alternate!==null&&a.alternate.child===a.child,p=0,v=0;if(u)for(var k=a.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags&65011712,v|=k.flags&65011712,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags,v|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=v,a.childLanes=p,u}function hO(a,u,p){var v=u.pendingProps;switch(hx(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ws(u),null;case 1:return ws(u),null;case 3:return p=u.stateNode,v=null,a!==null&&(v=a.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),Ii(Us),Q(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(Ml(u)?Fi(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,mx())),ws(u),null;case 26:var k=u.type,R=u.memoizedState;return a===null?(Fi(u),R!==null?(ws(u),w_(u,R)):(ws(u),rv(u,k,null,v,p))):R?R!==a.memoizedState?(Fi(u),ws(u),w_(u,R)):(ws(u),u.flags&=-16777217):(a=a.memoizedProps,a!==v&&Fi(u),ws(u),rv(u,k,a,v,p)),null;case 27:if(he(u),p=re.current,k=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==v&&Fi(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return ws(u),null}a=ee.current,Ml(u)?ej(u):(a=EC(k,v,p),u.stateNode=a,Fi(u))}return ws(u),null;case 5:if(he(u),k=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==v&&Fi(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return ws(u),null}if(R=ee.current,Ml(u))ej(u);else{var H=Mf(re.current);switch(R){case 1:R=H.createElementNS("http://www.w3.org/2000/svg",k);break;case 2:R=H.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;default:switch(k){case"svg":R=H.createElementNS("http://www.w3.org/2000/svg",k);break;case"math":R=H.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;case"script":R=H.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof v.is=="string"?H.createElement("select",{is:v.is}):H.createElement("select"),v.multiple?R.multiple=!0:v.size&&(R.size=v.size);break;default:R=typeof v.is=="string"?H.createElement(k,{is:v.is}):H.createElement(k)}}R[Ds]=u,R[jn]=v;e:for(H=u.child;H!==null;){if(H.tag===5||H.tag===6)R.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===u)break e;for(;H.sibling===null;){if(H.return===null||H.return===u)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}u.stateNode=R;e:switch(gn(R,k,v),k){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Fi(u)}}return ws(u),rv(u,u.type,a===null?null:a.memoizedProps,u.pendingProps,p),null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==v&&Fi(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(a=re.current,Ml(u)){if(a=u.stateNode,p=u.memoizedProps,v=null,k=fn,k!==null)switch(k.tag){case 27:case 5:v=k.memoizedProps}a[Ds]=u,a=!!(a.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||xC(a.nodeValue,p)),a||wa(u,!0)}else a=Mf(a).createTextNode(v),a[Ds]=u,u.stateNode=a}return ws(u),null;case 31:if(p=u.memoizedState,a===null||a.memoizedState!==null){if(v=Ml(u),p!==null){if(a===null){if(!v)throw Error(r(318));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Ds]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ws(u),a=!1}else p=mx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),a=!0;if(!a)return u.flags&256?(nr(u),u):(nr(u),null);if((u.flags&128)!==0)throw Error(r(558))}return ws(u),null;case 13:if(v=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(k=Ml(u),v!==null&&v.dehydrated!==null){if(a===null){if(!k)throw Error(r(318));if(k=u.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[Ds]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ws(u),k=!1}else k=mx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=k),k=!0;if(!k)return u.flags&256?(nr(u),u):(nr(u),null)}return nr(u),(u.flags&128)!==0?(u.lanes=p,u):(p=v!==null,a=a!==null&&a.memoizedState!==null,p&&(v=u.child,k=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(k=v.alternate.memoizedState.cachePool.pool),R=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==k&&(v.flags|=2048)),p!==a&&p&&(u.child.flags|=8192),yf(u,u.updateQueue),ws(u),null);case 4:return Q(),a===null&&Nv(u.stateNode.containerInfo),ws(u),null;case 10:return Ii(u.type),ws(u),null;case 19:if(q(Os),v=u.memoizedState,v===null)return ws(u),null;if(k=(u.flags&128)!==0,R=v.rendering,R===null)if(k)Pu(v,!1);else{if(Ps!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(R=af(a),R!==null){for(u.flags|=128,Pu(v,!1),a=R.updateQueue,u.updateQueue=a,yf(u,a),u.subtreeFlags=0,a=p,p=u.child;p!==null;)Y1(p,a),p=p.sibling;return z(Os,Os.current&1|2),Ht&&Mi(u,v.treeForkCount),u.child}a=a.sibling}v.tail!==null&&st()>_f&&(u.flags|=128,k=!0,Pu(v,!1),u.lanes=4194304)}else{if(!k)if(a=af(R),a!==null){if(u.flags|=128,k=!0,a=a.updateQueue,u.updateQueue=a,yf(u,a),Pu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!R.alternate&&!Ht)return ws(u),null}else 2*st()-v.renderingStartTime>_f&&p!==536870912&&(u.flags|=128,k=!0,Pu(v,!1),u.lanes=4194304);v.isBackwards?(R.sibling=u.child,u.child=R):(a=v.last,a!==null?a.sibling=R:u.child=R,v.last=R)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=st(),a.sibling=null,p=Os.current,z(Os,k?p&1|2:p&1),Ht&&Mi(u,v.treeForkCount),a):(ws(u),null);case 22:case 23:return nr(u),kx(),v=u.memoizedState!==null,a!==null?a.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(p&536870912)!==0&&(u.flags&128)===0&&(ws(u),u.subtreeFlags&6&&(u.flags|=8192)):ws(u),p=u.updateQueue,p!==null&&yf(u,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==p&&(u.flags|=2048),a!==null&&q(Ro),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ii(Us),ws(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function fO(a,u){switch(hx(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ii(Us),Q(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return he(u),null;case 31:if(u.memoizedState!==null){if(nr(u),u.alternate===null)throw Error(r(340));Ao()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 13:if(nr(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ao()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return q(Os),null;case 4:return Q(),null;case 10:return Ii(u.type),null;case 22:case 23:return nr(u),kx(),a!==null&&q(Ro),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Ii(Us),null;case 25:return null;default:return null}}function S_(a,u){switch(hx(u),u.tag){case 3:Ii(Us),Q();break;case 26:case 27:case 5:he(u);break;case 4:Q();break;case 31:u.memoizedState!==null&&nr(u);break;case 13:nr(u);break;case 19:q(Os);break;case 10:Ii(u.type);break;case 22:case 23:nr(u),kx(),a!==null&&q(Ro);break;case 24:Ii(Us)}}function Mu(a,u){try{var p=u.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var k=v.next;p=k;do{if((p.tag&a)===a){v=void 0;var R=p.create,H=p.inst;v=R(),H.destroy=v}p=p.next}while(p!==k)}}catch(Z){ns(u,u.return,Z)}}function Ea(a,u,p){try{var v=u.updateQueue,k=v!==null?v.lastEffect:null;if(k!==null){var R=k.next;v=R;do{if((v.tag&a)===a){var H=v.inst,Z=H.destroy;if(Z!==void 0){H.destroy=void 0,k=u;var ne=p,pe=Z;try{pe()}catch(Ce){ns(k,ne,Ce)}}}v=v.next}while(v!==R)}}catch(Ce){ns(u,u.return,Ce)}}function j_(a){var u=a.updateQueue;if(u!==null){var p=a.stateNode;try{fj(u,p)}catch(v){ns(a,a.return,v)}}}function __(a,u,p){p.props=Oo(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(v){ns(a,u,v)}}function Lu(a,u){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var v=a.stateNode;break;case 30:v=a.stateNode;break;default:v=a.stateNode}typeof p=="function"?a.refCleanup=p(v):p.current=v}}catch(k){ns(a,u,k)}}function ui(a,u){var p=a.ref,v=a.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(k){ns(a,u,k)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(k){ns(a,u,k)}else p.current=null}function C_(a){var u=a.type,p=a.memoizedProps,v=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(k){ns(a,a.return,k)}}function iv(a,u,p){try{var v=a.stateNode;LO(v,a.type,p,u),v[jn]=u}catch(k){ns(a,a.return,k)}}function N_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&La(a.type)||a.tag===4}function av(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||N_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&La(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ov(a,u,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(a),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Di));else if(v!==4&&(v===27&&La(a.type)&&(p=a.stateNode,u=null),a=a.child,a!==null))for(ov(a,u,p),a=a.sibling;a!==null;)ov(a,u,p),a=a.sibling}function bf(a,u,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?p.insertBefore(a,u):p.appendChild(a);else if(v!==4&&(v===27&&La(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(bf(a,u,p),a=a.sibling;a!==null;)bf(a,u,p),a=a.sibling}function k_(a){var u=a.stateNode,p=a.memoizedProps;try{for(var v=a.type,k=u.attributes;k.length;)u.removeAttributeNode(k[0]);gn(u,v,p),u[Ds]=a,u[jn]=p}catch(R){ns(a,a.return,R)}}var Hi=!1,Gs=!1,lv=!1,E_=typeof WeakSet=="function"?WeakSet:Set,on=null;function mO(a,u){if(a=a.containerInfo,Av=Hf,a=F1(a),tx(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var k=v.anchorOffset,R=v.focusNode;v=v.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break e}var H=0,Z=-1,ne=-1,pe=0,Ce=0,Te=a,xe=null;t:for(;;){for(var be;Te!==p||k!==0&&Te.nodeType!==3||(Z=H+k),Te!==R||v!==0&&Te.nodeType!==3||(ne=H+v),Te.nodeType===3&&(H+=Te.nodeValue.length),(be=Te.firstChild)!==null;)xe=Te,Te=be;for(;;){if(Te===a)break t;if(xe===p&&++pe===k&&(Z=H),xe===R&&++Ce===v&&(ne=H),(be=Te.nextSibling)!==null)break;Te=xe,xe=Te.parentNode}Te=be}p=Z===-1||ne===-1?null:{start:Z,end:ne}}else p=null}p=p||{start:0,end:0}}else p=null;for(Tv={focusedElem:a,selectionRange:p},Hf=!1,on=u;on!==null;)if(u=on,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,on=a;else for(;on!==null;){switch(u=on,R=u.alternate,a=u.flags,u.tag){case 0:if((a&4)!==0&&(a=u.updateQueue,a=a!==null?a.events:null,a!==null))for(p=0;p<a.length;p++)k=a[p],k.ref.impl=k.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&R!==null){a=void 0,p=u,k=R.memoizedProps,R=R.memoizedState,v=p.stateNode;try{var $e=Oo(p.type,k);a=v.getSnapshotBeforeUpdate($e,R),v.__reactInternalSnapshotBeforeUpdate=a}catch(at){ns(p,p.return,at)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,p=a.nodeType,p===9)Pv(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Pv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,on=a;break}on=u.return}}function A_(a,u,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:$i(a,p),v&4&&Mu(5,p);break;case 1:if($i(a,p),v&4)if(a=p.stateNode,u===null)try{a.componentDidMount()}catch(H){ns(p,p.return,H)}else{var k=Oo(p.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(k,u,a.__reactInternalSnapshotBeforeUpdate)}catch(H){ns(p,p.return,H)}}v&64&&j_(p),v&512&&Lu(p,p.return);break;case 3:if($i(a,p),v&64&&(a=p.updateQueue,a!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{fj(a,u)}catch(H){ns(p,p.return,H)}}break;case 27:u===null&&v&4&&k_(p);case 26:case 5:$i(a,p),u===null&&v&4&&C_(p),v&512&&Lu(p,p.return);break;case 12:$i(a,p);break;case 31:$i(a,p),v&4&&R_(a,p);break;case 13:$i(a,p),v&4&&P_(a,p),v&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=jO.bind(null,p),$O(a,p))));break;case 22:if(v=p.memoizedState!==null||Hi,!v){u=u!==null&&u.memoizedState!==null||Gs,k=Hi;var R=Gs;Hi=v,(Gs=u)&&!R?Vi(a,p,(p.subtreeFlags&8772)!==0):$i(a,p),Hi=k,Gs=R}break;case 30:break;default:$i(a,p)}}function T_(a){var u=a.alternate;u!==null&&(a.alternate=null,T_(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&Bg(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var _s=null,$n=!1;function Ui(a,u,p){for(p=p.child;p!==null;)D_(a,u,p),p=p.sibling}function D_(a,u,p){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Ct,p)}catch{}switch(p.tag){case 26:Gs||ui(p,u),Ui(a,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Gs||ui(p,u);var v=_s,k=$n;La(p.type)&&(_s=p.stateNode,$n=!1),Ui(a,u,p),Vu(p.stateNode),_s=v,$n=k;break;case 5:Gs||ui(p,u);case 6:if(v=_s,k=$n,_s=null,Ui(a,u,p),_s=v,$n=k,_s!==null)if($n)try{(_s.nodeType===9?_s.body:_s.nodeName==="HTML"?_s.ownerDocument.body:_s).removeChild(p.stateNode)}catch(R){ns(p,u,R)}else try{_s.removeChild(p.stateNode)}catch(R){ns(p,u,R)}break;case 18:_s!==null&&($n?(a=_s,jC(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),tc(a)):jC(_s,p.stateNode));break;case 4:v=_s,k=$n,_s=p.stateNode.containerInfo,$n=!0,Ui(a,u,p),_s=v,$n=k;break;case 0:case 11:case 14:case 15:Ea(2,p,u),Gs||Ea(4,p,u),Ui(a,u,p);break;case 1:Gs||(ui(p,u),v=p.stateNode,typeof v.componentWillUnmount=="function"&&__(p,u,v)),Ui(a,u,p);break;case 21:Ui(a,u,p);break;case 22:Gs=(v=Gs)||p.memoizedState!==null,Ui(a,u,p),Gs=v;break;default:Ui(a,u,p)}}function R_(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{tc(a)}catch(p){ns(u,u.return,p)}}}function P_(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{tc(a)}catch(p){ns(u,u.return,p)}}function pO(a){switch(a.tag){case 31:case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new E_),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new E_),u;default:throw Error(r(435,a.tag))}}function wf(a,u){var p=pO(a);u.forEach(function(v){if(!p.has(v)){p.add(v);var k=_O.bind(null,a,v);v.then(k,k)}})}function Vn(a,u){var p=u.deletions;if(p!==null)for(var v=0;v<p.length;v++){var k=p[v],R=a,H=u,Z=H;e:for(;Z!==null;){switch(Z.tag){case 27:if(La(Z.type)){_s=Z.stateNode,$n=!1;break e}break;case 5:_s=Z.stateNode,$n=!1;break e;case 3:case 4:_s=Z.stateNode.containerInfo,$n=!0;break e}Z=Z.return}if(_s===null)throw Error(r(160));D_(R,H,k),_s=null,$n=!1,R=k.alternate,R!==null&&(R.return=null),k.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)M_(u,a),u=u.sibling}var Hr=null;function M_(a,u){var p=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Vn(u,a),Gn(a),v&4&&(Ea(3,a,a.return),Mu(3,a),Ea(5,a,a.return));break;case 1:Vn(u,a),Gn(a),v&512&&(Gs||p===null||ui(p,p.return)),v&64&&Hi&&(a=a.updateQueue,a!==null&&(v=a.callbacks,v!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var k=Hr;if(Vn(u,a),Gn(a),v&512&&(Gs||p===null||ui(p,p.return)),v&4){var R=p!==null?p.memoizedState:null;if(v=a.memoizedState,p===null)if(v===null)if(a.stateNode===null){e:{v=a.type,p=a.memoizedProps,k=k.ownerDocument||k;t:switch(v){case"title":R=k.getElementsByTagName("title")[0],(!R||R[lu]||R[Ds]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=k.createElement(v),k.head.insertBefore(R,k.querySelector("head > title"))),gn(R,v,p),R[Ds]=a,an(R),v=R;break e;case"link":var H=MC("link","href",k).get(v+(p.href||""));if(H){for(var Z=0;Z<H.length;Z++)if(R=H[Z],R.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&R.getAttribute("rel")===(p.rel==null?null:p.rel)&&R.getAttribute("title")===(p.title==null?null:p.title)&&R.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(Z,1);break t}}R=k.createElement(v),gn(R,v,p),k.head.appendChild(R);break;case"meta":if(H=MC("meta","content",k).get(v+(p.content||""))){for(Z=0;Z<H.length;Z++)if(R=H[Z],R.getAttribute("content")===(p.content==null?null:""+p.content)&&R.getAttribute("name")===(p.name==null?null:p.name)&&R.getAttribute("property")===(p.property==null?null:p.property)&&R.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&R.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(Z,1);break t}}R=k.createElement(v),gn(R,v,p),k.head.appendChild(R);break;default:throw Error(r(468,v))}R[Ds]=a,an(R),v=R}a.stateNode=v}else LC(k,a.type,a.stateNode);else a.stateNode=PC(k,v,a.memoizedProps);else R!==v?(R===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):R.count--,v===null?LC(k,a.type,a.stateNode):PC(k,v,a.memoizedProps)):v===null&&a.stateNode!==null&&iv(a,a.memoizedProps,p.memoizedProps)}break;case 27:Vn(u,a),Gn(a),v&512&&(Gs||p===null||ui(p,p.return)),p!==null&&v&4&&iv(a,a.memoizedProps,p.memoizedProps);break;case 5:if(Vn(u,a),Gn(a),v&512&&(Gs||p===null||ui(p,p.return)),a.flags&32){k=a.stateNode;try{_l(k,"")}catch($e){ns(a,a.return,$e)}}v&4&&a.stateNode!=null&&(k=a.memoizedProps,iv(a,k,p!==null?p.memoizedProps:k)),v&1024&&(lv=!0);break;case 6:if(Vn(u,a),Gn(a),v&4){if(a.stateNode===null)throw Error(r(162));v=a.memoizedProps,p=a.stateNode;try{p.nodeValue=v}catch($e){ns(a,a.return,$e)}}break;case 3:if(Of=null,k=Hr,Hr=Lf(u.containerInfo),Vn(u,a),Hr=k,Gn(a),v&4&&p!==null&&p.memoizedState.isDehydrated)try{tc(u.containerInfo)}catch($e){ns(a,a.return,$e)}lv&&(lv=!1,L_(a));break;case 4:v=Hr,Hr=Lf(a.stateNode.containerInfo),Vn(u,a),Gn(a),Hr=v;break;case 12:Vn(u,a),Gn(a);break;case 31:Vn(u,a),Gn(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,wf(a,v)));break;case 13:Vn(u,a),Gn(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(jf=st()),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,wf(a,v)));break;case 22:k=a.memoizedState!==null;var ne=p!==null&&p.memoizedState!==null,pe=Hi,Ce=Gs;if(Hi=pe||k,Gs=Ce||ne,Vn(u,a),Gs=Ce,Hi=pe,Gn(a),v&8192)e:for(u=a.stateNode,u._visibility=k?u._visibility&-2:u._visibility|1,k&&(p===null||ne||Hi||Gs||Bo(a)),p=null,u=a;;){if(u.tag===5||u.tag===26){if(p===null){ne=p=u;try{if(R=ne.stateNode,k)H=R.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{Z=ne.stateNode;var Te=ne.memoizedProps.style,xe=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;Z.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch($e){ns(ne,ne.return,$e)}}}else if(u.tag===6){if(p===null){ne=u;try{ne.stateNode.nodeValue=k?"":ne.memoizedProps}catch($e){ns(ne,ne.return,$e)}}}else if(u.tag===18){if(p===null){ne=u;try{var be=ne.stateNode;k?_C(be,!0):_C(ne.stateNode,!1)}catch($e){ns(ne,ne.return,$e)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=a.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,wf(a,p))));break;case 19:Vn(u,a),Gn(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,wf(a,v)));break;case 30:break;case 21:break;default:Vn(u,a),Gn(a)}}function Gn(a){var u=a.flags;if(u&2){try{for(var p,v=a.return;v!==null;){if(N_(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var k=p.stateNode,R=av(a);bf(a,R,k);break;case 5:var H=p.stateNode;p.flags&32&&(_l(H,""),p.flags&=-33);var Z=av(a);bf(a,Z,H);break;case 3:case 4:var ne=p.stateNode.containerInfo,pe=av(a);ov(a,pe,ne);break;default:throw Error(r(161))}}catch(Ce){ns(a,a.return,Ce)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function L_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;L_(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function $i(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)A_(a,u.alternate,u),u=u.sibling}function Bo(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:Ea(4,u,u.return),Bo(u);break;case 1:ui(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&__(u,u.return,p),Bo(u);break;case 27:Vu(u.stateNode);case 26:case 5:ui(u,u.return),Bo(u);break;case 22:u.memoizedState===null&&Bo(u);break;case 30:Bo(u);break;default:Bo(u)}a=a.sibling}}function Vi(a,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,k=a,R=u,H=R.flags;switch(R.tag){case 0:case 11:case 15:Vi(k,R,p),Mu(4,R);break;case 1:if(Vi(k,R,p),v=R,k=v.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(pe){ns(v,v.return,pe)}if(v=R,k=v.updateQueue,k!==null){var Z=v.stateNode;try{var ne=k.shared.hiddenCallbacks;if(ne!==null)for(k.shared.hiddenCallbacks=null,k=0;k<ne.length;k++)hj(ne[k],Z)}catch(pe){ns(v,v.return,pe)}}p&&H&64&&j_(R),Lu(R,R.return);break;case 27:k_(R);case 26:case 5:Vi(k,R,p),p&&v===null&&H&4&&C_(R),Lu(R,R.return);break;case 12:Vi(k,R,p);break;case 31:Vi(k,R,p),p&&H&4&&R_(k,R);break;case 13:Vi(k,R,p),p&&H&4&&P_(k,R);break;case 22:R.memoizedState===null&&Vi(k,R,p),Lu(R,R.return);break;case 30:break;default:Vi(k,R,p)}u=u.sibling}}function cv(a,u){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&wu(p))}function uv(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&wu(a))}function Ur(a,u,p,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)I_(a,u,p,v),u=u.sibling}function I_(a,u,p,v){var k=u.flags;switch(u.tag){case 0:case 11:case 15:Ur(a,u,p,v),k&2048&&Mu(9,u);break;case 1:Ur(a,u,p,v);break;case 3:Ur(a,u,p,v),k&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&wu(a)));break;case 12:if(k&2048){Ur(a,u,p,v),a=u.stateNode;try{var R=u.memoizedProps,H=R.id,Z=R.onPostCommit;typeof Z=="function"&&Z(H,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ne){ns(u,u.return,ne)}}else Ur(a,u,p,v);break;case 31:Ur(a,u,p,v);break;case 13:Ur(a,u,p,v);break;case 23:break;case 22:R=u.stateNode,H=u.alternate,u.memoizedState!==null?R._visibility&2?Ur(a,u,p,v):Iu(a,u):R._visibility&2?Ur(a,u,p,v):(R._visibility|=2,Vl(a,u,p,v,(u.subtreeFlags&10256)!==0||!1)),k&2048&&cv(H,u);break;case 24:Ur(a,u,p,v),k&2048&&uv(u.alternate,u);break;default:Ur(a,u,p,v)}}function Vl(a,u,p,v,k){for(k=k&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var R=a,H=u,Z=p,ne=v,pe=H.flags;switch(H.tag){case 0:case 11:case 15:Vl(R,H,Z,ne,k),Mu(8,H);break;case 23:break;case 22:var Ce=H.stateNode;H.memoizedState!==null?Ce._visibility&2?Vl(R,H,Z,ne,k):Iu(R,H):(Ce._visibility|=2,Vl(R,H,Z,ne,k)),k&&pe&2048&&cv(H.alternate,H);break;case 24:Vl(R,H,Z,ne,k),k&&pe&2048&&uv(H.alternate,H);break;default:Vl(R,H,Z,ne,k)}u=u.sibling}}function Iu(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=a,v=u,k=v.flags;switch(v.tag){case 22:Iu(p,v),k&2048&&cv(v.alternate,v);break;case 24:Iu(p,v),k&2048&&uv(v.alternate,v);break;default:Iu(p,v)}u=u.sibling}}var Ou=8192;function Gl(a,u,p){if(a.subtreeFlags&Ou)for(a=a.child;a!==null;)O_(a,u,p),a=a.sibling}function O_(a,u,p){switch(a.tag){case 26:Gl(a,u,p),a.flags&Ou&&a.memoizedState!==null&&tB(p,Hr,a.memoizedState,a.memoizedProps);break;case 5:Gl(a,u,p);break;case 3:case 4:var v=Hr;Hr=Lf(a.stateNode.containerInfo),Gl(a,u,p),Hr=v;break;case 22:a.memoizedState===null&&(v=a.alternate,v!==null&&v.memoizedState!==null?(v=Ou,Ou=16777216,Gl(a,u,p),Ou=v):Gl(a,u,p));break;default:Gl(a,u,p)}}function B_(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Bu(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];on=v,F_(v,a)}B_(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)z_(a),a=a.sibling}function z_(a){switch(a.tag){case 0:case 11:case 15:Bu(a),a.flags&2048&&Ea(9,a,a.return);break;case 3:Bu(a);break;case 12:Bu(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,Sf(a)):Bu(a);break;default:Bu(a)}}function Sf(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];on=v,F_(v,a)}B_(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:Ea(8,u,u.return),Sf(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Sf(u));break;default:Sf(u)}a=a.sibling}}function F_(a,u){for(;on!==null;){var p=on;switch(p.tag){case 0:case 11:case 15:Ea(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:wu(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,on=v;else e:for(p=a;on!==null;){v=on;var k=v.sibling,R=v.return;if(T_(v),v===p){on=null;break e}if(k!==null){k.return=R,on=k;break e}on=R}}}var gO={getCacheForType:function(a){var u=mn(Us),p=u.data.get(a);return p===void 0&&(p=a(),u.data.set(a,p)),p},cacheSignal:function(){return mn(Us).controller.signal}},xO=typeof WeakMap=="function"?WeakMap:Map,Xt=0,hs=null,Pt=null,Bt=0,ss=0,rr=null,Aa=!1,ql=!1,dv=!1,Gi=0,Ps=0,Ta=0,zo=0,hv=0,ir=0,Wl=0,zu=null,qn=null,fv=!1,jf=0,H_=0,_f=1/0,Cf=null,Da=null,Qs=0,Ra=null,Kl=null,qi=0,mv=0,pv=null,U_=null,Fu=0,gv=null;function ar(){return(Xt&2)!==0&&Bt!==0?Bt&-Bt:V.T!==null?Sv():Hs()}function $_(){if(ir===0)if((Bt&536870912)===0||Ht){var a=Jn;Jn<<=1,(Jn&3932160)===0&&(Jn=262144),ir=a}else ir=536870912;return a=sr.current,a!==null&&(a.flags|=32),ir}function Wn(a,u,p){(a===hs&&(ss===2||ss===9)||a.cancelPendingCommit!==null)&&(Yl(a,0),Pa(a,Bt,ir,!1)),qt(a,p),((Xt&2)===0||a!==hs)&&(a===hs&&((Xt&2)===0&&(zo|=p),Ps===4&&Pa(a,Bt,ir,!1)),di(a))}function V_(a,u,p){if((Xt&6)!==0)throw Error(r(327));var v=!p&&(u&127)===0&&(u&a.expiredLanes)===0||Se(a,u),k=v?bO(a,u):vv(a,u,!0),R=v;do{if(k===0){ql&&!v&&Pa(a,u,0,!1);break}else{if(p=a.current.alternate,R&&!vO(p)){k=vv(a,u,!1),R=!1;continue}if(k===2){if(R=u,a.errorRecoveryDisabledLanes&R)var H=0;else H=a.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){u=H;e:{var Z=a;k=zu;var ne=Z.current.memoizedState.isDehydrated;if(ne&&(Yl(Z,H).flags|=256),H=vv(Z,H,!1),H!==2){if(dv&&!ne){Z.errorRecoveryDisabledLanes|=R,zo|=R,k=4;break e}R=qn,qn=k,R!==null&&(qn===null?qn=R:qn.push.apply(qn,R))}k=H}if(R=!1,k!==2)continue}}if(k===1){Yl(a,0),Pa(a,u,0,!0);break}e:{switch(v=a,R=k,R){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Pa(v,u,ir,!Aa);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(k=jf+300-st(),10<k)){if(Pa(v,u,ir,!Aa),Qt(v,0,!0)!==0)break e;qi=u,v.timeoutHandle=wC(G_.bind(null,v,p,qn,Cf,fv,u,ir,zo,Wl,Aa,R,"Throttled",-0,0),k);break e}G_(v,p,qn,Cf,fv,u,ir,zo,Wl,Aa,R,null,-0,0)}}break}while(!0);di(a)}function G_(a,u,p,v,k,R,H,Z,ne,pe,Ce,Te,xe,be){if(a.timeoutHandle=-1,Te=u.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Di},O_(u,R,Te);var $e=(R&62914560)===R?jf-st():(R&4194048)===R?H_-st():0;if($e=sB(Te,$e),$e!==null){qi=R,a.cancelPendingCommit=$e(J_.bind(null,a,u,R,p,v,k,H,Z,ne,Ce,Te,null,xe,be)),Pa(a,R,H,!pe);return}}J_(a,u,R,p,v,k,H,Z,ne)}function vO(a){for(var u=a;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var k=p[v],R=k.getSnapshot;k=k.value;try{if(!er(R(),k))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Pa(a,u,p,v){u&=~hv,u&=~zo,a.suspendedLanes|=u,a.pingedLanes&=~u,v&&(a.warmLanes|=u),v=a.expirationTimes;for(var k=u;0<k;){var R=31-Xe(k),H=1<<R;v[R]=-1,k&=~H}p!==0&&Yt(a,p,u)}function Nf(){return(Xt&6)===0?(Hu(0),!1):!0}function xv(){if(Pt!==null){if(ss===0)var a=Pt.return;else a=Pt,Li=To=null,Px(a),zl=null,ju=0,a=Pt;for(;a!==null;)S_(a.alternate,a),a=a.return;Pt=null}}function Yl(a,u){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,BO(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),qi=0,xv(),hs=a,Pt=p=Pi(a.current,null),Bt=u,ss=0,rr=null,Aa=!1,ql=Se(a,u),dv=!1,Wl=ir=hv=zo=Ta=Ps=0,qn=zu=null,fv=!1,(u&8)!==0&&(u|=u&32);var v=a.entangledLanes;if(v!==0)for(a=a.entanglements,v&=u;0<v;){var k=31-Xe(v),R=1<<k;u|=a[k],v&=~R}return Gi=u,qh(),p}function q_(a,u){vt=null,V.H=Du,u===Bl||u===ef?(u=lj(),ss=3):u===wx?(u=lj(),ss=4):ss=u===Yx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,rr=u,Pt===null&&(Ps=1,pf(a,Sr(u,a.current)))}function W_(){var a=sr.current;return a===null?!0:(Bt&4194048)===Bt?Nr===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?a===Nr:!1}function K_(){var a=V.H;return V.H=Du,a===null?Du:a}function Y_(){var a=V.A;return V.A=gO,a}function kf(){Ps=4,Aa||(Bt&4194048)!==Bt&&sr.current!==null||(ql=!0),(Ta&134217727)===0&&(zo&134217727)===0||hs===null||Pa(hs,Bt,ir,!1)}function vv(a,u,p){var v=Xt;Xt|=2;var k=K_(),R=Y_();(hs!==a||Bt!==u)&&(Cf=null,Yl(a,u)),u=!1;var H=Ps;e:do try{if(ss!==0&&Pt!==null){var Z=Pt,ne=rr;switch(ss){case 8:xv(),H=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(u=!0);var pe=ss;if(ss=0,rr=null,Xl(a,Z,ne,pe),p&&ql){H=0;break e}break;default:pe=ss,ss=0,rr=null,Xl(a,Z,ne,pe)}}yO(),H=Ps;break}catch(Ce){q_(a,Ce)}while(!0);return u&&a.shellSuspendCounter++,Li=To=null,Xt=v,V.H=k,V.A=R,Pt===null&&(hs=null,Bt=0,qh()),H}function yO(){for(;Pt!==null;)X_(Pt)}function bO(a,u){var p=Xt;Xt|=2;var v=K_(),k=Y_();hs!==a||Bt!==u?(Cf=null,_f=st()+500,Yl(a,u)):ql=Se(a,u);e:do try{if(ss!==0&&Pt!==null){u=Pt;var R=rr;t:switch(ss){case 1:ss=0,rr=null,Xl(a,u,R,1);break;case 2:case 9:if(aj(R)){ss=0,rr=null,Z_(u);break}u=function(){ss!==2&&ss!==9||hs!==a||(ss=7),di(a)},R.then(u,u);break e;case 3:ss=7;break e;case 4:ss=5;break e;case 7:aj(R)?(ss=0,rr=null,Z_(u)):(ss=0,rr=null,Xl(a,u,R,7));break;case 5:var H=null;switch(Pt.tag){case 26:H=Pt.memoizedState;case 5:case 27:var Z=Pt;if(H?IC(H):Z.stateNode.complete){ss=0,rr=null;var ne=Z.sibling;if(ne!==null)Pt=ne;else{var pe=Z.return;pe!==null?(Pt=pe,Ef(pe)):Pt=null}break t}}ss=0,rr=null,Xl(a,u,R,5);break;case 6:ss=0,rr=null,Xl(a,u,R,6);break;case 8:xv(),Ps=6;break e;default:throw Error(r(462))}}wO();break}catch(Ce){q_(a,Ce)}while(!0);return Li=To=null,V.H=v,V.A=k,Xt=p,Pt!==null?0:(hs=null,Bt=0,qh(),Ps)}function wO(){for(;Pt!==null&&!Me();)X_(Pt)}function X_(a){var u=b_(a.alternate,a,Gi);a.memoizedProps=a.pendingProps,u===null?Ef(a):Pt=u}function Z_(a){var u=a,p=u.alternate;switch(u.tag){case 15:case 0:u=m_(p,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=m_(p,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:Px(u);default:S_(p,u),u=Pt=Y1(u,Gi),u=b_(p,u,Gi)}a.memoizedProps=a.pendingProps,u===null?Ef(a):Pt=u}function Xl(a,u,p,v){Li=To=null,Px(u),zl=null,ju=0;var k=u.return;try{if(cO(a,k,u,p,Bt)){Ps=1,pf(a,Sr(p,a.current)),Pt=null;return}}catch(R){if(k!==null)throw Pt=k,R;Ps=1,pf(a,Sr(p,a.current)),Pt=null;return}u.flags&32768?(Ht||v===1?a=!0:ql||(Bt&536870912)!==0?a=!1:(Aa=a=!0,(v===2||v===9||v===3||v===6)&&(v=sr.current,v!==null&&v.tag===13&&(v.flags|=16384))),Q_(u,a)):Ef(u)}function Ef(a){var u=a;do{if((u.flags&32768)!==0){Q_(u,Aa);return}a=u.return;var p=hO(u.alternate,u,Gi);if(p!==null){Pt=p;return}if(u=u.sibling,u!==null){Pt=u;return}Pt=u=a}while(u!==null);Ps===0&&(Ps=5)}function Q_(a,u){do{var p=fO(a.alternate,a);if(p!==null){p.flags&=32767,Pt=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(a=a.sibling,a!==null)){Pt=a;return}Pt=a=p}while(a!==null);Ps=6,Pt=null}function J_(a,u,p,v,k,R,H,Z,ne){a.cancelPendingCommit=null;do Af();while(Qs!==0);if((Xt&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(R=u.lanes|u.childLanes,R|=ax,$t(a,p,R,H,Z,ne),a===hs&&(Pt=hs=null,Bt=0),Kl=u,Ra=a,qi=p,mv=R,pv=k,U_=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,CO(Le,function(){return rC(),null})):(a.callbackNode=null,a.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=V.T,V.T=null,k=Y.p,Y.p=2,H=Xt,Xt|=4;try{mO(a,u,p)}finally{Xt=H,Y.p=k,V.T=v}}Qs=1,eC(),tC(),sC()}}function eC(){if(Qs===1){Qs=0;var a=Ra,u=Kl,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=V.T,V.T=null;var v=Y.p;Y.p=2;var k=Xt;Xt|=4;try{M_(u,a);var R=Tv,H=F1(a.containerInfo),Z=R.focusedElem,ne=R.selectionRange;if(H!==Z&&Z&&Z.ownerDocument&&z1(Z.ownerDocument.documentElement,Z)){if(ne!==null&&tx(Z)){var pe=ne.start,Ce=ne.end;if(Ce===void 0&&(Ce=pe),"selectionStart"in Z)Z.selectionStart=pe,Z.selectionEnd=Math.min(Ce,Z.value.length);else{var Te=Z.ownerDocument||document,xe=Te&&Te.defaultView||window;if(xe.getSelection){var be=xe.getSelection(),$e=Z.textContent.length,at=Math.min(ne.start,$e),ls=ne.end===void 0?at:Math.min(ne.end,$e);!be.extend&&at>ls&&(H=ls,ls=at,at=H);var ue=B1(Z,at),oe=B1(Z,ls);if(ue&&oe&&(be.rangeCount!==1||be.anchorNode!==ue.node||be.anchorOffset!==ue.offset||be.focusNode!==oe.node||be.focusOffset!==oe.offset)){var me=Te.createRange();me.setStart(ue.node,ue.offset),be.removeAllRanges(),at>ls?(be.addRange(me),be.extend(oe.node,oe.offset)):(me.setEnd(oe.node,oe.offset),be.addRange(me))}}}}for(Te=[],be=Z;be=be.parentNode;)be.nodeType===1&&Te.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Te.length;Z++){var ke=Te[Z];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Hf=!!Av,Tv=Av=null}finally{Xt=k,Y.p=v,V.T=p}}a.current=u,Qs=2}}function tC(){if(Qs===2){Qs=0;var a=Ra,u=Kl,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=V.T,V.T=null;var v=Y.p;Y.p=2;var k=Xt;Xt|=4;try{A_(a,u.alternate,u)}finally{Xt=k,Y.p=v,V.T=p}}Qs=3}}function sC(){if(Qs===4||Qs===3){Qs=0,qe();var a=Ra,u=Kl,p=qi,v=U_;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Qs=5:(Qs=0,Kl=Ra=null,nC(a,a.pendingLanes));var k=a.pendingLanes;if(k===0&&(Da=null),Sn(p),u=u.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Ct,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=V.T,k=Y.p,Y.p=2,V.T=null;try{for(var R=a.onRecoverableError,H=0;H<v.length;H++){var Z=v[H];R(Z.value,{componentStack:Z.stack})}}finally{V.T=u,Y.p=k}}(qi&3)!==0&&Af(),di(a),k=a.pendingLanes,(p&261930)!==0&&(k&42)!==0?a===gv?Fu++:(Fu=0,gv=a):Fu=0,Hu(0)}}function nC(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,wu(u)))}function Af(){return eC(),tC(),sC(),rC()}function rC(){if(Qs!==5)return!1;var a=Ra,u=mv;mv=0;var p=Sn(qi),v=V.T,k=Y.p;try{Y.p=32>p?32:p,V.T=null,p=pv,pv=null;var R=Ra,H=qi;if(Qs=0,Kl=Ra=null,qi=0,(Xt&6)!==0)throw Error(r(331));var Z=Xt;if(Xt|=4,z_(R.current),I_(R,R.current,H,p),Xt=Z,Hu(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Ct,R)}catch{}return!0}finally{Y.p=k,V.T=v,nC(a,u)}}function iC(a,u,p){u=Sr(p,u),u=Kx(a.stateNode,u,2),a=Ca(a,u,2),a!==null&&(qt(a,2),di(a))}function ns(a,u,p){if(a.tag===3)iC(a,a,p);else for(;u!==null;){if(u.tag===3){iC(u,a,p);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Da===null||!Da.has(v))){a=Sr(p,a),p=a_(2),v=Ca(u,p,2),v!==null&&(o_(p,v,u,a),qt(v,2),di(v));break}}u=u.return}}function yv(a,u,p){var v=a.pingCache;if(v===null){v=a.pingCache=new xO;var k=new Set;v.set(u,k)}else k=v.get(u),k===void 0&&(k=new Set,v.set(u,k));k.has(p)||(dv=!0,k.add(p),a=SO.bind(null,a,u,p),u.then(a,a))}function SO(a,u,p){var v=a.pingCache;v!==null&&v.delete(u),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,hs===a&&(Bt&p)===p&&(Ps===4||Ps===3&&(Bt&62914560)===Bt&&300>st()-jf?(Xt&2)===0&&Yl(a,0):hv|=p,Wl===Bt&&(Wl=0)),di(a)}function aC(a,u){u===0&&(u=yt()),a=ko(a,u),a!==null&&(qt(a,u),di(a))}function jO(a){var u=a.memoizedState,p=0;u!==null&&(p=u.retryLane),aC(a,p)}function _O(a,u){var p=0;switch(a.tag){case 31:case 13:var v=a.stateNode,k=a.memoizedState;k!==null&&(p=k.retryLane);break;case 19:v=a.stateNode;break;case 22:v=a.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(u),aC(a,p)}function CO(a,u){return et(a,u)}var Tf=null,Zl=null,bv=!1,Df=!1,wv=!1,Ma=0;function di(a){a!==Zl&&a.next===null&&(Zl===null?Tf=Zl=a:Zl=Zl.next=a),Df=!0,bv||(bv=!0,kO())}function Hu(a,u){if(!wv&&Df){wv=!0;do for(var p=!1,v=Tf;v!==null;){if(a!==0){var k=v.pendingLanes;if(k===0)var R=0;else{var H=v.suspendedLanes,Z=v.pingedLanes;R=(1<<31-Xe(42|a)+1)-1,R&=k&~(H&~Z),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(p=!0,uC(v,R))}else R=Bt,R=Qt(v,v===hs?R:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(R&3)===0||Se(v,R)||(p=!0,uC(v,R));v=v.next}while(p);wv=!1}}function NO(){oC()}function oC(){Df=bv=!1;var a=0;Ma!==0&&OO()&&(a=Ma);for(var u=st(),p=null,v=Tf;v!==null;){var k=v.next,R=lC(v,u);R===0?(v.next=null,p===null?Tf=k:p.next=k,k===null&&(Zl=p)):(p=v,(a!==0||(R&3)!==0)&&(Df=!0)),v=k}Qs!==0&&Qs!==5||Hu(a),Ma!==0&&(Ma=0)}function lC(a,u){for(var p=a.suspendedLanes,v=a.pingedLanes,k=a.expirationTimes,R=a.pendingLanes&-62914561;0<R;){var H=31-Xe(R),Z=1<<H,ne=k[H];ne===-1?((Z&p)===0||(Z&v)!==0)&&(k[H]=ze(Z,u)):ne<=u&&(a.expiredLanes|=Z),R&=~Z}if(u=hs,p=Bt,p=Qt(a,a===u?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v=a.callbackNode,p===0||a===u&&(ss===2||ss===9)||a.cancelPendingCommit!==null)return v!==null&&v!==null&&De(v),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||Se(a,p)){if(u=p&-p,u===a.callbackPriority)return u;switch(v!==null&&De(v),Sn(p)){case 2:case 8:p=Ae;break;case 32:p=Le;break;case 268435456:p=ve;break;default:p=Le}return v=cC.bind(null,a),p=et(p,v),a.callbackPriority=u,a.callbackNode=p,u}return v!==null&&v!==null&&De(v),a.callbackPriority=2,a.callbackNode=null,2}function cC(a,u){if(Qs!==0&&Qs!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(Af()&&a.callbackNode!==p)return null;var v=Bt;return v=Qt(a,a===hs?v:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v===0?null:(V_(a,v,u),lC(a,st()),a.callbackNode!=null&&a.callbackNode===p?cC.bind(null,a):null)}function uC(a,u){if(Af())return null;V_(a,u,!0)}function kO(){zO(function(){(Xt&6)!==0?et(fe,NO):oC()})}function Sv(){if(Ma===0){var a=Il;a===0&&(a=ye,ye<<=1,(ye&261888)===0&&(ye=256)),Ma=a}return Ma}function dC(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Bh(""+a)}function hC(a,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,a.id&&p.setAttribute("form",a.id),u.parentNode.insertBefore(p,u),a=new FormData(a),p.parentNode.removeChild(p),a}function EO(a,u,p,v,k){if(u==="submit"&&p&&p.stateNode===k){var R=dC((k[jn]||null).action),H=v.submitter;H&&(u=(u=H[jn]||null)?dC(u.formAction):H.getAttribute("formAction"),u!==null&&(R=u,H=null));var Z=new Uh("action","action",null,v,k);a.push({event:Z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Ma!==0){var ne=H?hC(k,H):new FormData(k);Ux(p,{pending:!0,data:ne,method:k.method,action:R},null,ne)}}else typeof R=="function"&&(Z.preventDefault(),ne=H?hC(k,H):new FormData(k),Ux(p,{pending:!0,data:ne,method:k.method,action:R},R,ne))},currentTarget:k}]})}}for(var jv=0;jv<ix.length;jv++){var _v=ix[jv],AO=_v.toLowerCase(),TO=_v[0].toUpperCase()+_v.slice(1);Fr(AO,"on"+TO)}Fr($1,"onAnimationEnd"),Fr(V1,"onAnimationIteration"),Fr(G1,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(qI,"onTransitionRun"),Fr(WI,"onTransitionStart"),Fr(KI,"onTransitionCancel"),Fr(q1,"onTransitionEnd"),Sl("onMouseEnter",["mouseout","mouseover"]),Sl("onMouseLeave",["mouseout","mouseover"]),Sl("onPointerEnter",["pointerout","pointerover"]),Sl("onPointerLeave",["pointerout","pointerover"]),jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jo("onBeforeInput",["compositionend","keypress","textInput","paste"]),jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function fC(a,u){u=(u&4)!==0;for(var p=0;p<a.length;p++){var v=a[p],k=v.event;v=v.listeners;e:{var R=void 0;if(u)for(var H=v.length-1;0<=H;H--){var Z=v[H],ne=Z.instance,pe=Z.currentTarget;if(Z=Z.listener,ne!==R&&k.isPropagationStopped())break e;R=Z,k.currentTarget=pe;try{R(k)}catch(Ce){Gh(Ce)}k.currentTarget=null,R=ne}else for(H=0;H<v.length;H++){if(Z=v[H],ne=Z.instance,pe=Z.currentTarget,Z=Z.listener,ne!==R&&k.isPropagationStopped())break e;R=Z,k.currentTarget=pe;try{R(k)}catch(Ce){Gh(Ce)}k.currentTarget=null,R=ne}}}}function Mt(a,u){var p=u[Og];p===void 0&&(p=u[Og]=new Set);var v=a+"__bubble";p.has(v)||(mC(u,a,2,!1),p.add(v))}function Cv(a,u,p){var v=0;u&&(v|=4),mC(p,a,v,u)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function Nv(a){if(!a[Rf]){a[Rf]=!0,o1.forEach(function(p){p!=="selectionchange"&&(DO.has(p)||Cv(p,!1,a),Cv(p,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Rf]||(u[Rf]=!0,Cv("selectionchange",!1,u))}}function mC(a,u,p,v){switch($C(u)){case 2:var k=iB;break;case 8:k=aB;break;default:k=Hv}p=k.bind(null,u,p,a),k=void 0,!qg||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(k=!0),v?k!==void 0?a.addEventListener(u,p,{capture:!0,passive:k}):a.addEventListener(u,p,!0):k!==void 0?a.addEventListener(u,p,{passive:k}):a.addEventListener(u,p,!1)}function kv(a,u,p,v,k){var R=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var H=v.tag;if(H===3||H===4){var Z=v.stateNode.containerInfo;if(Z===k)break;if(H===4)for(H=v.return;H!==null;){var ne=H.tag;if((ne===3||ne===4)&&H.stateNode.containerInfo===k)return;H=H.return}for(;Z!==null;){if(H=yl(Z),H===null)return;if(ne=H.tag,ne===5||ne===6||ne===26||ne===27){v=R=H;continue e}Z=Z.parentNode}}v=v.return}y1(function(){var pe=R,Ce=Vg(p),Te=[];e:{var xe=W1.get(a);if(xe!==void 0){var be=Uh,$e=a;switch(a){case"keypress":if(Fh(p)===0)break e;case"keydown":case"keyup":be=_I;break;case"focusin":$e="focus",be=Xg;break;case"focusout":$e="blur",be=Xg;break;case"beforeblur":case"afterblur":be=Xg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=S1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=hI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=kI;break;case $1:case V1:case G1:be=pI;break;case q1:be=AI;break;case"scroll":case"scrollend":be=uI;break;case"wheel":be=DI;break;case"copy":case"cut":case"paste":be=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=_1;break;case"toggle":case"beforetoggle":be=PI}var at=(u&4)!==0,ls=!at&&(a==="scroll"||a==="scrollend"),ue=at?xe!==null?xe+"Capture":null:xe;at=[];for(var oe=pe,me;oe!==null;){var ke=oe;if(me=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||me===null||ue===null||(ke=uu(oe,ue),ke!=null&&at.push($u(oe,ke,me))),ls)break;oe=oe.return}0<at.length&&(xe=new be(xe,$e,null,p,Ce),Te.push({event:xe,listeners:at}))}}if((u&7)===0){e:{if(xe=a==="mouseover"||a==="pointerover",be=a==="mouseout"||a==="pointerout",xe&&p!==$g&&($e=p.relatedTarget||p.fromElement)&&(yl($e)||$e[xa]))break e;if((be||xe)&&(xe=Ce.window===Ce?Ce:(xe=Ce.ownerDocument)?xe.defaultView||xe.parentWindow:window,be?($e=p.relatedTarget||p.toElement,be=pe,$e=$e?yl($e):null,$e!==null&&(ls=o($e),at=$e.tag,$e!==ls||at!==5&&at!==27&&at!==6)&&($e=null)):(be=null,$e=pe),be!==$e)){if(at=S1,ke="onMouseLeave",ue="onMouseEnter",oe="mouse",(a==="pointerout"||a==="pointerover")&&(at=_1,ke="onPointerLeave",ue="onPointerEnter",oe="pointer"),ls=be==null?xe:cu(be),me=$e==null?xe:cu($e),xe=new at(ke,oe+"leave",be,p,Ce),xe.target=ls,xe.relatedTarget=me,ke=null,yl(Ce)===pe&&(at=new at(ue,oe+"enter",$e,p,Ce),at.target=me,at.relatedTarget=ls,ke=at),ls=ke,be&&$e)t:{for(at=RO,ue=be,oe=$e,me=0,ke=ue;ke;ke=at(ke))me++;ke=0;for(var nt=oe;nt;nt=at(nt))ke++;for(;0<me-ke;)ue=at(ue),me--;for(;0<ke-me;)oe=at(oe),ke--;for(;me--;){if(ue===oe||oe!==null&&ue===oe.alternate){at=ue;break t}ue=at(ue),oe=at(oe)}at=null}else at=null;be!==null&&pC(Te,xe,be,at,!1),$e!==null&&ls!==null&&pC(Te,ls,$e,at,!0)}}e:{if(xe=pe?cu(pe):window,be=xe.nodeName&&xe.nodeName.toLowerCase(),be==="select"||be==="input"&&xe.type==="file")var Wt=R1;else if(T1(xe))if(P1)Wt=$I;else{Wt=HI;var Ze=FI}else be=xe.nodeName,!be||be.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?pe&&Ug(pe.elementType)&&(Wt=R1):Wt=UI;if(Wt&&(Wt=Wt(a,pe))){D1(Te,Wt,p,Ce);break e}Ze&&Ze(a,xe,pe),a==="focusout"&&pe&&xe.type==="number"&&pe.memoizedProps.value!=null&&Hg(xe,"number",xe.value)}switch(Ze=pe?cu(pe):window,a){case"focusin":(T1(Ze)||Ze.contentEditable==="true")&&(El=Ze,sx=pe,vu=null);break;case"focusout":vu=sx=El=null;break;case"mousedown":nx=!0;break;case"contextmenu":case"mouseup":case"dragend":nx=!1,H1(Te,p,Ce);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":H1(Te,p,Ce)}var bt;if(Qg)e:{switch(a){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else kl?E1(a,p)&&(zt="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(zt="onCompositionStart");zt&&(C1&&p.locale!=="ko"&&(kl||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&kl&&(bt=b1()):(va=Ce,Wg="value"in va?va.value:va.textContent,kl=!0)),Ze=Pf(pe,zt),0<Ze.length&&(zt=new j1(zt,a,null,p,Ce),Te.push({event:zt,listeners:Ze}),bt?zt.data=bt:(bt=A1(p),bt!==null&&(zt.data=bt)))),(bt=LI?II(a,p):OI(a,p))&&(zt=Pf(pe,"onBeforeInput"),0<zt.length&&(Ze=new j1("onBeforeInput","beforeinput",null,p,Ce),Te.push({event:Ze,listeners:zt}),Ze.data=bt)),EO(Te,a,pe,p,Ce)}fC(Te,u)})}function $u(a,u,p){return{instance:a,listener:u,currentTarget:p}}function Pf(a,u){for(var p=u+"Capture",v=[];a!==null;){var k=a,R=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||R===null||(k=uu(a,p),k!=null&&v.unshift($u(a,k,R)),k=uu(a,u),k!=null&&v.push($u(a,k,R))),a.tag===3)return v;a=a.return}return[]}function RO(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function pC(a,u,p,v,k){for(var R=u._reactName,H=[];p!==null&&p!==v;){var Z=p,ne=Z.alternate,pe=Z.stateNode;if(Z=Z.tag,ne!==null&&ne===v)break;Z!==5&&Z!==26&&Z!==27||pe===null||(ne=pe,k?(pe=uu(p,R),pe!=null&&H.unshift($u(p,pe,ne))):k||(pe=uu(p,R),pe!=null&&H.push($u(p,pe,ne)))),p=p.return}H.length!==0&&a.push({event:u,listeners:H})}var PO=/\r\n?/g,MO=/\u0000|\uFFFD/g;function gC(a){return(typeof a=="string"?a:""+a).replace(PO,`
`).replace(MO,"")}function xC(a,u){return u=gC(u),gC(a)===u}function os(a,u,p,v,k,R){switch(p){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||_l(a,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&_l(a,""+v);break;case"className":Ih(a,"class",v);break;case"tabIndex":Ih(a,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ih(a,p,v);break;case"style":x1(a,v,R);break;case"data":if(u!=="object"){Ih(a,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||p!=="href")){a.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=Bh(""+v),a.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(p==="formAction"?(u!=="input"&&os(a,u,"name",k.name,k,null),os(a,u,"formEncType",k.formEncType,k,null),os(a,u,"formMethod",k.formMethod,k,null),os(a,u,"formTarget",k.formTarget,k,null)):(os(a,u,"encType",k.encType,k,null),os(a,u,"method",k.method,k,null),os(a,u,"target",k.target,k,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=Bh(""+v),a.setAttribute(p,v);break;case"onClick":v!=null&&(a.onclick=Di);break;case"onScroll":v!=null&&Mt("scroll",a);break;case"onScrollEnd":v!=null&&Mt("scrollend",a);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(k.children!=null)throw Error(r(60));a.innerHTML=p}}break;case"multiple":a.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":a.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){a.removeAttribute("xlink:href");break}p=Bh(""+v),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""+v):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":v===!0?a.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,v):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?a.setAttribute(p,v):a.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?a.removeAttribute(p):a.setAttribute(p,v);break;case"popover":Mt("beforetoggle",a),Mt("toggle",a),Lh(a,"popover",v);break;case"xlinkActuate":Ti(a,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Ti(a,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Ti(a,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Ti(a,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Ti(a,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Ti(a,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Ti(a,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Ti(a,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Ti(a,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Lh(a,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=lI.get(p)||p,Lh(a,p,v))}}function Ev(a,u,p,v,k,R){switch(p){case"style":x1(a,v,R);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(k.children!=null)throw Error(r(60));a.innerHTML=p}}break;case"children":typeof v=="string"?_l(a,v):(typeof v=="number"||typeof v=="bigint")&&_l(a,""+v);break;case"onScroll":v!=null&&Mt("scroll",a);break;case"onScrollEnd":v!=null&&Mt("scrollend",a);break;case"onClick":v!=null&&(a.onclick=Di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!l1.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(k=p.endsWith("Capture"),u=p.slice(2,k?p.length-7:void 0),R=a[jn]||null,R=R!=null?R[p]:null,typeof R=="function"&&a.removeEventListener(u,R,k),typeof v=="function")){typeof R!="function"&&R!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(u,v,k);break e}p in a?a[p]=v:v===!0?a.setAttribute(p,""):Lh(a,p,v)}}}function gn(a,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",a),Mt("load",a);var v=!1,k=!1,R;for(R in p)if(p.hasOwnProperty(R)){var H=p[R];if(H!=null)switch(R){case"src":v=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:os(a,u,R,H,p,null)}}k&&os(a,u,"srcSet",p.srcSet,p,null),v&&os(a,u,"src",p.src,p,null);return;case"input":Mt("invalid",a);var Z=R=H=k=null,ne=null,pe=null;for(v in p)if(p.hasOwnProperty(v)){var Ce=p[v];if(Ce!=null)switch(v){case"name":k=Ce;break;case"type":H=Ce;break;case"checked":ne=Ce;break;case"defaultChecked":pe=Ce;break;case"value":R=Ce;break;case"defaultValue":Z=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,u));break;default:os(a,u,v,Ce,p,null)}}f1(a,R,Z,ne,pe,H,k,!1);return;case"select":Mt("invalid",a),v=H=R=null;for(k in p)if(p.hasOwnProperty(k)&&(Z=p[k],Z!=null))switch(k){case"value":R=Z;break;case"defaultValue":H=Z;break;case"multiple":v=Z;default:os(a,u,k,Z,p,null)}u=R,p=H,a.multiple=!!v,u!=null?jl(a,!!v,u,!1):p!=null&&jl(a,!!v,p,!0);return;case"textarea":Mt("invalid",a),R=k=v=null;for(H in p)if(p.hasOwnProperty(H)&&(Z=p[H],Z!=null))switch(H){case"value":v=Z;break;case"defaultValue":k=Z;break;case"children":R=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:os(a,u,H,Z,p,null)}p1(a,v,k,R);return;case"option":for(ne in p)if(p.hasOwnProperty(ne)&&(v=p[ne],v!=null))switch(ne){case"selected":a.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:os(a,u,ne,v,p,null)}return;case"dialog":Mt("beforetoggle",a),Mt("toggle",a),Mt("cancel",a),Mt("close",a);break;case"iframe":case"object":Mt("load",a);break;case"video":case"audio":for(v=0;v<Uu.length;v++)Mt(Uu[v],a);break;case"image":Mt("error",a),Mt("load",a);break;case"details":Mt("toggle",a);break;case"embed":case"source":case"link":Mt("error",a),Mt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in p)if(p.hasOwnProperty(pe)&&(v=p[pe],v!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:os(a,u,pe,v,p,null)}return;default:if(Ug(u)){for(Ce in p)p.hasOwnProperty(Ce)&&(v=p[Ce],v!==void 0&&Ev(a,u,Ce,v,p,void 0));return}}for(Z in p)p.hasOwnProperty(Z)&&(v=p[Z],v!=null&&os(a,u,Z,v,p,null))}function LO(a,u,p,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,R=null,H=null,Z=null,ne=null,pe=null,Ce=null;for(be in p){var Te=p[be];if(p.hasOwnProperty(be)&&Te!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":ne=Te;default:v.hasOwnProperty(be)||os(a,u,be,null,v,Te)}}for(var xe in v){var be=v[xe];if(Te=p[xe],v.hasOwnProperty(xe)&&(be!=null||Te!=null))switch(xe){case"type":R=be;break;case"name":k=be;break;case"checked":pe=be;break;case"defaultChecked":Ce=be;break;case"value":H=be;break;case"defaultValue":Z=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,u));break;default:be!==Te&&os(a,u,xe,be,v,Te)}}Fg(a,H,Z,ne,pe,Ce,R,k);return;case"select":be=H=Z=xe=null;for(R in p)if(ne=p[R],p.hasOwnProperty(R)&&ne!=null)switch(R){case"value":break;case"multiple":be=ne;default:v.hasOwnProperty(R)||os(a,u,R,null,v,ne)}for(k in v)if(R=v[k],ne=p[k],v.hasOwnProperty(k)&&(R!=null||ne!=null))switch(k){case"value":xe=R;break;case"defaultValue":Z=R;break;case"multiple":H=R;default:R!==ne&&os(a,u,k,R,v,ne)}u=Z,p=H,v=be,xe!=null?jl(a,!!p,xe,!1):!!v!=!!p&&(u!=null?jl(a,!!p,u,!0):jl(a,!!p,p?[]:"",!1));return;case"textarea":be=xe=null;for(Z in p)if(k=p[Z],p.hasOwnProperty(Z)&&k!=null&&!v.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:os(a,u,Z,null,v,k)}for(H in v)if(k=v[H],R=p[H],v.hasOwnProperty(H)&&(k!=null||R!=null))switch(H){case"value":xe=k;break;case"defaultValue":be=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:k!==R&&os(a,u,H,k,v,R)}m1(a,xe,be);return;case"option":for(var $e in p)if(xe=p[$e],p.hasOwnProperty($e)&&xe!=null&&!v.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:os(a,u,$e,null,v,xe)}for(ne in v)if(xe=v[ne],be=p[ne],v.hasOwnProperty(ne)&&xe!==be&&(xe!=null||be!=null))switch(ne){case"selected":a.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:os(a,u,ne,xe,v,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in p)xe=p[at],p.hasOwnProperty(at)&&xe!=null&&!v.hasOwnProperty(at)&&os(a,u,at,null,v,xe);for(pe in v)if(xe=v[pe],be=p[pe],v.hasOwnProperty(pe)&&xe!==be&&(xe!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,u));break;default:os(a,u,pe,xe,v,be)}return;default:if(Ug(u)){for(var ls in p)xe=p[ls],p.hasOwnProperty(ls)&&xe!==void 0&&!v.hasOwnProperty(ls)&&Ev(a,u,ls,void 0,v,xe);for(Ce in v)xe=v[Ce],be=p[Ce],!v.hasOwnProperty(Ce)||xe===be||xe===void 0&&be===void 0||Ev(a,u,Ce,xe,v,be);return}}for(var ue in p)xe=p[ue],p.hasOwnProperty(ue)&&xe!=null&&!v.hasOwnProperty(ue)&&os(a,u,ue,null,v,xe);for(Te in v)xe=v[Te],be=p[Te],!v.hasOwnProperty(Te)||xe===be||xe==null&&be==null||os(a,u,Te,xe,v,be)}function vC(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IO(){if(typeof performance.getEntriesByType=="function"){for(var a=0,u=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var k=p[v],R=k.transferSize,H=k.initiatorType,Z=k.duration;if(R&&Z&&vC(H)){for(H=0,Z=k.responseEnd,v+=1;v<p.length;v++){var ne=p[v],pe=ne.startTime;if(pe>Z)break;var Ce=ne.transferSize,Te=ne.initiatorType;Ce&&vC(Te)&&(ne=ne.responseEnd,H+=Ce*(ne<Z?1:(Z-pe)/(ne-pe)))}if(--v,u+=8*(R+H)/(k.duration/1e3),a++,10<a)break}}if(0<a)return u/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Av=null,Tv=null;function Mf(a){return a.nodeType===9?a:a.ownerDocument}function yC(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bC(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function Dv(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Rv=null;function OO(){var a=window.event;return a&&a.type==="popstate"?a===Rv?!1:(Rv=a,!0):(Rv=null,!1)}var wC=typeof setTimeout=="function"?setTimeout:void 0,BO=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,zO=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(a){return SC.resolve(null).then(a).catch(FO)}:wC;function FO(a){setTimeout(function(){throw a})}function La(a){return a==="head"}function jC(a,u){var p=u,v=0;do{var k=p.nextSibling;if(a.removeChild(p),k&&k.nodeType===8)if(p=k.data,p==="/$"||p==="/&"){if(v===0){a.removeChild(k),tc(u);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")Vu(a.ownerDocument.documentElement);else if(p==="head"){p=a.ownerDocument.head,Vu(p);for(var R=p.firstChild;R;){var H=R.nextSibling,Z=R.nodeName;R[lu]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=H}}else p==="body"&&Vu(a.ownerDocument.body);p=k}while(p);tc(u)}function _C(a,u){var p=a;a=0;do{var v=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(a===0)break;a--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||a++;p=v}while(p)}function Pv(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Pv(p),Bg(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function HO(a,u,p,v){for(;a.nodeType===1;){var k=p;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(v){if(!a[lu])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(R=a.getAttribute("rel"),R==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(R!==k.rel||a.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||a.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||a.getAttribute("title")!==(k.title==null?null:k.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(R=a.getAttribute("src"),(R!==(k.src==null?null:k.src)||a.getAttribute("type")!==(k.type==null?null:k.type)||a.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&R&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var R=k.name==null?null:""+k.name;if(k.type==="hidden"&&a.getAttribute("name")===R)return a}else return a;if(a=kr(a.nextSibling),a===null)break}return null}function UO(a,u,p){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=kr(a.nextSibling),a===null))return null;return a}function CC(a,u){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=kr(a.nextSibling),a===null))return null;return a}function Mv(a){return a.data==="$?"||a.data==="$~"}function Lv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function $O(a,u){var p=a.ownerDocument;if(a.data==="$~")a._reactRetry=u;else if(a.data!=="$?"||p.readyState!=="loading")u();else{var v=function(){u(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),a._reactRetry=v}}function kr(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return a}var Iv=null;function NC(a){a=a.nextSibling;for(var u=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"||p==="/&"){if(u===0)return kr(a.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}a=a.nextSibling}return null}function kC(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return a;u--}else p!=="/$"&&p!=="/&"||u++}a=a.previousSibling}return null}function EC(a,u,p){switch(u=Mf(p),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Vu(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Bg(a)}var Er=new Map,AC=new Set;function Lf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Wi=Y.d;Y.d={f:VO,r:GO,D:qO,C:WO,L:KO,m:YO,X:ZO,S:XO,M:QO};function VO(){var a=Wi.f(),u=Nf();return a||u}function GO(a){var u=bl(a);u!==null&&u.tag===5&&u.type==="form"?qj(u):Wi.r(a)}var Ql=typeof document>"u"?null:document;function TC(a,u,p){var v=Ql;if(v&&typeof u=="string"&&u){var k=br(u);k='link[rel="'+a+'"][href="'+k+'"]',typeof p=="string"&&(k+='[crossorigin="'+p+'"]'),AC.has(k)||(AC.add(k),a={rel:a,crossOrigin:p,href:u},v.querySelector(k)===null&&(u=v.createElement("link"),gn(u,"link",a),an(u),v.head.appendChild(u)))}}function qO(a){Wi.D(a),TC("dns-prefetch",a,null)}function WO(a,u){Wi.C(a,u),TC("preconnect",a,u)}function KO(a,u,p){Wi.L(a,u,p);var v=Ql;if(v&&a&&u){var k='link[rel="preload"][as="'+br(u)+'"]';u==="image"&&p&&p.imageSrcSet?(k+='[imagesrcset="'+br(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(k+='[imagesizes="'+br(p.imageSizes)+'"]')):k+='[href="'+br(a)+'"]';var R=k;switch(u){case"style":R=Jl(a);break;case"script":R=ec(a)}Er.has(R)||(a=f({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:a,as:u},p),Er.set(R,a),v.querySelector(k)!==null||u==="style"&&v.querySelector(Gu(R))||u==="script"&&v.querySelector(qu(R))||(u=v.createElement("link"),gn(u,"link",a),an(u),v.head.appendChild(u)))}}function YO(a,u){Wi.m(a,u);var p=Ql;if(p&&a){var v=u&&typeof u.as=="string"?u.as:"script",k='link[rel="modulepreload"][as="'+br(v)+'"][href="'+br(a)+'"]',R=k;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=ec(a)}if(!Er.has(R)&&(a=f({rel:"modulepreload",href:a},u),Er.set(R,a),p.querySelector(k)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(qu(R)))return}v=p.createElement("link"),gn(v,"link",a),an(v),p.head.appendChild(v)}}}function XO(a,u,p){Wi.S(a,u,p);var v=Ql;if(v&&a){var k=wl(v).hoistableStyles,R=Jl(a);u=u||"default";var H=k.get(R);if(!H){var Z={loading:0,preload:null};if(H=v.querySelector(Gu(R)))Z.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":u},p),(p=Er.get(R))&&Ov(a,p);var ne=H=v.createElement("link");an(ne),gn(ne,"link",a),ne._p=new Promise(function(pe,Ce){ne.onload=pe,ne.onerror=Ce}),ne.addEventListener("load",function(){Z.loading|=1}),ne.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,If(H,u,v)}H={type:"stylesheet",instance:H,count:1,state:Z},k.set(R,H)}}}function ZO(a,u){Wi.X(a,u);var p=Ql;if(p&&a){var v=wl(p).hoistableScripts,k=ec(a),R=v.get(k);R||(R=p.querySelector(qu(k)),R||(a=f({src:a,async:!0},u),(u=Er.get(k))&&Bv(a,u),R=p.createElement("script"),an(R),gn(R,"link",a),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(k,R))}}function QO(a,u){Wi.M(a,u);var p=Ql;if(p&&a){var v=wl(p).hoistableScripts,k=ec(a),R=v.get(k);R||(R=p.querySelector(qu(k)),R||(a=f({src:a,async:!0,type:"module"},u),(u=Er.get(k))&&Bv(a,u),R=p.createElement("script"),an(R),gn(R,"link",a),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(k,R))}}function DC(a,u,p,v){var k=(k=re.current)?Lf(k):null;if(!k)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Jl(p.href),p=wl(k).hoistableStyles,v=p.get(u),v||(v={type:"style",instance:null,count:0,state:null},p.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=Jl(p.href);var R=wl(k).hoistableStyles,H=R.get(a);if(H||(k=k.ownerDocument||k,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(a,H),(R=k.querySelector(Gu(a)))&&!R._p&&(H.instance=R,H.state.loading=5),Er.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Er.set(a,p),R||JO(k,a,p,H.state))),u&&v===null)throw Error(r(528,""));return H}if(u&&v!==null)throw Error(r(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ec(p),p=wl(k).hoistableScripts,v=p.get(u),v||(v={type:"script",instance:null,count:0,state:null},p.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Jl(a){return'href="'+br(a)+'"'}function Gu(a){return'link[rel="stylesheet"]['+a+"]"}function RC(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function JO(a,u,p,v){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=a.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),gn(u,"link",p),an(u),a.head.appendChild(u))}function ec(a){return'[src="'+br(a)+'"]'}function qu(a){return"script[async]"+a}function PC(a,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var v=a.querySelector('style[data-href~="'+br(p.href)+'"]');if(v)return u.instance=v,an(v),v;var k=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(a.ownerDocument||a).createElement("style"),an(v),gn(v,"style",k),If(v,p.precedence,a),u.instance=v;case"stylesheet":k=Jl(p.href);var R=a.querySelector(Gu(k));if(R)return u.state.loading|=4,u.instance=R,an(R),R;v=RC(p),(k=Er.get(k))&&Ov(v,k),R=(a.ownerDocument||a).createElement("link"),an(R);var H=R;return H._p=new Promise(function(Z,ne){H.onload=Z,H.onerror=ne}),gn(R,"link",v),u.state.loading|=4,If(R,p.precedence,a),u.instance=R;case"script":return R=ec(p.src),(k=a.querySelector(qu(R)))?(u.instance=k,an(k),k):(v=p,(k=Er.get(R))&&(v=f({},p),Bv(v,k)),a=a.ownerDocument||a,k=a.createElement("script"),an(k),gn(k,"link",v),a.head.appendChild(k),u.instance=k);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,If(v,p.precedence,a));return u.instance}function If(a,u,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=v.length?v[v.length-1]:null,R=k,H=0;H<v.length;H++){var Z=v[H];if(Z.dataset.precedence===u)R=Z;else if(R!==k)break}R?R.parentNode.insertBefore(a,R.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(a,u.firstChild))}function Ov(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function Bv(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var Of=null;function MC(a,u,p){if(Of===null){var v=new Map,k=Of=new Map;k.set(p,v)}else k=Of,v=k.get(p),v||(v=new Map,k.set(p,v));if(v.has(a))return v;for(v.set(a,null),p=p.getElementsByTagName(a),k=0;k<p.length;k++){var R=p[k];if(!(R[lu]||R[Ds]||a==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var H=R.getAttribute(u)||"";H=a+H;var Z=v.get(H);Z?Z.push(R):v.set(H,[R])}}return v}function LC(a,u,p){a=a.ownerDocument||a,a.head.insertBefore(p,u==="title"?a.querySelector("head > title"):null)}function eB(a,u,p){if(p===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function IC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function tB(a,u,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var k=Jl(v.href),R=u.querySelector(Gu(k));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(a.count++,a=Bf.bind(a),u.then(a,a)),p.state.loading|=4,p.instance=R,an(R);return}R=u.ownerDocument||u,v=RC(v),(k=Er.get(k))&&Ov(v,k),R=R.createElement("link"),an(R);var H=R;H._p=new Promise(function(Z,ne){H.onload=Z,H.onerror=ne}),gn(R,"link",v),p.instance=R}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(a.count++,p=Bf.bind(a),u.addEventListener("load",p),u.addEventListener("error",p))}}var zv=0;function sB(a,u){return a.stylesheets&&a.count===0&&Ff(a,a.stylesheets),0<a.count||0<a.imgCount?function(p){var v=setTimeout(function(){if(a.stylesheets&&Ff(a,a.stylesheets),a.unsuspend){var R=a.unsuspend;a.unsuspend=null,R()}},6e4+u);0<a.imgBytes&&zv===0&&(zv=62500*IO());var k=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ff(a,a.stylesheets),a.unsuspend)){var R=a.unsuspend;a.unsuspend=null,R()}},(a.imgBytes>zv?50:800)+u);return a.unsuspend=p,function(){a.unsuspend=null,clearTimeout(v),clearTimeout(k)}}:null}function Bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ff(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var zf=null;function Ff(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,zf=new Map,u.forEach(nB,a),zf=null,Bf.call(a))}function nB(a,u){if(!(u.state.loading&4)){var p=zf.get(a);if(p)var v=p.get(null);else{p=new Map,zf.set(a,p);for(var k=a.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<k.length;R++){var H=k[R];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),v=H)}v&&p.set(null,v)}k=u.instance,H=k.getAttribute("data-precedence"),R=p.get(H)||v,R===v&&p.set(null,k),p.set(H,k),this.count++,v=Bf.bind(this),k.addEventListener("load",v),k.addEventListener("error",v),R?R.parentNode.insertBefore(k,R.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(k,a.firstChild)),u.state.loading|=4}}var Wu={$$typeof:S,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function rB(a,u,p,v,k,R,H,Z,ne){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=v,this.onUncaughtError=k,this.onCaughtError=R,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function OC(a,u,p,v,k,R,H,Z,ne,pe,Ce,Te){return a=new rB(a,u,p,H,ne,pe,Ce,Te,Z),u=1,R===!0&&(u|=24),R=tr(3,null,null,u),a.current=R,R.stateNode=a,u=vx(),u.refCount++,a.pooledCache=u,u.refCount++,R.memoizedState={element:v,isDehydrated:p,cache:u},Sx(R),a}function BC(a){return a?(a=Dl,a):Dl}function zC(a,u,p,v,k,R){k=BC(k),v.context===null?v.context=k:v.pendingContext=k,v=_a(u),v.payload={element:p},R=R===void 0?null:R,R!==null&&(v.callback=R),p=Ca(a,v,u),p!==null&&(Wn(p,a,u),Cu(p,a,u))}function FC(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<u?p:u}}function Fv(a,u){FC(a,u),(a=a.alternate)&&FC(a,u)}function HC(a){if(a.tag===13||a.tag===31){var u=ko(a,67108864);u!==null&&Wn(u,a,67108864),Fv(a,67108864)}}function UC(a){if(a.tag===13||a.tag===31){var u=ar();u=Zs(u);var p=ko(a,u);p!==null&&Wn(p,a,u),Fv(a,u)}}var Hf=!0;function iB(a,u,p,v){var k=V.T;V.T=null;var R=Y.p;try{Y.p=2,Hv(a,u,p,v)}finally{Y.p=R,V.T=k}}function aB(a,u,p,v){var k=V.T;V.T=null;var R=Y.p;try{Y.p=8,Hv(a,u,p,v)}finally{Y.p=R,V.T=k}}function Hv(a,u,p,v){if(Hf){var k=Uv(v);if(k===null)kv(a,u,v,Uf,p),VC(a,v);else if(lB(k,a,u,p,v))v.stopPropagation();else if(VC(a,v),u&4&&-1<oB.indexOf(a)){for(;k!==null;){var R=bl(k);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var H=Zt(R.pendingLanes);if(H!==0){var Z=R;for(Z.pendingLanes|=2,Z.entangledLanes|=2;H;){var ne=1<<31-Xe(H);Z.entanglements[1]|=ne,H&=~ne}di(R),(Xt&6)===0&&(_f=st()+500,Hu(0))}}break;case 31:case 13:Z=ko(R,2),Z!==null&&Wn(Z,R,2),Nf(),Fv(R,2)}if(R=Uv(v),R===null&&kv(a,u,v,Uf,p),R===k)break;k=R}k!==null&&v.stopPropagation()}else kv(a,u,v,null,p)}}function Uv(a){return a=Vg(a),$v(a)}var Uf=null;function $v(a){if(Uf=null,a=yl(a),a!==null){var u=o(a);if(u===null)a=null;else{var p=u.tag;if(p===13){if(a=c(u),a!==null)return a;a=null}else if(p===31){if(a=l(u),a!==null)return a;a=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Uf=a,null}function $C(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case fe:return 2;case Ae:return 8;case Le:case We:return 32;case ve:return 268435456;default:return 32}default:return 32}}var Vv=!1,Ia=null,Oa=null,Ba=null,Ku=new Map,Yu=new Map,za=[],oB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VC(a,u){switch(a){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Ku.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(u.pointerId)}}function Xu(a,u,p,v,k,R){return a===null||a.nativeEvent!==R?(a={blockedOn:u,domEventName:p,eventSystemFlags:v,nativeEvent:R,targetContainers:[k]},u!==null&&(u=bl(u),u!==null&&HC(u)),a):(a.eventSystemFlags|=v,u=a.targetContainers,k!==null&&u.indexOf(k)===-1&&u.push(k),a)}function lB(a,u,p,v,k){switch(u){case"focusin":return Ia=Xu(Ia,a,u,p,v,k),!0;case"dragenter":return Oa=Xu(Oa,a,u,p,v,k),!0;case"mouseover":return Ba=Xu(Ba,a,u,p,v,k),!0;case"pointerover":var R=k.pointerId;return Ku.set(R,Xu(Ku.get(R)||null,a,u,p,v,k)),!0;case"gotpointercapture":return R=k.pointerId,Yu.set(R,Xu(Yu.get(R)||null,a,u,p,v,k)),!0}return!1}function GC(a){var u=yl(a.target);if(u!==null){var p=o(u);if(p!==null){if(u=p.tag,u===13){if(u=c(p),u!==null){a.blockedOn=u,nn(a.priority,function(){UC(p)});return}}else if(u===31){if(u=l(p),u!==null){a.blockedOn=u,nn(a.priority,function(){UC(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function $f(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var p=Uv(a.nativeEvent);if(p===null){p=a.nativeEvent;var v=new p.constructor(p.type,p);$g=v,p.target.dispatchEvent(v),$g=null}else return u=bl(p),u!==null&&HC(u),a.blockedOn=p,!1;u.shift()}return!0}function qC(a,u,p){$f(a)&&p.delete(u)}function cB(){Vv=!1,Ia!==null&&$f(Ia)&&(Ia=null),Oa!==null&&$f(Oa)&&(Oa=null),Ba!==null&&$f(Ba)&&(Ba=null),Ku.forEach(qC),Yu.forEach(qC)}function Vf(a,u){a.blockedOn===u&&(a.blockedOn=null,Vv||(Vv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cB)))}var Gf=null;function WC(a){Gf!==a&&(Gf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gf===a&&(Gf=null);for(var u=0;u<a.length;u+=3){var p=a[u],v=a[u+1],k=a[u+2];if(typeof v!="function"){if($v(v||p)===null)continue;break}var R=bl(p);R!==null&&(a.splice(u,3),u-=3,Ux(R,{pending:!0,data:k,method:p.method,action:v},v,k))}}))}function tc(a){function u(ne){return Vf(ne,a)}Ia!==null&&Vf(Ia,a),Oa!==null&&Vf(Oa,a),Ba!==null&&Vf(Ba,a),Ku.forEach(u),Yu.forEach(u);for(var p=0;p<za.length;p++){var v=za[p];v.blockedOn===a&&(v.blockedOn=null)}for(;0<za.length&&(p=za[0],p.blockedOn===null);)GC(p),p.blockedOn===null&&za.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var k=p[v],R=p[v+1],H=k[jn]||null;if(typeof R=="function")H||WC(p);else if(H){var Z=null;if(R&&R.hasAttribute("formAction")){if(k=R,H=R[jn]||null)Z=H.formAction;else if($v(k)!==null)continue}else Z=H.action;typeof Z=="function"?p[v+1]=Z:(p.splice(v,3),v-=3),WC(p)}}}function KC(){function a(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(H){return k=H})},focusReset:"manual",scroll:"manual"})}function u(){k!==null&&(k(),k=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,k=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),k!==null&&(k(),k=null)}}}function Gv(a){this._internalRoot=a}qf.prototype.render=Gv.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var p=u.current,v=ar();zC(p,v,a,u,null,null)},qf.prototype.unmount=Gv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;zC(a.current,2,null,a,null,null),Nf(),u[xa]=null}};function qf(a){this._internalRoot=a}qf.prototype.unstable_scheduleHydration=function(a){if(a){var u=Hs();a={blockedOn:null,target:a,priority:u};for(var p=0;p<za.length&&u!==0&&u<za[p].priority;p++);za.splice(p,0,a),p===0&&GC(a)}};var YC=t.version;if(YC!=="19.2.3")throw Error(r(527,YC,"19.2.3"));Y.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(u),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var uB={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Ct=Wf.inject(uB),Ot=Wf}catch{}}return Ju.createRoot=function(a,u){if(!i(a))throw Error(r(299));var p=!1,v="",k=s_,R=n_,H=r_;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(k=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError)),u=OC(a,1,!1,null,null,p,v,null,k,R,H,KC),a[xa]=u.current,Nv(a),new Gv(u)},Ju.hydrateRoot=function(a,u,p){if(!i(a))throw Error(r(299));var v=!1,k="",R=s_,H=n_,Z=r_,ne=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(Z=p.onRecoverableError),p.formState!==void 0&&(ne=p.formState)),u=OC(a,1,!0,u,p??null,v,k,ne,R,H,Z,KC),u.context=BC(null),p=u.current,v=ar(),v=Zs(v),k=_a(v),k.callback=null,Ca(p,k,v),p=v,u.current.lanes=p,qt(u,p),di(u),a[xa]=u.current,Nv(a),new qf(u)},Ju.version="19.2.3",Ju}var jN;function pF(){if(jN)return Qv.exports;jN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qv.exports=mF(),Qv.exports}var gF=pF();const xF=nh(gF);const vF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yF=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),_N=e=>{const t=yF(e);return t.charAt(0).toUpperCase()+t.slice(1)},BA=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),bF=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var wF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const SF=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...l},d)=>y.createElement("svg",{ref:d,...wF,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:BA("lucide",i),...!o&&!bF(l)&&{"aria-hidden":"true"},...l},[...c.map(([h,m])=>y.createElement(h,m)),...Array.isArray(o)?o:[o]]));const _e=(e,t)=>{const n=y.forwardRef(({className:r,...i},o)=>y.createElement(SF,{ref:o,iconNode:t,className:BA(`lucide-${vF(_N(e))}`,`lucide-${e}`,r),...i}));return n.displayName=_N(e),n};const jF=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],zA=_e("activity",jF);const _F=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Jo=_e("archive",_F);const CF=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],NF=_e("arrow-left",CF);const kF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],L0=_e("arrow-right",kF);const EF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],AF=_e("bell",EF);const TF=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rh=_e("book-open",TF);const DF=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bm=_e("bot",DF);const RF=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],PF=_e("box",RF);const MF=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],oa=_e("brain",MF);const LF=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],FA=_e("bug",LF);const IF=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],OF=_e("building",IF);const BF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],HA=_e("calendar",BF);const zF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],FF=_e("chart-column",zF);const HF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ts=_e("check",HF);const UF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gt=_e("chevron-down",UF);const $F=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vs=_e("chevron-right",$F);const VF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Or=_e("chevron-up",VF);const GF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ct=_e("circle-alert",GF);const qF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ta=_e("circle-check-big",qF);const WF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rt=_e("circle-check",WF);const KF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],YF=_e("circle-question-mark",KF);const XF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uo=_e("circle-x",XF);const ZF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dl=_e("circle",ZF);const QF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ci=_e("clock",QF);const JF=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],e8=_e("cloud-download",JF);const t8=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],_p=_e("code-xml",t8);const s8=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],I0=_e("code",s8);const n8=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],r8=_e("cog",n8);const i8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ac=_e("copy",i8);const a8=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],o8=_e("cpu",a8);const l8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],c8=_e("credit-card",l8);const u8=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],hl=_e("database",u8);const d8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yi=_e("download",d8);const h8=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],f8=_e("ellipsis-vertical",h8);const m8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fs=_e("external-link",m8);const p8=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ln=_e("eye-off",p8);const g8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zs=_e("eye",g8);const x8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],v8=_e("file-braces",x8);const y8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],ms=_e("file-code",y8);const b8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],w8=_e("file-down",b8);const S8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],j8=_e("file-image",S8);const _8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pr=_e("file-text",_8);const C8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],O0=_e("file",C8);const N8=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],k8=_e("flask-conical",N8);const E8=[["path",{d:"M18 19a5 5 0 0 1-5-5v8",key:"sz5oeg"}],["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]],A8=_e("folder-git-2",E8);const T8=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],fl=_e("folder-open",T8);const D8=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],UA=_e("folder-plus",D8);const R8=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],B0=_e("folder-search",R8);const P8=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Qa=_e("folder-tree",P8);const M8=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"m9.5 10.5 5 5",key:"ra9qjz"}],["path",{d:"m14.5 10.5-5 5",key:"l2rkpq"}]],jb=_e("folder-x",M8);const L8=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Dd=_e("folder",L8);const I8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$A=_e("funnel",I8);const O8=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],ih=_e("gauge",O8);const B8=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],bn=_e("git-branch",B8);const z8=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Cp=_e("git-commit-horizontal",z8);const F8=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Ko=_e("git-merge",F8);const H8=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Yn=_e("github",H8);const U8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Jr=_e("globe",U8);const $8=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],V8=_e("grid-2x2",$8);const G8=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],VA=_e("hard-drive",G8);const q8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],_b=_e("history",q8);const W8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ji=_e("image",W8);const K8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],CN=_e("import",K8);const Y8=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Cb=_e("inbox",Y8);const X8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sa=_e("info",X8);const Z8=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Q8=_e("key-round",Z8);const J8=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Xr=_e("key",J8);const eH=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],tH=_e("layers",eH);const sH=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],nH=_e("layout-grid",sH);const rH=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ni=_e("lightbulb",rH);const iH=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],NN=_e("link",iH);const aH=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],GA=_e("list-checks",aH);const oH=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],ym=_e("list-todo",oH);const lH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ie=_e("loader-circle",lH);const cH=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zm=_e("lock",cH);const uH=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],z0=_e("log-in",uH);const dH=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hH=_e("mail",dH);const fH=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],F0=_e("map",fH);const mH=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],H0=_e("message-circle",mH);const pH=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],qA=_e("message-square",pH);const gH=[["path",{d:"M5 12h14",key:"1ays0h"}]],U0=_e("minus",gH);const xH=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],$0=_e("monitor",xH);const vH=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],yH=_e("moon",vH);const bH=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Np=_e("package",bH);const wH=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ah=_e("palette",wH);const SH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],jH=_e("panel-left-close",SH);const _H=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],CH=_e("panel-left",_H);const NH=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],kH=_e("party-popper",NH);const EH=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ml=_e("pencil",EH);const AH=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ei=_e("play",AH);const TH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ys=_e("plus",TH);const DH=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],RH=_e("radio",DH);const PH=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Dt=_e("refresh-cw",PH);const MH=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],sy=_e("rocket",MH);const LH=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ho=_e("rotate-ccw",LH);const IH=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],OH=_e("route",IH);const BH=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],WA=_e("save",BH);const zH=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Tc=_e("scale",zH);const FH=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bi=_e("search",FH);const HH=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UH=_e("send",HH);const $H=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],KA=_e("server",$H);const VH=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],oh=_e("settings-2",VH);const GH=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kp=_e("settings",GH);const qH=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Uc=_e("shield",qH);const WH=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Fm=_e("sliders-vertical",WH);const KH=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],us=_e("sparkles",KH);const YH=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],V0=_e("square-check-big",YH);const XH=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],ZH=_e("square-terminal",XH);const QH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],$c=_e("square",QH);const JH=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],el=_e("star",JH);const e7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],t7=_e("sun",e7);const s7=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Nb=_e("tag",s7);const n7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ep=_e("target",n7);const r7=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],tl=_e("terminal",r7);const i7=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],a7=_e("thumbs-up",i7);const o7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Br=_e("trash-2",o7);const l7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gr=_e("trending-up",l7);const c7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Is=_e("triangle-alert",c7);const u7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],d7=_e("upload",u7);const h7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ja=_e("user",h7);const f7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wi=_e("users",f7);const m7=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],p7=_e("wand-sparkles",m7);const g7=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],x7=_e("wifi",g7);const v7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],eo=_e("wrench",v7);const y7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ys=_e("x",y7);const b7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ai=_e("zap",b7);const w7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],S7=_e("zoom-in",w7);const j7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],_7=_e("zoom-out",j7);class C7{constructor(t){this.baseUrl=t,this.connect()}eventsWs=null;terminalSockets=new Map;pendingTerminals=new Map;listeners=new Map;reconnectTimer=null;isConnecting=!1;connect(){if(!(this.isConnecting||this.eventsWs&&this.eventsWs.readyState===WebSocket.OPEN)){this.isConnecting=!0;try{this.eventsWs=new WebSocket(`${this.baseUrl}/ws/events`),this.eventsWs.onopen=()=>{console.log("[WebSocketClient] Connected to events"),this.isConnecting=!1;for(const t of this.listeners.keys())this.eventsWs?.send(JSON.stringify({type:"subscribe",channel:t}))},this.eventsWs.onmessage=t=>{try{const{channel:n,data:r}=JSON.parse(t.data);this.emit(n,r)}catch(n){console.error("[WebSocketClient] Parse error:",n)}},this.eventsWs.onclose=()=>{console.log("[WebSocketClient] Disconnected from events"),this.isConnecting=!1,this.eventsWs=null,this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)},this.eventsWs.onerror=t=>{console.error("[WebSocketClient] Events error:",t),this.isConnecting=!1}}catch(t){console.error("[WebSocketClient] Connection error:",t),this.isConnecting=!1,this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>this.connect(),3e3)}}}subscribe(t,n){return this.listeners.has(t)||(this.listeners.set(t,new Set),this.eventsWs?.readyState===WebSocket.OPEN&&this.eventsWs.send(JSON.stringify({type:"subscribe",channel:t}))),this.listeners.get(t).add(n),()=>{const r=this.listeners.get(t);r&&(r.delete(n),r.size===0&&(this.listeners.delete(t),this.eventsWs?.readyState===WebSocket.OPEN&&this.eventsWs.send(JSON.stringify({type:"unsubscribe",channel:t}))))}}setProject(t){this.eventsWs?.readyState===WebSocket.OPEN&&this.eventsWs.send(JSON.stringify({type:"setProject",projectId:t}))}emit(t,n){const r=this.listeners.get(t);if(r)for(const i of r)try{Array.isArray(n)?i(...n):i(n)}catch(o){console.error(`[WebSocketClient] Callback error for ${t}:`,o)}}connectTerminal(t){return new Promise((n,r)=>{const i=this.terminalSockets.get(t);if(i&&i.readyState===WebSocket.OPEN){n(i);return}this.pendingTerminals.set(t,{resolve:n,reject:r});try{const o=new WebSocket(`${this.baseUrl}/ws/terminal/${t}`);o.onopen=()=>{console.log(`[WebSocketClient] Terminal ${t} connected`),this.terminalSockets.set(t,o);const c=this.pendingTerminals.get(t);c&&(c.resolve(o),this.pendingTerminals.delete(t))},o.onmessage=c=>{try{const l=JSON.parse(c.data);switch(l.type){case"output":this.emit("terminal:output",[t,l.data]);break;case"exit":this.emit("terminal:exit",[t,l.exitCode]);break;case"titleChange":this.emit("terminal:titleChange",[t,l.title]);break;case"connected":l.buffer&&this.emit("terminal:output",[t,l.buffer]);break;case"error":console.error(`[WebSocketClient] Terminal ${t} error:`,l.message);break}}catch(l){console.error("[WebSocketClient] Terminal message parse error:",l)}},o.onclose=()=>{console.log(`[WebSocketClient] Terminal ${t} disconnected`),this.terminalSockets.delete(t),this.emit("terminal:exit",[t,-1])},o.onerror=c=>{console.error(`[WebSocketClient] Terminal ${t} error:`,c);const l=this.pendingTerminals.get(t);l&&(l.reject(new Error("WebSocket connection failed")),this.pendingTerminals.delete(t))}}catch(o){const c=this.pendingTerminals.get(t);c&&(c.reject(o),this.pendingTerminals.delete(t))}})}sendTerminalInput(t,n){const r=this.terminalSockets.get(t);r?.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"input",data:n}))}resizeTerminal(t,n,r){const i=this.terminalSockets.get(t);i?.readyState===WebSocket.OPEN&&i.send(JSON.stringify({type:"resize",cols:n,rows:r}))}disconnectTerminal(t){const n=this.terminalSockets.get(t);n&&(n.close(),this.terminalSockets.delete(t))}disconnectAllTerminals(){for(const[t,n]of this.terminalSockets)n.close(),this.terminalSockets.delete(t)}isConnected(){return this.eventsWs?.readyState===WebSocket.OPEN}close(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.eventsWs&&(this.eventsWs.close(),this.eventsWs=null),this.disconnectAllTerminals(),this.listeners.clear()}}const Yf={"project:list":{method:"GET",path:"/projects"},"project:add":{method:"POST",path:"/projects",bodyBuilder:"wrap"},"project:create":{method:"POST",path:"/projects/create",bodyParams:["name","initGit"]},"project:clone":{method:"POST",path:"/projects/clone",bodyParams:["gitUrl","name"]},"project:remove":{method:"DELETE",path:"/projects/{0}",pathArgs:[0]},"project:updateSettings":{method:"PUT",path:"/projects/{0}/settings",pathArgs:[0]},"project:initialize":{method:"POST",path:"/projects/{0}/initialize",pathArgs:[0]},"project:updateAutoBuild":{method:"POST",path:"/projects/{0}/initialize",pathArgs:[0]},"project:checkVersion":{method:"GET",path:"/projects/{0}/version",pathArgs:[0]},"tabState:get":{method:"GET",path:"/settings/tabs"},"tabState:save":{method:"PUT",path:"/settings/tabs"},"task:list":{method:"GET",path:"/tasks",queryParams:["projectId","projectPath"]},"task:create":{method:"POST",path:"/tasks"},"task:delete":{method:"DELETE",path:"/tasks/{0}",pathArgs:[0]},"task:update":{method:"PUT",path:"/tasks/{0}",pathArgs:[0]},"task:start":{method:"POST",path:"/tasks/{0}/start",pathArgs:[0],bodyParams:["projectPath","autoContinue","maxIterations"]},"task:stop":{method:"POST",path:"/tasks/{0}/stop",pathArgs:[0],bodyParams:["taskId"]},"task:review":{method:"GET",path:"/tasks/{0}/review",pathArgs:[0]},"task:updateStatus":{method:"PUT",path:"/tasks/{0}/status",pathArgs:[0]},"task:recoverStuck":{method:"POST",path:"/tasks/{0}/recover",pathArgs:[0]},"task:checkRunning":{method:"GET",path:"/tasks/running/list"},"task:worktreeStatus":{method:"GET",path:"/projects/{0}/worktrees/{1}/status",pathArgs:[0,1]},"task:worktreeDiff":{method:"GET",path:"/projects/{0}/worktrees/{1}/diff",pathArgs:[0,1]},"task:worktreeMerge":{method:"POST",path:"/projects/{0}/worktrees/{1}/merge",pathArgs:[0,1]},"task:worktreeMergePreview":{method:"GET",path:"/projects/{0}/worktrees/{1}/merge-preview",pathArgs:[0,1]},"task:worktreeDiscard":{method:"DELETE",path:"/projects/{0}/worktrees/{1}",pathArgs:[0,1]},"task:listWorktrees":{method:"GET",path:"/projects/{0}/worktrees",pathArgs:[0]},"task:archive":{method:"POST",path:"/tasks/{0}/archive",pathArgs:[0]},"task:unarchive":{method:"POST",path:"/tasks/{0}/unarchive",pathArgs:[0]},"task:logsGet":{method:"GET",path:"/tasks/{0}/logs",pathArgs:[0]},"task:logsWatch":{method:"POST",path:"/tasks/{0}/logs/watch",pathArgs:[0]},"task:logsUnwatch":{method:"POST",path:"/tasks/{0}/logs/unwatch",pathArgs:[0]},"terminal:create":{method:"POST",path:"/terminals"},"terminal:destroy":{method:"DELETE",path:"/terminals/{0}",pathArgs:[0]},"terminal:resize":{method:"POST",path:"/terminals/{0}/resize",pathArgs:[0]},"terminal:invokeClaude":{method:"POST",path:"/terminals/{0}/claude",pathArgs:[0]},"terminal:generateName":{method:"POST",path:"/terminals/{0}/generate-name",pathArgs:[0]},"terminal:getSessions":{method:"GET",path:"/terminals/sessions"},"terminal:restoreSession":{method:"POST",path:"/terminals/sessions/{0}/restore",pathArgs:[0]},"terminal:clearSessions":{method:"DELETE",path:"/terminals/sessions"},"terminal:resumeClaude":{method:"POST",path:"/terminals/{0}/resume-claude",pathArgs:[0]},"terminal:getSessionDates":{method:"GET",path:"/terminals/sessions/dates"},"terminal:getSessionsForDate":{method:"GET",path:"/terminals/sessions/date/{0}",pathArgs:[0]},"terminal:restoreFromDate":{method:"POST",path:"/terminals/sessions/date/{0}/restore",pathArgs:[0]},"settings:get":{method:"GET",path:"/settings"},"settings:save":{method:"PUT",path:"/settings"},"claude:profilesGet":{method:"GET",path:"/claude/profiles"},"claude:profileSave":{method:"POST",path:"/claude/profiles"},"claude:profileDelete":{method:"DELETE",path:"/claude/profiles/{0}",pathArgs:[0]},"claude:profileRename":{method:"PUT",path:"/claude/profiles/{0}/rename",pathArgs:[0]},"claude:profileSetActive":{method:"POST",path:"/claude/profiles/{0}/activate",pathArgs:[0]},"claude:profileSwitch":{method:"POST",path:"/claude/profiles/{0}/switch",pathArgs:[0]},"claude:profileInitialize":{method:"POST",path:"/claude/profiles/{0}/initialize",pathArgs:[0]},"claude:profileSetToken":{method:"POST",path:"/claude/profiles/{0}/token",pathArgs:[0],bodyParams:["token","email"]},"claude:autoSwitchSettings":{method:"GET",path:"/claude/auto-switch"},"claude:updateAutoSwitch":{method:"PUT",path:"/claude/auto-switch"},"claude:fetchUsage":{method:"GET",path:"/claude/profiles/{0}/usage",pathArgs:[0]},"claude:getBestProfile":{method:"GET",path:"/claude/profiles/best"},"github:getRepositories":{method:"GET",path:"/github/projects/{0}/repositories",pathArgs:[0]},"github:getIssues":{method:"GET",path:"/github/projects/{0}/issues",pathArgs:[0]},"github:getIssue":{method:"GET",path:"/github/projects/{0}/issues/{1}",pathArgs:[0,1]},"github:getIssueComments":{method:"GET",path:"/github/projects/{0}/issues/{1}/comments",pathArgs:[0,1]},"github:checkConnection":{method:"GET",path:"/github/projects/{0}/status",pathArgs:[0]},"github:investigateIssue":{method:"POST",path:"/github/projects/{0}/issues/{1}/investigate",pathArgs:[0,1]},"github:importIssues":{method:"POST",path:"/github/projects/{0}/issues/import",pathArgs:[0]},"github:createRelease":{method:"POST",path:"/github/projects/{0}/releases",pathArgs:[0]},"github:checkCli":{method:"GET",path:"/github/cli/status"},"github:checkAuth":{method:"GET",path:"/github/auth/status"},"github:startAuth":{method:"POST",path:"/github/auth/start"},"github:getToken":{method:"GET",path:"/github/auth/token"},"github:getUser":{method:"GET",path:"/github/user"},"github:listUserRepos":{method:"GET",path:"/github/user/repos"},"github:detectRepo":{method:"GET",path:"/github/projects/{0}/detect-repo",pathArgs:[0]},"github:getBranches":{method:"GET",path:"/github/projects/{0}/branches",pathArgs:[0]},"github:createRepo":{method:"POST",path:"/github/repos"},"github:addRemote":{method:"POST",path:"/github/projects/{0}/remote",pathArgs:[0]},"github:listOrgs":{method:"GET",path:"/github/orgs"},"linear:getTeams":{method:"GET",path:"/linear/teams"},"linear:getProjects":{method:"GET",path:"/linear/projects/{0}",pathArgs:[0]},"linear:getIssues":{method:"GET",path:"/linear/projects/{0}/issues",pathArgs:[0]},"linear:importIssues":{method:"POST",path:"/linear/projects/{0}/issues/import",pathArgs:[0]},"linear:checkConnection":{method:"GET",path:"/linear/projects/{0}/status",pathArgs:[0]},"roadmap:get":{method:"GET",path:"/roadmap/projects/{0}",pathArgs:[0]},"roadmap:getStatus":{method:"GET",path:"/roadmap/projects/{0}/status",pathArgs:[0]},"roadmap:save":{method:"PUT",path:"/roadmap/projects/{0}",pathArgs:[0]},"roadmap:generate":{method:"POST",path:"/roadmap/projects/{0}/generate",pathArgs:[0]},"roadmap:generateWithCompetitor":{method:"POST",path:"/roadmap/projects/{0}/generate",pathArgs:[0]},"roadmap:refresh":{method:"POST",path:"/roadmap/projects/{0}/refresh",pathArgs:[0]},"roadmap:stop":{method:"POST",path:"/roadmap/projects/{0}/stop",pathArgs:[0]},"roadmap:updateFeature":{method:"PUT",path:"/roadmap/projects/{0}/features/{1}",pathArgs:[0,1]},"roadmap:convertToSpec":{method:"POST",path:"/roadmap/projects/{0}/features/{1}/convert",pathArgs:[0,1]},"ideation:get":{method:"GET",path:"/ideation/projects/{0}",pathArgs:[0]},"ideation:generate":{method:"POST",path:"/ideation/projects/{0}/generate",pathArgs:[0]},"ideation:refresh":{method:"POST",path:"/ideation/projects/{0}/generate",pathArgs:[0]},"ideation:stop":{method:"POST",path:"/ideation/projects/{0}/stop",pathArgs:[0]},"ideation:updateIdea":{method:"PUT",path:"/ideation/projects/{0}/ideas/{1}/status",pathArgs:[0,1]},"ideation:convertToTask":{method:"POST",path:"/ideation/projects/{0}/ideas/{1}/convert",pathArgs:[0,1]},"ideation:dismiss":{method:"POST",path:"/ideation/projects/{0}/ideas/{1}/dismiss",pathArgs:[0,1]},"ideation:dismissAll":{method:"POST",path:"/ideation/projects/{0}/dismiss-all",pathArgs:[0]},"ideation:archive":{method:"POST",path:"/ideation/projects/{0}/ideas/{1}/archive",pathArgs:[0,1]},"ideation:delete":{method:"DELETE",path:"/ideation/projects/{0}/ideas/{1}",pathArgs:[0,1]},"ideation:deleteMultiple":{method:"POST",path:"/ideation/projects/{0}/delete-multiple",pathArgs:[0]},"context:get":{method:"GET",path:"/context/projects/{0}",pathArgs:[0]},"context:refreshIndex":{method:"POST",path:"/context/projects/{0}/refresh",pathArgs:[0]},"context:memoryStatus":{method:"GET",path:"/context/projects/{0}/memory-status",pathArgs:[0]},"context:searchMemories":{method:"GET",path:"/context/projects/{0}/memories/search",pathArgs:[0],queryParams:["query"]},"context:getMemories":{method:"GET",path:"/context/projects/{0}/memories",pathArgs:[0],queryParams:["limit"]},"env:get":{method:"GET",path:"/projects/{0}/env",pathArgs:[0]},"env:update":{method:"PUT",path:"/projects/{0}/env",pathArgs:[0]},"env:checkClaudeAuth":{method:"GET",path:"/projects/{0}/env/claude-auth",pathArgs:[0]},"env:invokeClaudeSetup":{method:"POST",path:"/projects/{0}/env/claude-setup",pathArgs:[0]},"dialog:selectDirectory":{method:"GET",path:"/files/select-directory"},"dialog:createProjectFolder":{method:"POST",path:"/files/create-project-folder"},"dialog:getDefaultProjectLocation":{method:"GET",path:"/projects/directory"},"fileExplorer:list":{method:"GET",path:"/files",queryParams:["path"]},"git:getBranches":{method:"GET",path:"/projects/{0}/git/branches",pathArgs:[0]},"git:getCurrentBranch":{method:"GET",path:"/projects/{0}/git/current-branch",pathArgs:[0]},"git:detectMainBranch":{method:"GET",path:"/projects/{0}/git/main-branch",pathArgs:[0]},"git:checkStatus":{method:"GET",path:"/projects/{0}/git/status",pathArgs:[0]},"git:initialize":{method:"POST",path:"/projects/{0}/git/initialize",pathArgs:[0]},"app:version":{method:"GET",path:"/version"},"shell:openExternal":{method:"POST",path:"/shell/open-external"},"changelog:getDoneTasks":{method:"GET",path:"/changelog/projects/{0}/done-tasks",pathArgs:[0]},"changelog:loadTaskSpecs":{method:"GET",path:"/changelog/projects/{0}/specs",pathArgs:[0]},"changelog:generate":{method:"POST",path:"/changelog/projects/{0}/generate",pathArgs:[0]},"changelog:save":{method:"PUT",path:"/changelog/projects/{0}",pathArgs:[0]},"changelog:readExisting":{method:"GET",path:"/changelog/projects/{0}",pathArgs:[0]},"changelog:suggestVersion":{method:"GET",path:"/changelog/projects/{0}/suggest-version",pathArgs:[0]},"changelog:suggestVersionFromCommits":{method:"POST",path:"/changelog/projects/{0}/suggest-version-from-commits",pathArgs:[0]},"changelog:getBranches":{method:"GET",path:"/changelog/projects/{0}/branches",pathArgs:[0]},"changelog:getTags":{method:"GET",path:"/changelog/projects/{0}/tags",pathArgs:[0]},"changelog:getCommitsPreview":{method:"POST",path:"/changelog/projects/{0}/commits-preview",pathArgs:[0]},"changelog:saveImage":{method:"POST",path:"/changelog/projects/{0}/image",pathArgs:[0]},"changelog:readLocalImage":{method:"GET",path:"/changelog/projects/{0}/image",pathArgs:[0]},"insights:getSession":{method:"GET",path:"/insights/projects/{0}/session",pathArgs:[0]},"insights:sendMessage":{method:"POST",path:"/insights/projects/{0}/message",pathArgs:[0]},"insights:clearSession":{method:"DELETE",path:"/insights/projects/{0}/session",pathArgs:[0]},"insights:createTask":{method:"POST",path:"/insights/projects/{0}/create-task",pathArgs:[0]},"insights:listSessions":{method:"GET",path:"/insights/projects/{0}/sessions",pathArgs:[0]},"insights:newSession":{method:"POST",path:"/insights/projects/{0}/sessions",pathArgs:[0]},"insights:switchSession":{method:"POST",path:"/insights/projects/{0}/sessions/{1}/switch",pathArgs:[0,1]},"insights:deleteSession":{method:"DELETE",path:"/insights/projects/{0}/sessions/{1}",pathArgs:[0,1]},"insights:renameSession":{method:"PUT",path:"/insights/projects/{0}/sessions/{1}/rename",pathArgs:[0,1]},"insights:updateModelConfig":{method:"PUT",path:"/insights/projects/{0}/model-config",pathArgs:[0]},"memory:status":{method:"GET",path:"/memory/status",queryParams:["dbPath"]},"memory:listDatabases":{method:"GET",path:"/memory/databases",queryParams:["dbPath"]},"memory:testConnection":{method:"POST",path:"/memory/test-connection"},"graphiti:validateLlm":{method:"POST",path:"/graphiti/validate-llm"},"graphiti:testConnection":{method:"POST",path:"/graphiti/test-connection"},"ollama:checkStatus":{method:"GET",path:"/ollama/status",queryParams:["baseUrl"]},"ollama:listModels":{method:"GET",path:"/ollama/models",queryParams:["baseUrl"]},"ollama:listEmbeddingModels":{method:"GET",path:"/ollama/models/embedding",queryParams:["baseUrl"]},"ollama:pullModel":{method:"POST",path:"/ollama/models/pull"},"autobuild:source:check":{method:"GET",path:"/autobuild/source/check"},"autobuild:source:download":{method:"POST",path:"/autobuild/source/download"},"autobuild:source:version":{method:"GET",path:"/autobuild/source/version"},"autobuild:source:env:get":{method:"GET",path:"/autobuild/source/env"},"autobuild:source:env:update":{method:"PUT",path:"/autobuild/source/env"},"autobuild:source:env:checkToken":{method:"GET",path:"/autobuild/source/env/check-token"},"release:suggestVersion":{method:"GET",path:"/release/suggest-version"},"release:create":{method:"POST",path:"/release/create"},"release:preflight":{method:"GET",path:"/release/preflight"},"release:getVersions":{method:"GET",path:"/release/versions"}};function N7(e,t){let n=e.path;const r=e.pathArgs||[];for(let i=0;i<r.length;i++){const o=r[i],c=t[o];n=n.replace(`{${o}}`,encodeURIComponent(String(c)))}return n}function k7(e,t){const n=new Set(e.pathArgs||[]);return t.filter((r,i)=>!n.has(i))}const E7="/api",A7="ws://localhost:3001";let ny=null;function T7(){if(!ny){let e=A7;ny=new C7(e)}return ny}async function Ga(e,t,n,r){try{let i=`${E7}${t}`;if(r&&Object.keys(r).length>0){const l=new URLSearchParams(r);i+=`?${l.toString()}`}console.log("[WebAPI] Request:",{method:e,url:i,body:n});const c=await(await fetch(i,{method:e,headers:{"Content-Type":"application/json"},credentials:"include",body:n?JSON.stringify(n):void 0})).json();return console.log("[WebAPI] Response:",{url:i,result:c}),c}catch(i){return console.error("[WebAPI] Error:",i),{success:!1,error:i instanceof Error?i.message:"Request failed"}}}const D7={getProjects:"project:list",addProject:"project:add",createProject:"project:create",cloneProject:"project:clone",removeProject:"project:remove",updateProjectSettings:"project:updateSettings",initializeProject:"project:initialize",updateProjectAutoBuild:"project:updateAutoBuild",checkProjectVersion:"project:checkVersion",getTabState:"tabState:get",saveTabState:"tabState:save",getTasks:"task:list",createTask:"task:create",deleteTask:"task:delete",updateTask:"task:update",startTask:"task:start",stopTask:"task:stop",reviewTask:"task:review",updateTaskStatus:"task:updateStatus",recoverStuckTask:"task:recoverStuck",checkTaskRunning:"task:checkRunning",archiveTask:"task:archive",unarchiveTask:"task:unarchive",getWorktreeStatus:"task:worktreeStatus",getWorktreeDiff:"task:worktreeDiff",mergeWorktree:"task:worktreeMerge",mergeWorktreePreview:"task:worktreeMergePreview",discardWorktree:"task:worktreeDiscard",listWorktrees:"task:listWorktrees",getTaskLogs:"task:logsGet",watchTaskLogs:"task:logsWatch",unwatchTaskLogs:"task:logsUnwatch",createTerminal:"terminal:create",destroyTerminal:"terminal:destroy",resizeTerminal:"terminal:resize",invokeClaudeInTerminal:"terminal:invokeClaude",generateTerminalName:"terminal:generateName",getTerminalSessions:"terminal:getSessions",restoreTerminalSession:"terminal:restoreSession",clearTerminalSessions:"terminal:clearSessions",resumeTerminalClaude:"terminal:resumeClaude",getTerminalSessionDates:"terminal:getSessionDates",getTerminalSessionsForDate:"terminal:getSessionsForDate",restoreTerminalFromDate:"terminal:restoreFromDate",getSettings:"settings:get",saveSettings:"settings:save",getClaudeProfiles:"claude:profilesGet",saveClaudeProfile:"claude:profileSave",deleteClaudeProfile:"claude:profileDelete",renameClaudeProfile:"claude:profileRename",setActiveClaudeProfile:"claude:profileSetActive",switchClaudeProfile:"claude:profileSwitch",initializeClaudeProfile:"claude:profileInitialize",setClaudeProfileToken:"claude:profileSetToken",getAutoSwitchSettings:"claude:autoSwitchSettings",updateAutoSwitchSettings:"claude:updateAutoSwitch",fetchClaudeUsage:"claude:fetchUsage",getBestClaudeProfile:"claude:getBestProfile",getGitHubRepositories:"github:getRepositories",getGitHubIssues:"github:getIssues",getGitHubIssue:"github:getIssue",getGitHubIssueComments:"github:getIssueComments",checkGitHubConnection:"github:checkConnection",investigateGitHubIssue:"github:investigateIssue",importGitHubIssues:"github:importIssues",createGitHubRelease:"github:createRelease",checkGitHubCli:"github:checkCli",checkGitHubAuth:"github:checkAuth",startGitHubAuth:"github:startAuth",getGitHubToken:"github:getToken",getGitHubUser:"github:getUser",listGitHubUserRepos:"github:listUserRepos",detectGitHubRepo:"github:detectRepo",getGitHubBranches:"github:getBranches",createGitHubRepo:"github:createRepo",addGitHubRemote:"github:addRemote",listGitHubOrgs:"github:listOrgs",getLinearTeams:"linear:getTeams",getLinearProjects:"linear:getProjects",getLinearIssues:"linear:getIssues",importLinearIssues:"linear:importIssues",checkLinearConnection:"linear:checkConnection",getRoadmap:"roadmap:get",getRoadmapStatus:"roadmap:getStatus",saveRoadmap:"roadmap:save",generateRoadmap:"roadmap:generate",generateRoadmapWithCompetitor:"roadmap:generateWithCompetitor",refreshRoadmap:"roadmap:refresh",stopRoadmap:"roadmap:stop",updateRoadmapFeature:"roadmap:updateFeature",convertFeatureToSpec:"roadmap:convertToSpec",getIdeation:"ideation:get",generateIdeation:"ideation:generate",refreshIdeation:"ideation:refresh",stopIdeation:"ideation:stop",updateIdeaStatus:"ideation:updateIdea",convertIdeaToTask:"ideation:convertToTask",dismissIdea:"ideation:dismiss",dismissAllIdeas:"ideation:dismissAll",archiveIdea:"ideation:archive",deleteIdea:"ideation:delete",deleteMultipleIdeas:"ideation:deleteMultiple",getProjectContext:"context:get",refreshProjectIndex:"context:refreshIndex",getMemoryStatus:"context:memoryStatus",searchMemories:"context:searchMemories",getRecentMemories:"context:getMemories",getProjectEnv:"env:get",updateProjectEnv:"env:update",checkClaudeAuth:"env:checkClaudeAuth",invokeClaudeSetup:"env:invokeClaudeSetup",selectDirectory:"dialog:selectDirectory",createProjectFolder:"dialog:createProjectFolder",getDefaultProjectLocation:"dialog:getDefaultProjectLocation",listDirectory:"fileExplorer:list",getGitBranches:"git:getBranches",getCurrentGitBranch:"git:getCurrentBranch",detectMainBranch:"git:detectMainBranch",checkGitStatus:"git:checkStatus",initializeGit:"git:initialize",openExternal:"shell:openExternal",getChangelogDoneTasks:"changelog:getDoneTasks",loadChangelogTaskSpecs:"changelog:loadTaskSpecs",generateChangelog:"changelog:generate",saveChangelog:"changelog:save",readExistingChangelog:"changelog:readExisting",suggestChangelogVersion:"changelog:suggestVersion",suggestChangelogVersionFromCommits:"changelog:suggestVersionFromCommits",getChangelogBranches:"changelog:getBranches",getChangelogTags:"changelog:getTags",getChangelogCommitsPreview:"changelog:getCommitsPreview",saveChangelogImage:"changelog:saveImage",readChangelogLocalImage:"changelog:readLocalImage",getInsightsSession:"insights:getSession",sendInsightsMessage:"insights:sendMessage",clearInsightsSession:"insights:clearSession",createTaskFromInsights:"insights:createTask",listInsightsSessions:"insights:listSessions",newInsightsSession:"insights:newSession",switchInsightsSession:"insights:switchSession",deleteInsightsSession:"insights:deleteSession",renameInsightsSession:"insights:renameSession",updateInsightsModelConfig:"insights:updateModelConfig",getMemoryInfrastructureStatus:"memory:status",listMemoryDatabases:"memory:listDatabases",testMemoryConnection:"memory:testConnection",validateLLMApiKey:"graphiti:validateLlm",testGraphitiConnection:"graphiti:testConnection",checkOllamaStatus:"ollama:checkStatus",listOllamaModels:"ollama:listModels",listOllamaEmbeddingModels:"ollama:listEmbeddingModels",pullOllamaModel:"ollama:pullModel",checkAutoBuildSource:"autobuild:source:check",downloadAutoBuildSource:"autobuild:source:download",getAutoBuildSourceVersion:"autobuild:source:version",getAutoBuildSourceEnv:"autobuild:source:env:get",updateAutoBuildSourceEnv:"autobuild:source:env:update",checkAutoBuildSourceToken:"autobuild:source:env:checkToken",suggestReleaseVersion:"release:suggestVersion",createRelease:"release:create",runReleasePreflight:"release:preflight",getReleaseVersions:"release:getVersions"};function kN(e){return async(...t)=>{const n=N7(e,t),r=k7(e,t);if(e.method==="GET"){const i={};return e.queryParams&&e.queryParams.forEach((o,c)=>{r[c]!==void 0&&(i[o]=String(r[c]))}),Ga(e.method,n,void 0,i)}else{let i;return e.bodyParams&&r.length>0?(i={},e.bodyParams.forEach((o,c)=>{r[c]!==void 0&&(i[o]=r[c])})):r.length===1?i=r[0]:r.length>1&&(i=r),Ga(e.method,n,i)}}}function ed(e,t="Not implemented in web mode"){return async()=>(console.warn(`[WebAPI] ${e} - ${t}`),{success:!1,error:t})}function nc(e){return()=>(console.debug(`[WebAPI] ${e} - Event listener registered (web mode)`),()=>{})}function R7(){const e=T7(),t={checkAuthStatus:()=>Ga("GET","/auth/status"),login:n=>Ga("POST","/auth/login",{password:n}),logout:()=>Ga("POST","/auth/logout"),createTerminal:async n=>{const r=await Ga("POST","/terminals",n);if(r.success)try{await e.connectTerminal(n.id)}catch(i){console.error("Failed to connect terminal WebSocket:",i)}return r},destroyTerminal:async n=>(e.disconnectTerminal(n),Ga("DELETE",`/terminals/${n}`)),sendTerminalInput:(n,r)=>{e.sendTerminalInput(n,r)},resizeTerminal:(n,r,i)=>{e.resizeTerminal(n,r,i),Ga("POST",`/terminals/${n}/resize`,{cols:r,rows:i})},onTerminalOutput:n=>e.subscribe("terminal:output",n),onTerminalExit:n=>e.subscribe("terminal:exit",n),onTerminalTitleChange:n=>e.subscribe("terminal:titleChange",n),onTerminalClaudeSession:n=>e.subscribe("terminal:claudeSession",n),onTerminalRateLimit:n=>e.subscribe("terminal:rateLimit",n),onTerminalOAuthToken:n=>e.subscribe("oauth:token",n),onTaskProgress:n=>e.subscribe("task:progress",n),onTaskError:n=>e.subscribe("task:error",n),onTaskLog:n=>e.subscribe("task:log",n),onTaskStatusChange:n=>e.subscribe("task:statusChange",n),onTaskExecutionProgress:n=>e.subscribe("task:progress",n),onTaskExecutionError:n=>e.subscribe("task:error",n),onTaskExecutionLog:n=>e.subscribe("task:log",n),onTaskExecutionComplete:n=>e.subscribe("task:complete",n),onTaskLogsChanged:n=>e.subscribe("task:logsChanged",n),onRoadmapProgress:n=>e.subscribe("roadmap:progress",n),onRoadmapComplete:n=>e.subscribe("roadmap:complete",n),onRoadmapError:n=>e.subscribe("roadmap:error",n),onRoadmapStopped:n=>e.subscribe("roadmap:stopped",n),onIdeationProgress:n=>e.subscribe("ideation:progress",n),onIdeationComplete:n=>e.subscribe("ideation:complete",n),onIdeationError:n=>e.subscribe("ideation:error",n),onIdeationStopped:n=>e.subscribe("ideation:stopped",n),onIdeationLog:n=>e.subscribe("ideation:log",n),onIdeationTypeComplete:n=>e.subscribe("ideation:typeComplete",n),onIdeationTypeFailed:n=>e.subscribe("ideation:typeFailed",n),onInsightsStreamChunk:n=>e.subscribe("insights:chunk",n),onInsightsStatus:n=>e.subscribe("insights:status",n),onInsightsError:n=>e.subscribe("insights:error",n),onChangelogProgress:n=>e.subscribe("changelog:progress",n),onChangelogComplete:n=>e.subscribe("changelog:complete",n),onChangelogError:n=>e.subscribe("changelog:error",n),onChangelogGenerationProgress:n=>e.subscribe("changelog:generationProgress",n),onChangelogGenerationComplete:n=>e.subscribe("changelog:generationComplete",n),onChangelogGenerationError:n=>e.subscribe("changelog:generationError",n),onGitHubInvestigationProgress:n=>e.subscribe("github:investigationProgress",n),onGitHubInvestigationComplete:n=>e.subscribe("github:investigationComplete",n),onGitHubInvestigationError:n=>e.subscribe("github:investigationError",n),onShellOpenExternal:n=>e.subscribe("shell:openExternal",n),onShellOpenPath:n=>e.subscribe("shell:openPath",n),onSDKRateLimit:n=>e.subscribe("sdk:rateLimit",n),onUsageUpdated:n=>e.subscribe("usage:updated",n),onProactiveSwapNotification:n=>e.subscribe("proactiveSwap",n),onAppUpdateAvailable:nc("onAppUpdateAvailable"),onAppUpdateDownloaded:nc("onAppUpdateDownloaded"),onAppUpdateError:nc("onAppUpdateError"),onAppUpdateProgress:nc("onAppUpdateProgress"),onAutoBuildSourceUpdateProgress:nc("onAutoBuildSourceUpdateProgress"),onDownloadProgress:nc("onDownloadProgress"),getAppVersion:async()=>"2.7.2-web",openExternal:async n=>(window.open(n,"_blank"),{success:!0}),copyToClipboard:async n=>{try{return await navigator.clipboard.writeText(n),{success:!0}}catch{return{success:!1,error:"Clipboard access denied"}}},selectDirectory:async()=>(console.warn("[WebAPI] selectDirectory - Not available in web mode"),null),minimizeWindow:async()=>{},maximizeWindow:async()=>{},closeWindow:async()=>{},isWindowMaximized:async()=>({success:!0,data:!1}),checkForUpdates:async()=>({success:!0,data:void 0}),checkAppUpdate:async()=>({success:!0,data:{updateAvailable:!1}}),downloadUpdate:ed("downloadUpdate","Not available in web mode"),downloadAppUpdate:ed("downloadAppUpdate","Not available in web mode"),installUpdate:ed("installUpdate","Not available in web mode"),installAppUpdate:ed("installAppUpdate","Not available in web mode"),setActiveProject:n=>{e.setProject(n)},isWebSocketConnected:()=>e.isConnected()};return new Proxy(t,{get(n,r){if(typeof r=="symbol"||r.startsWith("_"))return n[r];if(r in n)return(r==="getClaudeProfiles"||r==="checkOllamaStatus"||r==="saveSettings")&&console.log(`[WebAPI Proxy] Accessing ${r}: found in manual methods`),n[r];const i=D7[r];if(i&&i in Yf){const c=Yf[i];return(r==="getClaudeProfiles"||r==="checkOllamaStatus"||r==="saveSettings")&&console.log(`[WebAPI Proxy] Accessing ${r}: auto-generated from channel ${i}`,c),kN(c)}const o=r.replace(/([A-Z])/g,":$1").toLowerCase();if(o in Yf){const c=Yf[o];return(r==="getClaudeProfiles"||r==="checkOllamaStatus"||r==="saveSettings")&&console.log(`[WebAPI Proxy] Accessing ${r}: auto-generated from direct channel ${o}`,c),kN(c)}return(r==="getClaudeProfiles"||r==="checkOllamaStatus"||r==="saveSettings")&&console.warn(`[WebAPI Proxy] Accessing ${r}: NOT FOUND - returning stub error`),console.warn(`[WebAPI] Unknown method: ${r}`),ed(r,`Method '${r}' not implemented`)}})}const Zi=`api-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,G0=typeof window<"u"&&!!window.electronAPI;console.log(`[API:${Zi}] Module loaded at:`,new Error().stack);console.log(`[API:${Zi}] Initializing API... isElectron:`,G0);const J=(()=>{if(G0)return console.log(`[API:${Zi}] Using Electron IPC API`),window.electronAPI;{console.log(`[API:${Zi}] Creating Web HTTP/WebSocket API`);const e=R7();return e.__moduleId=Zi,console.log(`[API:${Zi}] Web API created:`,{exists:!!e,hasGetAppVersion:!!e?.getAppVersion,hasOnTaskProgress:!!e?.onTaskProgress,hasGetClaudeProfiles:!!e?.getClaudeProfiles,hasCheckOllamaStatus:!!e?.checkOllamaStatus,hasSaveSettings:!!e?.saveSettings,hasGetMemoryInfrastructureStatus:!!e?.getMemoryInfrastructureStatus,type:typeof e,moduleId:e.__moduleId,keys:e?Object.keys(e).slice(0,10):[]}),window.__claudeAPI=e,window.__claudeAPIModuleId=Zi,console.log(`[API:${Zi}] Stored in window.__claudeAPI for debugging`),e}})();console.log(`[API:${Zi}] Export completed. api =`,{type:typeof J,isUndefined:J===void 0,hasGetAppVersion:!!J?.getAppVersion,moduleId:J.__moduleId});const Ki=!G0;var Kr=OA();const P7=nh(Kr);function M7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vc(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function q0(e){return"nodeType"in e}function Fn(e){var t,n;return e?Vc(e)?e:q0(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function W0(e){const{Document:t}=Fn(e);return e instanceof t}function lh(e){return Vc(e)?!1:e instanceof Fn(e).HTMLElement}function YA(e){return e instanceof Fn(e).SVGElement}function Gc(e){return e?Vc(e)?e.document:q0(e)?W0(e)?e:lh(e)||YA(e)?e.ownerDocument:document:document:document}const ti=Ap?y.useLayoutEffect:y.useEffect;function Tp(e){const t=y.useRef(e);return ti(()=>{t.current=e}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function L7(){const e=y.useRef(null),t=y.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=y.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Rd(e,t){t===void 0&&(t=[e]);const n=y.useRef(e);return ti(()=>{n.current!==e&&(n.current=e)},t),n}function ch(e,t){const n=y.useRef();return y.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Hm(e){const t=Tp(e),n=y.useRef(null),r=y.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,r]}function Um(e){const t=y.useRef();return y.useEffect(()=>{t.current=e},[e]),t.current}let ry={};function uh(e,t){return y.useMemo(()=>{if(t)return t;const n=ry[e]==null?0:ry[e]+1;return ry[e]=n,e+"-"+n},[e,t])}function XA(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,c)=>{const l=Object.entries(c);for(const[d,h]of l){const m=o[d];m!=null&&(o[d]=m+e*h)}return o},{...t})}}const Sc=XA(1),Pd=XA(-1);function I7(e){return"clientX"in e&&"clientY"in e}function Dp(e){if(!e)return!1;const{KeyboardEvent:t}=Fn(e.target);return t&&e instanceof t}function O7(e){if(!e)return!1;const{TouchEvent:t}=Fn(e.target);return t&&e instanceof t}function $m(e){if(O7(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return I7(e)?{x:e.clientX,y:e.clientY}:null}const Si=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Si.Translate.toString(e),Si.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),EN="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function B7(e){return e.matches(EN)?e:e.querySelector(EN)}const z7={display:"none"};function F7(e){let{id:t,value:n}=e;return Lt.createElement("div",{id:t,style:z7},n)}function H7(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Lt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function U7(){const[e,t]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ZA=y.createContext(null);function $7(e){const t=y.useContext(ZA);y.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function V7(){const[e]=y.useState(()=>new Set),t=y.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[y.useCallback(r=>{let{type:i,event:o}=r;e.forEach(c=>{var l;return(l=c[i])==null?void 0:l.call(c,o)})},[e]),t]}const G7={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},q7={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function W7(e){let{announcements:t=q7,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=G7}=e;const{announce:o,announcement:c}=U7(),l=uh("DndLiveRegion"),[d,h]=y.useState(!1);if(y.useEffect(()=>{h(!0)},[]),$7(y.useMemo(()=>({onDragStart(f){let{active:g}=f;o(t.onDragStart({active:g}))},onDragMove(f){let{active:g,over:x}=f;t.onDragMove&&o(t.onDragMove({active:g,over:x}))},onDragOver(f){let{active:g,over:x}=f;o(t.onDragOver({active:g,over:x}))},onDragEnd(f){let{active:g,over:x}=f;o(t.onDragEnd({active:g,over:x}))},onDragCancel(f){let{active:g,over:x}=f;o(t.onDragCancel({active:g,over:x}))}}),[o,t])),!d)return null;const m=Lt.createElement(Lt.Fragment,null,Lt.createElement(F7,{id:r,value:i.draggable}),Lt.createElement(H7,{id:l,announcement:c}));return n?Kr.createPortal(m,n):m}var tn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(tn||(tn={}));function Vm(){}function Dc(e,t){return y.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Rp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const si=Object.freeze({x:0,y:0});function QA(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K7(e,t){const n=$m(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function JA(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Y7(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function AN(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function eT(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function TN(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const X7=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=TN(t,t.left,t.top),o=[];for(const c of r){const{id:l}=c,d=n.get(l);if(d){const h=QA(TN(d),i);o.push({id:l,data:{droppableContainer:c,value:h}})}}return o.sort(JA)},K0=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=AN(t),o=[];for(const c of r){const{id:l}=c,d=n.get(l);if(d){const h=AN(d),m=i.reduce((g,x,C)=>g+QA(h[C],x),0),f=Number((m/4).toFixed(4));o.push({id:l,data:{droppableContainer:c,value:f}})}}return o.sort(JA)};function Z7(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),c=i-r,l=o-n;if(r<i&&n<o){const d=t.width*t.height,h=e.width*e.height,m=c*l,f=m/(d+h-m);return Number(f.toFixed(4))}return 0}const Q7=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:c}=o,l=n.get(c);if(l){const d=Z7(l,t);d>0&&i.push({id:c,data:{droppableContainer:o,value:d}})}}return i.sort(Y7)};function J7(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function tT(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:si}function eU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((c,l)=>({...c,top:c.top+e*l.y,bottom:c.bottom+e*l.y,left:c.left+e*l.x,right:c.right+e*l.x}),{...n})}}const tU=eU(1);function sT(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function sU(e,t,n){const r=sT(t);if(!r)return e;const{scaleX:i,scaleY:o,x:c,y:l}=r,d=e.left-c-(1-i)*parseFloat(n),h=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),m=i?e.width/i:e.width,f=o?e.height/o:e.height;return{width:m,height:f,top:h,right:d+m,bottom:h+f,left:d}}const nU={ignoreTransform:!1};function qc(e,t){t===void 0&&(t=nU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:m}=Fn(e).getComputedStyle(e);h&&(n=sU(n,h,m))}const{top:r,left:i,width:o,height:c,bottom:l,right:d}=n;return{top:r,left:i,width:o,height:c,bottom:l,right:d}}function DN(e){return qc(e,{ignoreTransform:!0})}function rU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function iU(e,t){return t===void 0&&(t=Fn(e).getComputedStyle(e)),t.position==="fixed"}function aU(e,t){t===void 0&&(t=Fn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Pp(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(W0(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!lh(i)||YA(i)||n.includes(i))return n;const o=Fn(e).getComputedStyle(i);return i!==e&&aU(i,o)&&n.push(i),iU(i,o)?n:r(i.parentNode)}return e?r(e):n}function nT(e){const[t]=Pp(e,1);return t??null}function iy(e){return!Ap||!e?null:Vc(e)?e:q0(e)?W0(e)||e===Gc(e).scrollingElement?window:lh(e)?e:null:null}function rT(e){return Vc(e)?e.scrollX:e.scrollLeft}function iT(e){return Vc(e)?e.scrollY:e.scrollTop}function kb(e){return{x:rT(e),y:iT(e)}}var ln;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ln||(ln={}));function aT(e){return!Ap||!e?!1:e===document.scrollingElement}function oT(e){const t={x:0,y:0},n=aT(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,c=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:c,isRight:l,maxScroll:r,minScroll:t}}const oU={x:.2,y:.2};function lU(e,t,n,r,i){let{top:o,left:c,right:l,bottom:d}=n;r===void 0&&(r=10),i===void 0&&(i=oU);const{isTop:h,isBottom:m,isLeft:f,isRight:g}=oT(e),x={x:0,y:0},C={x:0,y:0},_={height:t.height*i.y,width:t.width*i.x};return!h&&o<=t.top+_.height?(x.y=ln.Backward,C.y=r*Math.abs((t.top+_.height-o)/_.height)):!m&&d>=t.bottom-_.height&&(x.y=ln.Forward,C.y=r*Math.abs((t.bottom-_.height-d)/_.height)),!g&&l>=t.right-_.width?(x.x=ln.Forward,C.x=r*Math.abs((t.right-_.width-l)/_.width)):!f&&c<=t.left+_.width&&(x.x=ln.Backward,C.x=r*Math.abs((t.left+_.width-c)/_.width)),{direction:x,speed:C}}function cU(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:c}=window;return{top:0,left:0,right:o,bottom:c,width:o,height:c}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function lT(e){return e.reduce((t,n)=>Sc(t,kb(n)),si)}function uU(e){return e.reduce((t,n)=>t+rT(n),0)}function dU(e){return e.reduce((t,n)=>t+iT(n),0)}function cT(e,t){if(t===void 0&&(t=qc),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);nT(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const hU=[["x",["left","right"],uU],["y",["top","bottom"],dU]];class Y0{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Pp(n),i=lT(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,c,l]of hU)for(const d of c)Object.defineProperty(this,d,{get:()=>{const h=l(r),m=i[o]-h;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class yd{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function fU(e){const{EventTarget:t}=Fn(e);return e instanceof t?e:Gc(e)}function ay(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Tr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Tr||(Tr={}));function RN(e){e.preventDefault()}function mU(e){e.stopPropagation()}var Ut;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ut||(Ut={}));const uT={start:[Ut.Space,Ut.Enter],cancel:[Ut.Esc],end:[Ut.Space,Ut.Enter,Ut.Tab]},pU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ut.Right:return{...n,x:n.x+25};case Ut.Left:return{...n,x:n.x-25};case Ut.Down:return{...n,y:n.y+25};case Ut.Up:return{...n,y:n.y-25}}};class Mp{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new yd(Gc(n)),this.windowListeners=new yd(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Tr.Resize,this.handleCancel),this.windowListeners.add(Tr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Tr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&cT(r),n(si)}handleKeyDown(t){if(Dp(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=uT,coordinateGetter:c=pU,scrollBehavior:l="smooth"}=i,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:h}=r.current,m=h?{x:h.left,y:h.top}:si;this.referenceCoordinates||(this.referenceCoordinates=m);const f=c(t,{active:n,context:r.current,currentCoordinates:m});if(f){const g=Pd(f,m),x={x:0,y:0},{scrollableAncestors:C}=r.current;for(const _ of C){const b=t.code,{isTop:w,isRight:j,isLeft:S,isBottom:N,maxScroll:T,minScroll:E}=oT(_),D=cU(_),A={x:Math.min(b===Ut.Right?D.right-D.width/2:D.right,Math.max(b===Ut.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(b===Ut.Down?D.bottom-D.height/2:D.bottom,Math.max(b===Ut.Down?D.top:D.top+D.height/2,f.y))},P=b===Ut.Right&&!j||b===Ut.Left&&!S,M=b===Ut.Down&&!N||b===Ut.Up&&!w;if(P&&A.x!==f.x){const B=_.scrollLeft+g.x,F=b===Ut.Right&&B<=T.x||b===Ut.Left&&B>=E.x;if(F&&!g.y){_.scrollTo({left:B,behavior:l});return}F?x.x=_.scrollLeft-B:x.x=b===Ut.Right?_.scrollLeft-T.x:_.scrollLeft-E.x,x.x&&_.scrollBy({left:-x.x,behavior:l});break}else if(M&&A.y!==f.y){const B=_.scrollTop+g.y,F=b===Ut.Down&&B<=T.y||b===Ut.Up&&B>=E.y;if(F&&!g.x){_.scrollTo({top:B,behavior:l});return}F?x.y=_.scrollTop-B:x.y=b===Ut.Down?_.scrollTop-T.y:_.scrollTop-E.y,x.y&&_.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,Sc(Pd(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mp.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=uT,onActivation:i}=t,{active:o}=n;const{code:c}=e.nativeEvent;if(r.start.includes(c)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function PN(e){return!!(e&&"distance"in e)}function MN(e){return!!(e&&"delay"in e)}class X0{constructor(t,n,r){var i;r===void 0&&(r=fU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:c}=o;this.props=t,this.events=n,this.document=Gc(c),this.documentListeners=new yd(this.document),this.listeners=new yd(r),this.windowListeners=new yd(Fn(c)),this.initialCoordinates=(i=$m(o))!=null?i:si,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Tr.Resize,this.handleCancel),this.windowListeners.add(Tr.DragStart,RN),this.windowListeners.add(Tr.VisibilityChange,this.handleCancel),this.windowListeners.add(Tr.ContextMenu,RN),this.documentListeners.add(Tr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(MN(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(PN(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Tr.Click,mU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Tr.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:c,options:{activationConstraint:l}}=o;if(!i)return;const d=(n=$m(t))!=null?n:si,h=Pd(i,d);if(!r&&l){if(PN(l)){if(l.tolerance!=null&&ay(h,l.tolerance))return this.handleCancel();if(ay(h,l.distance))return this.handleStart()}if(MN(l)&&ay(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}t.cancelable&&t.preventDefault(),c(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ut.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const gU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Wc extends X0{constructor(t){const{event:n}=t,r=Gc(n.target);super(t,gU,r)}}Wc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const xU={move:{name:"mousemove"},end:{name:"mouseup"}};var Eb;(function(e){e[e.RightClick=2]="RightClick"})(Eb||(Eb={}));class vU extends X0{constructor(t){super(t,xU,Gc(t.event.target))}}vU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Eb.RightClick?!1:(r?.({event:n}),!0)}}];const oy={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yU extends X0{constructor(t){super(t,oy)}static setup(){return window.addEventListener(oy.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(oy.move.name,t)};function t(){}}}yU.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var bd;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(bd||(bd={}));var Gm;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gm||(Gm={}));function bU(e){let{acceleration:t,activator:n=bd.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:c=5,order:l=Gm.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:m,delta:f,threshold:g}=e;const x=SU({delta:f,disabled:!o}),[C,_]=L7(),b=y.useRef({x:0,y:0}),w=y.useRef({x:0,y:0}),j=y.useMemo(()=>{switch(n){case bd.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case bd.DraggableRect:return i}},[n,i,d]),S=y.useRef(null),N=y.useCallback(()=>{const E=S.current;if(!E)return;const D=b.current.x*w.current.x,A=b.current.y*w.current.y;E.scrollBy(D,A)},[]),T=y.useMemo(()=>l===Gm.TreeOrder?[...h].reverse():h,[l,h]);y.useEffect(()=>{if(!o||!h.length||!j){_();return}for(const E of T){if(r?.(E)===!1)continue;const D=h.indexOf(E),A=m[D];if(!A)continue;const{direction:P,speed:M}=lU(E,A,j,t,g);for(const B of["x","y"])x[B][P[B]]||(M[B]=0,P[B]=0);if(M.x>0||M.y>0){_(),S.current=E,C(N,c),b.current=M,w.current=P;return}}b.current={x:0,y:0},w.current={x:0,y:0},_()},[t,N,r,_,o,c,JSON.stringify(j),JSON.stringify(x),C,h,T,m,JSON.stringify(g)])}const wU={x:{[ln.Backward]:!1,[ln.Forward]:!1},y:{[ln.Backward]:!1,[ln.Forward]:!1}};function SU(e){let{delta:t,disabled:n}=e;const r=Um(t);return ch(i=>{if(n||!r||!i)return wU;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ln.Backward]:i.x[ln.Backward]||o.x===-1,[ln.Forward]:i.x[ln.Forward]||o.x===1},y:{[ln.Backward]:i.y[ln.Backward]||o.y===-1,[ln.Forward]:i.y[ln.Forward]||o.y===1}}},[n,t,r])}function jU(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ch(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function _U(e,t){return y.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,r)}));return[...n,...o]},[]),[e,t])}var Md;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Md||(Md={}));var Ab;(function(e){e.Optimized="optimized"})(Ab||(Ab={}));const LN=new Map;function CU(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,c]=y.useState(null),{frequency:l,measure:d,strategy:h}=i,m=y.useRef(e),f=b(),g=Rd(f),x=y.useCallback(function(w){w===void 0&&(w=[]),!g.current&&c(j=>j===null?w:j.concat(w.filter(S=>!j.includes(S))))},[g]),C=y.useRef(null),_=ch(w=>{if(f&&!n)return LN;if(!w||w===LN||m.current!==e||o!=null){const j=new Map;for(let S of e){if(!S)continue;if(o&&o.length>0&&!o.includes(S.id)&&S.rect.current){j.set(S.id,S.rect.current);continue}const N=S.node.current,T=N?new Y0(d(N),N):null;S.rect.current=T,T&&j.set(S.id,T)}return j}return w},[e,o,n,f,d]);return y.useEffect(()=>{m.current=e},[e]),y.useEffect(()=>{f||x()},[n,f]),y.useEffect(()=>{o&&o.length>0&&c(null)},[JSON.stringify(o)]),y.useEffect(()=>{f||typeof l!="number"||C.current!==null||(C.current=setTimeout(()=>{x(),C.current=null},l))},[l,f,x,...r]),{droppableRects:_,measureDroppableContainers:x,measuringScheduled:o!=null};function b(){switch(h){case Md.Always:return!1;case Md.BeforeDragging:return n;default:return!n}}}function Z0(e,t){return ch(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function NU(e,t){return Z0(e,t)}function kU(e){let{callback:t,disabled:n}=e;const r=Tp(t),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return y.useEffect(()=>()=>i?.disconnect(),[i]),i}function Lp(e){let{callback:t,disabled:n}=e;const r=Tp(t),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return y.useEffect(()=>()=>i?.disconnect(),[i]),i}function EU(e){return new Y0(qc(e),e)}function IN(e,t,n){t===void 0&&(t=EU);const[r,i]=y.useState(null);function o(){i(d=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=d??n)!=null?h:null}const m=t(e);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const c=kU({callback(d){if(e)for(const h of d){const{type:m,target:f}=h;if(m==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),l=Lp({callback:o});return ti(()=>{o(),e?(l?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),c?.disconnect())},[e]),r}function AU(e){const t=Z0(e);return tT(e,t)}const ON=[];function TU(e){const t=y.useRef(e),n=ch(r=>e?r&&r!==ON&&e&&t.current&&e.parentNode===t.current.parentNode?r:Pp(e):ON,[e]);return y.useEffect(()=>{t.current=e},[e]),n}function DU(e){const[t,n]=y.useState(null),r=y.useRef(e),i=y.useCallback(o=>{const c=iy(o.target);c&&n(l=>l?(l.set(c,kb(c)),new Map(l)):null)},[]);return y.useEffect(()=>{const o=r.current;if(e!==o){c(o);const l=e.map(d=>{const h=iy(d);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,kb(h)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),r.current=e}return()=>{c(e),c(o)};function c(l){l.forEach(d=>{const h=iy(d);h?.removeEventListener("scroll",i)})}},[i,e]),y.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,c)=>Sc(o,c),si):lT(e):si,[e,t])}function BN(e,t){t===void 0&&(t=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},t),y.useEffect(()=>{const r=e!==si;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Pd(e,n.current):si}function RU(e){y.useEffect(()=>{if(!Ap)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function PU(e,t){return y.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=c=>{o(c,t)},n},{}),[e,t])}function dT(e){return y.useMemo(()=>e?rU(e):null,[e])}const zN=[];function MU(e,t){t===void 0&&(t=qc);const[n]=e,r=dT(n?Fn(n):null),[i,o]=y.useState(zN);function c(){o(()=>e.length?e.map(d=>aT(d)?r:new Y0(t(d),d)):zN)}const l=Lp({callback:c});return ti(()=>{l?.disconnect(),c(),e.forEach(d=>l?.observe(d))},[e]),i}function hT(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return lh(t)?t:e}function LU(e){let{measure:t}=e;const[n,r]=y.useState(null),i=y.useCallback(h=>{for(const{target:m}of h)if(lh(m)){r(f=>{const g=t(m);return f?{...f,width:g.width,height:g.height}:g});break}},[t]),o=Lp({callback:i}),c=y.useCallback(h=>{const m=hT(h);o?.disconnect(),m&&o?.observe(m),r(m?t(m):null)},[t,o]),[l,d]=Hm(c);return y.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const IU=[{sensor:Wc,options:{}},{sensor:Mp,options:{}}],OU={current:{}},bm={draggable:{measure:DN},droppable:{measure:DN,strategy:Md.WhileDragging,frequency:Ab.Optimized},dragOverlay:{measure:qc}};class wd extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const BU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bm,measureDroppableContainers:Vm,windowRect:null,measuringScheduled:!1},fT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vm,draggableNodes:new Map,over:null,measureDroppableContainers:Vm},dh=y.createContext(fT),mT=y.createContext(BU);function zU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wd}}}function FU(e,t){switch(t.type){case tn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case tn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case tn.DragEnd:case tn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case tn.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new wd(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case tn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const c=new wd(e.droppable.containers);return c.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:c}}}case tn.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new wd(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function HU(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=y.useContext(dh),o=Um(r),c=Um(n?.id);return y.useEffect(()=>{if(!t&&!r&&o&&c!=null){if(!Dp(o)||document.activeElement===o.target)return;const l=i.get(c);if(!l)return;const{activatorNode:d,node:h}=l;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[d.current,h.current]){if(!m)continue;const f=B7(m);if(f){f.focus();break}}})}},[r,t,i,c,o]),null}function pT(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function UU(e){return y.useMemo(()=>({draggable:{...bm.draggable,...e?.draggable},droppable:{...bm.droppable,...e?.droppable},dragOverlay:{...bm.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function $U(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=y.useRef(!1),{x:c,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ti(()=>{if(!c&&!l||!t){o.current=!1;return}if(o.current||!r)return;const h=t?.node.current;if(!h||h.isConnected===!1)return;const m=n(h),f=tT(m,r);if(c||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const g=nT(h);g&&g.scrollBy({top:f.y,left:f.x})}},[t,c,l,r,n])}const Ip=y.createContext({...si,scaleX:1,scaleY:1});var qa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qa||(qa={}));const Op=y.memo(function(t){var n,r,i,o;let{id:c,accessibility:l,autoScroll:d=!0,children:h,sensors:m=IU,collisionDetection:f=Q7,measuring:g,modifiers:x,...C}=t;const _=y.useReducer(FU,void 0,zU),[b,w]=_,[j,S]=V7(),[N,T]=y.useState(qa.Uninitialized),E=N===qa.Initialized,{draggable:{active:D,nodes:A,translate:P},droppable:{containers:M}}=b,B=D!=null?A.get(D):null,F=y.useRef({initial:null,translated:null}),U=y.useMemo(()=>{var ds;return D!=null?{id:D,data:(ds=B?.data)!=null?ds:OU,rect:F}:null},[D,B]),G=y.useRef(null),[$,V]=y.useState(null),[Y,K]=y.useState(null),O=Rd(C,Object.values(C)),L=uh("DndDescribedBy",c),I=y.useMemo(()=>M.getEnabled(),[M]),q=UU(g),{droppableRects:z,measureDroppableContainers:ee,measuringScheduled:ie}=CU(I,{dragging:E,dependencies:[P.x,P.y],config:q.droppable}),re=jU(A,D),X=y.useMemo(()=>Y?$m(Y):null,[Y]),W=Jn(),Q=NU(re,q.draggable.measure);$U({activeNode:D!=null?A.get(D):null,config:W.layoutShiftCompensation,initialRect:Q,measure:q.draggable.measure});const se=IN(re,q.draggable.measure,Q),he=IN(re?re.parentElement:null),de=y.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=M.getNodeFor((n=de.current.over)==null?void 0:n.id),Re=LU({measure:q.dragOverlay.measure}),ce=(r=Re.nodeRef.current)!=null?r:re,ge=E?(i=Re.rect)!=null?i:se:null,ae=!!(Re.nodeRef.current&&Re.rect),Ee=AU(ae?null:se),Be=dT(ce?Fn(ce):null),et=TU(E?Ne??re:null),De=MU(et),Me=pT(x,{transform:{x:P.x-Ee.x,y:P.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:Y,active:U,activeNodeRect:se,containerNodeRect:he,draggingNodeRect:ge,over:de.current.over,overlayNodeRect:Re.rect,scrollableAncestors:et,scrollableAncestorRects:De,windowRect:Be}),qe=X?Sc(X,P):null,st=DU(et),_t=BN(st),fe=BN(st,[se]),Ae=Sc(Me,_t),Le=ge?tU(ge,Me):null,We=U&&Le?f({active:U,collisionRect:Le,droppableRects:z,droppableContainers:I,pointerCoordinates:qe}):null,ve=eT(We,"id"),[Fe,Ue]=y.useState(null),Ct=ae?Me:Sc(Me,fe),Ot=J7(Ct,(o=Fe?.rect)!=null?o:null,se),Ke=y.useRef(null),Xe=y.useCallback((ds,Zt)=>{let{sensor:Qt,options:Se}=Zt;if(G.current==null)return;const ze=A.get(G.current);if(!ze)return;const yt=ds.nativeEvent,Nt=new Qt({active:G.current,activeNode:ze,event:yt,options:Se,context:de,onAbort($t){if(!A.get($t))return;const{onDragAbort:ot}=O.current,is={id:$t};ot?.(is),j({type:"onDragAbort",event:is})},onPending($t,Yt,ot,is){if(!A.get($t))return;const{onDragPending:Sn}=O.current,Hs={id:$t,constraint:Yt,initialCoordinates:ot,offset:is};Sn?.(Hs),j({type:"onDragPending",event:Hs})},onStart($t){const Yt=G.current;if(Yt==null)return;const ot=A.get(Yt);if(!ot)return;const{onDragStart:is}=O.current,Zs={activatorEvent:yt,active:{id:Yt,data:ot.data,rect:F}};Kr.unstable_batchedUpdates(()=>{is?.(Zs),T(qa.Initializing),w({type:tn.DragStart,initialCoordinates:$t,active:Yt}),j({type:"onDragStart",event:Zs}),V(Ke.current),K(yt)})},onMove($t){w({type:tn.DragMove,coordinates:$t})},onEnd:qt(tn.DragEnd),onCancel:qt(tn.DragCancel)});Ke.current=Nt;function qt($t){return async function(){const{active:ot,collisions:is,over:Zs,scrollAdjustedTranslate:Sn}=de.current;let Hs=null;if(ot&&Sn){const{cancelDrop:nn}=O.current;Hs={activatorEvent:yt,active:ot,collisions:is,delta:Sn,over:Zs},$t===tn.DragEnd&&typeof nn=="function"&&await Promise.resolve(nn(Hs))&&($t=tn.DragCancel)}G.current=null,Kr.unstable_batchedUpdates(()=>{w({type:$t}),T(qa.Uninitialized),Ue(null),V(null),K(null),Ke.current=null;const nn=$t===tn.DragEnd?"onDragEnd":"onDragCancel";if(Hs){const rn=O.current[nn];rn?.(Hs),j({type:nn,event:Hs})}})}}},[A]),Ft=y.useCallback((ds,Zt)=>(Qt,Se)=>{const ze=Qt.nativeEvent,yt=A.get(Se);if(G.current!==null||!yt||ze.dndKit||ze.defaultPrevented)return;const Nt={active:yt};ds(Qt,Zt.options,Nt)===!0&&(ze.dndKit={capturedBy:Zt.sensor},G.current=Se,Xe(Qt,Zt))},[A,Xe]),js=_U(m,Ft);RU(m),ti(()=>{se&&N===qa.Initializing&&T(qa.Initialized)},[se,N]),y.useEffect(()=>{const{onDragMove:ds}=O.current,{active:Zt,activatorEvent:Qt,collisions:Se,over:ze}=de.current;if(!Zt||!Qt)return;const yt={active:Zt,activatorEvent:Qt,collisions:Se,delta:{x:Ae.x,y:Ae.y},over:ze};Kr.unstable_batchedUpdates(()=>{ds?.(yt),j({type:"onDragMove",event:yt})})},[Ae.x,Ae.y]),y.useEffect(()=>{const{active:ds,activatorEvent:Zt,collisions:Qt,droppableContainers:Se,scrollAdjustedTranslate:ze}=de.current;if(!ds||G.current==null||!Zt||!ze)return;const{onDragOver:yt}=O.current,Nt=Se.get(ve),qt=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,$t={active:ds,activatorEvent:Zt,collisions:Qt,delta:{x:ze.x,y:ze.y},over:qt};Kr.unstable_batchedUpdates(()=>{Ue(qt),yt?.($t),j({type:"onDragOver",event:$t})})},[ve]),ti(()=>{de.current={activatorEvent:Y,active:U,activeNode:re,collisionRect:Le,collisions:We,droppableRects:z,draggableNodes:A,draggingNode:ce,draggingNodeRect:ge,droppableContainers:M,over:Fe,scrollableAncestors:et,scrollAdjustedTranslate:Ae},F.current={initial:ge,translated:Le}},[U,re,We,Le,A,ce,ge,z,M,Fe,et,Ae]),bU({...W,delta:P,draggingRect:Le,pointerCoordinates:qe,scrollableAncestors:et,scrollableAncestorRects:De});const vr=y.useMemo(()=>({active:U,activeNode:re,activeNodeRect:se,activatorEvent:Y,collisions:We,containerNodeRect:he,dragOverlay:Re,draggableNodes:A,droppableContainers:M,droppableRects:z,over:Fe,measureDroppableContainers:ee,scrollableAncestors:et,scrollableAncestorRects:De,measuringConfiguration:q,measuringScheduled:ie,windowRect:Be}),[U,re,se,Y,We,he,Re,A,M,z,Fe,ee,et,De,q,ie,Be]),ye=y.useMemo(()=>({activatorEvent:Y,activators:js,active:U,activeNodeRect:se,ariaDescribedById:{draggable:L},dispatch:w,draggableNodes:A,over:Fe,measureDroppableContainers:ee}),[Y,js,U,se,w,L,A,Fe,ee]);return Lt.createElement(ZA.Provider,{value:S},Lt.createElement(dh.Provider,{value:ye},Lt.createElement(mT.Provider,{value:vr},Lt.createElement(Ip.Provider,{value:Ot},h)),Lt.createElement(HU,{disabled:l?.restoreFocus===!1})),Lt.createElement(W7,{...l,hiddenTextDescribedById:L}));function Jn(){const ds=$?.autoScrollEnabled===!1,Zt=typeof d=="object"?d.enabled===!1:d===!1,Qt=E&&!ds&&!Zt;return typeof d=="object"?{...d,enabled:Qt}:{enabled:Qt}}}),VU=y.createContext(null),FN="button",GU="Draggable";function qU(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=uh(GU),{activators:c,activatorEvent:l,active:d,activeNodeRect:h,ariaDescribedById:m,draggableNodes:f,over:g}=y.useContext(dh),{role:x=FN,roleDescription:C="draggable",tabIndex:_=0}=i??{},b=d?.id===t,w=y.useContext(b?Ip:VU),[j,S]=Hm(),[N,T]=Hm(),E=PU(c,t),D=Rd(n);ti(()=>(f.set(t,{id:t,key:o,node:j,activatorNode:N,data:D}),()=>{const P=f.get(t);P&&P.key===o&&f.delete(t)}),[f,t]);const A=y.useMemo(()=>({role:x,tabIndex:_,"aria-disabled":r,"aria-pressed":b&&x===FN?!0:void 0,"aria-roledescription":C,"aria-describedby":m.draggable}),[r,x,_,b,C,m.draggable]);return{active:d,activatorEvent:l,activeNodeRect:h,attributes:A,isDragging:b,listeners:r?void 0:E,node:j,over:g,setNodeRef:S,setActivatorNodeRef:T,transform:w}}function gT(){return y.useContext(mT)}const WU="Droppable",KU={timeout:25};function Bp(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=uh(WU),{active:c,dispatch:l,over:d,measureDroppableContainers:h}=y.useContext(dh),m=y.useRef({disabled:n}),f=y.useRef(!1),g=y.useRef(null),x=y.useRef(null),{disabled:C,updateMeasurementsFor:_,timeout:b}={...KU,...i},w=Rd(_??r),j=y.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(w.current)?w.current:[w.current]),x.current=null},b)},[b]),S=Lp({callback:j,disabled:C||!c}),N=y.useCallback((A,P)=>{S&&(P&&(S.unobserve(P),f.current=!1),A&&S.observe(A))},[S]),[T,E]=Hm(N),D=Rd(t);return y.useEffect(()=>{!S||!T.current||(S.disconnect(),f.current=!1,S.observe(T.current))},[T,S]),y.useEffect(()=>(l({type:tn.RegisterDroppable,element:{id:r,key:o,disabled:n,node:T,rect:g,data:D}}),()=>l({type:tn.UnregisterDroppable,key:o,id:r})),[r]),y.useEffect(()=>{n!==m.current.disabled&&(l({type:tn.SetDroppableDisabled,id:r,key:o,disabled:n}),m.current.disabled=n)},[r,o,n,l]),{active:c,rect:g,isOver:d?.id===r,node:T,over:d,setNodeRef:E}}function YU(e){let{animation:t,children:n}=e;const[r,i]=y.useState(null),[o,c]=y.useState(null),l=Um(n);return!n&&!r&&l&&i(l),ti(()=>{if(!o)return;const d=r?.key,h=r?.props.id;if(d==null||h==null){i(null);return}Promise.resolve(t(h,o)).then(()=>{i(null)})},[t,r,o]),Lt.createElement(Lt.Fragment,null,n,r?y.cloneElement(r,{ref:c}):null)}const XU={x:0,y:0,scaleX:1,scaleY:1};function ZU(e){let{children:t}=e;return Lt.createElement(dh.Provider,{value:fT},Lt.createElement(Ip.Provider,{value:XU},t))}const QU={position:"fixed",touchAction:"none"},JU=e=>Dp(e)?"transform 250ms ease":void 0,e9=y.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:c,rect:l,style:d,transform:h,transition:m=JU}=e;if(!l)return null;const f=i?h:{...h,scaleX:1,scaleY:1},g={...QU,width:l.width,height:l.height,top:l.top,left:l.left,transform:Si.Transform.toString(f),transformOrigin:i&&r?K7(r,l):void 0,transition:typeof m=="function"?m(r):m,...d};return Lt.createElement(n,{className:c,style:g,ref:t},o)}),t9=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:o,className:c}=e;if(o!=null&&o.active)for(const[l,d]of Object.entries(o.active))d!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,d));if(o!=null&&o.dragOverlay)for(const[l,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(l,d);return c!=null&&c.active&&n.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[d,h]of Object.entries(i))n.node.style.setProperty(d,h);c!=null&&c.active&&n.node.classList.remove(c.active)}},s9=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Si.Transform.toString(t)},{transform:Si.Transform.toString(n)}]},n9={duration:250,easing:"ease",keyframes:s9,sideEffects:t9({styles:{active:{opacity:"0"}}})};function r9(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return Tp((o,c)=>{if(t===null)return;const l=n.get(o);if(!l)return;const d=l.node.current;if(!d)return;const h=hT(c);if(!h)return;const{transform:m}=Fn(c).getComputedStyle(c),f=sT(m);if(!f)return;const g=typeof t=="function"?t:i9(t);return cT(d,i.draggable.measure),g({active:{id:o,data:l.data,node:d,rect:i.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:c,rect:i.dragOverlay.measure(h)},droppableContainers:r,measuringConfiguration:i,transform:f})})}function i9(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...n9,...e};return o=>{let{active:c,dragOverlay:l,transform:d,...h}=o;if(!t)return;const m={x:l.rect.left-c.rect.left,y:l.rect.top-c.rect.top},f={scaleX:d.scaleX!==1?c.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?c.rect.height*d.scaleY/l.rect.height:1},g={x:d.x-m.x,y:d.y-m.y,...f},x=i({...h,active:c,dragOverlay:l,transform:{initial:d,final:g}}),[C]=x,_=x[x.length-1];if(JSON.stringify(C)===JSON.stringify(_))return;const b=r?.({active:c,dragOverlay:l,...h}),w=l.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(j=>{w.onfinish=()=>{b?.(),j()}})}}let HN=0;function a9(e){return y.useMemo(()=>{if(e!=null)return HN++,HN},[e])}const zp=Lt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:o,modifiers:c,wrapperElement:l="div",className:d,zIndex:h=999}=e;const{activatorEvent:m,active:f,activeNodeRect:g,containerNodeRect:x,draggableNodes:C,droppableContainers:_,dragOverlay:b,over:w,measuringConfiguration:j,scrollableAncestors:S,scrollableAncestorRects:N,windowRect:T}=gT(),E=y.useContext(Ip),D=a9(f?.id),A=pT(c,{activatorEvent:m,active:f,activeNodeRect:g,containerNodeRect:x,draggingNodeRect:b.rect,over:w,overlayNodeRect:b.rect,scrollableAncestors:S,scrollableAncestorRects:N,transform:E,windowRect:T}),P=Z0(g),M=r9({config:r,draggableNodes:C,droppableContainers:_,measuringConfiguration:j}),B=P?b.setRef:void 0;return Lt.createElement(ZU,null,Lt.createElement(YU,{animation:M},f&&D?Lt.createElement(e9,{key:D,id:f.id,ref:B,as:l,activatorEvent:m,adjustScale:t,className:d,transition:o,rect:P,style:{zIndex:h,...i},transform:A},n):null))});function xT(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function o9(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Xf(e){return e!==null&&e>=0}function l9(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function c9(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Zf={scaleX:1,scaleY:1},u9=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:i,overIndex:o,index:c}=e;const l=(t=n[i])!=null?t:r;if(!l)return null;const d=d9(n,c,i);if(c===i){const h=n[o];return h?{x:i<o?h.left+h.width-(l.left+l.width):h.left-l.left,y:0,...Zf}:null}return c>i&&c<=o?{x:-l.width-d,y:0,...Zf}:c<i&&c>=o?{x:l.width+d,y:0,...Zf}:{x:0,y:0,...Zf}};function d9(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return!r||!i&&!o?0:n<t?i?r.left-(i.left+i.width):o.left-(r.left+r.width):o?o.left-(r.left+r.width):r.left-(i.left+i.width)}const vT=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=xT(t,r,n),c=t[i],l=o[i];return!l||!c?null:{x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height}},Qf={scaleX:1,scaleY:1},yT=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:c}=e;const l=(t=o[n])!=null?t:r;if(!l)return null;if(i===n){const h=o[c];return h?{x:0,y:n<c?h.top+h.height-(l.top+l.height):h.top-l.top,...Qf}:null}const d=h9(o,i,n);return i>n&&i<=c?{x:0,y:-l.height-d,...Qf}:i<n&&i>=c?{x:0,y:l.height+d,...Qf}:{x:0,y:0,...Qf}};function h9(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const bT="Sortable",wT=Lt.createContext({activeIndex:-1,containerId:bT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:vT,disabled:{draggable:!1,droppable:!1}});function Q0(e){let{children:t,id:n,items:r,strategy:i=vT,disabled:o=!1}=e;const{active:c,dragOverlay:l,droppableRects:d,over:h,measureDroppableContainers:m}=gT(),f=uh(bT,n),g=l.rect!==null,x=y.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),C=c!=null,_=c?x.indexOf(c.id):-1,b=h?x.indexOf(h.id):-1,w=y.useRef(x),j=!l9(x,w.current),S=b!==-1&&_===-1||j,N=c9(o);ti(()=>{j&&C&&m(x)},[j,x,C,m]),y.useEffect(()=>{w.current=x},[x]);const T=y.useMemo(()=>({activeIndex:_,containerId:f,disabled:N,disableTransforms:S,items:x,overIndex:b,useDragOverlay:g,sortedRects:o9(x,d),strategy:i}),[_,f,N.draggable,N.droppable,S,x,b,d,g,i]);return Lt.createElement(wT.Provider,{value:T},t)}const f9=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return xT(n,r,i).indexOf(t)},m9=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:c,previousItems:l,previousContainerId:d,transition:h}=e;return!h||!r||l!==o&&i===c?!1:n?!0:c!==i&&t===d},p9={duration:200,easing:"ease"},ST="transform",g9=Si.Transition.toString({property:ST,duration:0,easing:"linear"}),x9={roleDescription:"sortable"};function v9(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,c]=y.useState(null),l=y.useRef(n);return ti(()=>{if(!t&&n!==l.current&&r.current){const d=i.current;if(d){const h=qc(r.current,{ignoreTransform:!0}),m={x:d.left-h.left,y:d.top-h.top,scaleX:d.width/h.width,scaleY:d.height/h.height};(m.x||m.y)&&c(m)}}n!==l.current&&(l.current=n)},[t,n,r,i]),y.useEffect(()=>{o&&c(null)},[o]),o}function J0(e){let{animateLayoutChanges:t=m9,attributes:n,disabled:r,data:i,getNewIndex:o=f9,id:c,strategy:l,resizeObserverConfig:d,transition:h=p9}=e;const{items:m,containerId:f,activeIndex:g,disabled:x,disableTransforms:C,sortedRects:_,overIndex:b,useDragOverlay:w,strategy:j}=y.useContext(wT),S=y9(r,x),N=m.indexOf(c),T=y.useMemo(()=>({sortable:{containerId:f,index:N,items:m},...i}),[f,i,N,m]),E=y.useMemo(()=>m.slice(m.indexOf(c)),[m,c]),{rect:D,node:A,isOver:P,setNodeRef:M}=Bp({id:c,data:T,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...d}}),{active:B,activatorEvent:F,activeNodeRect:U,attributes:G,setNodeRef:$,listeners:V,isDragging:Y,over:K,setActivatorNodeRef:O,transform:L}=qU({id:c,data:T,attributes:{...x9,...n},disabled:S.draggable}),I=M7(M,$),q=!!B,z=q&&!C&&Xf(g)&&Xf(b),ee=!w&&Y,ie=ee&&z?L:null,X=z?ie??(l??j)({rects:_,activeNodeRect:U,activeIndex:g,overIndex:b,index:N}):null,W=Xf(g)&&Xf(b)?o({id:c,items:m,activeIndex:g,overIndex:b}):N,Q=B?.id,se=y.useRef({activeId:Q,items:m,newIndex:W,containerId:f}),he=m!==se.current.items,de=t({active:B,containerId:f,isDragging:Y,isSorting:q,id:c,index:N,items:m,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:h,wasDragging:se.current.activeId!=null}),Ne=v9({disabled:!de,index:N,node:A,rect:D});return y.useEffect(()=>{q&&se.current.newIndex!==W&&(se.current.newIndex=W),f!==se.current.containerId&&(se.current.containerId=f),m!==se.current.items&&(se.current.items=m)},[q,W,f,m]),y.useEffect(()=>{if(Q===se.current.activeId)return;if(Q!=null&&se.current.activeId==null){se.current.activeId=Q;return}const ce=setTimeout(()=>{se.current.activeId=Q},50);return()=>clearTimeout(ce)},[Q]),{active:B,activeIndex:g,attributes:G,data:T,rect:D,index:N,newIndex:W,items:m,isOver:P,isSorting:q,isDragging:Y,listeners:V,node:A,overIndex:b,over:K,setNodeRef:I,setActivatorNodeRef:O,setDroppableNodeRef:M,setDraggableNodeRef:$,transform:Ne??X,transition:Re()};function Re(){if(Ne||he&&se.current.newIndex===N)return g9;if(!(ee&&!Dp(F)||!h)&&(q||de))return Si.Transition.toString({...h,property:ST})}}function y9(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function qm(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const b9=[Ut.Down,Ut.Right,Ut.Up,Ut.Left],jT=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:c,scrollableAncestors:l}}=t;if(b9.includes(e.code)){if(e.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const g=i.get(f.id);if(g)switch(e.code){case Ut.Down:r.top<g.top&&d.push(f);break;case Ut.Up:r.top>g.top&&d.push(f);break;case Ut.Left:r.left>g.left&&d.push(f);break;case Ut.Right:r.left<g.left&&d.push(f);break}});const h=K0({collisionRect:r,droppableRects:i,droppableContainers:d});let m=eT(h,"id");if(m===c?.id&&h.length>1&&(m=h[1].id),m!=null){const f=o.get(n.id),g=o.get(m),x=g?i.get(g.id):null,C=g?.node.current;if(C&&x&&f&&g){const b=Pp(C).some((E,D)=>l[D]!==E),w=_T(f,g),j=w9(f,g),S=b||!w?{x:0,y:0}:{x:j?r.width-x.width:0,y:j?r.height-x.height:0},N={x:x.left,y:x.top};return S.x&&S.y?N:Pd(N,S)}}}};function _T(e,t){return!qm(e)||!qm(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function w9(e,t){return!qm(e)||!qm(t)||!_T(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Oe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function UN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function la(...e){return t=>{let n=!1;const r=e.map(i=>{const o=UN(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():UN(e[i],null)}}}}function dt(...e){return y.useCallback(la(...e),e)}function S9(e,t){const n=y.createContext(t),r=o=>{const{children:c,...l}=o,d=y.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:d,children:c})};r.displayName=e+"Provider";function i(o){const c=y.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,i]}function An(e,t=[]){let n=[];function r(o,c){const l=y.createContext(c),d=n.length;n=[...n,c];const h=f=>{const{scope:g,children:x,...C}=f,_=g?.[e]?.[d]||l,b=y.useMemo(()=>C,Object.values(C));return s.jsx(_.Provider,{value:b,children:x})};h.displayName=o+"Provider";function m(f,g){const x=g?.[e]?.[d]||l,C=y.useContext(x);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[h,m]}const i=()=>{const o=n.map(c=>y.createContext(c));return function(l){const d=l?.[e]||o;return y.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return i.scopeName=e,[r,j9(i,...t)]}function j9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((l,{useScope:d,scopeName:h})=>{const f=d(o)[`__scope${h}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function _9(e){const t=C9(e),n=y.forwardRef((r,i)=>{const{children:o,...c}=r,l=y.Children.toArray(o),d=l.find(k9);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function C9(e){const t=y.forwardRef((n,r)=>{const{children:i,...o}=n;if(y.isValidElement(i)){const c=A9(i),l=E9(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var N9=Symbol("radix.slottable");function k9(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===N9}function E9(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function A9(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var T9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tt=T9.reduce((e,t)=>{const n=_9(`Primitive.${t}`),r=y.forwardRef((i,o)=>{const{asChild:c,...l}=i,d=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function CT(e,t){e&&Kr.flushSync(()=>e.dispatchEvent(t))}function yn(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...n)=>t.current?.(...n),[])}function D9(e,t=globalThis?.document){const n=yn(e);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var R9="DismissableLayer",Tb="dismissableLayer.update",P9="dismissableLayer.pointerDownOutside",M9="dismissableLayer.focusOutside",$N,NT=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hh=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:l,...d}=e,h=y.useContext(NT),[m,f]=y.useState(null),g=m?.ownerDocument??globalThis?.document,[,x]=y.useState({}),C=dt(t,D=>f(D)),_=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=_.indexOf(b),j=m?_.indexOf(m):-1,S=h.layersWithOutsidePointerEventsDisabled.size>0,N=j>=w,T=O9(D=>{const A=D.target,P=[...h.branches].some(M=>M.contains(A));!N||P||(i?.(D),c?.(D),D.defaultPrevented||l?.())},g),E=B9(D=>{const A=D.target;[...h.branches].some(M=>M.contains(A))||(o?.(D),c?.(D),D.defaultPrevented||l?.())},g);return D9(D=>{j===h.layers.size-1&&(r?.(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},g),y.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&($N=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),VN(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=$N)}},[m,g,n,h]),y.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),VN())},[m,h]),y.useEffect(()=>{const D=()=>x({});return document.addEventListener(Tb,D),()=>document.removeEventListener(Tb,D)},[]),s.jsx(tt.div,{...d,ref:C,style:{pointerEvents:S?N?"auto":"none":void 0,...e.style},onFocusCapture:Oe(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Oe(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Oe(e.onPointerDownCapture,T.onPointerDownCapture)})});hh.displayName=R9;var L9="DismissableLayerBranch",I9=y.forwardRef((e,t)=>{const n=y.useContext(NT),r=y.useRef(null),i=dt(t,r);return y.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(tt.div,{...e,ref:i})});I9.displayName=L9;function O9(e,t=globalThis?.document){const n=yn(e),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let d=function(){kT(P9,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function B9(e,t=globalThis?.document){const n=yn(e),r=y.useRef(!1);return y.useEffect(()=>{const i=o=>{o.target&&!r.current&&kT(M9,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function VN(){const e=new CustomEvent(Tb);document.dispatchEvent(e)}function kT(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?CT(i,o):i.dispatchEvent(o)}var hn=globalThis?.document?y.useLayoutEffect:()=>{},z9=jp[" useId ".trim().toString()]||(()=>{}),F9=0;function Mr(e){const[t,n]=y.useState(z9());return hn(()=>{n(r=>r??String(F9++))},[e]),t?`radix-${t}`:""}const H9=["top","right","bottom","left"],to=Math.min,cr=Math.max,Wm=Math.round,Jf=Math.floor,gi=e=>({x:e,y:e}),U9={left:"right",right:"left",bottom:"top",top:"bottom"},$9={start:"end",end:"start"};function Db(e,t,n){return cr(e,to(t,n))}function na(e,t){return typeof e=="function"?e(t):e}function ra(e){return e.split("-")[0]}function Kc(e){return e.split("-")[1]}function ew(e){return e==="x"?"y":"x"}function tw(e){return e==="y"?"height":"width"}const V9=new Set(["top","bottom"]);function pi(e){return V9.has(ra(e))?"y":"x"}function sw(e){return ew(pi(e))}function G9(e,t,n){n===void 0&&(n=!1);const r=Kc(e),i=sw(e),o=tw(i);let c=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(c=Km(c)),[c,Km(c)]}function q9(e){const t=Km(e);return[Rb(e),t,Rb(t)]}function Rb(e){return e.replace(/start|end/g,t=>$9[t])}const GN=["left","right"],qN=["right","left"],W9=["top","bottom"],K9=["bottom","top"];function Y9(e,t,n){switch(e){case"top":case"bottom":return n?t?qN:GN:t?GN:qN;case"left":case"right":return t?W9:K9;default:return[]}}function X9(e,t,n,r){const i=Kc(e);let o=Y9(ra(e),n==="start",r);return i&&(o=o.map(c=>c+"-"+i),t&&(o=o.concat(o.map(Rb)))),o}function Km(e){return e.replace(/left|right|bottom|top/g,t=>U9[t])}function Z9(e){return{top:0,right:0,bottom:0,left:0,...e}}function ET(e){return typeof e!="number"?Z9(e):{top:e,right:e,bottom:e,left:e}}function Ym(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function WN(e,t,n){let{reference:r,floating:i}=e;const o=pi(t),c=sw(t),l=tw(c),d=ra(t),h=o==="y",m=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,g=r[l]/2-i[l]/2;let x;switch(d){case"top":x={x:m,y:r.y-i.height};break;case"bottom":x={x:m,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-i.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Kc(t)){case"start":x[c]-=g*(n&&h?-1:1);break;case"end":x[c]+=g*(n&&h?-1:1);break}return x}const Q9=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=n,l=o.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(t));let h=await c.getElementRects({reference:e,floating:t,strategy:i}),{x:m,y:f}=WN(h,r,d),g=r,x={},C=0;for(let _=0;_<l.length;_++){const{name:b,fn:w}=l[_],{x:j,y:S,data:N,reset:T}=await w({x:m,y:f,initialPlacement:r,placement:g,strategy:i,middlewareData:x,rects:h,platform:c,elements:{reference:e,floating:t}});m=j??m,f=S??f,x={...x,[b]:{...x[b],...N}},T&&C<=50&&(C++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(h=T.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:m,y:f}=WN(h,g,d)),_=-1)}return{x:m,y:f,placement:g,strategy:i,middlewareData:x}};async function Ld(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:c,elements:l,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:g=!1,padding:x=0}=na(t,e),C=ET(x),b=l[g?f==="floating"?"reference":"floating":f],w=Ym(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:m,strategy:d})),j=f==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),N=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},T=Ym(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:S,strategy:d}):j);return{top:(w.top-T.top+C.top)/N.y,bottom:(T.bottom-w.bottom+C.bottom)/N.y,left:(w.left-T.left+C.left)/N.x,right:(T.right-w.right+C.right)/N.x}}const J9=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:c,elements:l,middlewareData:d}=t,{element:h,padding:m=0}=na(e,t)||{};if(h==null)return{};const f=ET(m),g={x:n,y:r},x=sw(i),C=tw(x),_=await c.getDimensions(h),b=x==="y",w=b?"top":"left",j=b?"bottom":"right",S=b?"clientHeight":"clientWidth",N=o.reference[C]+o.reference[x]-g[x]-o.floating[C],T=g[x]-o.reference[x],E=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let D=E?E[S]:0;(!D||!await(c.isElement==null?void 0:c.isElement(E)))&&(D=l.floating[S]||o.floating[C]);const A=N/2-T/2,P=D/2-_[C]/2-1,M=to(f[w],P),B=to(f[j],P),F=M,U=D-_[C]-B,G=D/2-_[C]/2+A,$=Db(F,G,U),V=!d.arrow&&Kc(i)!=null&&G!==$&&o.reference[C]/2-(G<F?M:B)-_[C]/2<0,Y=V?G<F?G-F:G-U:0;return{[x]:g[x]+Y,data:{[x]:$,centerOffset:G-$-Y,...V&&{alignmentOffset:Y}},reset:V}}}),e$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:l,platform:d,elements:h}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...b}=na(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const w=ra(i),j=pi(l),S=ra(l)===l,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),T=g||(S||!_?[Km(l)]:q9(l)),E=C!=="none";!g&&E&&T.push(...X9(l,_,C,N));const D=[l,...T],A=await Ld(t,b),P=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&P.push(A[w]),f){const G=G9(i,c,N);P.push(A[G[0]],A[G[1]])}if(M=[...M,{placement:i,overflows:P}],!P.every(G=>G<=0)){var B,F;const G=(((B=o.flip)==null?void 0:B.index)||0)+1,$=D[G];if($&&(!(f==="alignment"?j!==pi($):!1)||M.every(K=>pi(K.placement)===j?K.overflows[0]>0:!0)))return{data:{index:G,overflows:M},reset:{placement:$}};let V=(F=M.filter(Y=>Y.overflows[0]<=0).sort((Y,K)=>Y.overflows[1]-K.overflows[1])[0])==null?void 0:F.placement;if(!V)switch(x){case"bestFit":{var U;const Y=(U=M.filter(K=>{if(E){const O=pi(K.placement);return O===j||O==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(O=>O>0).reduce((O,L)=>O+L,0)]).sort((K,O)=>K[1]-O[1])[0])==null?void 0:U[0];Y&&(V=Y);break}case"initialPlacement":V=l;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function KN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function YN(e){return H9.some(t=>e[t]>=0)}const t$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=na(e,t);switch(r){case"referenceHidden":{const o=await Ld(t,{...i,elementContext:"reference"}),c=KN(o,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:YN(c)}}}case"escaped":{const o=await Ld(t,{...i,altBoundary:!0}),c=KN(o,n.floating);return{data:{escapedOffsets:c,escaped:YN(c)}}}default:return{}}}}},AT=new Set(["left","top"]);async function s$(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=ra(n),l=Kc(n),d=pi(n)==="y",h=AT.has(c)?-1:1,m=o&&d?-1:1,f=na(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof C=="number"&&(x=l==="end"?C*-1:C),d?{x:x*m,y:g*h}:{x:g*h,y:x*m}}const n$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:c,middlewareData:l}=t,d=await s$(t,e);return c===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:c}}}}},r$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:c=!1,limiter:l={fn:b=>{let{x:w,y:j}=b;return{x:w,y:j}}},...d}=na(e,t),h={x:n,y:r},m=await Ld(t,d),f=pi(ra(i)),g=ew(f);let x=h[g],C=h[f];if(o){const b=g==="y"?"top":"left",w=g==="y"?"bottom":"right",j=x+m[b],S=x-m[w];x=Db(j,x,S)}if(c){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",j=C+m[b],S=C-m[w];C=Db(j,C,S)}const _=l.fn({...t,[g]:x,[f]:C});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[g]:o,[f]:c}}}}}},i$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:c}=t,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=na(e,t),m={x:n,y:r},f=pi(i),g=ew(f);let x=m[g],C=m[f];const _=na(l,t),b=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const S=g==="y"?"height":"width",N=o.reference[g]-o.floating[S]+b.mainAxis,T=o.reference[g]+o.reference[S]-b.mainAxis;x<N?x=N:x>T&&(x=T)}if(h){var w,j;const S=g==="y"?"width":"height",N=AT.has(ra(i)),T=o.reference[f]-o.floating[S]+(N&&((w=c.offset)==null?void 0:w[f])||0)+(N?0:b.crossAxis),E=o.reference[f]+o.reference[S]+(N?0:((j=c.offset)==null?void 0:j[f])||0)-(N?b.crossAxis:0);C<T?C=T:C>E&&(C=E)}return{[g]:x,[f]:C}}}},a$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:c,elements:l}=t,{apply:d=()=>{},...h}=na(e,t),m=await Ld(t,h),f=ra(i),g=Kc(i),x=pi(i)==="y",{width:C,height:_}=o.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=g===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,b=g==="end"?"top":"bottom");const j=_-m.top-m.bottom,S=C-m.left-m.right,N=to(_-m[b],j),T=to(C-m[w],S),E=!t.middlewareData.shift;let D=N,A=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(D=j),E&&!g){const M=cr(m.left,0),B=cr(m.right,0),F=cr(m.top,0),U=cr(m.bottom,0);x?A=C-2*(M!==0||B!==0?M+B:cr(m.left,m.right)):D=_-2*(F!==0||U!==0?F+U:cr(m.top,m.bottom))}await d({...t,availableWidth:A,availableHeight:D});const P=await c.getDimensions(l.floating);return C!==P.width||_!==P.height?{reset:{rects:!0}}:{}}}};function Fp(){return typeof window<"u"}function Yc(e){return TT(e)?(e.nodeName||"").toLowerCase():"#document"}function fr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ki(e){var t;return(t=(TT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TT(e){return Fp()?e instanceof Node||e instanceof fr(e).Node:!1}function ni(e){return Fp()?e instanceof Element||e instanceof fr(e).Element:!1}function ji(e){return Fp()?e instanceof HTMLElement||e instanceof fr(e).HTMLElement:!1}function XN(e){return!Fp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fr(e).ShadowRoot}const o$=new Set(["inline","contents"]);function fh(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ri(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!o$.has(i)}const l$=new Set(["table","td","th"]);function c$(e){return l$.has(Yc(e))}const u$=[":popover-open",":modal"];function Hp(e){return u$.some(t=>{try{return e.matches(t)}catch{return!1}})}const d$=["transform","translate","scale","rotate","perspective"],h$=["transform","translate","scale","rotate","perspective","filter"],f$=["paint","layout","strict","content"];function nw(e){const t=rw(),n=ni(e)?ri(e):e;return d$.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||h$.some(r=>(n.willChange||"").includes(r))||f$.some(r=>(n.contain||"").includes(r))}function m$(e){let t=so(e);for(;ji(t)&&!Rc(t);){if(nw(t))return t;if(Hp(t))return null;t=so(t)}return null}function rw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const p$=new Set(["html","body","#document"]);function Rc(e){return p$.has(Yc(e))}function ri(e){return fr(e).getComputedStyle(e)}function Up(e){return ni(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function so(e){if(Yc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||XN(e)&&e.host||ki(e);return XN(t)?t.host:t}function DT(e){const t=so(e);return Rc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ji(t)&&fh(t)?t:DT(t)}function Id(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=DT(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),c=fr(i);if(o){const l=Pb(c);return t.concat(c,c.visualViewport||[],fh(i)?i:[],l&&n?Id(l):[])}return t.concat(i,Id(i,[],n))}function Pb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function RT(e){const t=ri(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ji(e),o=i?e.offsetWidth:n,c=i?e.offsetHeight:r,l=Wm(n)!==o||Wm(r)!==c;return l&&(n=o,r=c),{width:n,height:r,$:l}}function iw(e){return ni(e)?e:e.contextElement}function jc(e){const t=iw(e);if(!ji(t))return gi(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=RT(t);let c=(o?Wm(n.width):n.width)/r,l=(o?Wm(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const g$=gi(0);function PT(e){const t=fr(e);return!rw()||!t.visualViewport?g$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function x$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==fr(e)?!1:t}function sl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=iw(e);let c=gi(1);t&&(r?ni(r)&&(c=jc(r)):c=jc(e));const l=x$(o,n,r)?PT(o):gi(0);let d=(i.left+l.x)/c.x,h=(i.top+l.y)/c.y,m=i.width/c.x,f=i.height/c.y;if(o){const g=fr(o),x=r&&ni(r)?fr(r):r;let C=g,_=Pb(C);for(;_&&r&&x!==C;){const b=jc(_),w=_.getBoundingClientRect(),j=ri(_),S=w.left+(_.clientLeft+parseFloat(j.paddingLeft))*b.x,N=w.top+(_.clientTop+parseFloat(j.paddingTop))*b.y;d*=b.x,h*=b.y,m*=b.x,f*=b.y,d+=S,h+=N,C=fr(_),_=Pb(C)}}return Ym({width:m,height:f,x:d,y:h})}function $p(e,t){const n=Up(e).scrollLeft;return t?t.left+n:sl(ki(e)).left+n}function MT(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-$p(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function v$(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",c=ki(r),l=t?Hp(t.floating):!1;if(r===c||l&&o)return n;let d={scrollLeft:0,scrollTop:0},h=gi(1);const m=gi(0),f=ji(r);if((f||!f&&!o)&&((Yc(r)!=="body"||fh(c))&&(d=Up(r)),ji(r))){const x=sl(r);h=jc(r),m.x=x.x+r.clientLeft,m.y=x.y+r.clientTop}const g=c&&!f&&!o?MT(c,d):gi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+m.x+g.x,y:n.y*h.y-d.scrollTop*h.y+m.y+g.y}}function y$(e){return Array.from(e.getClientRects())}function b$(e){const t=ki(e),n=Up(e),r=e.ownerDocument.body,i=cr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=cr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+$p(e);const l=-n.scrollTop;return ri(r).direction==="rtl"&&(c+=cr(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:l}}const ZN=25;function w$(e,t){const n=fr(e),r=ki(e),i=n.visualViewport;let o=r.clientWidth,c=r.clientHeight,l=0,d=0;if(i){o=i.width,c=i.height;const m=rw();(!m||m&&t==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}const h=$p(r);if(h<=0){const m=r.ownerDocument,f=m.body,g=getComputedStyle(f),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,C=Math.abs(r.clientWidth-f.clientWidth-x);C<=ZN&&(o-=C)}else h<=ZN&&(o+=h);return{width:o,height:c,x:l,y:d}}const S$=new Set(["absolute","fixed"]);function j$(e,t){const n=sl(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=ji(e)?jc(e):gi(1),c=e.clientWidth*o.x,l=e.clientHeight*o.y,d=i*o.x,h=r*o.y;return{width:c,height:l,x:d,y:h}}function QN(e,t,n){let r;if(t==="viewport")r=w$(e,n);else if(t==="document")r=b$(ki(e));else if(ni(t))r=j$(t,n);else{const i=PT(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Ym(r)}function LT(e,t){const n=so(e);return n===t||!ni(n)||Rc(n)?!1:ri(n).position==="fixed"||LT(n,t)}function _$(e,t){const n=t.get(e);if(n)return n;let r=Id(e,[],!1).filter(l=>ni(l)&&Yc(l)!=="body"),i=null;const o=ri(e).position==="fixed";let c=o?so(e):e;for(;ni(c)&&!Rc(c);){const l=ri(c),d=nw(c);!d&&l.position==="fixed"&&(i=null),(o?!d&&!i:!d&&l.position==="static"&&!!i&&S$.has(i.position)||fh(c)&&!d&&LT(e,c))?r=r.filter(m=>m!==c):i=l,c=so(c)}return t.set(e,r),r}function C$(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const c=[...n==="clippingAncestors"?Hp(t)?[]:_$(t,this._c):[].concat(n),r],l=c[0],d=c.reduce((h,m)=>{const f=QN(t,m,i);return h.top=cr(f.top,h.top),h.right=to(f.right,h.right),h.bottom=to(f.bottom,h.bottom),h.left=cr(f.left,h.left),h},QN(t,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function N$(e){const{width:t,height:n}=RT(e);return{width:t,height:n}}function k$(e,t,n){const r=ji(t),i=ki(t),o=n==="fixed",c=sl(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const d=gi(0);function h(){d.x=$p(i)}if(r||!r&&!o)if((Yc(t)!=="body"||fh(i))&&(l=Up(t)),r){const x=sl(t,!0,o,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else i&&h();o&&!r&&i&&h();const m=i&&!r&&!o?MT(i,l):gi(0),f=c.left+l.scrollLeft-d.x-m.x,g=c.top+l.scrollTop-d.y-m.y;return{x:f,y:g,width:c.width,height:c.height}}function ly(e){return ri(e).position==="static"}function JN(e,t){if(!ji(e)||ri(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ki(e)===n&&(n=n.ownerDocument.body),n}function IT(e,t){const n=fr(e);if(Hp(e))return n;if(!ji(e)){let i=so(e);for(;i&&!Rc(i);){if(ni(i)&&!ly(i))return i;i=so(i)}return n}let r=JN(e,t);for(;r&&c$(r)&&ly(r);)r=JN(r,t);return r&&Rc(r)&&ly(r)&&!nw(r)?n:r||m$(e)||n}const E$=async function(e){const t=this.getOffsetParent||IT,n=this.getDimensions,r=await n(e.floating);return{reference:k$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function A$(e){return ri(e).direction==="rtl"}const T$={convertOffsetParentRelativeRectToViewportRelativeRect:v$,getDocumentElement:ki,getClippingRect:C$,getOffsetParent:IT,getElementRects:E$,getClientRects:y$,getDimensions:N$,getScale:jc,isElement:ni,isRTL:A$};function OT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function D$(e,t){let n=null,r;const i=ki(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function c(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),o();const h=e.getBoundingClientRect(),{left:m,top:f,width:g,height:x}=h;if(l||t(),!g||!x)return;const C=Jf(f),_=Jf(i.clientWidth-(m+g)),b=Jf(i.clientHeight-(f+x)),w=Jf(m),S={rootMargin:-C+"px "+-_+"px "+-b+"px "+-w+"px",threshold:cr(0,to(1,d))||1};let N=!0;function T(E){const D=E[0].intersectionRatio;if(D!==d){if(!N)return c();D?c(!1,D):r=setTimeout(()=>{c(!1,1e-7)},1e3)}D===1&&!OT(h,e.getBoundingClientRect())&&c(),N=!1}try{n=new IntersectionObserver(T,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,S)}n.observe(e)}return c(!0),o}function R$(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=iw(e),m=i||o?[...h?Id(h):[],...Id(t)]:[];m.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),o&&w.addEventListener("resize",n)});const f=h&&l?D$(h,n):null;let g=-1,x=null;c&&(x=new ResizeObserver(w=>{let[j]=w;j&&j.target===h&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=x)==null||S.observe(t)})),n()}),h&&!d&&x.observe(h),x.observe(t));let C,_=d?sl(e):null;d&&b();function b(){const w=sl(e);_&&!OT(_,w)&&n(),_=w,C=requestAnimationFrame(b)}return n(),()=>{var w;m.forEach(j=>{i&&j.removeEventListener("scroll",n),o&&j.removeEventListener("resize",n)}),f?.(),(w=x)==null||w.disconnect(),x=null,d&&cancelAnimationFrame(C)}}const P$=n$,M$=r$,L$=e$,I$=a$,O$=t$,ek=J9,B$=i$,z$=(e,t,n)=>{const r=new Map,i={platform:T$,...n},o={...i.platform,_c:r};return Q9(e,t,{...i,platform:o})};var F$=typeof document<"u",H$=function(){},wm=F$?y.useLayoutEffect:H$;function Xm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Xm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Xm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function BT(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tk(e,t){const n=BT(e);return Math.round(t*n)/n}function cy(e){const t=y.useRef(e);return wm(()=>{t.current=e}),t}function U$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:l=!0,whileElementsMounted:d,open:h}=e,[m,f]=y.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=y.useState(r);Xm(g,r)||x(r);const[C,_]=y.useState(null),[b,w]=y.useState(null),j=y.useCallback(K=>{K!==E.current&&(E.current=K,_(K))},[]),S=y.useCallback(K=>{K!==D.current&&(D.current=K,w(K))},[]),N=o||C,T=c||b,E=y.useRef(null),D=y.useRef(null),A=y.useRef(m),P=d!=null,M=cy(d),B=cy(i),F=cy(h),U=y.useCallback(()=>{if(!E.current||!D.current)return;const K={placement:t,strategy:n,middleware:g};B.current&&(K.platform=B.current),z$(E.current,D.current,K).then(O=>{const L={...O,isPositioned:F.current!==!1};G.current&&!Xm(A.current,L)&&(A.current=L,Kr.flushSync(()=>{f(L)}))})},[g,t,n,B,F]);wm(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(K=>({...K,isPositioned:!1})))},[h]);const G=y.useRef(!1);wm(()=>(G.current=!0,()=>{G.current=!1}),[]),wm(()=>{if(N&&(E.current=N),T&&(D.current=T),N&&T){if(M.current)return M.current(N,T,U);U()}},[N,T,U,M,P]);const $=y.useMemo(()=>({reference:E,floating:D,setReference:j,setFloating:S}),[j,S]),V=y.useMemo(()=>({reference:N,floating:T}),[N,T]),Y=y.useMemo(()=>{const K={position:n,left:0,top:0};if(!V.floating)return K;const O=tk(V.floating,m.x),L=tk(V.floating,m.y);return l?{...K,transform:"translate("+O+"px, "+L+"px)",...BT(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:L}},[n,l,V.floating,m.x,m.y]);return y.useMemo(()=>({...m,update:U,refs:$,elements:V,floatingStyles:Y}),[m,U,$,V,Y])}const $$=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ek({element:r.current,padding:i}).fn(n):{}:r?ek({element:r,padding:i}).fn(n):{}}}},V$=(e,t)=>({...P$(e),options:[e,t]}),G$=(e,t)=>({...M$(e),options:[e,t]}),q$=(e,t)=>({...B$(e),options:[e,t]}),W$=(e,t)=>({...L$(e),options:[e,t]}),K$=(e,t)=>({...I$(e),options:[e,t]}),Y$=(e,t)=>({...O$(e),options:[e,t]}),X$=(e,t)=>({...$$(e),options:[e,t]});var Z$="Arrow",zT=y.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return s.jsx(tt.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});zT.displayName=Z$;var Q$=zT;function Vp(e){const[t,n]=y.useState(void 0);return hn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,l;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;c=h.inlineSize,l=h.blockSize}else c=e.offsetWidth,l=e.offsetHeight;n({width:c,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var aw="Popper",[FT,Xc]=An(aw),[J$,HT]=FT(aw),UT=e=>{const{__scopePopper:t,children:n}=e,[r,i]=y.useState(null);return s.jsx(J$,{scope:t,anchor:r,onAnchorChange:i,children:n})};UT.displayName=aw;var $T="PopperAnchor",VT=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=HT($T,n),c=y.useRef(null),l=dt(t,c),d=y.useRef(null);return y.useEffect(()=>{const h=d.current;d.current=r?.current||c.current,h!==d.current&&o.onAnchorChange(d.current)}),r?null:s.jsx(tt.div,{...i,ref:l})});VT.displayName=$T;var ow="PopperContent",[eV,tV]=FT(ow),GT=y.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:C,..._}=e,b=HT(ow,n),[w,j]=y.useState(null),S=dt(t,X=>j(X)),[N,T]=y.useState(null),E=Vp(N),D=E?.width??0,A=E?.height??0,P=r+(o!=="center"?"-"+o:""),M=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},B=Array.isArray(h)?h:[h],F=B.length>0,U={padding:M,boundary:B.filter(nV),altBoundary:F},{refs:G,floatingStyles:$,placement:V,isPositioned:Y,middlewareData:K}=U$({strategy:"fixed",placement:P,whileElementsMounted:(...X)=>R$(...X,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[V$({mainAxis:i+A,alignmentAxis:c}),d&&G$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?q$():void 0,...U}),d&&W$({...U}),K$({...U,apply:({elements:X,rects:W,availableWidth:Q,availableHeight:se})=>{const{width:he,height:de}=W.reference,Ne=X.floating.style;Ne.setProperty("--radix-popper-available-width",`${Q}px`),Ne.setProperty("--radix-popper-available-height",`${se}px`),Ne.setProperty("--radix-popper-anchor-width",`${he}px`),Ne.setProperty("--radix-popper-anchor-height",`${de}px`)}}),N&&X$({element:N,padding:l}),rV({arrowWidth:D,arrowHeight:A}),g&&Y$({strategy:"referenceHidden",...U})]}),[O,L]=KT(V),I=yn(C);hn(()=>{Y&&I?.()},[Y,I]);const q=K.arrow?.x,z=K.arrow?.y,ee=K.arrow?.centerOffset!==0,[ie,re]=y.useState();return hn(()=>{w&&re(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:Y?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[K.transformOrigin?.x,K.transformOrigin?.y].join(" "),...K.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(eV,{scope:n,placedSide:O,onArrowChange:T,arrowX:q,arrowY:z,shouldHideArrow:ee,children:s.jsx(tt.div,{"data-side":O,"data-align":L,..._,ref:S,style:{..._.style,animation:Y?void 0:"none"}})})})});GT.displayName=ow;var qT="PopperArrow",sV={top:"bottom",right:"left",bottom:"top",left:"right"},WT=y.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=tV(qT,r),c=sV[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(Q$,{...i,ref:n,style:{...i.style,display:"block"}})})});WT.displayName=qT;function nV(e){return e!==null}var rV=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,c=i.arrow?.centerOffset!==0,l=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[h,m]=KT(n),f={start:"0%",center:"50%",end:"100%"}[m],g=(i.arrow?.x??0)+l/2,x=(i.arrow?.y??0)+d/2;let C="",_="";return h==="bottom"?(C=c?f:`${g}px`,_=`${-d}px`):h==="top"?(C=c?f:`${g}px`,_=`${r.floating.height+d}px`):h==="right"?(C=`${-d}px`,_=c?f:`${x}px`):h==="left"&&(C=`${r.floating.width+d}px`,_=c?f:`${x}px`),{data:{x:C,y:_}}}});function KT(e){const[t,n="center"]=e.split("-");return[t,n]}var lw=UT,cw=VT,uw=GT,dw=WT,iV="Portal",Gp=y.forwardRef((e,t)=>{const{container:n,...r}=e,[i,o]=y.useState(!1);hn(()=>o(!0),[]);const c=n||i&&globalThis?.document?.body;return c?P7.createPortal(s.jsx(tt.div,{...r,ref:t}),c):null});Gp.displayName=iV;function aV(e,t){return y.useReducer((n,r)=>t[n][r]??n,e)}var wn=e=>{const{present:t,children:n}=e,r=oV(t),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),o=dt(r.ref,lV(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:o}):null};wn.displayName="Presence";function oV(e){const[t,n]=y.useState(),r=y.useRef(null),i=y.useRef(e),o=y.useRef("none"),c=e?"mounted":"unmounted",[l,d]=aV(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=em(r.current);o.current=l==="mounted"?h:"none"},[l]),hn(()=>{const h=r.current,m=i.current;if(m!==e){const g=o.current,x=em(h);e?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),hn(()=>{if(t){let h;const m=t.ownerDocument.defaultView??window,f=x=>{const _=em(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&_&&(d("ANIMATION_END"),!i.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",h=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},g=x=>{x.target===t&&(o.current=em(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(h),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function em(e){return e?.animationName||"none"}function lV(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var cV=Symbol("radix.slottable");function uV(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=cV,t}var dV=jp[" useInsertionEffect ".trim().toString()]||hn;function ii({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,c]=hV({defaultProp:t,onChange:n}),l=e!==void 0,d=l?e:i;{const m=y.useRef(e!==void 0);y.useEffect(()=>{const f=m.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,r])}const h=y.useCallback(m=>{if(l){const f=fV(m)?m(e):m;f!==e&&c.current?.(f)}else o(m)},[l,e,o,c]);return[d,h]}function hV({defaultProp:e,onChange:t}){const[n,r]=y.useState(e),i=y.useRef(n),o=y.useRef(t);return dV(()=>{o.current=t},[t]),y.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function fV(e){return typeof e=="function"}var YT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mV="VisuallyHidden",XT=y.forwardRef((e,t)=>s.jsx(tt.span,{...e,ref:t,style:{...YT,...e.style}}));XT.displayName=mV;var pV=XT,[qp]=An("Tooltip",[Xc]),Wp=Xc(),ZT="TooltipProvider",gV=700,Mb="tooltip.open",[xV,hw]=qp(ZT),QT=e=>{const{__scopeTooltip:t,delayDuration:n=gV,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,c=y.useRef(!0),l=y.useRef(!1),d=y.useRef(0);return y.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),s.jsx(xV,{scope:t,isOpenDelayedRef:c,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(d.current),c.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback(h=>{l.current=h},[]),disableHoverableContent:i,children:o})};QT.displayName=ZT;var Od="Tooltip",[vV,Kp]=qp(Od),JT=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:c,delayDuration:l}=e,d=hw(Od,e.__scopeTooltip),h=Wp(t),[m,f]=y.useState(null),g=Mr(),x=y.useRef(0),C=c??d.disableHoverableContent,_=l??d.delayDuration,b=y.useRef(!1),[w,j]=ii({prop:r,defaultProp:i??!1,onChange:D=>{D?(d.onOpen(),document.dispatchEvent(new CustomEvent(Mb))):d.onClose(),o?.(D)},caller:Od}),S=y.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),N=y.useCallback(()=>{window.clearTimeout(x.current),x.current=0,b.current=!1,j(!0)},[j]),T=y.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j(!1)},[j]),E=y.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{b.current=!0,j(!0),x.current=0},_)},[_,j]);return y.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),s.jsx(lw,{...h,children:s.jsx(vV,{scope:t,contentId:g,open:w,stateAttribute:S,trigger:m,onTriggerChange:f,onTriggerEnter:y.useCallback(()=>{d.isOpenDelayedRef.current?E():N()},[d.isOpenDelayedRef,E,N]),onTriggerLeave:y.useCallback(()=>{C?T():(window.clearTimeout(x.current),x.current=0)},[T,C]),onOpen:N,onClose:T,disableHoverableContent:C,children:n})})};JT.displayName=Od;var Lb="TooltipTrigger",eD=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Kp(Lb,n),o=hw(Lb,n),c=Wp(n),l=y.useRef(null),d=dt(t,l,i.onTriggerChange),h=y.useRef(!1),m=y.useRef(!1),f=y.useCallback(()=>h.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(cw,{asChild:!0,...c,children:s.jsx(tt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:Oe(e.onPointerMove,g=>{g.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:Oe(e.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:Oe(e.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Oe(e.onFocus,()=>{h.current||i.onOpen()}),onBlur:Oe(e.onBlur,i.onClose),onClick:Oe(e.onClick,i.onClose)})})});eD.displayName=Lb;var yV="TooltipPortal",[fme,bV]=qp(yV,{forceMount:void 0}),Pc="TooltipContent",tD=y.forwardRef((e,t)=>{const n=bV(Pc,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,c=Kp(Pc,e.__scopeTooltip);return s.jsx(wn,{present:r||c.open,children:c.disableHoverableContent?s.jsx(sD,{side:i,...o,ref:t}):s.jsx(wV,{side:i,...o,ref:t})})}),wV=y.forwardRef((e,t)=>{const n=Kp(Pc,e.__scopeTooltip),r=hw(Pc,e.__scopeTooltip),i=y.useRef(null),o=dt(t,i),[c,l]=y.useState(null),{trigger:d,onClose:h}=n,m=i.current,{onPointerInTransitChange:f}=r,g=y.useCallback(()=>{l(null),f(!1)},[f]),x=y.useCallback((C,_)=>{const b=C.currentTarget,w={x:C.clientX,y:C.clientY},j=NV(w,b.getBoundingClientRect()),S=kV(w,j),N=EV(_.getBoundingClientRect()),T=TV([...S,...N]);l(T),f(!0)},[f]);return y.useEffect(()=>()=>g(),[g]),y.useEffect(()=>{if(d&&m){const C=b=>x(b,m),_=b=>x(b,d);return d.addEventListener("pointerleave",C),m.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",C),m.removeEventListener("pointerleave",_)}}},[d,m,x,g]),y.useEffect(()=>{if(c){const C=_=>{const b=_.target,w={x:_.clientX,y:_.clientY},j=d?.contains(b)||m?.contains(b),S=!AV(w,c);j?g():S&&(g(),h())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[d,m,c,h,g]),s.jsx(sD,{...e,ref:o})}),[SV,jV]=qp(Od,{isInside:!1}),_V=uV("TooltipContent"),sD=y.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:c,...l}=e,d=Kp(Pc,n),h=Wp(n),{onClose:m}=d;return y.useEffect(()=>(document.addEventListener(Mb,m),()=>document.removeEventListener(Mb,m)),[m]),y.useEffect(()=>{if(d.trigger){const f=g=>{g.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,m]),s.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:s.jsxs(uw,{"data-state":d.stateAttribute,...h,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(_V,{children:r}),s.jsx(SV,{scope:n,isInside:!0,children:s.jsx(pV,{id:d.contentId,role:"tooltip",children:i||r})})]})})});tD.displayName=Pc;var nD="TooltipArrow",CV=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Wp(n);return jV(nD,n).isInside?null:s.jsx(dw,{...i,...r,ref:t})});CV.displayName=nD;function NV(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function kV(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function EV(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function AV(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const l=t[o],d=t[c],h=l.x,m=l.y,f=d.x,g=d.y;m>r!=g>r&&n<(f-h)*(r-m)/(g-m)+h&&(i=!i)}return i}function TV(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),DV(t)}function DV(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],c=n[n.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var RV=QT,PV=JT,MV=eD,rD=tD;function iD(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=iD(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function aD(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=iD(e))&&(r&&(r+=" "),r+=t);return r}const LV=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},IV=(e,t)=>({classGroupId:e,validator:t}),oD=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Zm="-",sk=[],OV="arbitrary..",BV=e=>{const t=FV(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return zV(c);const l=c.split(Zm),d=l[0]===""&&l.length>1?1:0;return lD(l,d,t)},getConflictingClassGroupIds:(c,l)=>{if(l){const d=r[c],h=n[c];return d?h?LV(h,d):d:h||sk}return n[c]||sk}}},lD=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const i=e[t],o=n.nextPart.get(i);if(o){const h=lD(e,t+1,o);if(h)return h}const c=n.validators;if(c===null)return;const l=t===0?e.join(Zm):e.slice(t).join(Zm),d=c.length;for(let h=0;h<d;h++){const m=c[h];if(m.validator(l))return m.classGroupId}},zV=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?OV+r:void 0})(),FV=e=>{const{theme:t,classGroups:n}=e;return HV(n,t)},HV=(e,t)=>{const n=oD();for(const r in e){const i=e[r];fw(i,n,r,t)}return n},fw=(e,t,n,r)=>{const i=e.length;for(let o=0;o<i;o++){const c=e[o];UV(c,t,n,r)}},UV=(e,t,n,r)=>{if(typeof e=="string"){$V(e,t,n);return}if(typeof e=="function"){VV(e,t,n,r);return}GV(e,t,n,r)},$V=(e,t,n)=>{const r=e===""?t:cD(t,e);r.classGroupId=n},VV=(e,t,n,r)=>{if(qV(e)){fw(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(IV(n,e))},GV=(e,t,n,r)=>{const i=Object.entries(e),o=i.length;for(let c=0;c<o;c++){const[l,d]=i[c];fw(d,cD(t,l),n,r)}},cD=(e,t)=>{let n=e;const r=t.split(Zm),i=r.length;for(let o=0;o<i;o++){const c=r[o];let l=n.nextPart.get(c);l||(l=oD(),n.nextPart.set(c,l)),n=l}return n},qV=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,WV=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const i=(o,c)=>{n[o]=c,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(o){let c=n[o];if(c!==void 0)return c;if((c=r[o])!==void 0)return i(o,c),c},set(o,c){o in n?n[o]=c:i(o,c)}}},Ib="!",nk=":",KV=[],rk=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),YV=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const o=[];let c=0,l=0,d=0,h;const m=i.length;for(let _=0;_<m;_++){const b=i[_];if(c===0&&l===0){if(b===nk){o.push(i.slice(d,_)),d=_+1;continue}if(b==="/"){h=_;continue}}b==="["?c++:b==="]"?c--:b==="("?l++:b===")"&&l--}const f=o.length===0?i:i.slice(d);let g=f,x=!1;f.endsWith(Ib)?(g=f.slice(0,-1),x=!0):f.startsWith(Ib)&&(g=f.slice(1),x=!0);const C=h&&h>d?h-d:void 0;return rk(o,x,g,C)};if(t){const i=t+nk,o=r;r=c=>c.startsWith(i)?o(c.slice(i.length)):rk(KV,!1,c,void 0,!0)}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},XV=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let o=0;o<n.length;o++){const c=n[o],l=c[0]==="[",d=t.has(c);l||d?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(c)):i.push(c)}return i.length>0&&(i.sort(),r.push(...i)),r}},ZV=e=>({cache:WV(e.cacheSize),parseClassName:YV(e),sortModifiers:XV(e),...BV(e)}),QV=/\s+/,JV=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=t,c=[],l=e.trim().split(QV);let d="";for(let h=l.length-1;h>=0;h-=1){const m=l[h],{isExternal:f,modifiers:g,hasImportantModifier:x,baseClassName:C,maybePostfixModifierPosition:_}=n(m);if(f){d=m+(d.length>0?" "+d:d);continue}let b=!!_,w=r(b?C.substring(0,_):C);if(!w){if(!b){d=m+(d.length>0?" "+d:d);continue}if(w=r(C),!w){d=m+(d.length>0?" "+d:d);continue}b=!1}const j=g.length===0?"":g.length===1?g[0]:o(g).join(":"),S=x?j+Ib:j,N=S+w;if(c.indexOf(N)>-1)continue;c.push(N);const T=i(w,b);for(let E=0;E<T.length;++E){const D=T[E];c.push(S+D)}d=m+(d.length>0?" "+d:d)}return d},eG=(...e)=>{let t=0,n,r,i="";for(;t<e.length;)(n=e[t++])&&(r=uD(n))&&(i&&(i+=" "),i+=r);return i},uD=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=uD(e[r]))&&(n&&(n+=" "),n+=t);return n},tG=(e,...t)=>{let n,r,i,o;const c=d=>{const h=t.reduce((m,f)=>f(m),e());return n=ZV(h),r=n.cache.get,i=n.cache.set,o=l,l(d)},l=d=>{const h=r(d);if(h)return h;const m=JV(d,n);return i(d,m),m};return o=c,(...d)=>o(eG(...d))},sG=[],Js=e=>{const t=n=>n[e]||sG;return t.isThemeGetter=!0,t},dD=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,hD=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nG=/^\d+\/\d+$/,rG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,oG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rc=e=>nG.test(e),kt=e=>!!e&&!Number.isNaN(Number(e)),Ha=e=>!!e&&Number.isInteger(Number(e)),uy=e=>e.endsWith("%")&&kt(e.slice(0,-1)),Yi=e=>rG.test(e),cG=()=>!0,uG=e=>iG.test(e)&&!aG.test(e),fD=()=>!1,dG=e=>oG.test(e),hG=e=>lG.test(e),fG=e=>!Ve(e)&&!Ge(e),mG=e=>Zc(e,gD,fD),Ve=e=>dD.test(e),Fo=e=>Zc(e,xD,uG),dy=e=>Zc(e,yG,kt),ik=e=>Zc(e,mD,fD),pG=e=>Zc(e,pD,hG),tm=e=>Zc(e,vD,dG),Ge=e=>hD.test(e),td=e=>Qc(e,xD),gG=e=>Qc(e,bG),ak=e=>Qc(e,mD),xG=e=>Qc(e,gD),vG=e=>Qc(e,pD),sm=e=>Qc(e,vD,!0),Zc=(e,t,n)=>{const r=dD.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Qc=(e,t,n=!1)=>{const r=hD.exec(e);return r?r[1]?t(r[1]):n:!1},mD=e=>e==="position"||e==="percentage",pD=e=>e==="image"||e==="url",gD=e=>e==="length"||e==="size"||e==="bg-size",xD=e=>e==="length",yG=e=>e==="number",bG=e=>e==="family-name",vD=e=>e==="shadow",wG=()=>{const e=Js("color"),t=Js("font"),n=Js("text"),r=Js("font-weight"),i=Js("tracking"),o=Js("leading"),c=Js("breakpoint"),l=Js("container"),d=Js("spacing"),h=Js("radius"),m=Js("shadow"),f=Js("inset-shadow"),g=Js("text-shadow"),x=Js("drop-shadow"),C=Js("blur"),_=Js("perspective"),b=Js("aspect"),w=Js("ease"),j=Js("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...N(),Ge,Ve],E=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],A=()=>[Ge,Ve,d],P=()=>[rc,"full","auto",...A()],M=()=>[Ha,"none","subgrid",Ge,Ve],B=()=>["auto",{span:["full",Ha,Ge,Ve]},Ha,Ge,Ve],F=()=>[Ha,"auto",Ge,Ve],U=()=>["auto","min","max","fr",Ge,Ve],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...A()],Y=()=>[rc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],K=()=>[e,Ge,Ve],O=()=>[...N(),ak,ik,{position:[Ge,Ve]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",xG,mG,{size:[Ge,Ve]}],q=()=>[uy,td,Fo],z=()=>["","none","full",h,Ge,Ve],ee=()=>["",kt,td,Fo],ie=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[kt,uy,ak,ik],W=()=>["","none",C,Ge,Ve],Q=()=>["none",kt,Ge,Ve],se=()=>["none",kt,Ge,Ve],he=()=>[kt,Ge,Ve],de=()=>[rc,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yi],breakpoint:[Yi],color:[cG],container:[Yi],"drop-shadow":[Yi],ease:["in","out","in-out"],font:[fG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yi],shadow:[Yi],spacing:["px",kt],text:[Yi],"text-shadow":[Yi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",rc,Ve,Ge,b]}],container:["container"],columns:[{columns:[kt,Ve,Ge,l]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Ha,"auto",Ge,Ve]}],basis:[{basis:[rc,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[kt,rc,"auto","initial","none",Ve]}],grow:[{grow:["",kt,Ge,Ve]}],shrink:[{shrink:["",kt,Ge,Ve]}],order:[{order:[Ha,"first","last","none",Ge,Ve]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[l,"screen",...Y()]}],"min-w":[{"min-w":[l,"screen","none",...Y()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[c]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,td,Fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ge,dy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",uy,Ve]}],"font-family":[{font:[gG,Ve,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ge,Ve]}],"line-clamp":[{"line-clamp":[kt,"none",Ge,dy]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",Ge,Ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,Ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[kt,"from-font","auto",Ge,Fo]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[kt,"auto",Ge,Ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:O()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ha,Ge,Ve],radial:["",Ge,Ve],conic:[Ha,Ge,Ve]},vG,pG]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ie(),"hidden","none"]}],"divide-style":[{divide:[...ie(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[kt,Ge,Ve]}],"outline-w":[{outline:["",kt,td,Fo]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",m,sm,tm]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",f,sm,tm]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[kt,Fo]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",g,sm,tm]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[kt,Ge,Ve]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[kt]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[Ge,Ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[kt]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:O()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,Ve]}],filter:[{filter:["","none",Ge,Ve]}],blur:[{blur:W()}],brightness:[{brightness:[kt,Ge,Ve]}],contrast:[{contrast:[kt,Ge,Ve]}],"drop-shadow":[{"drop-shadow":["","none",x,sm,tm]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",kt,Ge,Ve]}],"hue-rotate":[{"hue-rotate":[kt,Ge,Ve]}],invert:[{invert:["",kt,Ge,Ve]}],saturate:[{saturate:[kt,Ge,Ve]}],sepia:[{sepia:["",kt,Ge,Ve]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,Ve]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[kt,Ge,Ve]}],"backdrop-contrast":[{"backdrop-contrast":[kt,Ge,Ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",kt,Ge,Ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[kt,Ge,Ve]}],"backdrop-invert":[{"backdrop-invert":["",kt,Ge,Ve]}],"backdrop-opacity":[{"backdrop-opacity":[kt,Ge,Ve]}],"backdrop-saturate":[{"backdrop-saturate":[kt,Ge,Ve]}],"backdrop-sepia":[{"backdrop-sepia":["",kt,Ge,Ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,Ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[kt,"initial",Ge,Ve]}],ease:[{ease:["linear","initial",w,Ge,Ve]}],delay:[{delay:[kt,Ge,Ve]}],animate:[{animate:["none",j,Ge,Ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,Ge,Ve]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:se()}],"scale-x":[{"scale-x":se()}],"scale-y":[{"scale-y":se()}],"scale-z":[{"scale-z":se()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Ge,Ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:de()}],"translate-x":[{"translate-x":de()}],"translate-y":[{"translate-y":de()}],"translate-z":[{"translate-z":de()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,Ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,Ve]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[kt,td,Fo,dy]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},SG=tG(wG);function le(...e){return SG(aD(e))}function yD(e){if(e.length===0)return 0;const t=e.filter(n=>n.status==="completed").length;return Math.round(t/e.length*100)}function Ob(e){const n=new Date().getTime()-new Date(e).getTime(),r=Math.floor(n/6e4),i=Math.floor(r/60),o=Math.floor(i/24);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:new Date(e).toLocaleDateString()}function bD(e,t=200){if(!e)return"";let n=e.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"").replace(/^[-*_]{3,}$/gm,"").replace(/^>\s*/gm,"").replace(/^[\s]*[-*+]\s+/gm,"").replace(/^[\s]*\d+\.\s+/gm,"").replace(/\[[ x]\]\s*/gi,"").replace(/\n+/g," ").replace(/\s+/g," ").trim();return n.length>t&&(n=n.substring(0,t).trim()+"..."),n}const Mc=RV,At=PV,Tt=MV,jt=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(rD,{ref:r,sideOffset:t,className:le("z-50 overflow-hidden rounded-lg border border-border bg-card px-3 py-1.5 text-sm text-foreground shadow-lg","animate-in fade-in-0 zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));jt.displayName=rD.displayName;var jG=Symbol.for("react.lazy"),Qm=jp[" use ".trim().toString()];function _G(e){return typeof e=="object"&&e!==null&&"then"in e}function wD(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===jG&&"_payload"in e&&_G(e._payload)}function mw(e){const t=NG(e),n=y.forwardRef((r,i)=>{let{children:o,...c}=r;wD(o)&&typeof Qm=="function"&&(o=Qm(o._payload));const l=y.Children.toArray(o),d=l.find(EG);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}var CG=mw("Slot");function NG(e){const t=y.forwardRef((n,r)=>{let{children:i,...o}=n;if(wD(i)&&typeof Qm=="function"&&(i=Qm(i._payload)),y.isValidElement(i)){const c=TG(i),l=AG(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kG=Symbol("radix.slottable");function EG(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===kG}function AG(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function TG(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const ok=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lk=aD,pw=(e,t)=>n=>{var r;if(t?.variants==null)return lk(e,n?.class,n?.className);const{variants:i,defaultVariants:o}=t,c=Object.keys(i).map(h=>{const m=n?.[h],f=o?.[h];if(m===null)return null;const g=ok(m)||ok(f);return i[h][g]}),l=n&&Object.entries(n).reduce((h,m)=>{let[f,g]=m;return g===void 0||(h[f]=g),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:f,className:g,...x}=m;return Object.entries(x).every(C=>{let[_,b]=C;return Array.isArray(b)?b.includes({...o,...l}[_]):{...o,...l}[_]===b})?[...h,f,g]:h},[]);return lk(e,c,d,n?.class,n?.className)},gw=pw("inline-flex items-center justify-center whitespace-nowrap font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:scale-[0.98]",outline:"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-[var(--success)] text-[var(--success-foreground)] hover:bg-[var(--success)]/90 active:scale-[0.98]",warning:"bg-warning text-warning-foreground hover:bg-warning/90 active:scale-[0.98]"},size:{default:"h-10 px-4 py-2 text-sm rounded-lg",sm:"h-8 px-3 text-xs rounded-md",lg:"h-12 px-6 text-base rounded-lg",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),te=y.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const c=r?CG:"button";return s.jsx(c,{className:le(gw({variant:t,size:n,className:e})),ref:o,...i})});te.displayName="Button";var hy="focusScope.autoFocusOnMount",fy="focusScope.autoFocusOnUnmount",ck={bubbles:!1,cancelable:!0},DG="FocusScope",Yp=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...c}=e,[l,d]=y.useState(null),h=yn(i),m=yn(o),f=y.useRef(null),g=dt(t,_=>d(_)),x=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let _=function(S){if(x.paused||!l)return;const N=S.target;l.contains(N)?f.current=N:$a(f.current,{select:!0})},b=function(S){if(x.paused||!l)return;const N=S.relatedTarget;N!==null&&(l.contains(N)||$a(f.current,{select:!0}))},w=function(S){if(document.activeElement===document.body)for(const T of S)T.removedNodes.length>0&&$a(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const j=new MutationObserver(w);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),j.disconnect()}}},[r,l,x.paused]),y.useEffect(()=>{if(l){dk.add(x);const _=document.activeElement;if(!l.contains(_)){const w=new CustomEvent(hy,ck);l.addEventListener(hy,h),l.dispatchEvent(w),w.defaultPrevented||(RG(OG(SD(l)),{select:!0}),document.activeElement===_&&$a(l))}return()=>{l.removeEventListener(hy,h),setTimeout(()=>{const w=new CustomEvent(fy,ck);l.addEventListener(fy,m),l.dispatchEvent(w),w.defaultPrevented||$a(_??document.body,{select:!0}),l.removeEventListener(fy,m),dk.remove(x)},0)}}},[l,h,m,x]);const C=y.useCallback(_=>{if(!n&&!r||x.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,w=document.activeElement;if(b&&w){const j=_.currentTarget,[S,N]=PG(j);S&&N?!_.shiftKey&&w===N?(_.preventDefault(),n&&$a(S,{select:!0})):_.shiftKey&&w===S&&(_.preventDefault(),n&&$a(N,{select:!0})):w===j&&_.preventDefault()}},[n,r,x.paused]);return s.jsx(tt.div,{tabIndex:-1,...c,ref:g,onKeyDown:C})});Yp.displayName=DG;function RG(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if($a(r,{select:t}),document.activeElement!==n)return}function PG(e){const t=SD(e),n=uk(t,e),r=uk(t.reverse(),e);return[n,r]}function SD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uk(e,t){for(const n of e)if(!MG(n,{upTo:t}))return n}function MG(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function LG(e){return e instanceof HTMLInputElement&&"select"in e}function $a(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&LG(e)&&t&&e.select()}}var dk=IG();function IG(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=hk(e,t),e.unshift(t)},remove(t){e=hk(e,t),e[0]?.resume()}}}function hk(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function OG(e){return e.filter(t=>t.tagName!=="A")}var my=0;function xw(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fk()),document.body.insertAdjacentElement("beforeend",e[1]??fk()),my++,()=>{my===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),my--}},[])}function fk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fi=function(){return fi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},fi.apply(this,arguments)};function jD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function BG(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Sm="right-scroll-bar-position",jm="width-before-scroll-bar",zG="with-scroll-bars-hidden",FG="--removed-body-scroll-bar-size";function py(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function HG(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var UG=typeof window<"u"?y.useLayoutEffect:y.useEffect,mk=new WeakMap;function $G(e,t){var n=HG(null,function(r){return e.forEach(function(i){return py(i,r)})});return UG(function(){var r=mk.get(n);if(r){var i=new Set(r),o=new Set(e),c=n.current;i.forEach(function(l){o.has(l)||py(l,null)}),o.forEach(function(l){i.has(l)||py(l,c)})}mk.set(n,e)},[e]),n}function VG(e){return e}function GG(e,t){t===void 0&&(t=VG);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var c=t(o,r);return n.push(c),function(){n=n.filter(function(l){return l!==c})}},assignSyncMedium:function(o){for(r=!0;n.length;){var c=n;n=[],c.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var c=[];if(n.length){var l=n;n=[],l.forEach(o),c=n}var d=function(){var m=c;c=[],m.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(m){c.push(m),h()},filter:function(m){return c=c.filter(m),n}}}};return i}function qG(e){e===void 0&&(e={});var t=GG(null);return t.options=fi({async:!0,ssr:!1},e),t}var _D=function(e){var t=e.sideCar,n=jD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,fi({},n))};_D.isSideCarExport=!0;function WG(e,t){return e.useMedium(t),_D}var CD=qG(),gy=function(){},Xp=y.forwardRef(function(e,t){var n=y.useRef(null),r=y.useState({onScrollCapture:gy,onWheelCapture:gy,onTouchMoveCapture:gy}),i=r[0],o=r[1],c=e.forwardProps,l=e.children,d=e.className,h=e.removeScrollBar,m=e.enabled,f=e.shards,g=e.sideCar,x=e.noRelative,C=e.noIsolation,_=e.inert,b=e.allowPinchZoom,w=e.as,j=w===void 0?"div":w,S=e.gapMode,N=jD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=g,E=$G([n,t]),D=fi(fi({},N),i);return y.createElement(y.Fragment,null,m&&y.createElement(T,{sideCar:CD,removeScrollBar:h,shards:f,noRelative:x,noIsolation:C,inert:_,setCallbacks:o,allowPinchZoom:!!b,lockRef:n,gapMode:S}),c?y.cloneElement(y.Children.only(l),fi(fi({},D),{ref:E})):y.createElement(j,fi({},D,{className:d,ref:E}),l))});Xp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xp.classNames={fullWidth:jm,zeroRight:Sm};var KG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=KG();return t&&e.setAttribute("nonce",t),e}function XG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ZG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=YG())&&(XG(t,n),ZG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JG=function(){var e=QG();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ND=function(){var e=JG(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},eq={left:0,top:0,right:0,gap:0},xy=function(e){return parseInt(e||"",10)||0},tq=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[xy(n),xy(r),xy(i)]},sq=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eq;var t=tq(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},nq=ND(),_c="data-scroll-locked",rq=function(e,t,n,r){var i=e.left,o=e.top,c=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(_c,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sm,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(jm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Sm," .").concat(Sm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jm," .").concat(jm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_c,`] {
    `).concat(FG,": ").concat(l,`px;
  }
`)},pk=function(){var e=parseInt(document.body.getAttribute(_c)||"0",10);return isFinite(e)?e:0},iq=function(){y.useEffect(function(){return document.body.setAttribute(_c,(pk()+1).toString()),function(){var e=pk()-1;e<=0?document.body.removeAttribute(_c):document.body.setAttribute(_c,e.toString())}},[])},aq=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;iq();var o=y.useMemo(function(){return sq(i)},[i]);return y.createElement(nq,{styles:rq(o,!t,i,n?"":"!important")})},Bb=!1;if(typeof window<"u")try{var nm=Object.defineProperty({},"passive",{get:function(){return Bb=!0,!0}});window.addEventListener("test",nm,nm),window.removeEventListener("test",nm,nm)}catch{Bb=!1}var ic=Bb?{passive:!1}:!1,oq=function(e){return e.tagName==="TEXTAREA"},kD=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!oq(e)&&n[t]==="visible")},lq=function(e){return kD(e,"overflowY")},cq=function(e){return kD(e,"overflowX")},gk=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ED(e,r);if(i){var o=AD(e,r),c=o[1],l=o[2];if(c>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},uq=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},dq=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},ED=function(e,t){return e==="v"?lq(t):cq(t)},AD=function(e,t){return e==="v"?uq(t):dq(t)},hq=function(e,t){return e==="h"&&t==="rtl"?-1:1},fq=function(e,t,n,r,i){var o=hq(e,window.getComputedStyle(t).direction),c=o*r,l=n.target,d=t.contains(l),h=!1,m=c>0,f=0,g=0;do{if(!l)break;var x=AD(e,l),C=x[0],_=x[1],b=x[2],w=_-b-o*C;(C||w)&&ED(e,l)&&(f+=w,g+=C);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(m&&Math.abs(f)<1||!m&&Math.abs(g)<1)&&(h=!0),h},rm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xk=function(e){return[e.deltaX,e.deltaY]},vk=function(e){return e&&"current"in e?e.current:e},mq=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pq=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},gq=0,ac=[];function xq(e){var t=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(gq++)[0],o=y.useState(ND)[0],c=y.useRef(e);y.useEffect(function(){c.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var _=BG([e.lockRef.current],(e.shards||[]).map(vk),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=y.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!c.current.allowPinchZoom;var w=rm(_),j=n.current,S="deltaX"in _?_.deltaX:j[0]-w[0],N="deltaY"in _?_.deltaY:j[1]-w[1],T,E=_.target,D=Math.abs(S)>Math.abs(N)?"h":"v";if("touches"in _&&D==="h"&&E.type==="range")return!1;var A=window.getSelection(),P=A&&A.anchorNode,M=P?P===E||P.contains(E):!1;if(M)return!1;var B=gk(D,E);if(!B)return!0;if(B?T=D:(T=D==="v"?"h":"v",B=gk(D,E)),!B)return!1;if(!r.current&&"changedTouches"in _&&(S||N)&&(r.current=T),!T)return!0;var F=r.current||T;return fq(F,b,_,F==="h"?S:N)},[]),d=y.useCallback(function(_){var b=_;if(!(!ac.length||ac[ac.length-1]!==o)){var w="deltaY"in b?xk(b):rm(b),j=t.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&mq(T.delta,w)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var S=(c.current.shards||[]).map(vk).filter(Boolean).filter(function(T){return T.contains(b.target)}),N=S.length>0?l(b,S[0]):!c.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),h=y.useCallback(function(_,b,w,j){var S={name:_,delta:b,target:w,should:j,shadowParent:vq(w)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(N){return N!==S})},1)},[]),m=y.useCallback(function(_){n.current=rm(_),r.current=void 0},[]),f=y.useCallback(function(_){h(_.type,xk(_),_.target,l(_,e.lockRef.current))},[]),g=y.useCallback(function(_){h(_.type,rm(_),_.target,l(_,e.lockRef.current))},[]);y.useEffect(function(){return ac.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",d,ic),document.addEventListener("touchmove",d,ic),document.addEventListener("touchstart",m,ic),function(){ac=ac.filter(function(_){return _!==o}),document.removeEventListener("wheel",d,ic),document.removeEventListener("touchmove",d,ic),document.removeEventListener("touchstart",m,ic)}},[]);var x=e.removeScrollBar,C=e.inert;return y.createElement(y.Fragment,null,C?y.createElement(o,{styles:pq(i)}):null,x?y.createElement(aq,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function vq(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yq=WG(CD,xq);var Zp=y.forwardRef(function(e,t){return y.createElement(Xp,fi({},e,{ref:t,sideCar:yq}))});Zp.classNames=Xp.classNames;var bq=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},oc=new WeakMap,im=new WeakMap,am={},vy=0,TD=function(e){return e&&(e.host||TD(e.parentNode))},wq=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=TD(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Sq=function(e,t,n,r){var i=wq(t,Array.isArray(e)?e:[e]);am[n]||(am[n]=new WeakMap);var o=am[n],c=[],l=new Set,d=new Set(i),h=function(f){!f||l.has(f)||(l.add(f),h(f.parentNode))};i.forEach(h);var m=function(f){!f||d.has(f)||Array.prototype.forEach.call(f.children,function(g){if(l.has(g))m(g);else try{var x=g.getAttribute(r),C=x!==null&&x!=="false",_=(oc.get(g)||0)+1,b=(o.get(g)||0)+1;oc.set(g,_),o.set(g,b),c.push(g),_===1&&C&&im.set(g,!0),b===1&&g.setAttribute(n,"true"),C||g.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return m(t),l.clear(),vy++,function(){c.forEach(function(f){var g=oc.get(f)-1,x=o.get(f)-1;oc.set(f,g),o.set(f,x),g||(im.has(f)||f.removeAttribute(r),im.delete(f)),x||f.removeAttribute(n)}),vy--,vy||(oc=new WeakMap,oc=new WeakMap,im=new WeakMap,am={})}},vw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=bq(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Sq(r,i,n,"aria-hidden")):function(){return null}};function jq(e){const t=_q(e),n=y.forwardRef((r,i)=>{const{children:o,...c}=r,l=y.Children.toArray(o),d=l.find(Nq);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function _q(e){const t=y.forwardRef((n,r)=>{const{children:i,...o}=n;if(y.isValidElement(i)){const c=Eq(i),l=kq(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cq=Symbol("radix.slottable");function Nq(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cq}function kq(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Eq(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Qp="Dialog",[DD,RD]=An(Qp),[Aq,oi]=DD(Qp),PD=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:c=!0}=e,l=y.useRef(null),d=y.useRef(null),[h,m]=ii({prop:r,defaultProp:i??!1,onChange:o,caller:Qp});return s.jsx(Aq,{scope:t,triggerRef:l,contentRef:d,contentId:Mr(),titleId:Mr(),descriptionId:Mr(),open:h,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(f=>!f),[m]),modal:c,children:n})};PD.displayName=Qp;var MD="DialogTrigger",LD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oi(MD,n),o=dt(t,i.triggerRef);return s.jsx(tt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ww(i.open),...r,ref:o,onClick:Oe(e.onClick,i.onOpenToggle)})});LD.displayName=MD;var yw="DialogPortal",[Tq,ID]=DD(yw,{forceMount:void 0}),OD=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=oi(yw,t);return s.jsx(Tq,{scope:t,forceMount:n,children:y.Children.map(r,c=>s.jsx(wn,{present:n||o.open,children:s.jsx(Gp,{asChild:!0,container:i,children:c})}))})};OD.displayName=yw;var Jm="DialogOverlay",BD=y.forwardRef((e,t)=>{const n=ID(Jm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=oi(Jm,e.__scopeDialog);return o.modal?s.jsx(wn,{present:r||o.open,children:s.jsx(Rq,{...i,ref:t})}):null});BD.displayName=Jm;var Dq=jq("DialogOverlay.RemoveScroll"),Rq=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oi(Jm,n);return s.jsx(Zp,{as:Dq,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(tt.div,{"data-state":ww(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nl="DialogContent",zD=y.forwardRef((e,t)=>{const n=ID(nl,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=oi(nl,e.__scopeDialog);return s.jsx(wn,{present:r||o.open,children:o.modal?s.jsx(Pq,{...i,ref:t}):s.jsx(Mq,{...i,ref:t})})});zD.displayName=nl;var Pq=y.forwardRef((e,t)=>{const n=oi(nl,e.__scopeDialog),r=y.useRef(null),i=dt(t,n.contentRef,r);return y.useEffect(()=>{const o=r.current;if(o)return vw(o)},[]),s.jsx(FD,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(e.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Oe(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&o.preventDefault()}),onFocusOutside:Oe(e.onFocusOutside,o=>o.preventDefault())})}),Mq=y.forwardRef((e,t)=>{const n=oi(nl,e.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return s.jsx(FD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;n.triggerRef.current?.contains(c)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),FD=y.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...c}=e,l=oi(nl,n),d=y.useRef(null),h=dt(t,d);return xw(),s.jsxs(s.Fragment,{children:[s.jsx(Yp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:s.jsx(hh,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ww(l.open),...c,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Iq,{titleId:l.titleId}),s.jsx(Bq,{contentRef:d,descriptionId:l.descriptionId})]})]})}),bw="DialogTitle",HD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oi(bw,n);return s.jsx(tt.h2,{id:i.titleId,...r,ref:t})});HD.displayName=bw;var UD="DialogDescription",$D=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oi(UD,n);return s.jsx(tt.p,{id:i.descriptionId,...r,ref:t})});$D.displayName=UD;var VD="DialogClose",GD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oi(VD,n);return s.jsx(tt.button,{type:"button",...r,ref:t,onClick:Oe(e.onClick,()=>i.onOpenChange(!1))})});GD.displayName=VD;function ww(e){return e?"open":"closed"}var qD="DialogTitleWarning",[Lq,WD]=S9(qD,{contentName:nl,titleName:bw,docsSlug:"dialog"}),Iq=({titleId:e})=>{const t=WD(qD),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Oq="DialogDescriptionWarning",Bq=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WD(Oq).contentName}}.`;return y.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Jp=PD,zq=LD,eg=OD,mh=BD,ph=zD,gh=HD,xh=$D,vh=GD;const sn=Jp,Fq=eg,KD=y.forwardRef(({className:e,...t},n)=>s.jsx(mh,{ref:n,className:le("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));KD.displayName=mh.displayName;const Xs=y.forwardRef(({className:e,children:t,hideCloseButton:n,...r},i)=>s.jsxs(Fq,{children:[s.jsx(KD,{}),s.jsxs(ph,{ref:i,className:le("fixed left-[50%] top-[50%] z-50 w-full max-w-lg max-h-[90vh]","translate-x-[-50%] translate-y-[-50%]","bg-card border border-border rounded-2xl p-6","shadow-xl","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","duration-200 overflow-hidden flex flex-col",e),...r,children:[t,!n&&s.jsxs(vh,{className:le("absolute right-4 top-4 rounded-lg p-1","text-muted-foreground hover:text-foreground","hover:bg-accent transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","disabled:pointer-events-none"),children:[s.jsx(Ys,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xs.displayName=ph.displayName;const Jt=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col space-y-2 text-center sm:text-left",e),...t});Jt.displayName="DialogHeader";const Ts=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 mt-6",e),...t});Ts.displayName="DialogFooter";const es=y.forwardRef(({className:e,...t},n)=>s.jsx(gh,{ref:n,className:le("text-lg font-semibold leading-none tracking-tight text-foreground",e),...t}));es.displayName=gh.displayName;const fs=y.forwardRef(({className:e,...t},n)=>s.jsx(xh,{ref:n,className:le("text-sm text-muted-foreground",e),...t}));fs.displayName=xh.displayName;var Hq=y.createContext(void 0);function Jc(e){const t=y.useContext(Hq);return e||t||"ltr"}function zb(e,[t,n]){return Math.min(n,Math.max(t,e))}function Uq(e,t){return y.useReducer((n,r)=>t[n][r]??n,e)}var Sw="ScrollArea",[YD]=An(Sw),[$q,zr]=YD(Sw),XD=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...c}=e,[l,d]=y.useState(null),[h,m]=y.useState(null),[f,g]=y.useState(null),[x,C]=y.useState(null),[_,b]=y.useState(null),[w,j]=y.useState(0),[S,N]=y.useState(0),[T,E]=y.useState(!1),[D,A]=y.useState(!1),P=dt(t,B=>d(B)),M=Jc(i);return s.jsx($q,{scope:n,type:r,dir:M,scrollHideDelay:o,scrollArea:l,viewport:h,onViewportChange:m,content:f,onContentChange:g,scrollbarX:x,onScrollbarXChange:C,scrollbarXEnabled:T,onScrollbarXEnabledChange:E,scrollbarY:_,onScrollbarYChange:b,scrollbarYEnabled:D,onScrollbarYEnabledChange:A,onCornerWidthChange:j,onCornerHeightChange:N,children:s.jsx(tt.div,{dir:M,...c,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});XD.displayName=Sw;var ZD="ScrollAreaViewport",QD=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...o}=e,c=zr(ZD,n),l=y.useRef(null),d=dt(t,l,c.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(tt.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});QD.displayName=ZD;var Ei="ScrollAreaScrollbar",jw=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zr(Ei,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:c}=i,l=e.orientation==="horizontal";return y.useEffect(()=>(l?o(!0):c(!0),()=>{l?o(!1):c(!1)}),[l,o,c]),i.type==="hover"?s.jsx(Vq,{...r,ref:t,forceMount:n}):i.type==="scroll"?s.jsx(Gq,{...r,ref:t,forceMount:n}):i.type==="auto"?s.jsx(JD,{...r,ref:t,forceMount:n}):i.type==="always"?s.jsx(_w,{...r,ref:t}):null});jw.displayName=Ei;var Vq=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zr(Ei,e.__scopeScrollArea),[o,c]=y.useState(!1);return y.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),c(!0)},m=()=>{d=window.setTimeout(()=>c(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",m)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(wn,{present:n||o,children:s.jsx(JD,{"data-state":o?"visible":"hidden",...r,ref:t})})}),Gq=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zr(Ei,e.__scopeScrollArea),o=e.orientation==="horizontal",c=sg(()=>d("SCROLL_END"),100),[l,d]=Uq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,i.scrollHideDelay,d]),y.useEffect(()=>{const h=i.viewport,m=o?"scrollLeft":"scrollTop";if(h){let f=h[m];const g=()=>{const x=h[m];f!==x&&(d("SCROLL"),c()),f=x};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[i.viewport,o,d,c]),s.jsx(wn,{present:n||l!=="hidden",children:s.jsx(_w,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Oe(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Oe(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),JD=y.forwardRef((e,t)=>{const n=zr(Ei,e.__scopeScrollArea),{forceMount:r,...i}=e,[o,c]=y.useState(!1),l=e.orientation==="horizontal",d=sg(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;c(l?h:m)}},10);return Lc(n.viewport,d),Lc(n.content,d),s.jsx(wn,{present:r||o,children:s.jsx(_w,{"data-state":o?"visible":"hidden",...i,ref:t})})}),_w=y.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=zr(Ei,e.__scopeScrollArea),o=y.useRef(null),c=y.useRef(0),[l,d]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=rR(l.viewport,l.content),m={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:g=>o.current=g,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:g=>c.current=g};function f(g,x){return Zq(g,c.current,l,x)}return n==="horizontal"?s.jsx(qq,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const g=i.viewport.scrollLeft,x=yk(g,l,i.dir);o.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=f(g,i.dir))}}):n==="vertical"?s.jsx(Wq,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const g=i.viewport.scrollTop,x=yk(g,l);o.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=f(g))}}):null}),qq=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=zr(Ei,e.__scopeScrollArea),[c,l]=y.useState(),d=y.useRef(null),h=dt(t,d,o.onScrollbarXChange);return y.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(tR,{"data-orientation":"horizontal",...i,ref:h,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tg(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(o.viewport){const g=o.viewport.scrollLeft+m.deltaX;e.onWheelScroll(g),aR(g,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&c&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:tp(c.paddingLeft),paddingEnd:tp(c.paddingRight)}})}})}),Wq=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=zr(Ei,e.__scopeScrollArea),[c,l]=y.useState(),d=y.useRef(null),h=dt(t,d,o.onScrollbarYChange);return y.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(tR,{"data-orientation":"vertical",...i,ref:h,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tg(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(o.viewport){const g=o.viewport.scrollTop+m.deltaY;e.onWheelScroll(g),aR(g,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&c&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:tp(c.paddingTop),paddingEnd:tp(c.paddingBottom)}})}})}),[Kq,eR]=YD(Ei),tR=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:m,onResize:f,...g}=e,x=zr(Ei,n),[C,_]=y.useState(null),b=dt(t,P=>_(P)),w=y.useRef(null),j=y.useRef(""),S=x.viewport,N=r.content-r.viewport,T=yn(m),E=yn(d),D=sg(f,10);function A(P){if(w.current){const M=P.clientX-w.current.left,B=P.clientY-w.current.top;h({x:M,y:B})}}return y.useEffect(()=>{const P=M=>{const B=M.target;C?.contains(B)&&T(M,N)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[S,C,N,T]),y.useEffect(E,[r,E]),Lc(C,D),Lc(x.content,D),s.jsx(Kq,{scope:n,scrollbar:C,hasThumb:i,onThumbChange:yn(o),onThumbPointerUp:yn(c),onThumbPositionChange:E,onThumbPointerDown:yn(l),children:s.jsx(tt.div,{...g,ref:b,style:{position:"absolute",...g.style},onPointerDown:Oe(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),w.current=C.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),A(P))}),onPointerMove:Oe(e.onPointerMove,A),onPointerUp:Oe(e.onPointerUp,P=>{const M=P.target;M.hasPointerCapture(P.pointerId)&&M.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=j.current,x.viewport&&(x.viewport.style.scrollBehavior=""),w.current=null})})})}),ep="ScrollAreaThumb",sR=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=eR(ep,e.__scopeScrollArea);return s.jsx(wn,{present:n||i.hasThumb,children:s.jsx(Yq,{ref:t,...r})})}),Yq=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,o=zr(ep,n),c=eR(ep,n),{onThumbPositionChange:l}=c,d=dt(t,f=>c.onThumbChange(f)),h=y.useRef(void 0),m=sg(()=>{h.current&&(h.current(),h.current=void 0)},100);return y.useEffect(()=>{const f=o.viewport;if(f){const g=()=>{if(m(),!h.current){const x=Qq(f,l);h.current=x,l()}};return l(),f.addEventListener("scroll",g),()=>f.removeEventListener("scroll",g)}},[o.viewport,m,l]),s.jsx(tt.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Oe(e.onPointerDownCapture,f=>{const x=f.target.getBoundingClientRect(),C=f.clientX-x.left,_=f.clientY-x.top;c.onThumbPointerDown({x:C,y:_})}),onPointerUp:Oe(e.onPointerUp,c.onThumbPointerUp)})});sR.displayName=ep;var Cw="ScrollAreaCorner",nR=y.forwardRef((e,t)=>{const n=zr(Cw,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(Xq,{...e,ref:t}):null});nR.displayName=Cw;var Xq=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=zr(Cw,n),[o,c]=y.useState(0),[l,d]=y.useState(0),h=!!(o&&l);return Lc(i.scrollbarX,()=>{const m=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(m),d(m)}),Lc(i.scrollbarY,()=>{const m=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(m),c(m)}),h?s.jsx(tt.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function tp(e){return e?parseInt(e,10):0}function rR(e,t){const n=e/t;return isNaN(n)?0:n}function tg(e){const t=rR(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Zq(e,t,n,r="ltr"){const i=tg(n),o=i/2,c=t||o,l=i-c,d=n.scrollbar.paddingStart+c,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,m=n.content-n.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return iR([d,h],f)(e)}function yk(e,t,n="ltr"){const r=tg(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,c=t.content-t.viewport,l=o-r,d=n==="ltr"?[0,c]:[c*-1,0],h=zb(e,d);return iR([0,c],[0,l])(h)}function iR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function aR(e,t){return e>0&&e<t}var Qq=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function i(){const o={left:e.scrollLeft,top:e.scrollTop},c=n.left!==o.left,l=n.top!==o.top;(c||l)&&t(),n=o,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function sg(e,t){const n=yn(e),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Lc(e,t){const n=yn(t);hn(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var oR=XD,Jq=QD,eW=nR;const cs=y.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(oR,{ref:r,className:le("relative overflow-hidden",e),...n,children:[s.jsx(Jq,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(lR,{}),s.jsx(eW,{})]}));cs.displayName=oR.displayName;const lR=y.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(jw,{ref:r,orientation:t,className:le("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(sR,{className:"relative flex-1 rounded-full bg-border"})}));lR.displayName=jw.displayName;var tW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sW=tW.reduce((e,t)=>{const n=mw(`Primitive.${t}`),r=y.forwardRef((i,o)=>{const{asChild:c,...l}=i,d=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),nW="Separator",bk="horizontal",rW=["horizontal","vertical"],cR=y.forwardRef((e,t)=>{const{decorative:n,orientation:r=bk,...i}=e,o=iW(r)?r:bk,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return s.jsx(sW.div,{"data-orientation":o,...l,...i,ref:t})});cR.displayName=nW;function iW(e){return rW.includes(e)}var uR=cR;const En=y.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>s.jsx(uR,{ref:i,decorative:n,orientation:t,className:le("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));En.displayName=uR.displayName;const wk=e=>{let t;const n=new Set,r=(h,m)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const g=t;t=m??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(x=>x(t,g))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h))},d=t=e(r,i,l);return l},aW=(e=>e?wk(e):wk),oW=e=>e;function lW(e,t=oW){const n=Lt.useSyncExternalStore(e.subscribe,Lt.useCallback(()=>t(e.getState()),[e,t]),Lt.useCallback(()=>t(e.getInitialState()),[e,t]));return Lt.useDebugValue(n),n}const Sk=e=>{const t=aW(e),n=r=>lW(t,r);return Object.assign(n,t),n},xr=(e=>e?Sk(e):Sk),_m="lastSelectedProjectId";let yy=null;const Et=xr((e,t)=>({projects:[],selectedProjectId:null,isLoading:!1,error:null,openProjectIds:[],activeProjectId:null,tabOrder:[],setProjects:n=>e({projects:n}),addProject:n=>e(r=>({projects:[...r.projects,n]})),removeProject:n=>e(r=>{const i=r.selectedProjectId===n;return i&&localStorage.removeItem(_m),{projects:r.projects.filter(o=>o.id!==n),selectedProjectId:i?null:r.selectedProjectId}}),updateProject:(n,r)=>e(i=>({projects:i.projects.map(o=>o.id===n?{...o,...r}:o)})),selectProject:n=>{n?localStorage.setItem(_m,n):localStorage.removeItem(_m),e({selectedProjectId:n})},setLoading:n=>e({isLoading:n}),setError:n=>e({error:n}),openProjectTab:n=>{const r=t();if(console.log("[ProjectStore] openProjectTab called:",{projectId:n,currentOpenProjectIds:r.openProjectIds,currentTabOrder:r.tabOrder}),r.openProjectIds.includes(n))console.log("[ProjectStore] Project already open, just activating"),t().setActiveProject(n);else{const i=[...r.openProjectIds,n],o=r.tabOrder.includes(n)?r.tabOrder:[...r.tabOrder,n];console.log("[ProjectStore] Adding new tab:",{newOpenProjectIds:i,newTabOrder:o}),e({openProjectIds:i,tabOrder:o,activeProjectId:n}),dd()}},closeProjectTab:n=>{const r=t(),i=r.openProjectIds.filter(l=>l!==n),o=r.tabOrder.filter(l=>l!==n);let c=r.activeProjectId;if(r.activeProjectId===n){const l=o.length>0?o:[];c=l.length>0?l[0]:null}e({openProjectIds:i,tabOrder:o,activeProjectId:c}),dd()},setActiveProject:n=>{e({activeProjectId:n}),t().selectProject(n),dd()},reorderTabs:(n,r)=>{const o=[...t().tabOrder],[c]=o.splice(n,1);o.splice(r,0,c),e({tabOrder:o}),dd()},restoreTabState:()=>{console.log("[ProjectStore] restoreTabState called - now handled by IPC")},getSelectedProject:()=>{const n=t();return n.projects.find(r=>r.id===n.selectedProjectId)},getOpenProjects:()=>{const n=t();return n.projects.filter(r=>n.openProjectIds.includes(r.id))},getActiveProject:()=>{const n=t();return n.projects.find(r=>r.id===n.activeProjectId)},getProjectTabs:()=>{const n=t(),r=n.tabOrder.map(o=>n.projects.find(c=>c.id===o)).filter(Boolean),i=n.projects.filter(o=>n.openProjectIds.includes(o.id)&&!n.tabOrder.includes(o.id));return[...r,...i]}}));function dd(){yy&&clearTimeout(yy),yy=setTimeout(async()=>{const e=Et.getState(),t={openProjectIds:e.openProjectIds,activeProjectId:e.activeProjectId,tabOrder:e.tabOrder};console.log("[ProjectStore] Saving tab state to main process:",t);try{await J.saveTabState(t)}catch(n){console.error("[ProjectStore] Failed to save tab state:",n)}},100)}async function Fb(){const e=Et.getState();e.setLoading(!0),e.setError(null);try{const t=await J.getTabState();console.log("[ProjectStore] Loaded tab state from main process:",t.data),t.success&&t.data&&Et.setState({openProjectIds:t.data.openProjectIds||[],activeProjectId:t.data.activeProjectId||null,tabOrder:t.data.tabOrder||[]});const n=await J.getProjects();if(console.log("[ProjectStore] getProjects result:",{success:n.success,projectCount:n.data?.length,projectIds:n.data?.map(r=>r.id)}),n.success&&n.data){e.setProjects(n.data);const r=Et.getState(),i=r.openProjectIds.filter(d=>n.data?.some(h=>h.id===d)??!1),o=r.tabOrder.filter(d=>n.data?.some(h=>h.id===d)??!1),c=r.activeProjectId&&n.data?.some(d=>d.id===r.activeProjectId)?r.activeProjectId:null;console.log("[ProjectStore] Tab state cleanup:",{originalOpenProjectIds:r.openProjectIds,validOpenProjectIds:i,originalTabOrder:r.tabOrder,validTabOrder:o,originalActiveProjectId:r.activeProjectId,validActiveProjectId:c}),i.length!==r.openProjectIds.length||o.length!==r.tabOrder.length||c!==r.activeProjectId?(console.log("[ProjectStore] Updating cleaned tab state"),Et.setState({openProjectIds:i,tabOrder:o,activeProjectId:c}),dd()):console.log("[ProjectStore] Tab state is valid, no cleanup needed");const l=Et.getState();if(!l.selectedProjectId&&n.data.length>0){const d=localStorage.getItem(_m);d&&n.data.some(m=>m.id===d)?e.selectProject(d):l.activeProjectId?e.selectProject(l.activeProjectId):e.selectProject(n.data[0].id)}}else e.setError(n.error||"Failed to load projects")}catch(t){e.setError(t instanceof Error?t.message:"Unknown error")}finally{e.setLoading(!1)}}async function Hb(e){const t=Et.getState();try{const n=await J.addProject(e);return n.success&&n.data?(t.addProject(n.data),t.selectProject(n.data.id),t.openProjectTab(n.data.id),n.data):(t.setError(n.error||"Failed to add project"),null)}catch(n){return t.setError(n instanceof Error?n.message:"Unknown error"),null}}async function dR(e,t=!0){const n=Et.getState();try{const r=await J.createProject(e,t);return r.success&&r.data?(n.addProject(r.data),n.selectProject(r.data.id),n.openProjectTab(r.data.id),r.data):(n.setError(r.error||"Failed to create project"),null)}catch(r){return n.setError(r instanceof Error?r.message:"Unknown error"),null}}async function hR(e,t){const n=Et.getState();try{const r=await J.cloneProject(e,t);return r.success&&r.data?(n.addProject(r.data),n.selectProject(r.data.id),n.openProjectTab(r.data.id),r.data):(n.setError(r.error||"Failed to clone project"),null)}catch(r){return n.setError(r instanceof Error?r.message:"Unknown error"),null}}async function fR(e){const t=Et.getState();try{return(await J.removeProject(e)).success?(t.removeProject(e),t.openProjectIds.includes(e)&&t.closeProjectTab(e),!0):!1}catch{return!1}}async function mR(e,t){const n=Et.getState();try{if((await J.updateProjectSettings(e,t)).success){const i=n.projects.find(o=>o.id===e);return i&&n.updateProject(e,{settings:{...i.settings,...t}}),!0}return!1}catch{return!1}}async function Sd(e){try{const t=await J.checkProjectVersion(e);return t.success&&t.data?t.data:null}catch{return null}}async function ng(e){const t=Et.getState();try{console.log("[ProjectStore] initializeProject called for:",e);const n=await J.initializeProject(e);return console.log("[ProjectStore] IPC result:",n),n.success&&n.data?(console.log("[ProjectStore] IPC succeeded, result.data:",n.data),n.data.success?(console.log("[ProjectStore] Updating project autoBuildPath to .auto-claude"),t.updateProject(e,{autoBuildPath:".auto-claude"})):console.log("[ProjectStore] result.data.success is false, not updating project"),n.data):(console.log("[ProjectStore] IPC failed or no data, setting error"),t.setError(n.error||"Failed to initialize project"),null)}catch(n){return console.error("[ProjectStore] Exception during initializeProject:",n),t.setError(n instanceof Error?n.message:"Unknown error"),null}}async function pR(e){const t=Et.getState();try{const n=await J.updateProjectAutoBuild(e);return n.success&&n.data?n.data:(t.setError(n.error||"Failed to update auto-claude"),null)}catch(n){return t.setError(n instanceof Error?n.message:"Unknown error"),null}}const Nw=Object.freeze(Object.defineProperty({__proto__:null,addProject:Hb,checkProjectVersion:Sd,cloneProject:hR,createProject:dR,initializeProject:ng,loadProjects:Fb,removeProject:fR,updateProjectAutoBuild:pR,updateProjectSettings:mR,useProjectStore:Et},Symbol.toStringTag,{value:"Module"})),by=["backlog","in_progress","ai_review","human_review","done"],gR={backlog:"Planning",in_progress:"In Progress",ai_review:"AI Review",human_review:"Human Review",done:"Done"},cW={idle:"Idle",planning:"Planning",coding:"Coding",qa_review:"AI Review",qa_fixing:"Fixing Issues",complete:"Complete",failed:"Failed"},uW={idle:"bg-muted/50 text-muted-foreground border-muted",planning:"bg-amber-500/10 text-amber-500 border-amber-500/30",coding:"bg-info/10 text-info border-info/30",qa_review:"bg-purple-500/10 text-purple-400 border-purple-500/30",qa_fixing:"bg-warning/10 text-warning border-warning/30",complete:"bg-success/10 text-success border-success/30",failed:"bg-destructive/10 text-destructive border-destructive/30"},yh={feature:"Feature",bug_fix:"Bug Fix",refactoring:"Refactoring",documentation:"Docs",security:"Security",performance:"Performance",ui_ux:"UI/UX",infrastructure:"Infrastructure",testing:"Testing"},kw={feature:"bg-primary/10 text-primary border-primary/30",bug_fix:"bg-destructive/10 text-destructive border-destructive/30",refactoring:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",documentation:"bg-amber-500/10 text-amber-500 border-amber-500/30",security:"bg-red-500/10 text-red-400 border-red-500/30",performance:"bg-purple-500/10 text-purple-400 border-purple-500/30",ui_ux:"bg-info/10 text-info border-info/30",infrastructure:"bg-slate-500/10 text-slate-400 border-slate-500/30",testing:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30"},bh={trivial:"Trivial",small:"Small",medium:"Medium",large:"Large",complex:"Complex"},Ew={trivial:"bg-success/10 text-success",small:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",large:"bg-orange-500/10 text-orange-400",complex:"bg-destructive/10 text-destructive"},rg={low:"Low Impact",medium:"Medium Impact",high:"High Impact",critical:"Critical Impact"},sp={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",critical:"bg-destructive/10 text-destructive"},ig={low:"Low",medium:"Medium",high:"High",urgent:"Urgent"},xR={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",urgent:"bg-destructive/10 text-destructive"},jk=10*1024*1024,ur=10,Aw=["image/png","image/jpeg","image/jpg","image/gif","image/webp","image/svg+xml"],rl="PNG, JPEG, GIF, WebP, SVG",wh={must:"Must Have",should:"Should Have",could:"Could Have",wont:"Won't Have"},eu={must:"bg-destructive/10 text-destructive border-destructive/30",should:"bg-warning/10 text-warning border-warning/30",could:"bg-info/10 text-info border-info/30",wont:"bg-muted text-muted-foreground border-muted"},Bd={low:"bg-success/10 text-success",medium:"bg-warning/10 text-warning",high:"bg-destructive/10 text-destructive"},ag={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-success/10 text-success"},om=[{id:"under_review",label:"Under Review",color:"border-t-muted-foreground/50",icon:"Eye"},{id:"planned",label:"Planned",color:"border-t-info",icon:"Calendar"},{id:"in_progress",label:"In Progress",color:"border-t-primary",icon:"Play"},{id:"done",label:"Done",color:"border-t-success",icon:"Check"}],no={code_improvements:"Code Improvements",ui_ux_improvements:"UI/UX Improvements",documentation_gaps:"Documentation",security_hardening:"Security",performance_optimizations:"Performance",code_quality:"Code Quality"},Ub={code_improvements:"Code-revealed opportunities from patterns, architecture, and infrastructure analysis",ui_ux_improvements:"Visual and interaction improvements identified through app analysis",documentation_gaps:"Missing or outdated documentation that needs attention",security_hardening:"Security vulnerabilities and hardening opportunities",performance_optimizations:"Performance bottlenecks and optimization opportunities",code_quality:"Refactoring opportunities, large files, code smells, and best practice violations"},Ic={code_improvements:"bg-success/10 text-success border-success/30",ui_ux_improvements:"bg-info/10 text-info border-info/30",documentation_gaps:"bg-amber-500/10 text-amber-500 border-amber-500/30",security_hardening:"bg-destructive/10 text-destructive border-destructive/30",performance_optimizations:"bg-purple-500/10 text-purple-400 border-purple-500/30",code_quality:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30"},vR={draft:"bg-muted text-muted-foreground",selected:"bg-primary/10 text-primary",converted:"bg-success/10 text-success",dismissed:"bg-destructive/10 text-destructive line-through",archived:"bg-violet-500/10 text-violet-400"},Sh={trivial:"bg-success/10 text-success",small:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",large:"bg-orange-500/10 text-orange-400",complex:"bg-destructive/10 text-destructive"},Tw={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",critical:"bg-destructive/10 text-destructive"},yR={low:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",high:"bg-orange-500/10 text-orange-500",critical:"bg-destructive/10 text-destructive"},bR={usability:"Usability",accessibility:"Accessibility",performance:"Performance",visual:"Visual Design",interaction:"Interaction"},wR={readme:"README",api_docs:"API Documentation",inline_comments:"Inline Comments",examples:"Examples & Tutorials",architecture:"Architecture Docs",troubleshooting:"Troubleshooting Guide"},dW={authentication:"Authentication",authorization:"Authorization",input_validation:"Input Validation",data_protection:"Data Protection",dependencies:"Dependencies",configuration:"Configuration",secrets_management:"Secrets Management"},hW={bundle_size:"Bundle Size",runtime:"Runtime Performance",memory:"Memory Usage",database:"Database Queries",network:"Network Requests",rendering:"Rendering",caching:"Caching"},fW={large_files:"Large Files",code_smells:"Code Smells",complexity:"High Complexity",duplication:"Code Duplication",naming:"Naming Conventions",structure:"File Structure",linting:"Linting Issues",testing:"Test Coverage",types:"Type Safety",dependencies:"Dependency Issues",dead_code:"Dead Code",git_hygiene:"Git Hygiene"},SR={suggestion:"bg-info/10 text-info",minor:"bg-warning/10 text-warning",major:"bg-orange-500/10 text-orange-500",critical:"bg-destructive/10 text-destructive"},lm={enabledTypes:["code_improvements","ui_ux_improvements","security_hardening"],includeRoadmapContext:!0,includeKanbanContext:!0,maxIdeasPerType:5},mW={"keep-a-changelog":"Keep a Changelog","simple-list":"Simple List","github-release":"GitHub Release"},pW={"keep-a-changelog":"Structured format with Added/Changed/Fixed/Removed sections","simple-list":"Clean bulleted list with categories","github-release":"GitHub-style release notes"},gW={technical:"Technical","user-facing":"User-Facing",marketing:"Marketing"},xW={technical:"Detailed technical changes for developers","user-facing":"Clear, non-technical descriptions for end users",marketing:"Value-focused copy emphasizing benefits"},vW={none:"None",little:"Headings Only",medium:"Headings + Highlights",high:"Everything"},yW={none:"No emojis",little:"Emojis on section headings only",medium:"Emojis on headings and key items",high:"Emojis on headings and every line"},wy={tasks:"Completed Tasks","git-history":"Git History","branch-diff":"Branch Comparison"},Sy={tasks:"Generate from completed spec tasks","git-history":"Generate from recent commits or tag range","branch-diff":"Generate from commits between two branches"},bW={loading_specs:"Loading spec files...",loading_commits:"Loading commits...",generating:"Generating changelog...",formatting:"Formatting output...",complete:"Complete",error:"Error"},Yr=[{value:"opus",label:"Claude Opus 4.5"},{value:"sonnet",label:"Claude Sonnet 4.5"},{value:"haiku",label:"Claude Haiku 4.5"}],Oc=[{value:"none",label:"None",description:"No extended thinking"},{value:"low",label:"Low",description:"Brief consideration"},{value:"medium",label:"Medium",description:"Moderate analysis"},{value:"high",label:"High",description:"Deep thinking"},{value:"ultrathink",label:"Ultra Think",description:"Maximum reasoning depth"}],dr={spec:"opus",planning:"opus",coding:"opus",qa:"opus"},hr={spec:"ultrathink",planning:"high",coding:"low",qa:"low"},wW={insights:"sonnet",ideation:"opus",roadmap:"opus"},SW={insights:"medium",ideation:"high",roadmap:"high"},jy={insights:{label:"Insights Chat",description:"Ask questions about your codebase"},ideation:{label:"Ideation",description:"Generate feature ideas and improvements"},roadmap:{label:"Roadmap",description:"Create strategic feature roadmaps"}},Xn=[{id:"auto",name:"Auto (Optimized)",description:"Uses Opus across all phases with optimized thinking levels",model:"opus",thinkingLevel:"high",icon:"Sparkles",isAutoProfile:!0,phaseModels:dr,phaseThinking:hr},{id:"complex",name:"Complex Tasks",description:"For intricate, multi-step implementations requiring deep analysis",model:"opus",thinkingLevel:"ultrathink",icon:"Brain"},{id:"balanced",name:"Balanced",description:"Good balance of speed and quality for most tasks",model:"sonnet",thinkingLevel:"medium",icon:"Scale"},{id:"quick",name:"Quick Edits",description:"Fast iterations for simple changes and quick fixes",model:"haiku",thinkingLevel:"low",icon:"Zap"}],jR=[{id:"default",name:"Default",description:"Oscura-inspired with pale yellow accent",previewColors:{bg:"#F2F2ED",accent:"#E6E7A3",darkBg:"#0B0B0F",darkAccent:"#E6E7A3"}},{id:"dusk",name:"Dusk",description:"Warmer variant with slightly lighter dark mode",previewColors:{bg:"#F5F5F0",accent:"#E6E7A3",darkBg:"#131419",darkAccent:"#E6E7A3"}},{id:"lime",name:"Lime",description:"Fresh, energetic lime with purple accents",previewColors:{bg:"#E8F5A3",accent:"#7C3AED",darkBg:"#0F0F1A"}},{id:"ocean",name:"Ocean",description:"Calm, professional blue tones",previewColors:{bg:"#E0F2FE",accent:"#0284C7",darkBg:"#082F49"}},{id:"retro",name:"Retro",description:"Warm, nostalgic amber vibes",previewColors:{bg:"#FEF3C7",accent:"#D97706",darkBg:"#1C1917"}},{id:"neo",name:"Neo",description:"Modern cyberpunk pink/magenta",previewColors:{bg:"#FDF4FF",accent:"#D946EF",darkBg:"#0F0720"}},{id:"forest",name:"Forest",description:"Natural, earthy green tones",previewColors:{bg:"#DCFCE7",accent:"#16A34A",darkBg:"#052E16"}}],_R={open:"Open",closed:"Closed"},CR={open:"bg-success/10 text-success border-success/30",closed:"bg-purple-500/10 text-purple-400 border-purple-500/30"},jW={simple:"bg-success/10 text-success",standard:"bg-warning/10 text-warning",complex:"bg-destructive/10 text-destructive"},Cm=75,Nm=200,ea=100,_W=5,CW={theme:"system",colorTheme:"default",defaultModel:"opus",agentFramework:"auto-claude",pythonPath:void 0,autoBuildPath:void 0,autoUpdateAutoBuild:!0,autoNameTerminals:!0,onboardingCompleted:!1,notifications:{onTaskComplete:!0,onTaskFailed:!0,onReviewNeeded:!0,sound:!1},globalClaudeOAuthToken:void 0,globalOpenAIApiKey:void 0,selectedAgentProfile:"auto",changelogFormat:"keep-a-changelog",changelogAudience:"user-facing",changelogEmojiLevel:"none",uiScale:ea,betaUpdates:!1,language:"en"},dn=xr(e=>({settings:CW,isLoading:!0,error:null,setSettings:t=>e({settings:t}),updateSettings:t=>e(n=>({settings:{...n.settings,...t}})),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t})}));function NW(e){if(e.onboardingCompleted!==void 0)return e;const t=!!e.globalClaudeOAuthToken,n=!!e.autoBuildPath;return t||n?{...e,onboardingCompleted:!0}:{...e,onboardingCompleted:!1}}async function NR(){const e=dn.getState();e.setLoading(!0);try{const t=await J.getSettings();if(t.success&&t.data){const n=NW(t.data);e.setSettings(n),n.onboardingCompleted!==t.data.onboardingCompleted&&await J.saveSettings({onboardingCompleted:n.onboardingCompleted})}}catch(t){e.setError(t instanceof Error?t.message:"Failed to load settings")}finally{e.setLoading(!1)}}async function Ya(e){const t=dn.getState();try{return(await J.saveSettings(e)).success?(t.updateSettings(e),!0):!1}catch{return!1}}const Je=y.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:le("flex h-10 w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","file:border-0 file:bg-transparent file:text-sm file:font-medium",e),ref:r,...n}));Je.displayName="Input";const kW=pw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),we=y.forwardRef(({className:e,...t},n)=>s.jsx("label",{ref:n,className:le(kW(),e),...t}));we.displayName="Label";function Dw({open:e,onOpenChange:t,onProjectAdded:n}){const{t:r}=rs("dialogs"),[i,o]=y.useState("choose"),[c,l]=y.useState(""),[d,h]=y.useState(""),[m,f]=y.useState(""),[g,x]=y.useState(""),[C,_]=y.useState(""),[b,w]=y.useState(!0),[j,S]=y.useState(!1),[N,T]=y.useState(!1),[E,D]=y.useState(null);y.useEffect(()=>{e&&(o("choose"),l(""),h(""),f(""),x(""),_(""),w(!0),D(null),T(!1))},[e]),y.useEffect(()=>{(async()=>{if(!Ki)try{const K=await J.getDefaultProjectLocation();K&&h(K)}catch{}})()},[]);const A=async()=>{if(Ki){o("open-form");return}try{const Y=await J.selectDirectory();Y&&await P(Y)}catch(Y){D(Y instanceof Error?Y.message:r("addProject.failedToOpen"))}},P=async Y=>{T(!0),D(null);try{const K=await Hb(Y);if(K){try{const O=await J.detectMainBranch(Y);O.success&&O.data&&await J.updateProjectSettings(K.id,{mainBranch:O.data})}catch{}n?.(K,!K.autoBuildPath),t(!1)}}catch(K){D(K instanceof Error?K.message:r("addProject.failedToOpen"))}finally{T(!1)}},M=async()=>{try{const Y=await J.selectDirectory();Y&&h(Y)}catch{}},B=async()=>{if(!c.trim()){D(r("addProject.nameRequired"));return}S(!0),D(null);try{if(Ki){const O=await dR(c.trim(),b);O&&(n?.(O,!0),t(!1));return}if(!d.trim()){D(r("addProject.locationRequired"));return}console.log("[AddProjectModal] About to call api.createProjectFolder, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasCreateProjectFolder:typeof J?.createProjectFolder,api:J,windowAPI:window.__claudeAPI});const Y=await J.createProjectFolder(d,c.trim(),b);if(!Y.success||!Y.data){D(Y.error||"Failed to create project folder");return}const K=await Hb(Y.data.path);if(K){if(b)try{const O=await J.detectMainBranch(Y.data.path);O.success&&O.data&&await J.updateProjectSettings(K.id,{mainBranch:O.data})}catch{}n?.(K,!0),t(!1)}}catch(Y){D(Y instanceof Error?Y.message:r("addProject.failedToCreate"))}finally{S(!1)}},F=async()=>{if(!m.trim()){D("Git URL is required");return}S(!0),D(null);try{const Y=await hR(m.trim(),g.trim()||void 0);if(Y){try{const K=await J.detectMainBranch(Y.id);K.success&&K.data&&await J.updateProjectSettings(Y.id,{mainBranch:K.data})}catch{}n?.(Y,!Y.autoBuildPath),t(!1)}}catch(Y){D(Y instanceof Error?Y.message:"Failed to clone repository")}finally{S(!1)}},U=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:r("addProject.title")}),s.jsx(fs,{children:Ki?"Create a new project or clone from a Git repository":r("addProject.description")})]}),s.jsxs("div",{className:"py-4 space-y-3",children:[s.jsxs("button",{onClick:()=>o("create-form"),className:le("w-full flex items-center gap-4 p-4 rounded-xl border border-border","bg-card hover:bg-accent hover:border-accent transition-all duration-200","text-left group"),children:[s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-success/10",children:s.jsx(UA,{className:"h-6 w-6 text-success"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-foreground",children:r("addProject.createNew")}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:Ki?"Start a new empty project":r("addProject.createNewDescription")})]}),s.jsx(vs,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]}),s.jsxs("button",{onClick:()=>o("clone-form"),className:le("w-full flex items-center gap-4 p-4 rounded-xl border border-border","bg-card hover:bg-accent hover:border-accent transition-all duration-200","text-left group"),children:[s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-primary/10",children:s.jsx(bn,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Clone from Git"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Clone an existing repository from GitHub or other Git hosting"})]}),s.jsx(vs,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]}),!Ki&&s.jsxs("button",{onClick:A,className:le("w-full flex items-center gap-4 p-4 rounded-xl border border-border","bg-card hover:bg-accent hover:border-accent transition-all duration-200","text-left group"),children:[s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-primary/10",children:s.jsx(fl,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-foreground",children:r("addProject.openExisting")}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:r("addProject.openExistingDescription")})]}),s.jsx(vs,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),E&&s.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3 mt-2",children:E})]}),G=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:r("addProject.createNewTitle")}),s.jsx(fs,{children:Ki?"Enter a name for your new project":r("addProject.createNewSubtitle")})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"project-name",children:r("addProject.projectName")}),s.jsx(Je,{id:"project-name",placeholder:r("addProject.projectNamePlaceholder"),value:c,onChange:Y=>l(Y.target.value),autoFocus:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:Ki?"Use lowercase letters, numbers, and hyphens":r("addProject.projectNameHelp")})]}),!Ki&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"project-location",children:r("addProject.location")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Je,{id:"project-location",placeholder:r("addProject.locationPlaceholder"),value:d,onChange:Y=>h(Y.target.value),className:"flex-1"}),s.jsx(te,{variant:"outline",onClick:M,children:r("addProject.browse")})]}),d&&c&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r("addProject.willCreate")," ",s.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[d,"/",c]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"init-git",checked:b,onChange:Y=>w(Y.target.checked),className:"h-4 w-4 rounded border-border bg-background"}),s.jsx(we,{htmlFor:"init-git",className:"text-sm font-normal cursor-pointer",children:r("addProject.initGit")})]}),E&&s.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3",children:E})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:()=>o("choose"),disabled:j,children:r("addProject.back")}),s.jsx(te,{onClick:B,disabled:j,children:r(j?"addProject.creating":"addProject.createProject")})]})]}),$=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:"Clone Repository"}),s.jsx(fs,{children:"Enter the Git URL to clone a repository"})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"git-url",children:"Repository URL"}),s.jsx(Je,{id:"git-url",placeholder:"https://github.com/user/repo.git",value:m,onChange:Y=>f(Y.target.value),autoFocus:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"HTTPS or SSH URL of the repository"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"clone-name",children:"Project Name (optional)"}),s.jsx(Je,{id:"clone-name",placeholder:"Leave empty to use repository name",value:g,onChange:Y=>x(Y.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom folder name for the cloned project"})]}),E&&s.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3",children:E})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:()=>o("choose"),disabled:j,children:"Back"}),s.jsx(te,{onClick:F,disabled:j||!m.trim(),children:j?"Cloning...":"Clone Repository"})]})]}),V=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:"Open Existing Project"}),s.jsx(fs,{children:"Enter the full path to your project directory"})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"project-path",children:"Project Path"}),s.jsx(Je,{id:"project-path",placeholder:"/home/user/my-project or C:\\Users\\name\\project",value:C,onChange:Y=>_(Y.target.value),autoFocus:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the absolute path to an existing project directory on the server"})]}),E&&s.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3",children:E})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:()=>o("choose"),disabled:N,children:"Back"}),s.jsx(te,{onClick:()=>P(C),disabled:N||!C.trim(),children:N?"Opening...":"Open Project"})]})]});return s.jsx(sn,{open:e,onOpenChange:t,children:s.jsxs(Xs,{className:"sm:max-w-md",children:[i==="choose"&&U(),i==="create-form"&&G(),i==="clone-form"&&$(),i==="open-form"&&V()]})})}function EW({open:e,onOpenChange:t,project:n,gitStatus:r,onGitInitialized:i,onSkip:o}){const{t:c}=rs("dialogs"),[l,d]=y.useState(!1),[h,m]=y.useState(null),[f,g]=y.useState("info"),x=r&&!r.isGitRepo;r&&r.isGitRepo&&r.hasCommits;const C=async()=>{if(n){d(!0),m(null),g("initializing");try{const S=await J.initializeGit(n.id);S.success?(g("success"),setTimeout(()=>{i(),t(!1),g("info")},1500)):(m(S.error||"Failed to initialize git"),g("info"))}catch(S){m(S instanceof Error?S.message:"Failed to initialize git"),g("info")}finally{d(!1)}}},_=()=>{o?.(),t(!1)},b=()=>s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(A8,{className:"h-5 w-5 text-primary"}),c("gitSetup.title")]}),s.jsx(fs,{children:c("gitSetup.description")})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsx("div",{className:"rounded-lg bg-muted p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-warning mt-0.5 shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium text-sm",children:c(x?"gitSetup.notGitRepo":"gitSetup.noCommits")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c(x?"gitSetup.needsInit":"gitSetup.needsCommit")})]})]})}),s.jsxs("div",{className:"rounded-lg border border-border p-4",children:[s.jsx("p",{className:"font-medium text-sm mb-3",children:c("gitSetup.willSetup")}),s.jsxs("ul",{className:"space-y-2",children:[x&&s.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(bn,{className:"h-4 w-4 text-primary"}),c("gitSetup.initRepo")]}),s.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(rt,{className:"h-4 w-4 text-primary"}),c("gitSetup.createCommit")]})]})]}),s.jsxs("details",{className:"text-sm",children:[s.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:c("gitSetup.manual")}),s.jsxs("div",{className:"mt-3 rounded-lg bg-muted/50 p-3 font-mono text-xs space-y-1",children:[s.jsx("p",{className:"text-muted-foreground",children:"Open a terminal in your project folder and run:"}),x&&s.jsx("p",{children:"git init"}),s.jsx("p",{children:"git add ."}),s.jsx("p",{children:'git commit -m "Initial commit"'})]})]}),h&&s.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/20 p-3 text-sm text-destructive",children:h})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:_,children:"Skip for now"}),s.jsxs(te,{onClick:C,disabled:l,children:[s.jsx(bn,{className:"mr-2 h-4 w-4"}),"Initialize Git"]})]})]}),w=()=>s.jsxs(s.Fragment,{children:[s.jsx(Jt,{children:s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Ie,{className:"h-5 w-5 animate-spin text-primary"}),c("gitSetup.settingUp")]})}),s.jsx("div",{className:"py-8 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"space-y-3 text-center",children:[s.jsx(tl,{className:"h-12 w-12 text-muted-foreground mx-auto"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c("gitSetup.initializingRepo")})]})})]}),j=()=>s.jsxs(s.Fragment,{children:[s.jsx(Jt,{children:s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(rt,{className:"h-5 w-5 text-success"}),c("gitSetup.success")]})}),s.jsx("div",{className:"py-8 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"space-y-3 text-center",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center mx-auto",children:s.jsx(rt,{className:"h-8 w-8 text-success"})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c("gitSetup.readyToUse")})]})})]});return s.jsx(sn,{open:e,onOpenChange:t,children:s.jsxs(Xs,{className:"sm:max-w-md",children:[f==="info"&&b(),f==="initializing"&&w(),f==="success"&&j()]})})}const zd=xr((e,t)=>({isModalOpen:!1,rateLimitInfo:null,isSDKModalOpen:!1,sdkRateLimitInfo:null,hasPendingRateLimit:!1,pendingRateLimitType:null,showRateLimitModal:n=>{e({isModalOpen:!0,rateLimitInfo:n,hasPendingRateLimit:!0,pendingRateLimitType:"terminal"})},hideRateLimitModal:()=>{e({isModalOpen:!1})},showSDKRateLimitModal:n=>{e({isSDKModalOpen:!0,sdkRateLimitInfo:n,hasPendingRateLimit:!0,pendingRateLimitType:"sdk"})},hideSDKRateLimitModal:()=>{e({isSDKModalOpen:!1})},reopenRateLimitModal:()=>{const n=t();n.pendingRateLimitType==="terminal"&&n.rateLimitInfo?e({isModalOpen:!0}):n.pendingRateLimitType==="sdk"&&n.sdkRateLimitInfo&&e({isSDKModalOpen:!0})},clearPendingRateLimit:()=>{e({hasPendingRateLimit:!1,pendingRateLimitType:null,rateLimitInfo:null,sdkRateLimitInfo:null})}}));function AW(){const{t:e}=rs("common"),{hasPendingRateLimit:t,pendingRateLimitType:n,rateLimitInfo:r,sdkRateLimitInfo:i,reopenRateLimitModal:o,clearPendingRateLimit:c}=zd();if(!t)return null;const l=n==="terminal"?r?.resetTime:i?.resetTime,d=n==="sdk"?i?.source:null,h=d?TW(d,e):e("rateLimit.sources.claude");return s.jsx("div",{className:"mx-3 mb-3",children:s.jsxs("div",{className:"relative flex items-start gap-2 rounded-lg border border-warning/50 bg-warning/10 p-3 cursor-pointer hover:bg-warning/20 transition-colors",onClick:o,role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),o())},children:[s.jsx(Is,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-warning",children:e("rateLimit.title")}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 truncate",children:l?e("rateLimit.resetsAt",{time:l}):e("rateLimit.hitLimit",{source:h})}),s.jsx("p",{className:"text-xs text-primary mt-1",children:e("rateLimit.clickToManage")})]}),s.jsxs(te,{variant:"ghost",size:"icon",className:"h-5 w-5 shrink-0 hover:bg-warning/20",onClick:m=>{m.stopPropagation(),c()},children:[s.jsx(Ys,{className:"h-3 w-3"}),s.jsx("span",{className:"sr-only",children:e("labels.dismiss")})]})]})})}function TW(e,t){switch(e){case"changelog":return t("rateLimit.sources.changelog");case"task":return t("rateLimit.sources.task");case"roadmap":return t("rateLimit.sources.roadmap");case"ideation":return t("rateLimit.sources.ideation");case"title-generator":return t("rateLimit.sources.titleGenerator");default:return t("rateLimit.sources.claude")}}const _k=[{id:"kanban",labelKey:"navigation:items.kanban",icon:nH,shortcut:"K"},{id:"terminals",labelKey:"navigation:items.terminals",icon:tl,shortcut:"A"},{id:"insights",labelKey:"navigation:items.insights",icon:us,shortcut:"N"},{id:"roadmap",labelKey:"navigation:items.roadmap",icon:F0,shortcut:"D"},{id:"ideation",labelKey:"navigation:items.ideation",icon:Ni,shortcut:"I"},{id:"changelog",labelKey:"navigation:items.changelog",icon:pr,shortcut:"L"},{id:"context",labelKey:"navigation:items.context",icon:rh,shortcut:"C"}],Ck=[{id:"github-issues",labelKey:"navigation:items.githubIssues",icon:Yn,shortcut:"G"},{id:"worktrees",labelKey:"navigation:items.worktrees",icon:bn,shortcut:"W"}];function DW({onSettingsClick:e,onNewTaskClick:t,activeView:n="kanban",onViewChange:r}){const{t:i}=rs(["navigation","dialogs","common"]),o=Et($=>$.projects),c=Et($=>$.selectedProjectId);Et($=>$.selectProject);const l=dn($=>$.settings),[d,h]=y.useState(!1),[m,f]=y.useState(!1),[g,x]=y.useState(!1),[C,_]=y.useState(!1),[b,w]=y.useState(null),[j,S]=y.useState(null),[N,T]=y.useState(null),[E,D]=y.useState(!1),A=o.find($=>$.id===c);y.useEffect(()=>{const $=V=>{if(V.target instanceof HTMLInputElement||V.target instanceof HTMLTextAreaElement||V.target instanceof HTMLSelectElement||V.target?.isContentEditable||!c||V.metaKey||V.ctrlKey||V.altKey)return;const Y=V.key.toUpperCase(),O=[..._k,...Ck].find(L=>L.shortcut===Y);O&&(V.preventDefault(),r?.(O.id))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[c,r]),y.useEffect(()=>{(async()=>{if(c&&l.autoUpdateAutoBuild){const V=await Sd(c);V?.updateAvailable&&(T(V),x(!0))}})()},[c,l.autoUpdateAutoBuild]),y.useEffect(()=>{(async()=>{if(A)try{const V=await J.checkGitStatus(A.id);V.success&&V.data&&(w(V.data),(!V.data.isGitRepo||!V.data.hasCommits)&&_(!0))}catch(V){console.error("Failed to check git status:",V)}else w(null)})()},[A]);const P=($,V)=>{V&&(S($),f(!0))},M=async()=>{if(!j)return;const $=j.id;D(!0);try{(await ng($))?.success&&(S(null),f(!1))}finally{D(!1)}},B=()=>{f(!1),S(null)},F=async()=>{if(A)try{const $=await J.checkGitStatus(A.id);$.success&&$.data&&w($.data)}catch($){console.error("Failed to refresh git status:",$)}},U=$=>{r?.($)},G=$=>{const V=n===$.id,Y=$.icon;return s.jsxs("button",{onClick:()=>U($.id),disabled:!c,className:le("flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-all duration-200","hover:bg-accent hover:text-accent-foreground","disabled:pointer-events-none disabled:opacity-50",V&&"bg-accent text-accent-foreground"),children:[s.jsx(Y,{className:"h-4 w-4 shrink-0"}),s.jsx("span",{className:"flex-1 text-left",children:i($.labelKey)}),$.shortcut&&s.jsx("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-1 rounded-md border border-border bg-secondary px-1.5 font-mono text-[10px] font-medium text-muted-foreground sm:flex",children:$.shortcut})]},$.id)};return s.jsxs(Mc,{children:[s.jsxs("div",{className:"flex h-full w-64 flex-col bg-sidebar border-r border-border",children:[s.jsx("div",{className:"electron-drag flex h-14 items-center px-4 pt-6",children:s.jsx("span",{className:"electron-no-drag text-lg font-bold text-primary",children:"Auto Claude"})}),s.jsx(En,{className:"mt-2"}),s.jsx(En,{}),s.jsx(cs,{className:"flex-1",children:s.jsxs("div",{className:"px-3 py-4",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:i("sections.project")}),s.jsx("nav",{className:"space-y-1",children:_k.map(G)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:i("sections.tools")}),s.jsx("nav",{className:"space-y-1",children:Ck.map(G)})]})]})}),s.jsx(En,{}),s.jsx(AW,{}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"sm",className:"flex-1 justify-start gap-2",onClick:e,children:[s.jsx(kp,{className:"h-4 w-4"}),i("actions.settings")]})}),s.jsx(jt,{side:"top",children:i("tooltips.settings")})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>window.open("https://github.com/AndyMik90/Auto-Claude/issues","_blank"),children:s.jsx(YF,{className:"h-4 w-4"})})}),s.jsx(jt,{side:"top",children:i("tooltips.help")})]})]}),s.jsxs(te,{className:"w-full",onClick:t,disabled:!c||!A?.autoBuildPath,children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),i("actions.newTask")]}),A&&!A.autoBuildPath&&s.jsx("p",{className:"mt-2 text-xs text-muted-foreground text-center",children:i("messages.initializeToCreateTasks")})]})]}),s.jsx(sn,{open:m,onOpenChange:$=>{!$&&!E&&B()},children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"h-5 w-5"}),i("dialogs:initialize.title")]}),s.jsx(fs,{children:i("dialogs:initialize.description")})]}),s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:i("dialogs:initialize.willDo")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[s.jsx("li",{children:i("dialogs:initialize.createFolder")}),s.jsx("li",{children:i("dialogs:initialize.copyFramework")}),s.jsx("li",{children:i("dialogs:initialize.setupSpecs")})]})]}),!l.autoBuildPath&&s.jsx("div",{className:"mt-4 rounded-lg border border-warning/50 bg-warning/10 p-4 text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-warning",children:i("dialogs:initialize.sourcePathNotConfigured")}),s.jsx("p",{className:"text-muted-foreground mt-1",children:i("dialogs:initialize.sourcePathNotConfiguredDescription")})]})]})})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:B,disabled:E,children:i("common:buttons.skip")}),s.jsx(te,{onClick:M,disabled:E||!l.autoBuildPath,children:E?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),i("common:labels.initializing")]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),i("common:buttons.initialize")]})})]})]})}),s.jsx(sn,{open:g,onOpenChange:x,children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Dt,{className:"h-5 w-5"}),i("dialogs:update.title")]}),s.jsx(fs,{children:i("dialogs:update.projectInitialized")})]}),s.jsx(Ts,{children:s.jsx(te,{variant:"outline",onClick:()=>x(!1),children:i("common:buttons.close")})})]})}),s.jsx(Dw,{open:d,onOpenChange:h,onProjectAdded:P}),s.jsx(EW,{open:C,onOpenChange:_,project:A||null,gitStatus:b,onGitInitialized:F})]})}function og(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lg="Checkbox",[RW]=An(lg),[PW,Rw]=RW(lg);function MW(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:o,form:c,name:l,onCheckedChange:d,required:h,value:m="on",internal_do_not_use_render:f}=e,[g,x]=ii({prop:n,defaultProp:i??!1,onChange:d,caller:lg}),[C,_]=y.useState(null),[b,w]=y.useState(null),j=y.useRef(!1),S=C?!!c||!!C.closest("form"):!0,N={checked:g,disabled:o,setChecked:x,control:C,setControl:_,name:l,form:c,value:m,hasConsumerStoppedPropagationRef:j,required:h,defaultChecked:Xa(i)?!1:i,isFormControl:S,bubbleInput:b,setBubbleInput:w};return s.jsx(PW,{scope:t,...N,children:LW(f)?f(N):r})}var kR="CheckboxTrigger",ER=y.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:o,value:c,disabled:l,checked:d,required:h,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:C}=Rw(kR,e),_=dt(i,m),b=y.useRef(d);return y.useEffect(()=>{const w=o?.form;if(w){const j=()=>f(b.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[o,f]),s.jsx(tt.button,{type:"button",role:"checkbox","aria-checked":Xa(d)?"mixed":d,"aria-required":h,"data-state":PR(d),"data-disabled":l?"":void 0,disabled:l,value:c,...r,ref:_,onKeyDown:Oe(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Oe(n,w=>{f(j=>Xa(j)?!0:!j),C&&x&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})})});ER.displayName=kR;var Pw=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:c,disabled:l,value:d,onCheckedChange:h,form:m,...f}=e;return s.jsx(MW,{__scopeCheckbox:n,checked:i,defaultChecked:o,disabled:l,required:c,onCheckedChange:h,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:g})=>s.jsxs(s.Fragment,{children:[s.jsx(ER,{...f,ref:t,__scopeCheckbox:n}),g&&s.jsx(RR,{__scopeCheckbox:n})]})})});Pw.displayName=lg;var AR="CheckboxIndicator",TR=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,o=Rw(AR,n);return s.jsx(wn,{present:r||Xa(o.checked)||o.checked===!0,children:s.jsx(tt.span,{"data-state":PR(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});TR.displayName=AR;var DR="CheckboxBubbleInput",RR=y.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:c,required:l,disabled:d,name:h,value:m,form:f,bubbleInput:g,setBubbleInput:x}=Rw(DR,e),C=dt(n,x),_=og(o),b=Vp(r);y.useEffect(()=>{const j=g;if(!j)return;const S=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(S,"checked").set,E=!i.current;if(_!==o&&T){const D=new Event("click",{bubbles:E});j.indeterminate=Xa(o),T.call(j,Xa(o)?!1:o),j.dispatchEvent(D)}},[g,_,o,i]);const w=y.useRef(Xa(o)?!1:o);return s.jsx(tt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??w.current,required:l,disabled:d,name:h,value:m,form:f,...t,tabIndex:-1,ref:C,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});RR.displayName=DR;function LW(e){return typeof e=="function"}function Xa(e){return e==="indeterminate"}function PR(e){return Xa(e)?"indeterminate":e?"checked":"unchecked"}const ca=y.forwardRef(({className:e,...t},n)=>s.jsx(Pw,{ref:n,className:le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(TR,{className:le("flex items-center justify-center text-current"),children:s.jsx(ts,{className:"h-3 w-3"})})}));ca.displayName=Pw.displayName;const He=y.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("rounded-xl border border-border bg-card text-card-foreground transition-all duration-200",e),...t}));He.displayName="Card";const In=y.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("flex flex-col space-y-1.5 p-6",e),...t}));In.displayName="CardHeader";const On=y.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:le("text-xl font-semibold leading-none tracking-tight",e),...t}));On.displayName="CardTitle";const Mw=y.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:le("text-sm text-muted-foreground",e),...t}));Mw.displayName="CardDescription";const pt=y.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("p-6 pt-0",e),...t}));pt.displayName="CardContent";const IW=y.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:le("flex items-center p-6 pt-0",e),...t}));IW.displayName="CardFooter";const OW=pw("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-success/10 text-success",warning:"border-transparent bg-warning/10 text-warning",info:"border-transparent bg-info/10 text-info",purple:"border-transparent bg-purple-500/10 text-purple-400",muted:"border-transparent bg-muted text-muted-foreground"}},defaultVariants:{variant:"default"}});function je({className:e,variant:t,...n}){return s.jsx("div",{className:le(OW({variant:t}),e),...n})}const Lw=y.createContext({});function Iw(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ow=typeof window<"u",MR=Ow?y.useLayoutEffect:y.useEffect,cg=y.createContext(null);function Bw(e,t){e.indexOf(t)===-1&&e.push(t)}function zw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ia=(e,t,n)=>n>t?t:n<e?e:n;let Fw=()=>{};const aa={},LR=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function IR(e){return typeof e=="object"&&e!==null}const OR=e=>/^0[^.\s]+$/u.test(e);function Hw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Lr=e=>e,BW=(e,t)=>n=>t(e(n)),jh=(...e)=>e.reduce(BW),Fd=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Uw{constructor(){this.subscriptions=[]}add(t){return Bw(this.subscriptions,t),()=>zw(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=e=>e*1e3,Rr=e=>e/1e3;function BR(e,t){return t?e*(1e3/t):0}const zR=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,zW=1e-7,FW=12;function HW(e,t,n,r,i){let o,c,l=0;do c=t+(n-t)/2,o=zR(c,r,i)-e,o>0?n=c:t=c;while(Math.abs(o)>zW&&++l<FW);return c}function _h(e,t,n,r){if(e===t&&n===r)return Lr;const i=o=>HW(o,0,1,e,n);return o=>o===0||o===1?o:zR(i(o),t,r)}const FR=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,HR=e=>t=>1-e(1-t),UR=_h(.33,1.53,.69,.99),$w=HR(UR),$R=FR($w),VR=e=>(e*=2)<1?.5*$w(e):.5*(2-Math.pow(2,-10*(e-1))),Vw=e=>1-Math.sin(Math.acos(e)),GR=HR(Vw),qR=FR(Vw),UW=_h(.42,0,1,1),$W=_h(0,0,.58,1),WR=_h(.42,0,.58,1),VW=e=>Array.isArray(e)&&typeof e[0]!="number",KR=e=>Array.isArray(e)&&typeof e[0]=="number",GW={linear:Lr,easeIn:UW,easeInOut:WR,easeOut:$W,circIn:Vw,circInOut:qR,circOut:GR,backIn:$w,backInOut:$R,backOut:UR,anticipate:VR},qW=e=>typeof e=="string",Nk=e=>{if(KR(e)){Fw(e.length===4);const[t,n,r,i]=e;return _h(t,n,r,i)}else if(qW(e))return GW[e];return e},cm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function WW(e,t){let n=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(m){c.has(m)&&(h.schedule(m),e()),m(l)}const h={schedule:(m,f=!1,g=!1)=>{const C=g&&i?n:r;return f&&c.add(m),C.has(m)||C.add(m),m},cancel:m=>{r.delete(m),c.delete(m)},process:m=>{if(l=m,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(d),n.clear(),i=!1,o&&(o=!1,h.process(m))}};return h}const KW=40;function YR(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=cm.reduce((S,N)=>(S[N]=WW(o),S),{}),{setup:l,read:d,resolveKeyframes:h,preUpdate:m,update:f,preRender:g,render:x,postRender:C}=c,_=()=>{const S=aa.useManualTiming?i.timestamp:performance.now();n=!1,aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,KW),1)),i.timestamp=S,i.isProcessing=!0,l.process(i),d.process(i),h.process(i),m.process(i),f.process(i),g.process(i),x.process(i),C.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(_))},b=()=>{n=!0,r=!0,i.isProcessing||e(_)};return{schedule:cm.reduce((S,N)=>{const T=c[N];return S[N]=(E,D=!1,A=!1)=>(n||b(),T.schedule(E,D,A)),S},{}),cancel:S=>{for(let N=0;N<cm.length;N++)c[cm[N]].cancel(S)},state:i,steps:c}}const{schedule:ks,cancel:ro,state:vn,steps:_y}=YR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lr,!0);let km;function YW(){km=void 0}const Zn={now:()=>(km===void 0&&Zn.set(vn.isProcessing||aa.useManualTiming?vn.timestamp:performance.now()),km),set:e=>{km=e,queueMicrotask(YW)}},XR=e=>t=>typeof t=="string"&&t.startsWith(e),ZR=XR("--"),XW=XR("var(--"),Gw=e=>XW(e)?ZW.test(e.split("/*")[0].trim()):!1,ZW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hd={...tu,transform:e=>ia(0,1,e)},um={...tu,default:1},jd=e=>Math.round(e*1e5)/1e5,qw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function QW(e){return e==null}const JW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ww=(e,t)=>n=>!!(typeof n=="string"&&JW.test(n)&&n.startsWith(e)||t&&!QW(n)&&Object.prototype.hasOwnProperty.call(n,t)),QR=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,o,c,l]=r.match(qw);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},eK=e=>ia(0,255,e),Cy={...tu,transform:e=>Math.round(eK(e))},Go={test:Ww("rgb","red"),parse:QR("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Cy.transform(e)+", "+Cy.transform(t)+", "+Cy.transform(n)+", "+jd(Hd.transform(r))+")"};function tK(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $b={test:Ww("#"),parse:tK,transform:Go.transform},Ch=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Va=Ch("deg"),vi=Ch("%"),lt=Ch("px"),sK=Ch("vh"),nK=Ch("vw"),kk={...vi,parse:e=>vi.parse(e)/100,transform:e=>vi.transform(e*100)},mc={test:Ww("hsl","hue"),parse:QR("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+vi.transform(jd(t))+", "+vi.transform(jd(n))+", "+jd(Hd.transform(r))+")"},Ws={test:e=>Go.test(e)||$b.test(e)||mc.test(e),parse:e=>Go.test(e)?Go.parse(e):mc.test(e)?mc.parse(e):$b.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Go.transform(e):mc.transform(e),getAnimatableNone:e=>{const t=Ws.parse(e);return t.alpha=0,Ws.transform(t)}},rK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iK(e){return isNaN(e)&&typeof e=="string"&&(e.match(qw)?.length||0)+(e.match(rK)?.length||0)>0}const JR="number",e3="color",aK="var",oK="var(",Ek="${}",lK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ud(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const l=t.replace(lK,d=>(Ws.test(d)?(r.color.push(o),i.push(e3),n.push(Ws.parse(d))):d.startsWith(oK)?(r.var.push(o),i.push(aK),n.push(d)):(r.number.push(o),i.push(JR),n.push(parseFloat(d))),++o,Ek)).split(Ek);return{values:n,split:l,indexes:r,types:i}}function t3(e){return Ud(e).values}function s3(e){const{split:t,types:n}=Ud(e),r=t.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=t[c],i[c]!==void 0){const l=n[c];l===JR?o+=jd(i[c]):l===e3?o+=Ws.transform(i[c]):o+=i[c]}return o}}const cK=e=>typeof e=="number"?0:Ws.test(e)?Ws.getAnimatableNone(e):e;function uK(e){const t=t3(e);return s3(e)(t.map(cK))}const io={test:iK,parse:t3,createTransformer:s3,getAnimatableNone:uK};function Ny(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function dK({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,c=0;if(!t)i=o=c=n;else{const l=n<.5?n*(1+t):n+t-n*t,d=2*n-l;i=Ny(d,l,e+1/3),o=Ny(d,l,e),c=Ny(d,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function np(e,t){return n=>n>0?t:e}const As=(e,t,n)=>e+(t-e)*n,ky=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},hK=[$b,Go,mc],fK=e=>hK.find(t=>t.test(e));function Ak(e){const t=fK(e);if(!t)return!1;let n=t.parse(e);return t===mc&&(n=dK(n)),n}const Tk=(e,t)=>{const n=Ak(e),r=Ak(t);if(!n||!r)return np(e,t);const i={...n};return o=>(i.red=ky(n.red,r.red,o),i.green=ky(n.green,r.green,o),i.blue=ky(n.blue,r.blue,o),i.alpha=As(n.alpha,r.alpha,o),Go.transform(i))},Vb=new Set(["none","hidden"]);function mK(e,t){return Vb.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function pK(e,t){return n=>As(e,t,n)}function Kw(e){return typeof e=="number"?pK:typeof e=="string"?Gw(e)?np:Ws.test(e)?Tk:vK:Array.isArray(e)?n3:typeof e=="object"?Ws.test(e)?Tk:gK:np}function n3(e,t){const n=[...e],r=n.length,i=e.map((o,c)=>Kw(o)(o,t[c]));return o=>{for(let c=0;c<r;c++)n[c]=i[c](o);return n}}function gK(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Kw(e[i])(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function xK(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],c=e.indexes[o][r[o]],l=e.values[c]??0;n[i]=l,r[o]++}return n}const vK=(e,t)=>{const n=io.createTransformer(t),r=Ud(e),i=Ud(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Vb.has(e)&&!i.values.length||Vb.has(t)&&!r.values.length?mK(e,t):jh(n3(xK(r,i),i.values),n):np(e,t)};function r3(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?As(e,t,n):Kw(e)(e,t)}const yK=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ks.update(t,n),stop:()=>ro(t),now:()=>vn.isProcessing?vn.timestamp:Zn.now()}},i3=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)r+=Math.round(e(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},rp=2e4;function Yw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<rp;)t+=n,r=e.next(t);return t>=rp?1/0:t}function bK(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(Yw(r),rp);return{type:"keyframes",ease:o=>r.next(i*o).value/t,duration:Rr(i)}}const wK=5;function a3(e,t,n){const r=Math.max(t-wK,0);return BR(n-e(r),t-r)}const Ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ey=.001;function SK({duration:e=Ms.duration,bounce:t=Ms.bounce,velocity:n=Ms.velocity,mass:r=Ms.mass}){let i,o,c=1-t;c=ia(Ms.minDamping,Ms.maxDamping,c),e=ia(Ms.minDuration,Ms.maxDuration,Rr(e)),c<1?(i=h=>{const m=h*c,f=m*e,g=m-n,x=Gb(h,c),C=Math.exp(-f);return Ey-g/x*C},o=h=>{const f=h*c*e,g=f*n+n,x=Math.pow(c,2)*Math.pow(h,2)*e,C=Math.exp(-f),_=Gb(Math.pow(h,2),c);return(-i(h)+Ey>0?-1:1)*((g-x)*C)/_}):(i=h=>{const m=Math.exp(-h*e),f=(h-n)*e+1;return-Ey+m*f},o=h=>{const m=Math.exp(-h*e),f=(n-h)*(e*e);return m*f});const l=5/e,d=_K(i,o,l);if(e=xi(e),isNaN(d))return{stiffness:Ms.stiffness,damping:Ms.damping,duration:e};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:c*2*Math.sqrt(r*h),duration:e}}}const jK=12;function _K(e,t,n){let r=n;for(let i=1;i<jK;i++)r=r-e(r)/t(r);return r}function Gb(e,t){return e*Math.sqrt(1-t*t)}const CK=["duration","bounce"],NK=["stiffness","damping","mass"];function Dk(e,t){return t.some(n=>e[n]!==void 0)}function kK(e){let t={velocity:Ms.velocity,stiffness:Ms.stiffness,damping:Ms.damping,mass:Ms.mass,isResolvedFromDuration:!1,...e};if(!Dk(e,NK)&&Dk(e,CK))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*ia(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Ms.mass,stiffness:i,damping:o}}else{const n=SK(e);t={...t,...n,mass:Ms.mass},t.isResolvedFromDuration=!0}return t}function ip(e=Ms.visualDuration,t=Ms.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:d,damping:h,mass:m,duration:f,velocity:g,isResolvedFromDuration:x}=kK({...n,velocity:-Rr(n.velocity||0)}),C=g||0,_=h/(2*Math.sqrt(d*m)),b=c-o,w=Rr(Math.sqrt(d/m)),j=Math.abs(b)<5;r||(r=j?Ms.restSpeed.granular:Ms.restSpeed.default),i||(i=j?Ms.restDelta.granular:Ms.restDelta.default);let S;if(_<1){const T=Gb(w,_);S=E=>{const D=Math.exp(-_*w*E);return c-D*((C+_*w*b)/T*Math.sin(T*E)+b*Math.cos(T*E))}}else if(_===1)S=T=>c-Math.exp(-w*T)*(b+(C+w*b)*T);else{const T=w*Math.sqrt(_*_-1);S=E=>{const D=Math.exp(-_*w*E),A=Math.min(T*E,300);return c-D*((C+_*w*b)*Math.sinh(A)+T*b*Math.cosh(A))/T}}const N={calculatedDuration:x&&f||null,next:T=>{const E=S(T);if(x)l.done=T>=f;else{let D=T===0?C:0;_<1&&(D=T===0?xi(C):a3(S,T,E));const A=Math.abs(D)<=r,P=Math.abs(c-E)<=i;l.done=A&&P}return l.value=l.done?c:E,l},toString:()=>{const T=Math.min(Yw(N),rp),E=i3(D=>N.next(T*D).value,T,30);return T+"ms "+E},toTransition:()=>{}};return N}ip.applyToOptions=e=>{const t=bK(e,100,ip);return e.ease=t.ease,e.duration=xi(t.duration),e.type="keyframes",e};function qb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:l,max:d,restDelta:h=.5,restSpeed:m}){const f=e[0],g={done:!1,value:f},x=A=>l!==void 0&&A<l||d!==void 0&&A>d,C=A=>l===void 0?d:d===void 0||Math.abs(l-A)<Math.abs(d-A)?l:d;let _=n*t;const b=f+_,w=c===void 0?b:c(b);w!==b&&(_=w-f);const j=A=>-_*Math.exp(-A/r),S=A=>w+j(A),N=A=>{const P=j(A),M=S(A);g.done=Math.abs(P)<=h,g.value=g.done?w:M};let T,E;const D=A=>{x(g.value)&&(T=A,E=ip({keyframes:[g.value,C(g.value)],velocity:a3(S,A,g.value),damping:i,stiffness:o,restDelta:h,restSpeed:m}))};return D(0),{calculatedDuration:null,next:A=>{let P=!1;return!E&&T===void 0&&(P=!0,N(A),D(A)),T!==void 0&&A>=T?E.next(A-T):(!P&&N(A),g)}}}function EK(e,t,n){const r=[],i=n||aa.mix||r3,o=e.length-1;for(let c=0;c<o;c++){let l=i(e[c],e[c+1]);if(t){const d=Array.isArray(t)?t[c]||Lr:t;l=jh(d,l)}r.push(l)}return r}function AK(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(Fw(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=EK(t,r,i),d=l.length,h=m=>{if(c&&m<e[0])return t[0];let f=0;if(d>1)for(;f<e.length-2&&!(m<e[f+1]);f++);const g=Fd(e[f],e[f+1],m);return l[f](g)};return n?m=>h(ia(e[0],e[o-1],m)):h}function TK(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Fd(0,t,r);e.push(As(n,1,i))}}function DK(e){const t=[0];return TK(t,e.length-1),t}function RK(e,t){return e.map(n=>n*t)}function PK(e,t){return e.map(()=>t||WR).splice(0,e.length-1)}function _d({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=VW(r)?r.map(Nk):Nk(r),o={done:!1,value:t[0]},c=RK(n&&n.length===t.length?n:DK(t),e),l=AK(c,t,{ease:Array.isArray(i)?i:PK(t,i)});return{calculatedDuration:e,next:d=>(o.value=l(d),o.done=d>=e,o)}}const MK=e=>e!==null;function Xw(e,{repeat:t,repeatType:n="loop"},r,i=1){const o=e.filter(MK),l=i<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const LK={decay:qb,inertia:qb,tween:_d,keyframes:_d,spring:ip};function o3(e){typeof e.type=="string"&&(e.type=LK[e.type])}class Zw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const IK=e=>e/100;class Qw extends Zw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;o3(t);const{type:n=_d,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=t;let{keyframes:l}=t;const d=n||_d;d!==_d&&typeof l[0]!="number"&&(this.mixKeyframes=jh(IK,r3(l[0],l[1])),l=[0,100]);const h=d({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...l].reverse(),velocity:-c})),h.calculatedDuration===null&&(h.calculatedDuration=Yw(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:f,repeatType:g,repeatDelay:x,type:C,onUpdate:_,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-h*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,N=r;if(f){const A=Math.min(this.currentTime,i)/l;let P=Math.floor(A),M=A%1;!M&&A>=1&&(M=1),M===1&&P--,P=Math.min(P,f+1),P%2&&(g==="reverse"?(M=1-M,x&&(M-=x/l)):g==="mirror"&&(N=c)),S=ia(0,1,M)*l}const T=j?{done:!1,value:m[0]}:N.next(S);o&&(T.value=o(T.value));let{done:E}=T;!j&&d!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return D&&C!==qb&&(T.value=Xw(m,this.options,b,this.speed)),_&&_(T.value),D&&this.finish(),T}then(t,n){return this.finished.then(t,n)}get duration(){return Rr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Rr(t)}get time(){return Rr(this.currentTime)}set time(t){t=xi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Zn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=yK,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function OK(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const qo=e=>e*180/Math.PI,Wb=e=>{const t=qo(Math.atan2(e[1],e[0]));return Kb(t)},BK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Wb,rotateZ:Wb,skewX:e=>qo(Math.atan(e[1])),skewY:e=>qo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Kb=e=>(e=e%360,e<0&&(e+=360),e),Rk=Wb,Pk=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Mk=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),zK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Pk,scaleY:Mk,scale:e=>(Pk(e)+Mk(e))/2,rotateX:e=>Kb(qo(Math.atan2(e[6],e[5]))),rotateY:e=>Kb(qo(Math.atan2(-e[2],e[0]))),rotateZ:Rk,rotate:Rk,skewX:e=>qo(Math.atan(e[4])),skewY:e=>qo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Yb(e){return e.includes("scale")?1:0}function Xb(e,t){if(!e||e==="none")return Yb(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=zK,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=BK,i=l}if(!i)return Yb(t);const o=r[t],c=i[1].split(",").map(HK);return typeof o=="function"?o(c):c[o]}const FK=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Xb(n,t)};function HK(e){return parseFloat(e.trim())}const su=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nu=new Set(su),Lk=e=>e===tu||e===lt,UK=new Set(["x","y","z"]),$K=su.filter(e=>!UK.has(e));function VK(e){const t=[];return $K.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Yo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Xb(t,"x"),y:(e,{transform:t})=>Xb(t,"y")};Yo.translateX=Yo.x;Yo.translateY=Yo.y;const Xo=new Set;let Zb=!1,Qb=!1,Jb=!1;function l3(){if(Qb){const e=Array.from(Xo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=VK(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,c])=>{r.getValue(o)?.set(c)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Qb=!1,Zb=!1,Xo.forEach(e=>e.complete(Jb)),Xo.clear()}function c3(){Xo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Qb=!0)})}function GK(){Jb=!0,c3(),l3(),Jb=!1}class Jw{constructor(t,n,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Xo.add(this),Zb||(Zb=!0,ks.read(c3),ks.resolveKeyframes(l3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const o=i?.get(),c=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,c);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=c),i&&o===void 0&&i.set(t[0])}OK(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xo.delete(this)}cancel(){this.state==="scheduled"&&(Xo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const qK=e=>e.startsWith("--");function WK(e,t,n){qK(t)?e.style.setProperty(t,n):e.style[t]=n}const KK=Hw(()=>window.ScrollTimeline!==void 0),YK={};function XK(e,t){const n=Hw(e);return()=>YK[t]??n()}const u3=XK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ik={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hd([0,.65,.55,1]),circOut:hd([.55,0,1,.45]),backIn:hd([.31,.01,.66,-.59]),backOut:hd([.33,1.53,.69,.99])};function d3(e,t){if(e)return typeof e=="function"?u3()?i3(e,t):"ease-out":KR(e)?hd(e):Array.isArray(e)?e.map(n=>d3(n,t)||Ik.easeOut):Ik[e]}function ZK(e,t,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:l="easeOut",times:d}={},h=void 0){const m={[t]:n};d&&(m.offset=d);const f=d3(l,i);Array.isArray(f)&&(m.easing=f);const g={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),e.animate(m,g)}function h3(e){return typeof e=="function"&&"applyToOptions"in e}function QK({type:e,...t}){return h3(e)&&u3()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class JK extends Zw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:l,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=t,Fw(typeof t.type!="string");const h=QK(t);this.animation=ZK(n,r,i,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=Xw(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):WK(n,r,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Rr(t)}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=xi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&KK()?(this.animation.timeline=t,Lr):n(this)}}const f3={anticipate:VR,backInOut:$R,circInOut:qR};function eY(e){return e in f3}function tY(e){typeof e.ease=="string"&&eY(e.ease)&&(e.ease=f3[e.ease])}const Ok=10;class sY extends JK{constructor(t){tY(t),o3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Qw({...c,autoplay:!1}),d=xi(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-Ok).value,l.sample(d).value,Ok),l.stop()}}const Bk=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(io.test(e)||e==="0")&&!e.startsWith("url("));function nY(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function rY(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],c=Bk(i,t),l=Bk(o,t);return!c||!l?!1:nY(e)||(n==="spring"||h3(n))&&r}function e0(e){e.duration=0,e.type="keyframes"}const iY=new Set(["opacity","clipPath","filter","transform"]),aY=Hw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oY(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:o,type:c}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return aY()&&n&&iY.has(n)&&(n!=="transform"||!h)&&!d&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const lY=40;class cY extends Zw{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:l,name:d,motionValue:h,element:m,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:c,name:d,motionValue:h,element:m,...f},x=m?.KeyframeResolver||Jw;this.keyframeResolver=new x(l,(C,_,b)=>this.onKeyframesResolved(C,_,g,!b),d,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:l,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Zn.now(),rY(t,o,c,l)||((aa.instantAnimations||!d)&&m?.(Xw(t,r,n)),t[0]=t[t.length-1],e0(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>lY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},x=!h&&oY(g)?new sY({...g,element:g.motionValue.owner.current}):new Qw(g);x.finished.then(()=>this.notifyFinished()).catch(Lr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),GK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const uY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dY(e){const t=uY.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function m3(e,t,n=1){const[r,i]=dY(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const c=o.trim();return LR(c)?parseFloat(c):c}return Gw(i)?m3(i,t,n+1):i}function eS(e,t){return e?.[t]??e?.default??e}const p3=new Set(["width","height","top","left","right","bottom",...su]),hY={test:e=>e==="auto",parse:e=>e},g3=e=>t=>t.test(e),x3=[tu,lt,vi,Va,nK,sK,hY],zk=e=>x3.find(g3(e));function fY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||OR(e):!0}const mY=new Set(["brightness","contrast","saturate","opacity"]);function pY(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(qw)||[];if(!r)return e;const i=n.replace(r,"");let o=mY.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const gY=/\b([a-z-]*)\(.*?\)/gu,t0={...io,getAnimatableNone:e=>{const t=e.match(gY);return t?t.map(pY).join(" "):e}},Fk={...tu,transform:Math.round},xY={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:um,scaleX:um,scaleY:um,scaleZ:um,skew:Va,skewX:Va,skewY:Va,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:Hd,originX:kk,originY:kk,originZ:lt},tS={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,backgroundPositionX:lt,backgroundPositionY:lt,...xY,zIndex:Fk,fillOpacity:Hd,strokeOpacity:Hd,numOctaves:Fk},vY={...tS,color:Ws,backgroundColor:Ws,outlineColor:Ws,fill:Ws,stroke:Ws,borderColor:Ws,borderTopColor:Ws,borderRightColor:Ws,borderBottomColor:Ws,borderLeftColor:Ws,filter:t0,WebkitFilter:t0},v3=e=>vY[e];function y3(e,t){let n=v3(e);return n!==t0&&(n=io),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yY=new Set(["auto","none","0"]);function bY(e,t,n){let r=0,i;for(;r<e.length&&!i;){const o=e[r];typeof o=="string"&&!yY.has(o)&&Ud(o).values.length&&(i=e[r]),r++}if(i&&n)for(const o of t)e[o]=y3(n,i)}class wY extends Jw{constructor(t,n,r,i,o){super(t,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),Gw(h))){const m=m3(h,n.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!p3.has(r)||t.length!==2)return;const[i,o]=t,c=zk(i),l=zk(o);if(c!==l)if(Lk(c)&&Lk(l))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else Yo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||fY(t[i]))&&r.push(i);r.length&&bY(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=Yo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,d])=>{t.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function SY(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const b3=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function w3(e){return IR(e)&&"offsetHeight"in e}const Hk=30,jY=e=>!isNaN(parseFloat(e));class _Y{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Zn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Uw);const r=this.events[t].add(n);return t==="change"?()=>{r(),ks.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Hk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Hk);return BR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bc(e,t){return new _Y(e,t)}const{schedule:sS}=YR(queueMicrotask,!1),Vr={x:!1,y:!1};function S3(){return Vr.x||Vr.y}function CY(e){return e==="x"||e==="y"?Vr[e]?null:(Vr[e]=!0,()=>{Vr[e]=!1}):Vr.x||Vr.y?null:(Vr.x=Vr.y=!0,()=>{Vr.x=Vr.y=!1})}function j3(e,t){const n=SY(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function Uk(e){return!(e.pointerType==="touch"||S3())}function NY(e,t,n={}){const[r,i,o]=j3(e,n),c=l=>{if(!Uk(l))return;const{target:d}=l,h=t(d,l);if(typeof h!="function"||!d)return;const m=f=>{Uk(f)&&(h(f),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,i)};return r.forEach(l=>{l.addEventListener("pointerenter",c,i)}),o}const _3=(e,t)=>t?e===t?!0:_3(e,t.parentElement):!1,nS=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,kY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EY(e){return kY.has(e.tagName)||e.tabIndex!==-1}const Em=new WeakSet;function $k(e){return t=>{t.key==="Enter"&&e(t)}}function Ay(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const AY=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=$k(()=>{if(Em.has(n))return;Ay(n,"down");const i=$k(()=>{Ay(n,"up")}),o=()=>Ay(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Vk(e){return nS(e)&&!S3()}function TY(e,t,n={}){const[r,i,o]=j3(e,n),c=l=>{const d=l.currentTarget;if(!Vk(l))return;Em.add(d);const h=t(d,l),m=(x,C)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),Em.has(d)&&Em.delete(d),Vk(x)&&typeof h=="function"&&h(x,{success:C})},f=x=>{m(x,d===window||d===document||n.useGlobalTarget||_3(d,x.target))},g=x=>{m(x,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,i),w3(l)&&(l.addEventListener("focus",h=>AY(h,i)),!EY(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function C3(e){return IR(e)&&"ownerSVGElement"in e}function DY(e){return C3(e)&&e.tagName==="svg"}const Nn=e=>!!(e&&e.getVelocity),RY=[...x3,Ws,io],PY=e=>RY.find(g3(e)),rS=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Gk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function MY(...e){return t=>{let n=!1;const r=e.map(i=>{const o=Gk(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():Gk(e[i],null)}}}}function LY(...e){return y.useCallback(MY(...e),e)}class IY extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=w3(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OY({children:e,isPresent:t,anchorX:n,root:r}){const i=y.useId(),o=y.useRef(null),c=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=y.useContext(rS),d=LY(o,e?.ref);return y.useInsertionEffect(()=>{const{width:h,height:m,top:f,left:g,right:x}=c.current;if(t||!o.current||!h||!m)return;const C=n==="left"?`left: ${g}`:`right: ${x}`;o.current.dataset.motionPopId=i;const _=document.createElement("style");l&&(_.nonce=l);const b=r??document.head;return b.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${C}px !important;
            top: ${f}px !important;
          }
        `),()=>{b.contains(_)&&b.removeChild(_)}},[t]),s.jsx(IY,{isPresent:t,childRef:o,sizeRef:c,children:y.cloneElement(e,{ref:d})})}const BY=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:l,root:d})=>{const h=Iw(zY),m=y.useId();let f=!0,g=y.useMemo(()=>(f=!1,{id:m,initial:t,isPresent:n,custom:i,onExitComplete:x=>{h.set(x,!0);for(const C of h.values())if(!C)return;r&&r()},register:x=>(h.set(x,!1),()=>h.delete(x))}),[n,h,r]);return o&&f&&(g={...g}),y.useMemo(()=>{h.forEach((x,C)=>h.set(C,!1))},[n]),y.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),c==="popLayout"&&(e=s.jsx(OY,{isPresent:n,anchorX:l,root:d,children:e})),s.jsx(cg.Provider,{value:g,children:e})};function zY(){return new Map}function N3(e=!0){const t=y.useContext(cg);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,o=y.useId();y.useEffect(()=>{if(e)return i(o)},[e]);const c=y.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,c]:[!0]}const dm=e=>e.key||"";function qk(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const $d=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:l="left",root:d})=>{const[h,m]=N3(c),f=y.useMemo(()=>qk(e),[e]),g=c&&!h?[]:f.map(dm),x=y.useRef(!0),C=y.useRef(f),_=Iw(()=>new Map),[b,w]=y.useState(f),[j,S]=y.useState(f);MR(()=>{x.current=!1,C.current=f;for(let E=0;E<j.length;E++){const D=dm(j[E]);g.includes(D)?_.delete(D):_.get(D)!==!0&&_.set(D,!1)}},[j,g.length,g.join("-")]);const N=[];if(f!==b){let E=[...f];for(let D=0;D<j.length;D++){const A=j[D],P=dm(A);g.includes(P)||(E.splice(D,0,A),N.push(A))}return o==="wait"&&N.length&&(E=N),S(qk(E)),w(f),null}const{forceRender:T}=y.useContext(Lw);return s.jsx(s.Fragment,{children:j.map(E=>{const D=dm(E),A=c&&!h?!1:f===j||g.includes(D),P=()=>{if(_.has(D))_.set(D,!0);else return;let M=!0;_.forEach(B=>{B||(M=!1)}),M&&(T?.(),S(C.current),c&&m?.(),r&&r())};return s.jsx(BY,{isPresent:A,initial:!x.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:o,root:d,onExitComplete:A?void 0:P,anchorX:l,children:E},D)})})},k3=y.createContext({strict:!1}),Wk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zc={};for(const e in Wk)zc[e]={isEnabled:t=>Wk[e].some(n=>!!t[n])};function FY(e){for(const t in e)zc[t]={...zc[t],...e[t]}}const HY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ap(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||HY.has(e)}let E3=e=>!ap(e);function UY(e){typeof e=="function"&&(E3=t=>t.startsWith("on")?!ap(t):e(t))}try{UY(require("@emotion/is-prop-valid").default)}catch{}function $Y(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(E3(i)||n===!0&&ap(i)||!t&&!ap(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const ug=y.createContext({});function dg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Vd(e){return typeof e=="string"||Array.isArray(e)}const iS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aS=["initial",...iS];function hg(e){return dg(e.animate)||aS.some(t=>Vd(e[t]))}function A3(e){return!!(hg(e)||e.variants)}function VY(e,t){if(hg(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(r)?r:void 0}}return e.inherit!==!1?t:{}}function GY(e){const{initial:t,animate:n}=VY(e,y.useContext(ug));return y.useMemo(()=>({initial:t,animate:n}),[Kk(t),Kk(n)])}function Kk(e){return Array.isArray(e)?e.join(" "):e}function Yk(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const sd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(lt.test(e))e=parseFloat(e);else return e;const n=Yk(e,t.target.x),r=Yk(e,t.target.y);return`${n}% ${r}%`}},qY={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=io.parse(e);if(i.length>5)return r;const o=io.createTransformer(e),c=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,d=n.y.scale*t.y;i[0+c]/=l,i[1+c]/=d;const h=As(l,d,.5);return typeof i[2+c]=="number"&&(i[2+c]/=h),typeof i[3+c]=="number"&&(i[3+c]/=h),o(i)}},s0={borderRadius:{...sd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sd,borderTopRightRadius:sd,borderBottomLeftRadius:sd,borderBottomRightRadius:sd,boxShadow:qY};function T3(e,{layout:t,layoutId:n}){return nu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!s0[e]||e==="opacity")}const WY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KY=su.length;function YY(e,t,n){let r="",i=!0;for(let o=0;o<KY;o++){const c=su[o],l=e[c];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(c.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const h=b3(l,tS[c]);if(!d){i=!1;const m=WY[c]||c;r+=`${m}(${h}) `}n&&(t[c]=h)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function oS(e,t,n){const{style:r,vars:i,transformOrigin:o}=e;let c=!1,l=!1;for(const d in t){const h=t[d];if(nu.has(d)){c=!0;continue}else if(ZR(d)){i[d]=h;continue}else{const m=b3(h,tS[d]);d.startsWith("origin")?(l=!0,o[d]=m):r[d]=m}}if(t.transform||(c||n?r.transform=YY(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${d} ${h} ${m}`}}const lS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D3(e,t,n){for(const r in t)!Nn(t[r])&&!T3(r,n)&&(e[r]=t[r])}function XY({transformTemplate:e},t){return y.useMemo(()=>{const n=lS();return oS(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ZY(e,t){const n=e.style||{},r={};return D3(r,n,e),Object.assign(r,XY(e,t)),r}function QY(e,t){const n={},r=ZY(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const JY={offset:"stroke-dashoffset",array:"stroke-dasharray"},eX={offset:"strokeDashoffset",array:"strokeDasharray"};function tX(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?JY:eX;e[o.offset]=lt.transform(-r);const c=lt.transform(t),l=lt.transform(n);e[o.array]=`${c} ${l}`}function R3(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...l},d,h,m){if(oS(e,l,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:g}=e;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=m?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&tX(f,i,o,c,!1)}const P3=()=>({...lS(),attrs:{}}),M3=e=>typeof e=="string"&&e.toLowerCase()==="svg";function sX(e,t,n,r){const i=y.useMemo(()=>{const o=P3();return R3(o,t,M3(r),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};D3(o,e.style,e),i.style={...o,...i.style}}return i}const nX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cS(e){return typeof e!="string"||e.includes("-")?!1:!!(nX.indexOf(e)>-1||/[A-Z]/u.test(e))}function rX(e,t,n,{latestValues:r},i,o=!1){const l=(cS(e)?sX:QY)(t,r,i,e),d=$Y(t,typeof e=="string",o),h=e!==y.Fragment?{...d,...l,ref:n}:{},{children:m}=t,f=y.useMemo(()=>Nn(m)?m.get():m,[m]);return y.createElement(e,{...h,children:f})}function Xk(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function uS(e,t,n,r){if(typeof t=="function"){const[i,o]=Xk(r);t=t(n!==void 0?n:e.custom,i,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,o]=Xk(r);t=t(n!==void 0?n:e.custom,i,o)}return t}function Am(e){return Nn(e)?e.get():e}function iX({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:aX(n,r,i,e),renderState:t()}}function aX(e,t,n,r){const i={},o=r(e,{});for(const g in o)i[g]=Am(o[g]);let{initial:c,animate:l}=e;const d=hg(e),h=A3(e);t&&h&&!d&&e.inherit!==!1&&(c===void 0&&(c=t.initial),l===void 0&&(l=t.animate));let m=n?n.initial===!1:!1;m=m||c===!1;const f=m?l:c;if(f&&typeof f!="boolean"&&!dg(f)){const g=Array.isArray(f)?f:[f];for(let x=0;x<g.length;x++){const C=uS(e,g[x]);if(C){const{transitionEnd:_,transition:b,...w}=C;for(const j in w){let S=w[j];if(Array.isArray(S)){const N=m?S.length-1:0;S=S[N]}S!==null&&(i[j]=S)}for(const j in _)i[j]=_[j]}}}return i}const L3=e=>(t,n)=>{const r=y.useContext(ug),i=y.useContext(cg),o=()=>iX(e,t,r,i);return n?o():Iw(o)};function dS(e,t,n){const{style:r}=e,i={};for(const o in r)(Nn(r[o])||t.style&&Nn(t.style[o])||T3(o,e)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const oX=L3({scrapeMotionValuesFromProps:dS,createRenderState:lS});function I3(e,t,n){const r=dS(e,t,n);for(const i in e)if(Nn(e[i])||Nn(t[i])){const o=su.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=e[i]}return r}const lX=L3({scrapeMotionValuesFromProps:I3,createRenderState:P3}),cX=Symbol.for("motionComponentSymbol");function pc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function uX(e,t,n){return y.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):pc(n)&&(n.current=r))},[t])}const hS=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dX="framerAppearId",O3="data-"+hS(dX),B3=y.createContext({});function hX(e,t,n,r,i){const{visualElement:o}=y.useContext(ug),c=y.useContext(k3),l=y.useContext(cg),d=y.useContext(rS).reducedMotion,h=y.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,f=y.useContext(B3);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&fX(h.current,n,i,f);const g=y.useRef(!1);y.useInsertionEffect(()=>{m&&g.current&&m.update(n,l)});const x=n[O3],C=y.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return MR(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),C.current&&m.animationState&&m.animationState.animateChanges())}),y.useEffect(()=>{m&&(!C.current&&m.animationState&&m.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),C.current=!1),m.enteringChildren=void 0)}),m}function fX(e,t,n,r){const{layoutId:i,layout:o,drag:c,dragConstraints:l,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:z3(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||l&&pc(l),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function z3(e){if(e)return e.options.allowProjection!==!1?e.projection:z3(e.parent)}function Ty(e,{forwardMotionProps:t=!1}={},n,r){n&&FY(n);const i=cS(e)?lX:oX;function o(l,d){let h;const m={...y.useContext(rS),...l,layoutId:mX(l)},{isStatic:f}=m,g=GY(l),x=i(l,f);if(!f&&Ow){pX();const C=gX(m);h=C.MeasureLayout,g.visualElement=hX(e,x,m,r,C.ProjectionNode)}return s.jsxs(ug.Provider,{value:g,children:[h&&g.visualElement?s.jsx(h,{visualElement:g.visualElement,...m}):null,rX(e,l,uX(x,g.visualElement,d),x,f,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=y.forwardRef(o);return c[cX]=e,c}function mX({layoutId:e}){const t=y.useContext(Lw).id;return t&&e!==void 0?t+"-"+e:e}function pX(e,t){y.useContext(k3).strict}function gX(e){const{drag:t,layout:n}=zc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function xX(e,t){if(typeof Proxy>"u")return Ty;const n=new Map,r=(o,c)=>Ty(o,c,e,t),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(n.has(c)||n.set(c,Ty(c,void 0,e,t)),n.get(c))})}function F3({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function vX({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function yX(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Dy(e){return e===void 0||e===1}function n0({scale:e,scaleX:t,scaleY:n}){return!Dy(e)||!Dy(t)||!Dy(n)}function Vo(e){return n0(e)||H3(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function H3(e){return Zk(e.x)||Zk(e.y)}function Zk(e){return e&&e!=="0%"}function op(e,t,n){const r=e-n,i=t*r;return n+i}function Qk(e,t,n,r,i){return i!==void 0&&(e=op(e,i,r)),op(e,n,r)+t}function r0(e,t=0,n=1,r,i){e.min=Qk(e.min,t,n,r,i),e.max=Qk(e.max,t,n,r,i)}function U3(e,{x:t,y:n}){r0(e.x,t.translate,t.scale,t.originPoint),r0(e.y,n.translate,n.scale,n.originPoint)}const Jk=.999999999999,e2=1.0000000000001;function bX(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,c;for(let l=0;l<i;l++){o=n[l],c=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xc(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,U3(e,c)),r&&Vo(o.latestValues)&&xc(e,o.latestValues))}t.x<e2&&t.x>Jk&&(t.x=1),t.y<e2&&t.y>Jk&&(t.y=1)}function gc(e,t){e.min=e.min+t,e.max=e.max+t}function t2(e,t,n,r,i=.5){const o=As(e.min,e.max,i);r0(e,t,n,o,r)}function xc(e,t){t2(e.x,t.x,t.scaleX,t.scale,t.originX),t2(e.y,t.y,t.scaleY,t.scale,t.originY)}function $3(e,t){return F3(yX(e.getBoundingClientRect(),t))}function wX(e,t,n){const r=$3(e,n),{scroll:i}=t;return i&&(gc(r.x,i.offset.x),gc(r.y,i.offset.y)),r}const s2=()=>({translate:0,scale:1,origin:0,originPoint:0}),vc=()=>({x:s2(),y:s2()}),n2=()=>({min:0,max:0}),en=()=>({x:n2(),y:n2()}),i0={current:null},V3={current:!1};function SX(){if(V3.current=!0,!!Ow)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>i0.current=e.matches;e.addEventListener("change",t),t()}else i0.current=!1}const jX=new WeakMap;function _X(e,t,n){for(const r in t){const i=t[r],o=n[r];if(Nn(i))e.addValue(r,i);else if(Nn(o))e.addValue(r,Bc(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){const c=e.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=e.getStaticValue(r);e.addValue(r,Bc(c!==void 0?c:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const r2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CX{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Zn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ks.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=hg(n),this.isVariantNode=A3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const x=f[g];d[g]!==void 0&&Nn(x)&&x.set(d[g])}}mount(t){this.current=t,jX.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),V3.current||SX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:i0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ro(this.notifyUpdate),ro(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=nu.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ks.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zc){const n=zc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<r2.length;r++){const i=r2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=t[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=_X(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Bc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(LR(r)||OR(r))?r=parseFloat(r):!PY(r)&&io.test(n)&&(r=y3(t,n)),this.setBaseTarget(t,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=uS(this.props,n,this.presenceContext?.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Nn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Uw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){sS.render(this.render)}}class G3 extends CX{constructor(){super(...arguments),this.KeyframeResolver=wY}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Nn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function q3(e,{style:t,vars:n},r,i){const o=e.style;let c;for(c in t)o[c]=t[c];i?.applyProjectionStyles(o,r);for(c in n)o.setProperty(c,n[c])}function NX(e){return window.getComputedStyle(e)}class kX extends G3{constructor(){super(...arguments),this.type="html",this.renderInstance=q3}readValueFromInstance(t,n){if(nu.has(n))return this.projection?.isProjecting?Yb(n):FK(t,n);{const r=NX(t),i=(ZR(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $3(t,n)}build(t,n,r){oS(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return dS(t,n,r)}}const W3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EX(e,t,n,r){q3(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(W3.has(i)?i:hS(i),t.attrs[i])}class AX extends G3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=en}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(nu.has(n)){const r=v3(n);return r&&r.default||0}return n=W3.has(n)?n:hS(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return I3(t,n,r)}build(t,n,r){R3(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){EX(t,n,r,i)}mount(t){this.isSVGTag=M3(t.tagName),super.mount(t)}}const TX=(e,t)=>cS(e)?new AX(t):new kX(t,{allowProjection:e!==y.Fragment});function Cc(e,t,n){const r=e.getProps();return uS(r,t,n!==void 0?n:r.custom,e)}const a0=e=>Array.isArray(e);function DX(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Bc(n))}function RX(e){return a0(e)?e[e.length-1]||0:e}function PX(e,t){const n=Cc(e,t);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const c in o){const l=RX(o[c]);DX(e,c,l)}}function MX(e){return!!(Nn(e)&&e.add)}function o0(e,t){const n=e.getValue("willChange");if(MX(n))return n.add(t);if(!n&&aa.WillChange){const r=new aa.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function K3(e){return e.props[O3]}const LX=e=>e!==null;function IX(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(LX),o=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[o]}const OX={type:"spring",stiffness:500,damping:25,restSpeed:10},BX=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),zX={type:"keyframes",duration:.8},FX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HX=(e,{keyframes:t})=>t.length>2?zX:nu.has(e)?e.startsWith("scale")?BX(t[1]):OX:FX;function UX({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:l,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const fS=(e,t,n,r={},i,o)=>c=>{const l=eS(r,e)||{},d=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-xi(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-h,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:i};UX(l)||Object.assign(m,HX(e,m)),m.duration&&(m.duration=xi(m.duration)),m.repeatDelay&&(m.repeatDelay=xi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let f=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(e0(m),m.delay===0&&(f=!0)),(aa.instantAnimations||aa.skipAnimations)&&(f=!0,e0(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,f&&!o&&t.get()!==void 0){const g=IX(m.keyframes,l);if(g!==void 0){ks.update(()=>{m.onUpdate(g),m.onComplete()});return}}return l.isSync?new Qw(m):new cY(m)};function $X({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Y3(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:c,...l}=t;r&&(o=r);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const m in l){const f=e.getValue(m,e.latestValues[m]??null),g=l[m];if(g===void 0||h&&$X(h,m))continue;const x={delay:n,...eS(o||{},m)},C=f.get();if(C!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===C&&!x.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const w=K3(e);if(w){const j=window.MotionHandoffAnimation(w,m,ks);j!==null&&(x.startTime=j,_=!0)}}o0(e,m),f.start(fS(m,f,g,e.shouldReduceMotion&&p3.has(m)?{type:!1}:x,e,_));const b=f.animation;b&&d.push(b)}return c&&Promise.all(d).then(()=>{ks.update(()=>{c&&PX(e,c)})}),d}function X3(e,t,n,r=0,i=1){const o=Array.from(e).sort((h,m)=>h.sortNodePosition(m)).indexOf(t),c=e.size,l=(c-1)*r;return typeof n=="function"?n(o,c):i===1?o*r:l-o*r}function l0(e,t,n={}){const r=Cc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Y3(e,r,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=i;return VX(e,t,d,h,m,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[o,c]:[c,o];return d().then(()=>h())}else return Promise.all([o(),c(n.delay)])}function VX(e,t,n=0,r=0,i=0,o=1,c){const l=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),l.push(l0(d,t,{...c,delay:n+(typeof r=="function"?0:r)+X3(e.variantChildren,d,r,i,o)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(l)}function GX(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>l0(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=l0(e,t,n);else{const i=typeof t=="function"?Cc(e,t,n.custom):t;r=Promise.all(Y3(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Z3(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const qX=aS.length;function Q3(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Q3(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<qX;n++){const r=aS[n],i=e.props[r];(Vd(i)||i===!1)&&(t[r]=i)}return t}const WX=[...iS].reverse(),KX=iS.length;function YX(e){return t=>Promise.all(t.map(({animation:n,options:r})=>GX(e,n,r)))}function XX(e){let t=YX(e),n=i2(),r=!0;const i=d=>(h,m)=>{const f=Cc(e,m,d==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:x,...C}=f;h={...h,...C,...x}}return h};function o(d){t=d(e)}function c(d){const{props:h}=e,m=Q3(e.parent)||{},f=[],g=new Set;let x={},C=1/0;for(let b=0;b<KX;b++){const w=WX[b],j=n[w],S=h[w]!==void 0?h[w]:m[w],N=Vd(S),T=w===d?j.isActive:null;T===!1&&(C=b);let E=S===m[w]&&S!==h[w]&&N;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),j.protectedKeys={...x},!j.isActive&&T===null||!S&&!j.prevProp||dg(S)||typeof S=="boolean")continue;const D=ZX(j.prevProp,S);let A=D||w===d&&j.isActive&&!E&&N||b>C&&N,P=!1;const M=Array.isArray(S)?S:[S];let B=M.reduce(i(w),{});T===!1&&(B={});const{prevResolvedValues:F={}}=j,U={...F,...B},G=Y=>{A=!0,g.has(Y)&&(P=!0,g.delete(Y)),j.needsAnimating[Y]=!0;const K=e.getValue(Y);K&&(K.liveStyle=!1)};for(const Y in U){const K=B[Y],O=F[Y];if(x.hasOwnProperty(Y))continue;let L=!1;a0(K)&&a0(O)?L=!Z3(K,O):L=K!==O,L?K!=null?G(Y):g.add(Y):K!==void 0&&g.has(Y)?G(Y):j.protectedKeys[Y]=!0}j.prevProp=S,j.prevResolvedValues=B,j.isActive&&(x={...x,...B}),r&&e.blockInitialAnimation&&(A=!1);const $=E&&D;A&&(!$||P)&&f.push(...M.map(Y=>{const K={type:w};if(typeof Y=="string"&&r&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:O}=e,L=Cc(O,Y);if(O.enteringChildren&&L){const{delayChildren:I}=L.transition||{};K.delay=X3(O.enteringChildren,e,I)}}return{animation:Y,options:K}}))}if(g.size){const b={};if(typeof h.initial!="boolean"){const w=Cc(e,Array.isArray(h.initial)?h.initial[0]:h.initial);w&&w.transition&&(b.transition=w.transition)}g.forEach(w=>{const j=e.getBaseTarget(w),S=e.getValue(w);S&&(S.liveStyle=!0),b[w]=j??null}),f.push({animation:b})}let _=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(_=!1),r=!1,_?t(f):Promise.resolve()}function l(d,h){if(n[d].isActive===h)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(d,h)),n[d].isActive=h;const m=c(d);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:c,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=i2()}}}function ZX(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Z3(t,e):!1}function Ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i2(){return{animate:Ho(!0),whileInView:Ho(),whileHover:Ho(),whileTap:Ho(),whileDrag:Ho(),whileFocus:Ho(),exit:Ho()}}class fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class QX extends fo{constructor(t){super(t),t.animationState||(t.animationState=XX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();dg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let JX=0;class eZ extends fo{constructor(){super(...arguments),this.id=JX++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const tZ={animation:{Feature:QX},exit:{Feature:eZ}};function Gd(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Nh(e){return{point:{x:e.pageX,y:e.pageY}}}const sZ=e=>t=>nS(t)&&e(t,Nh(t));function Cd(e,t,n,r){return Gd(e,t,sZ(n),r)}const J3=1e-4,nZ=1-J3,rZ=1+J3,eP=.01,iZ=0-eP,aZ=0+eP;function Bn(e){return e.max-e.min}function oZ(e,t,n){return Math.abs(e-t)<=n}function a2(e,t,n,r=.5){e.origin=r,e.originPoint=As(t.min,t.max,e.origin),e.scale=Bn(n)/Bn(t),e.translate=As(n.min,n.max,e.origin)-e.originPoint,(e.scale>=nZ&&e.scale<=rZ||isNaN(e.scale))&&(e.scale=1),(e.translate>=iZ&&e.translate<=aZ||isNaN(e.translate))&&(e.translate=0)}function Nd(e,t,n,r){a2(e.x,t.x,n.x,r?r.originX:void 0),a2(e.y,t.y,n.y,r?r.originY:void 0)}function o2(e,t,n){e.min=n.min+t.min,e.max=e.min+Bn(t)}function lZ(e,t,n){o2(e.x,t.x,n.x),o2(e.y,t.y,n.y)}function l2(e,t,n){e.min=t.min-n.min,e.max=e.min+Bn(t)}function lp(e,t,n){l2(e.x,t.x,n.x),l2(e.y,t.y,n.y)}function Ar(e){return[e("x"),e("y")]}const tP=({current:e})=>e?e.ownerDocument.defaultView:null,c2=(e,t)=>Math.abs(e-t);function cZ(e,t){const n=c2(e.x,t.x),r=c2(e.y,t.y);return Math.sqrt(n**2+r**2)}class sP{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Py(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,C=cZ(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!C)return;const{point:_}=g,{timestamp:b}=vn;this.history.push({..._,timestamp:b});const{onStart:w,onMove:j}=this.handlers;x||(w&&w(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ry(x,this.transformPagePoint),ks.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:C,onSessionEnd:_,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Py(g.type==="pointercancel"?this.lastMoveEventInfo:Ry(x,this.transformPagePoint),this.history);this.startEvent&&C&&C(g,w),_&&_(g,w)},!nS(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const l=Nh(t),d=Ry(l,this.transformPagePoint),{point:h}=d,{timestamp:m}=vn;this.history=[{...h,timestamp:m}];const{onSessionStart:f}=n;f&&f(t,Py(d,this.history)),this.removeListeners=jh(Cd(this.contextWindow,"pointermove",this.handlePointerMove),Cd(this.contextWindow,"pointerup",this.handlePointerUp),Cd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ro(this.updatePoint)}}function Ry(e,t){return t?{point:t(e.point)}:e}function u2(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Py({point:e},t){return{point:e,delta:u2(e,nP(t)),offset:u2(e,uZ(t)),velocity:dZ(t,.1)}}function uZ(e){return e[0]}function nP(e){return e[e.length-1]}function dZ(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=nP(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>xi(t)));)n--;if(!r)return{x:0,y:0};const o=Rr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function hZ(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?As(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?As(n,e,r.max):Math.min(e,n)),e}function d2(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function fZ(e,{top:t,left:n,bottom:r,right:i}){return{x:d2(e.x,n,i),y:d2(e.y,t,r)}}function h2(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function mZ(e,t){return{x:h2(e.x,t.x),y:h2(e.y,t.y)}}function pZ(e,t){let n=.5;const r=Bn(e),i=Bn(t);return i>r?n=Fd(t.min,t.max-r,e.min):r>i&&(n=Fd(e.min,e.max-i,t.min)),ia(0,1,n)}function gZ(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const c0=.35;function xZ(e=c0){return e===!1?e=0:e===!0&&(e=c0),{x:f2(e,"left","right"),y:f2(e,"top","bottom")}}function f2(e,t,n){return{min:m2(e,t),max:m2(e,n)}}function m2(e,t){return typeof e=="number"?e:e[t]||0}const vZ=new WeakMap;class yZ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Nh(f).point)},c=(f,g)=>{const{drag:x,dragPropagation:C,onDragStart:_}=this.getProps();if(x&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CY(x),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(w=>{let j=this.getAxisMotionValue(w).get()||0;if(vi.test(j)){const{projection:S}=this.visualElement;if(S&&S.layout){const N=S.layout.layoutBox[w];N&&(j=Bn(N)*(parseFloat(j)/100))}}this.originPoint[w]=j}),_&&ks.postRender(()=>_(f,g)),o0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:C,onDirectionLock:_,onDrag:b}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:w}=g;if(C&&this.currentDirection===null){this.currentDirection=bZ(w),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,w),this.updateAxis("y",g.point,w),this.visualElement.render(),b&&b(f,g)},d=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ar(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new sP(t,{onSessionStart:o,onStart:c,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:tP(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&ks.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!hm(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=hZ(c,this.constraints[t],this.elastic[t])),o.set(c)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&pc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=fZ(r.layoutBox,t):this.constraints=!1,this.elastic=xZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=gZ(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!pc(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=wX(r,i.root,this.visualElement.getTransformPagePoint());let c=mZ(i.layout.layoutBox,o);if(n){const l=n(vX(c));this.hasMutatedConstraints=!!l,l&&(c=F3(l))}return c}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=Ar(m=>{if(!hm(m,n,this.currentDirection))return;let f=d&&d[m]||{};c&&(f={min:0,max:0});const g=i?200:1e6,x=i?40:1e7,C={type:"inertia",velocity:r?t[m]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(m,C)});return Promise.all(h).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return o0(this.visualElement,t),r.start(fS(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ar(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ar(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ar(n=>{const{drag:r}=this.getProps();if(!hm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:l}=i.layout.layoutBox[n];o.set(t[n]-As(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!pc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ar(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const d=l.get();i[c]=pZ({min:d,max:d},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ar(c=>{if(!hm(c,t,null))return;const l=this.getAxisMotionValue(c),{min:d,max:h}=this.constraints[c];l.set(As(d,h,i[c]))})}addListeners(){if(!this.visualElement.current)return;vZ.set(this.visualElement,this);const t=this.visualElement.current,n=Cd(t,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();pc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ks.read(r);const c=Gd(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ar(m=>{const f=this.getAxisMotionValue(m);f&&(this.originPoint[m]+=d[m].translate,f.set(f.get()+d[m].translate))}),this.visualElement.render())}));return()=>{c(),n(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=c0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:l}}}function hm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function bZ(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class wZ extends fo{constructor(t){super(t),this.removeGroupControls=Lr,this.removeListeners=Lr,this.controls=new yZ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const p2=e=>(t,n)=>{e&&ks.postRender(()=>e(t,n))};class SZ extends fo{constructor(){super(...arguments),this.removePointerDownListener=Lr}onPointerDown(t){this.session=new sP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:p2(t),onStart:p2(n),onMove:r,onEnd:(o,c)=>{delete this.session,i&&ks.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=Cd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let My=!1;class jZ extends y.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),My&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,My=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==o?c.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?c.promote():c.relegate()||ks.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sS.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;My=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rP(e){const[t,n]=N3(),r=y.useContext(Lw);return s.jsx(jZ,{...e,layoutGroup:r,switchLayoutGroup:y.useContext(B3),isPresent:t,safeToRemove:n})}function _Z(e,t,n){const r=Nn(e)?e:Bc(e);return r.start(fS("",r,t,n)),r.animation}const CZ=(e,t)=>e.depth-t.depth;class NZ{constructor(){this.children=[],this.isDirty=!1}add(t){Bw(this.children,t),this.isDirty=!0}remove(t){zw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(CZ),this.isDirty=!1,this.children.forEach(t)}}function kZ(e,t){const n=Zn.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(ro(r),e(o-t))};return ks.setup(r,!0),()=>ro(r)}const iP=["TopLeft","TopRight","BottomLeft","BottomRight"],EZ=iP.length,g2=e=>typeof e=="string"?parseFloat(e):e,x2=e=>typeof e=="number"||lt.test(e);function AZ(e,t,n,r,i,o){i?(e.opacity=As(0,n.opacity??1,TZ(r)),e.opacityExit=As(t.opacity??1,0,DZ(r))):o&&(e.opacity=As(t.opacity??1,n.opacity??1,r));for(let c=0;c<EZ;c++){const l=`border${iP[c]}Radius`;let d=v2(t,l),h=v2(n,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||x2(d)===x2(h)?(e[l]=Math.max(As(g2(d),g2(h),r),0),(vi.test(h)||vi.test(d))&&(e[l]+="%")):e[l]=h}(t.rotate||n.rotate)&&(e.rotate=As(t.rotate||0,n.rotate||0,r))}function v2(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const TZ=aP(0,.5,GR),DZ=aP(.5,.95,Lr);function aP(e,t,n){return r=>r<e?0:r>t?1:n(Fd(e,t,r))}function y2(e,t){e.min=t.min,e.max=t.max}function $r(e,t){y2(e.x,t.x),y2(e.y,t.y)}function b2(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function w2(e,t,n,r,i){return e-=t,e=op(e,1/n,r),i!==void 0&&(e=op(e,1/i,r)),e}function RZ(e,t=0,n=1,r=.5,i,o=e,c=e){if(vi.test(t)&&(t=parseFloat(t),t=As(c.min,c.max,t/100)-c.min),typeof t!="number")return;let l=As(o.min,o.max,r);e===o&&(l-=t),e.min=w2(e.min,t,n,l,i),e.max=w2(e.max,t,n,l,i)}function S2(e,t,[n,r,i],o,c){RZ(e,t[n],t[r],t[i],t.scale,o,c)}const PZ=["x","scaleX","originX"],MZ=["y","scaleY","originY"];function j2(e,t,n,r){S2(e.x,t,PZ,n?n.x:void 0,r?r.x:void 0),S2(e.y,t,MZ,n?n.y:void 0,r?r.y:void 0)}function _2(e){return e.translate===0&&e.scale===1}function oP(e){return _2(e.x)&&_2(e.y)}function C2(e,t){return e.min===t.min&&e.max===t.max}function LZ(e,t){return C2(e.x,t.x)&&C2(e.y,t.y)}function N2(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function lP(e,t){return N2(e.x,t.x)&&N2(e.y,t.y)}function k2(e){return Bn(e.x)/Bn(e.y)}function E2(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class IZ{constructor(){this.members=[]}add(t){Bw(this.members,t),t.scheduleRender()}remove(t){if(zw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OZ(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y,c=n?.z||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:f,rotateY:g,skewX:x,skewY:C}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),f&&(r+=`rotateX(${f}deg) `),g&&(r+=`rotateY(${g}deg) `),x&&(r+=`skewX(${x}deg) `),C&&(r+=`skewY(${C}deg) `)}const l=e.x.scale*t.x,d=e.y.scale*t.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const Ly=["","X","Y","Z"],BZ=1e3;let zZ=0;function Iy(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function cP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=K3(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ks,!(i||o))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&cP(r)}function uP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},l=t?.()){this.id=zZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(UZ),this.nodes.forEach(qZ),this.nodes.forEach(WZ),this.nodes.forEach($Z)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new NZ)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Uw),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const d=this.eventHandlers.get(c);d&&d.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=C3(c)&&!DY(c),this.instance=c;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),e){let m,f=0;const g=()=>this.root.updateBlockedByResize=!1;ks.read(()=>{f=window.innerWidth}),e(c,()=>{const x=window.innerWidth;x!==f&&(f=x,this.root.updateBlockedByResize=!0,m&&m(),m=kZ(g,250),Tm.hasAnimatedSinceResize&&(Tm.hasAnimatedSinceResize=!1,this.nodes.forEach(D2)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||h.getDefaultTransition()||QZ,{onLayoutAnimationStart:_,onLayoutAnimationComplete:b}=h.getProps(),w=!this.targetLayout||!lP(this.targetLayout,x),j=!f&&g;if(this.options.layoutRoot||this.resumeFrom||j||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...eS(C,"layout"),onPlay:_,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(m,j)}else f||D2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KZ),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const f=this.path[m];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(T2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(GZ),this.nodes.forEach(FZ),this.nodes.forEach(HZ)):this.nodes.forEach(T2),this.clearAllSnapshots();const l=Zn.now();vn.delta=ia(0,1e3/60,l-vn.timestamp),vn.timestamp=l,vn.isProcessing=!0,_y.update.process(vn),_y.preRender.process(vn),_y.render.process(vn),vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VZ),this.sharedNodes.forEach(YZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ks.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ks.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!oP(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;c&&this.instance&&(l||Vo(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return c&&(d=this.removeTransform(d)),JZ(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return en();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(eQ))){const{scroll:h}=this.root;h&&(gc(l.x,h.offset.x),gc(l.y,h.offset.y))}return l}removeElementScroll(c){const l=en();if($r(l,c),this.scroll?.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&$r(l,c),gc(l.x,m.offset.x),gc(l.y,m.offset.y))}return l}applyTransform(c,l=!1){const d=en();$r(d,c);for(let h=0;h<this.path.length;h++){const m=this.path[h];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&xc(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Vo(m.latestValues)&&xc(d,m.latestValues)}return Vo(this.latestValues)&&xc(d,this.latestValues),d}removeTransform(c){const l=en();$r(l,c);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Vo(h.latestValues))continue;n0(h.latestValues)&&h.updateSnapshot();const m=en(),f=h.measurePageBox();$r(m,f),j2(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Vo(this.latestValues)&&j2(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!this.layout||!(m||f))return;this.resolvedRelativeTargetAt=vn.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$r(this.target,this.layout.layoutBox),U3(this.target,this.targetDelta)):$r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||n0(this.parent.latestValues)||H3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,l,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),lp(this.relativeTargetOrigin,l,d),$r(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===vn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;$r(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;bX(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=en());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b2(this.prevProjectionDelta.x,this.projectionDelta.x),b2(this.prevProjectionDelta.y,this.projectionDelta.y)),Nd(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!E2(this.projectionDelta.x,this.prevProjectionDelta.x)||!E2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vc(),this.projectionDelta=vc(),this.projectionDeltaWithTransform=vc()}setAnimationOrigin(c,l=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},f=vc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=en(),x=d?d.source:void 0,C=this.layout?this.layout.source:void 0,_=x!==C,b=this.getStack(),w=!b||b.members.length<=1,j=!!(_&&!w&&this.options.crossfade===!0&&!this.path.some(ZZ));this.animationProgress=0;let S;this.mixTargetDelta=N=>{const T=N/1e3;R2(f.x,c.x,T),R2(f.y,c.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lp(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XZ(this.relativeTarget,this.relativeTargetOrigin,g,T),S&&LZ(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=en()),$r(S,this.relativeTarget)),_&&(this.animationValues=m,AZ(m,h,this.latestValues,T,j,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ks.update(()=>{Tm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bc(0)),this.currentAnimation=_Z(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:m}=c;if(!(!l||!d||!h)){if(this!==c&&this.layout&&h&&dP(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||en();const f=Bn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+f;const g=Bn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+g}$r(l,d),xc(l,m),Nd(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new IZ),this.sharedNodes.get(c).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const h={};d.z&&Iy("z",c,h,this.animationValues);for(let m=0;m<Ly.length;m++)Iy(`rotate${Ly[m]}`,c,h,this.animationValues),Iy(`skew${Ly[m]}`,c,h,this.animationValues);c.render();for(const m in h)c.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Am(l?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Am(l?.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let f=OZ(this.projectionDeltaWithTransform,this.treeScale,m);d&&(f=d(m,f)),c.transform=f;const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const C in s0){if(m[C]===void 0)continue;const{correct:_,applyTo:b,isCSSVariable:w}=s0[C],j=f==="none"?m[C]:_(m[C],h);if(b){const S=b.length;for(let N=0;N<S;N++)c[b[N]]=j}else w?this.options.visualElement.renderState.vars[C]=j:c[C]=j}this.options.layoutId&&(c.pointerEvents=h===this?Am(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(A2),this.root.sharedNodes.clear()}}}function FZ(e){e.updateLayout()}function HZ(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Ar(m=>{const f=o?t.measuredBox[m]:t.layoutBox[m],g=Bn(f);f.min=n[m].min,f.max=f.min+g}):dP(i,t.layoutBox,n)&&Ar(m=>{const f=o?t.measuredBox[m]:t.layoutBox[m],g=Bn(n[m]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+g)});const c=vc();Nd(c,n,t.layoutBox);const l=vc();o?Nd(l,e.applyTransform(r,!0),t.measuredBox):Nd(l,n,t.layoutBox);const d=!oP(c);let h=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:g}=m;if(f&&g){const x=en();lp(x,t.layoutBox,f.layoutBox);const C=en();lp(C,n,g.layoutBox),lP(x,C)||(h=!0),m.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=x,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function UZ(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $Z(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function VZ(e){e.clearSnapshot()}function A2(e){e.clearMeasurements()}function T2(e){e.isLayoutDirty=!1}function GZ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function D2(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function qZ(e){e.resolveTargetDelta()}function WZ(e){e.calcProjection()}function KZ(e){e.resetSkewAndRotation()}function YZ(e){e.removeLeadSnapshot()}function R2(e,t,n){e.translate=As(t.translate,0,n),e.scale=As(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function P2(e,t,n,r){e.min=As(t.min,n.min,r),e.max=As(t.max,n.max,r)}function XZ(e,t,n,r){P2(e.x,t.x,n.x,r),P2(e.y,t.y,n.y,r)}function ZZ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const QZ={duration:.45,ease:[.4,0,.1,1]},M2=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),L2=M2("applewebkit/")&&!M2("chrome/")?Math.round:Lr;function I2(e){e.min=L2(e.min),e.max=L2(e.max)}function JZ(e){I2(e.x),I2(e.y)}function dP(e,t,n){return e==="position"||e==="preserve-aspect"&&!oZ(k2(t),k2(n),.2)}function eQ(e){return e!==e.root&&e.scroll?.wasRoot}const tQ=uP({attachResizeListener:(e,t)=>Gd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Oy={current:void 0},hP=uP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Oy.current){const e=new tQ({});e.mount(window),e.setOptions({layoutScroll:!0}),Oy.current=e}return Oy.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sQ={pan:{Feature:SZ},drag:{Feature:wZ,ProjectionNode:hP,MeasureLayout:rP}};function O2(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&ks.postRender(()=>o(t,Nh(t)))}class nQ extends fo{mount(){const{current:t}=this.node;t&&(this.unmount=NY(t,(n,r)=>(O2(this.node,r,"Start"),i=>O2(this.node,i,"End"))))}unmount(){}}class rQ extends fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jh(Gd(this.node.current,"focus",()=>this.onFocus()),Gd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function B2(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&ks.postRender(()=>o(t,Nh(t)))}class iQ extends fo{mount(){const{current:t}=this.node;t&&(this.unmount=TY(t,(n,r)=>(B2(this.node,r,"Start"),(i,{success:o})=>B2(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const u0=new WeakMap,By=new WeakMap,aQ=e=>{const t=u0.get(e.target);t&&t(e)},oQ=e=>{e.forEach(aQ)};function lQ({root:e,...t}){const n=e||document;By.has(n)||By.set(n,{});const r=By.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(oQ,{root:e,...t})),r[i]}function cQ(e,t,n){const r=lQ(t);return u0.set(e,n),r.observe(e),()=>{u0.delete(e),r.unobserve(e)}}const uQ={some:0,all:1};class dQ extends fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:uQ[i]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:f}=this.node.getProps(),g=h?m:f;g&&g(d)};return cQ(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hQ(t,n))&&this.startObserver()}unmount(){}}function hQ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const fQ={inView:{Feature:dQ},tap:{Feature:iQ},focus:{Feature:rQ},hover:{Feature:nQ}},mQ={layout:{ProjectionNode:hP,MeasureLayout:rP}},pQ={...tZ,...fQ,...sQ,...mQ},cn=xX(pQ,TX),z2={idle:{color:"bg-muted-foreground",bgColor:"bg-muted"},planning:{color:"bg-amber-500",bgColor:"bg-amber-500/20"},coding:{color:"bg-info",bgColor:"bg-info/20"},qa_review:{color:"bg-purple-500",bgColor:"bg-purple-500/20"},qa_fixing:{color:"bg-orange-500",bgColor:"bg-orange-500/20"},complete:{color:"bg-success",bgColor:"bg-success/20"},failed:{color:"bg-destructive",bgColor:"bg-destructive/20"}},F2={idle:"execution.phases.idle",planning:"execution.phases.planning",coding:"execution.phases.coding",qa_review:"execution.phases.reviewing",qa_fixing:"execution.phases.fixing",complete:"execution.phases.complete",failed:"execution.phases.failed"};function gQ({phase:e="idle",subtasks:t,phaseLogs:n,isStuck:r=!1,isRunning:i=!1,className:o}){const{t:c}=rs("tasks"),l=t.filter(S=>S.status==="completed").length,d=t.length,h=d>0?Math.round(l/d*100):0,m=n?.phases?.planning?.entries?.length||0,f=n?.phases?.coding?.entries?.length||0,g=n?.phases?.validation?.entries?.length||0,x=()=>e==="planning"?m:e==="qa_review"||e==="qa_fixing"?g:f,C=e==="planning"||e==="qa_review"||e==="qa_fixing",_=e==="coding"||d>0&&!C,b=z2[e]||z2.idle,w=c(F2[e]||F2.idle),j=x();return s.jsxs("div",{className:le("space-y-1.5",o),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:r?c("execution.labels.interrupted"):_?c("execution.labels.progress"):w}),i&&!r&&C&&s.jsx(cn.div,{className:le("h-1.5 w-1.5 rounded-full",b.color),animate:{scale:[1,1.5,1],opacity:[1,.5,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"}})]}),s.jsx("span",{className:"text-xs font-medium text-foreground",children:_?`${h}%`:j>0?s.jsxs("span",{className:"text-muted-foreground",children:[j," ",c(j===1?"execution.labels.entry":"execution.labels.entries")]}):""})]}),s.jsx("div",{className:le("relative h-1.5 w-full overflow-hidden rounded-full",r?"bg-warning/20":"bg-border"),children:s.jsx($d,{mode:"wait",children:r?s.jsx(cn.div,{className:"absolute inset-0 bg-warning/40",initial:{opacity:0},animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}},"stuck"):_?s.jsx(cn.div,{className:le("h-full rounded-full",b.color),initial:{width:0},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}},"determinate"):i&&C?s.jsx(cn.div,{className:le("absolute h-full w-1/3 rounded-full",b.color),animate:{x:["-100%","400%"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}},"indeterminate"):d>0?s.jsx(cn.div,{className:le("h-full rounded-full",b.color),initial:{width:0},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}},"static"):null})}),d>0&&s.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[t.slice(0,10).map((S,N)=>s.jsx(cn.div,{className:le("h-2 w-2 rounded-full",S.status==="completed"&&"bg-success",S.status==="in_progress"&&"bg-info",S.status==="failed"&&"bg-destructive",S.status==="pending"&&"bg-muted-foreground/30"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,...S.status==="in_progress"&&{boxShadow:["0 0 0 0 rgba(var(--info), 0.4)","0 0 0 4px rgba(var(--info), 0)"]}},transition:{scale:{delay:N*.03,duration:.2},opacity:{delay:N*.03,duration:.2},boxShadow:S.status==="in_progress"?{duration:1,repeat:1/0,ease:"easeOut"}:void 0},title:`${S.title||S.id}: ${S.status}`},S.id||`subtask-${N}`)),d>10&&s.jsxs("span",{className:"text-[10px] text-muted-foreground font-medium ml-0.5",children:["+",d-10]},"overflow-count")]}),(i||e!=="idle")&&s.jsx(xQ,{currentPhase:e,isStuck:r})]})}function xQ({currentPhase:e,isStuck:t}){const{t:n}=rs("tasks"),r=[{key:"planning",labelKey:"execution.shortPhases.plan"},{key:"coding",labelKey:"execution.shortPhases.code"},{key:"qa_review",labelKey:"execution.shortPhases.qa"}],i=o=>{const c=["planning","coding","qa_review","qa_fixing","complete"],l=c.indexOf(e),d=c.indexOf(o);return e==="failed"?"failed":e==="complete"?"complete":o===e||o==="qa_review"&&e==="qa_fixing"?t?"stuck":"active":d<l?"complete":"pending"};return s.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.map((o,c)=>{const l=i(o.key);return s.jsxs("div",{className:"flex items-center",children:[s.jsxs(cn.div,{className:le("flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-medium",l==="complete"&&"bg-success/10 text-success",l==="active"&&"bg-primary/10 text-primary",l==="stuck"&&"bg-warning/10 text-warning",l==="failed"&&"bg-destructive/10 text-destructive",l==="pending"&&"bg-muted text-muted-foreground"),animate:l==="active"&&!t?{opacity:[1,.6,1]}:{opacity:1},transition:l==="active"&&!t?{duration:1.5,repeat:1/0,ease:"easeInOut"}:void 0,children:[l==="complete"&&s.jsx("svg",{className:"h-2.5 w-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),n(o.labelKey)]}),c<r.length-1&&s.jsx("div",{className:le("w-2 h-px mx-0.5",i(r[c+1].key)!=="pending"?"bg-success/50":"bg-border")})]},o.key)})})}const vQ="modulepreload",yQ=function(e){return"/"+e},H2={},mS=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var c=h;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");i=h(n.map(m=>{if(m=yQ(m),m in H2)return;H2[m]=!0;const f=m.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":vQ,f||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((C,_)=>{x.addEventListener("load",C),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})},Ks=xr((e,t)=>({tasks:[],selectedTaskId:null,isLoading:!1,error:null,setTasks:n=>e({tasks:n}),addTask:n=>e(r=>({tasks:[...r.tasks,n]})),updateTask:(n,r)=>e(i=>({tasks:i.tasks.map(o=>o.id===n||o.specId===n?{...o,...r}:o)})),updateTaskStatus:(n,r)=>e(i=>({tasks:i.tasks.map(o=>{if(o.id!==n&&o.specId!==n)return o;const c=r==="backlog"?{phase:"idle",phaseProgress:0,overallProgress:0}:o.executionProgress;return{...o,status:r,executionProgress:c,updatedAt:new Date}})})),updateTaskFromPlan:(n,r)=>e(i=>({tasks:i.tasks.map(o=>{if(o.id!==n&&o.specId!==n)return o;const c=r.phases.flatMap(x=>x.subtasks.map(C=>({id:C.id,title:C.description,description:C.description,status:C.status,files:[],verification:C.verification}))),l=c.length>0&&c.every(x=>x.status==="completed"),d=c.some(x=>x.status==="in_progress"),h=c.some(x=>x.status==="failed"),m=c.some(x=>x.status==="completed");let f=o.status,g=o.reviewReason;return l?(f=o.metadata?.sourceType==="manual"?"human_review":"ai_review",o.metadata?.sourceType==="manual"?g="completed":g=void 0):h?(f="human_review",g="errors"):(d||m)&&(f="in_progress",g=void 0),{...o,title:r.feature||o.title,subtasks:c,status:f,reviewReason:g,updatedAt:new Date}})})),updateExecutionProgress:(n,r)=>e(i=>({tasks:i.tasks.map(o=>{if(o.id!==n&&o.specId!==n)return o;const c=o.executionProgress||{phase:"idle",phaseProgress:0,overallProgress:0};return{...o,executionProgress:{...c,...r},updatedAt:new Date}})})),appendLog:(n,r)=>e(i=>({tasks:i.tasks.map(o=>o.id===n||o.specId===n?{...o,logs:[...o.logs||[],r]}:o)})),selectTask:n=>e({selectedTaskId:n}),setLoading:n=>e({isLoading:n}),setError:n=>e({error:n}),clearTasks:()=>e({tasks:[],selectedTaskId:null}),getSelectedTask:()=>{const n=t();return n.tasks.find(r=>r.id===n.selectedTaskId)},getTasksByStatus:n=>t().tasks.filter(i=>i.status===n)}));async function mo(e){const t=Ks.getState();t.setLoading(!0),t.setError(null);try{const{useProjectStore:n}=await mS(async()=>{const{useProjectStore:c}=await Promise.resolve().then(()=>Nw);return{useProjectStore:c}},void 0),i=n.getState().projects.find(c=>c.id===e);if(!i){t.setError("Project not found"),t.setLoading(!1);return}const o=await J.getTasks(e,i.path);if(o.success&&o.data){const c=t.tasks,l=new Set(o.data.map(h=>h.id)),d=c.filter(h=>!l.has(h.id));t.setTasks([...o.data,...d])}else t.setError(o.error||"Failed to load tasks")}catch(n){t.setError(n instanceof Error?n.message:"Unknown error")}finally{t.setLoading(!1)}}async function bQ(e,t,n,r){const i=Ks.getState();try{const{useProjectStore:o}=await mS(async()=>{const{useProjectStore:h}=await Promise.resolve().then(()=>Nw);return{useProjectStore:h}},void 0),l=o.getState().projects.find(h=>h.id===e);if(!l)return i.setError("Project not found"),null;const d=await J.createTask({projectId:e,projectPath:l.path,title:t,description:n,complexity:r?.complexity});return d.success&&d.data?(i.addTask(d.data),d.data):(i.setError(d.error||"Failed to create task"),null)}catch(o){return i.setError(o instanceof Error?o.message:"Unknown error"),null}}async function fP(e,t){const n=Ks.getState(),r=n.tasks.find(d=>d.id===e||d.specId===e);if(!r){console.error("[TaskStore] Cannot start task - task not found:",e);return}const{useProjectStore:i}=await mS(async()=>{const{useProjectStore:d}=await Promise.resolve().then(()=>Nw);return{useProjectStore:d}},void 0),c=i.getState().projects.find(d=>d.id===r.projectId);if(!c){console.error("[TaskStore] Cannot start task - project not found:",r.projectId);return}const l=await J.startTask(e,c.path,t?.parallel,t?.workers);l.success?await mo(r.projectId):(console.error("[TaskStore] Failed to start task:",l.error),n.setError(l.error||"Failed to start task"))}function mP(e){J.stopTask(e)}async function wQ(e,t,n){const r=Ks.getState();try{return(await J.submitReview(e,t,n)).success?(r.updateTaskStatus(e,t?"done":"in_progress"),!0):!1}catch{return!1}}async function cp(e,t){const n=Ks.getState();try{n.updateTaskStatus(e,t);const r=await J.updateTaskStatus(e,t);return r.success?!0:(console.error("Failed to persist task status:",r.error),!1)}catch(r){return console.error("Error persisting task status:",r),!1}}async function SQ(e,t){const n=Ks.getState();try{const r=await J.updateTask(e,t);return r.success&&r.data?(n.updateTask(e,{title:r.data.title,description:r.data.description,metadata:r.data.metadata,updatedAt:new Date}),!0):(console.error("Failed to persist task update:",r.error),!1)}catch(r){return console.error("Error persisting task update:",r),!1}}async function Dm(e){try{const t=await J.checkTaskRunning(e);return t.success&&t.data===!0}catch(t){return console.error("Error checking task running status:",t),!1}}async function pP(e,t={autoRestart:!0}){const n=Ks.getState();try{const r=await J.recoverStuckTask(e,t);return r.success&&r.data?(n.updateTaskStatus(e,r.data.newStatus),{success:!0,message:r.data.message,autoRestarted:r.data.autoRestarted}):{success:!1,message:r.error||"Failed to recover task"}}catch(r){return console.error("Error recovering stuck task:",r),{success:!1,message:r instanceof Error?r.message:"Unknown error"}}}async function jQ(e){const t=Ks.getState();try{const n=await J.deleteTask(e);return n.success?(t.setTasks(t.tasks.filter(r=>r.id!==e&&r.specId!==e)),t.selectedTaskId===e&&t.selectTask(null),{success:!0}):{success:!1,error:n.error||"Failed to delete task"}}catch(n){return console.error("Error deleting task:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function gP(e,t,n){try{const r=await J.archiveTasks(e,t,n);return r.success?(await mo(e),{success:!0}):{success:!1,error:r.error||"Failed to archive tasks"}}catch(r){return console.error("Error archiving tasks:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const _Q="task-creation-draft";function pS(e){return`${_Q}-${e}`}function CQ(e){try{const t=pS(e.projectId),n={...e,images:e.images.map(r=>({...r,data:void 0})),savedAt:new Date().toISOString()};localStorage.setItem(t,JSON.stringify(n))}catch(t){console.error("Failed to save draft:",t)}}function NQ(e){try{const t=pS(e),n=localStorage.getItem(t);if(!n)return null;const r=JSON.parse(n);return r.savedAt=new Date(r.savedAt),r}catch(t){return console.error("Failed to load draft:",t),null}}function zy(e){try{const t=pS(e);localStorage.removeItem(t)}catch(t){console.error("Failed to clear draft:",t)}}function U2(e){return e?!e.title.trim()&&!e.description.trim()&&e.images.length===0&&!e.category&&!e.priority&&!e.complexity&&!e.impact:!0}function xP(e){return e.status!=="human_review"?!1:!e.subtasks||e.subtasks.length===0?!0:e.subtasks.filter(n=>n.status==="completed").length===0}function kQ(e){const t=e.subtasks?.length||0,n=e.subtasks?.filter(i=>i.status==="completed").length||0,r=t>0?Math.round(n/t*100):0;return{completed:n,total:t,percentage:r}}const $2={feature:Ep,bug_fix:FA,refactoring:eo,documentation:ms,security:Uc,performance:ih,ui_ux:ah,infrastructure:eo,testing:ms};function vP({task:e,onClick:t}){const{t:n}=rs("tasks"),[r,i]=y.useState(!1),[o,c]=y.useState(!1),l=e.status==="in_progress",d=e.executionProgress?.phase,h=d&&d!=="idle"&&d!=="complete"&&d!=="failed",m=xP(e);y.useEffect(()=>{if(!l){i(!1);return}const S=setTimeout(()=>{Dm(e.id).then(T=>{i(!T)})},2e3),N=setInterval(()=>{Dm(e.id).then(T=>{i(!T)})},15e3);return()=>{clearTimeout(S),clearInterval(N)}},[e.id,l]),y.useEffect(()=>{const S=()=>{document.visibilityState==="visible"&&l&&Dm(e.id).then(N=>{i(!N)})};return document.addEventListener("visibilitychange",S),()=>{document.removeEventListener("visibilitychange",S)}},[e.id,l]);const f=S=>{S.stopPropagation(),l&&!r?mP(e.id):fP(e.id)},g=async S=>{S.stopPropagation(),c(!0),(await pP(e.id,{autoRestart:!0})).success&&i(!1),c(!1)},x=async S=>{S.stopPropagation(),await gP(e.projectId,[e.id])},C=S=>{switch(S){case"in_progress":return"info";case"ai_review":return"warning";case"human_review":return"purple";case"done":return"success";default:return"secondary"}},_=S=>{switch(S){case"in_progress":return n("labels.running");case"ai_review":return n("labels.aiReview");case"human_review":return n("labels.needsReview");case"done":return n("status.complete");default:return n("labels.pending")}},b=S=>{if(!S)return null;switch(S){case"completed":return{label:n("reviewReason.completed"),variant:"success"};case"errors":return{label:n("reviewReason.hasErrors"),variant:"destructive"};case"qa_rejected":return{label:n("reviewReason.qaIssues"),variant:"warning"};case"plan_review":return{label:n("reviewReason.approvePlan"),variant:"warning"};default:return null}},w=e.status==="human_review"?b(e.reviewReason):null,j=!!e.metadata?.archivedAt;return s.jsx(He,{className:le("card-surface task-card-enhanced cursor-pointer",l&&!r&&"ring-2 ring-primary border-primary task-running-pulse",r&&"ring-2 ring-warning border-warning task-stuck-pulse",j&&"opacity-60 hover:opacity-80"),onClick:t,children:s.jsxs(pt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsx("h3",{className:"font-semibold text-sm text-foreground line-clamp-2 leading-snug flex-1 min-w-0",title:e.title,children:e.title}),s.jsxs("div",{className:"flex items-center gap-1.5 shrink-0 flex-wrap justify-end max-w-[160px]",children:[r&&s.jsxs(je,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-warning/10 text-warning border-warning/30 badge-priority-urgent",children:[s.jsx(Is,{className:"h-2.5 w-2.5"}),n("labels.stuck")]}),m&&!r&&s.jsxs(je,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-orange-500/10 text-orange-400 border-orange-500/30",children:[s.jsx(Is,{className:"h-2.5 w-2.5"}),n("labels.incomplete")]}),e.metadata?.archivedAt&&s.jsxs(je,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-muted text-muted-foreground border-border",children:[s.jsx(Jo,{className:"h-2.5 w-2.5"}),n("status.archived")]}),h&&d&&!r&&!m&&s.jsxs(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0.5 flex items-center gap-1",uW[d]),children:[s.jsx(Ie,{className:"h-2.5 w-2.5 animate-spin"}),cW[d]]}),!h&&s.jsx(je,{variant:r||m?"warning":C(e.status),className:"text-[10px] px-1.5 py-0.5",children:r?n("labels.needsRecovery"):m?n("labels.needsResume"):_(e.status)}),w&&!r&&!m&&s.jsx(je,{variant:w.variant,className:"text-[10px] px-1.5 py-0.5",children:w.label})]})]}),e.description&&s.jsx("p",{className:"mt-2 text-xs text-muted-foreground line-clamp-2",children:bD(e.description,150)}),e.metadata&&s.jsxs("div",{className:"mt-2.5 flex flex-wrap gap-1.5",children:[e.metadata.category&&s.jsxs(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",kw[e.metadata.category]),children:[$2[e.metadata.category]&&(()=>{const S=$2[e.metadata.category];return s.jsx(S,{className:"h-2.5 w-2.5 mr-0.5"})})(),yh[e.metadata.category]]}),e.metadata.impact&&(e.metadata.impact==="high"||e.metadata.impact==="critical")&&s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",sp[e.metadata.impact]),children:rg[e.metadata.impact]}),e.metadata.complexity&&s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",Ew[e.metadata.complexity]),children:bh[e.metadata.complexity]}),e.metadata.priority&&(e.metadata.priority==="urgent"||e.metadata.priority==="high")&&s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",xR[e.metadata.priority]),children:ig[e.metadata.priority]}),e.metadata.securitySeverity&&s.jsxs(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",sp[e.metadata.securitySeverity]),children:[e.metadata.securitySeverity," severity"]})]}),(e.subtasks.length>0||h||l||r)&&s.jsx("div",{className:"mt-4",children:s.jsx(gQ,{phase:d,subtasks:e.subtasks,isStuck:r,isRunning:l})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[s.jsx(Ci,{className:"h-3 w-3"}),s.jsx("span",{children:Ob(e.updatedAt)})]}),r?s.jsx(te,{variant:"warning",size:"sm",className:"h-7 px-2.5",onClick:g,disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-1.5 h-3 w-3 animate-spin"}),n("labels.recovering")]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"mr-1.5 h-3 w-3"}),n("actions.recover")]})}):m?s.jsxs(te,{variant:"default",size:"sm",className:"h-7 px-2.5",onClick:f,children:[s.jsx(ei,{className:"mr-1.5 h-3 w-3"}),n("actions.resume")]}):e.status==="done"&&!e.metadata?.archivedAt?s.jsxs(te,{variant:"ghost",size:"sm",className:"h-7 px-2.5 hover:bg-muted-foreground/10",onClick:x,title:n("tooltips.archiveTask"),children:[s.jsx(Jo,{className:"mr-1.5 h-3 w-3"}),n("actions.archive")]}):(e.status==="backlog"||e.status==="in_progress")&&s.jsx(te,{variant:l?"destructive":"default",size:"sm",className:"h-7 px-2.5",onClick:f,children:l?s.jsxs(s.Fragment,{children:[s.jsx($c,{className:"mr-1.5 h-3 w-3"}),n("actions.stop")]}):s.jsxs(s.Fragment,{children:[s.jsx(ei,{className:"mr-1.5 h-3 w-3"}),n("actions.start")]})})]})]})})}function EQ({task:e,onClick:t}){const{attributes:n,listeners:r,setNodeRef:i,transform:o,transition:c,isDragging:l,isOver:d}=J0({id:e.id}),h={transform:Si.Transform.toString(o),transition:c,zIndex:l?50:void 0};return s.jsx("div",{ref:i,style:h,className:le("touch-none transition-all duration-200",l&&"dragging-placeholder opacity-40 scale-[0.98]",d&&!l&&"ring-2 ring-primary/30 ring-offset-2 ring-offset-background rounded-xl"),...n,...r,children:s.jsx(vP,{task:e,onClick:t})})}const AQ=(e,t)=>{switch(e){case"backlog":return{icon:s.jsx(Cb,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyBacklog"),subtext:t("kanban.emptyBacklogHint")};case"in_progress":return{icon:s.jsx(Ie,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyInProgress"),subtext:t("kanban.emptyInProgressHint")};case"ai_review":return{icon:s.jsx(zs,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyAiReview"),subtext:t("kanban.emptyAiReviewHint")};case"human_review":return{icon:s.jsx(zs,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyHumanReview"),subtext:t("kanban.emptyHumanReviewHint")};case"done":return{icon:s.jsx(rt,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyDone"),subtext:t("kanban.emptyDoneHint")};default:return{icon:s.jsx(Cb,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyDefault")}}};function TQ({status:e,tasks:t,onTaskClick:n,isOver:r,onAddClick:i,onArchiveAll:o}){const{t:c}=rs("tasks"),{setNodeRef:l}=Bp({id:e}),d=t.map(f=>f.id),h=()=>{switch(e){case"backlog":return"column-backlog";case"in_progress":return"column-in-progress";case"ai_review":return"column-ai-review";case"human_review":return"column-human-review";case"done":return"column-done";default:return"border-t-muted-foreground/30"}},m=AQ(e,c);return s.jsxs("div",{ref:l,className:le("flex w-72 shrink-0 flex-col rounded-xl border border-white/5 bg-linear-to-b from-secondary/30 to-transparent backdrop-blur-sm transition-all duration-200",h(),"border-t-2",r&&"drop-zone-highlight"),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("h2",{className:"font-semibold text-sm text-foreground",children:gR[e]}),s.jsx("span",{className:"column-count-badge",children:t.length})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[e==="backlog"&&i&&s.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-primary/10 hover:text-primary transition-colors",onClick:i,children:s.jsx(ys,{className:"h-4 w-4"})}),e==="done"&&o&&t.length>0&&s.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-muted-foreground/10 hover:text-muted-foreground transition-colors",onClick:o,title:c("tooltips.archiveAllDone"),children:s.jsx(Jo,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(cs,{className:"h-full px-3 pb-3 pt-2",children:s.jsx(Q0,{items:d,strategy:yT,children:s.jsx("div",{className:"space-y-3 min-h-[120px]",children:t.length===0?s.jsx("div",{className:le("empty-column-dropzone flex flex-col items-center justify-center py-6",r&&"active"),children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center mb-2",children:s.jsx(ys,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"text-sm font-medium text-primary",children:c("kanban.dropHere")})]}):s.jsxs(s.Fragment,{children:[m.icon,s.jsx("span",{className:"mt-2 text-sm font-medium text-muted-foreground/70",children:m.message}),m.subtext&&s.jsx("span",{className:"mt-0.5 text-xs text-muted-foreground/50",children:m.subtext})]})}):t.map(f=>s.jsx(EQ,{task:f,onClick:()=>n(f)},f.id))})})})})]})}function DQ({tasks:e,onTaskClick:t,onNewTaskClick:n}){const{t:r}=rs("tasks"),[i,o]=y.useState(null),[c,l]=y.useState(null),[d,h]=y.useState(!1),m=y.useMemo(()=>e.filter(j=>j.metadata?.archivedAt).length,[e]),f=y.useMemo(()=>d?e:e.filter(j=>!j.metadata?.archivedAt),[e,d]),g=Rp(Dc(Wc,{activationConstraint:{distance:8}}),Dc(Mp,{coordinateGetter:jT})),x=y.useMemo(()=>{const j={backlog:[],in_progress:[],ai_review:[],human_review:[],done:[]};return f.forEach(S=>{j[S.status]&&j[S.status].push(S)}),j},[f]),C=async()=>{const j=e[0]?.projectId;if(!j){console.error("No projectId found");return}const S=x.done.map(N=>N.id);S.length!==0&&await gP(j,S)},_=j=>{const{active:S}=j,N=e.find(T=>T.id===S.id);N&&o(N)},b=j=>{const{over:S}=j;if(!S){l(null);return}const N=S.id;if(by.includes(N)){l(N);return}const T=e.find(E=>E.id===N);T&&l(T.status)},w=j=>{const{active:S,over:N}=j;if(o(null),l(null),!N)return;const T=S.id,E=N.id;if(by.includes(E)){const A=E,P=e.find(M=>M.id===T);P&&P.status!==A&&cp(T,A);return}const D=e.find(A=>A.id===E);if(D){const A=e.find(P=>P.id===T);A&&A.status!==D.status&&cp(T,D.status)}};return s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx("div",{className:"flex items-center justify-end px-6 py-3 border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ca,{id:"showArchived",checked:d,onCheckedChange:j=>h(j===!0)}),s.jsxs(we,{htmlFor:"showArchived",className:"flex items-center gap-1.5 text-sm text-muted-foreground cursor-pointer",children:[s.jsx(Jo,{className:"h-3.5 w-3.5"}),r("kanban.showArchived"),m>0&&s.jsx("span",{className:"ml-1 text-xs px-1.5 py-0.5 rounded-full bg-muted",children:m})]})]})}),s.jsxs(Op,{sensors:g,collisionDetection:K0,onDragStart:_,onDragOver:b,onDragEnd:w,children:[s.jsx("div",{className:"flex flex-1 gap-4 overflow-x-auto p-6",children:by.map(j=>s.jsx(TQ,{status:j,tasks:x[j],onTaskClick:t,isOver:c===j,onAddClick:j==="backlog"?n:void 0,onArchiveAll:j==="done"?C:void 0},j))}),s.jsx(zp,{children:i?s.jsx("div",{className:"drag-overlay-card",children:s.jsx(vP,{task:i,onClick:()=>{}})}):null})]})]})}function V2(e){const t=RQ(e),n=y.forwardRef((r,i)=>{const{children:o,...c}=r,l=y.Children.toArray(o),d=l.find(MQ);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function RQ(e){const t=y.forwardRef((n,r)=>{const{children:i,...o}=n;if(y.isValidElement(i)){const c=IQ(i),l=LQ(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var PQ=Symbol("radix.slottable");function MQ(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===PQ}function LQ(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function IQ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function gS(e){const t=e+"CollectionProvider",[n,r]=An(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=_=>{const{scope:b,children:w}=_,j=Lt.useRef(null),S=Lt.useRef(new Map).current;return s.jsx(i,{scope:b,itemMap:S,collectionRef:j,children:w})};c.displayName=t;const l=e+"CollectionSlot",d=V2(l),h=Lt.forwardRef((_,b)=>{const{scope:w,children:j}=_,S=o(l,w),N=dt(b,S.collectionRef);return s.jsx(d,{ref:N,children:j})});h.displayName=l;const m=e+"CollectionItemSlot",f="data-radix-collection-item",g=V2(m),x=Lt.forwardRef((_,b)=>{const{scope:w,children:j,...S}=_,N=Lt.useRef(null),T=dt(b,N),E=o(m,w);return Lt.useEffect(()=>(E.itemMap.set(N,{ref:N,...S}),()=>{E.itemMap.delete(N)})),s.jsx(g,{[f]:"",ref:T,children:j})});x.displayName=m;function C(_){const b=o(e+"CollectionConsumer",_);return Lt.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const S=Array.from(j.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((E,D)=>S.indexOf(E.ref.current)-S.indexOf(D.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:h,ItemSlot:x},C,r]}var Fy="rovingFocusGroup.onEntryFocus",OQ={bubbles:!1,cancelable:!0},kh="RovingFocusGroup",[d0,yP,BQ]=gS(kh),[zQ,ru]=An(kh,[BQ]),[FQ,HQ]=zQ(kh),bP=y.forwardRef((e,t)=>s.jsx(d0.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(d0.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(UQ,{...e,ref:t})})}));bP.displayName=kh;var UQ=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...f}=e,g=y.useRef(null),x=dt(t,g),C=Jc(o),[_,b]=ii({prop:c,defaultProp:l??null,onChange:d,caller:kh}),[w,j]=y.useState(!1),S=yn(h),N=yP(n),T=y.useRef(!1),[E,D]=y.useState(0);return y.useEffect(()=>{const A=g.current;if(A)return A.addEventListener(Fy,S),()=>A.removeEventListener(Fy,S)},[S]),s.jsx(FQ,{scope:n,orientation:r,dir:C,loop:i,currentTabStopId:_,onItemFocus:y.useCallback(A=>b(A),[b]),onItemShiftTab:y.useCallback(()=>j(!0),[]),onFocusableItemAdd:y.useCallback(()=>D(A=>A+1),[]),onFocusableItemRemove:y.useCallback(()=>D(A=>A-1),[]),children:s.jsx(tt.div,{tabIndex:w||E===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...e.style},onMouseDown:Oe(e.onMouseDown,()=>{T.current=!0}),onFocus:Oe(e.onFocus,A=>{const P=!T.current;if(A.target===A.currentTarget&&P&&!w){const M=new CustomEvent(Fy,OQ);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const B=N().filter(V=>V.focusable),F=B.find(V=>V.active),U=B.find(V=>V.id===_),$=[F,U,...B].filter(Boolean).map(V=>V.ref.current);jP($,m)}}T.current=!1}),onBlur:Oe(e.onBlur,()=>j(!1))})})}),wP="RovingFocusGroupItem",SP=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:c,...l}=e,d=Mr(),h=o||d,m=HQ(wP,n),f=m.currentTabStopId===h,g=yP(n),{onFocusableItemAdd:x,onFocusableItemRemove:C,currentTabStopId:_}=m;return y.useEffect(()=>{if(r)return x(),()=>C()},[r,x,C]),s.jsx(d0.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:s.jsx(tt.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...l,ref:t,onMouseDown:Oe(e.onMouseDown,b=>{r?m.onItemFocus(h):b.preventDefault()}),onFocus:Oe(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:Oe(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){m.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=GQ(b,m.orientation,m.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let S=g().filter(N=>N.focusable).map(N=>N.ref.current);if(w==="last")S.reverse();else if(w==="prev"||w==="next"){w==="prev"&&S.reverse();const N=S.indexOf(b.currentTarget);S=m.loop?qQ(S,N+1):S.slice(N+1)}setTimeout(()=>jP(S))}}),children:typeof c=="function"?c({isCurrentTabStop:f,hasTabStop:_!=null}):c})})});SP.displayName=wP;var $Q={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VQ(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function GQ(e,t,n){const r=VQ(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $Q[r]}function jP(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function qQ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var xS=bP,vS=SP,fg="Tabs",[WQ]=An(fg,[ru]),_P=ru(),[KQ,yS]=WQ(fg),CP=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:c="horizontal",dir:l,activationMode:d="automatic",...h}=e,m=Jc(l),[f,g]=ii({prop:r,onChange:i,defaultProp:o??"",caller:fg});return s.jsx(KQ,{scope:n,baseId:Mr(),value:f,onValueChange:g,orientation:c,dir:m,activationMode:d,children:s.jsx(tt.div,{dir:m,"data-orientation":c,...h,ref:t})})});CP.displayName=fg;var NP="TabsList",kP=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,o=yS(NP,n),c=_P(n);return s.jsx(xS,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:s.jsx(tt.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});kP.displayName=NP;var EP="TabsTrigger",AP=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=e,c=yS(EP,n),l=_P(n),d=RP(c.baseId,r),h=PP(c.baseId,r),m=r===c.value;return s.jsx(vS,{asChild:!0,...l,focusable:!i,active:m,children:s.jsx(tt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:t,onMouseDown:Oe(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?c.onValueChange(r):f.preventDefault()}),onKeyDown:Oe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&c.onValueChange(r)}),onFocus:Oe(e.onFocus,()=>{const f=c.activationMode!=="manual";!m&&!i&&f&&c.onValueChange(r)})})})});AP.displayName=EP;var TP="TabsContent",DP=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...c}=e,l=yS(TP,n),d=RP(l.baseId,r),h=PP(l.baseId,r),m=r===l.value,f=y.useRef(m);return y.useEffect(()=>{const g=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(wn,{present:i||m,children:({present:g})=>s.jsx(tt.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:h,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:g&&o})})});DP.displayName=TP;function RP(e,t){return`${e}-trigger-${t}`}function PP(e,t){return`${e}-content-${t}`}var YQ=CP,MP=kP,LP=AP,IP=DP;const mg=YQ,Eh=y.forwardRef(({className:e,...t},n)=>s.jsx(MP,{ref:n,className:le("inline-flex h-10 items-center justify-center rounded-lg bg-secondary p-1 text-muted-foreground",e),...t}));Eh.displayName=MP.displayName;const Cn=y.forwardRef(({className:e,...t},n)=>s.jsx(LP,{ref:n,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium","transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-card data-[state=active]:text-foreground","data-[state=inactive]:hover:text-foreground/80",e),...t}));Cn.displayName=LP.displayName;const Pr=y.forwardRef(({className:e,...t},n)=>s.jsx(IP,{ref:n,className:le("mt-3 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Pr.displayName=IP.displayName;function XQ(e,t=[]){let n=[];function r(o,c){const l=y.createContext(c);l.displayName=o+"Context";const d=n.length;n=[...n,c];const h=f=>{const{scope:g,children:x,...C}=f,_=g?.[e]?.[d]||l,b=y.useMemo(()=>C,Object.values(C));return s.jsx(_.Provider,{value:b,children:x})};h.displayName=o+"Provider";function m(f,g){const x=g?.[e]?.[d]||l,C=y.useContext(x);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[h,m]}const i=()=>{const o=n.map(c=>y.createContext(c));return function(l){const d=l?.[e]||o;return y.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return i.scopeName=e,[r,ZQ(i,...t)]}function ZQ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((l,{useScope:d,scopeName:h})=>{const f=d(o)[`__scope${h}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}var QQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],OP=QQ.reduce((e,t)=>{const n=mw(`Primitive.${t}`),r=y.forwardRef((i,o)=>{const{asChild:c,...l}=i,d=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),bS="Progress",wS=100,[JQ]=XQ(bS),[eJ,tJ]=JQ(bS),BP=y.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=sJ,...c}=e;(i||i===0)&&!G2(i)&&console.error(nJ(`${i}`,"Progress"));const l=G2(i)?i:wS;r!==null&&!q2(r,l)&&console.error(rJ(`${r}`,"Progress"));const d=q2(r,l)?r:null,h=up(d)?o(d,l):void 0;return s.jsx(eJ,{scope:n,value:d,max:l,children:s.jsx(OP.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":up(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":HP(d,l),"data-value":d??void 0,"data-max":l,...c,ref:t})})});BP.displayName=bS;var zP="ProgressIndicator",FP=y.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=tJ(zP,n);return s.jsx(OP.div,{"data-state":HP(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});FP.displayName=zP;function sJ(e,t){return`${Math.round(e/t*100)}%`}function HP(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function up(e){return typeof e=="number"}function G2(e){return up(e)&&!isNaN(e)&&e>0}function q2(e,t){return up(e)&&!isNaN(e)&&e<=t&&e>=0}function nJ(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${wS}\`.`}function rJ(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${wS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var UP=BP,iJ=FP;const ao=y.forwardRef(({className:e,value:t,animated:n,...r},i)=>s.jsx(UP,{ref:i,className:le("relative h-2 w-full overflow-hidden rounded-full bg-border",e),...r,children:s.jsx(iJ,{className:le("h-full w-full flex-1 bg-primary transition-all duration-300 ease-out",n&&"progress-working"),style:{transform:`translateX(-${100-(t||0)}%)`}})}));ao.displayName=UP.displayName;var aJ=Symbol("radix.slottable");function oJ(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=aJ,t}var $P="AlertDialog",[lJ]=An($P,[RD]),ua=RD(),VP=e=>{const{__scopeAlertDialog:t,...n}=e,r=ua(t);return s.jsx(Jp,{...r,...n,modal:!0})};VP.displayName=$P;var cJ="AlertDialogTrigger",uJ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=ua(n);return s.jsx(zq,{...i,...r,ref:t})});uJ.displayName=cJ;var dJ="AlertDialogPortal",GP=e=>{const{__scopeAlertDialog:t,...n}=e,r=ua(t);return s.jsx(eg,{...r,...n})};GP.displayName=dJ;var hJ="AlertDialogOverlay",qP=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=ua(n);return s.jsx(mh,{...i,...r,ref:t})});qP.displayName=hJ;var Nc="AlertDialogContent",[fJ,mJ]=lJ(Nc),pJ=oJ("AlertDialogContent"),WP=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,o=ua(n),c=y.useRef(null),l=dt(t,c),d=y.useRef(null);return s.jsx(Lq,{contentName:Nc,titleName:KP,docsSlug:"alert-dialog",children:s.jsx(fJ,{scope:n,cancelRef:d,children:s.jsxs(ph,{role:"alertdialog",...o,...i,ref:l,onOpenAutoFocus:Oe(i.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[s.jsx(pJ,{children:r}),s.jsx(xJ,{contentRef:c})]})})})});WP.displayName=Nc;var KP="AlertDialogTitle",YP=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=ua(n);return s.jsx(gh,{...i,...r,ref:t})});YP.displayName=KP;var XP="AlertDialogDescription",ZP=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=ua(n);return s.jsx(xh,{...i,...r,ref:t})});ZP.displayName=XP;var gJ="AlertDialogAction",QP=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=ua(n);return s.jsx(vh,{...i,...r,ref:t})});QP.displayName=gJ;var JP="AlertDialogCancel",e4=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=mJ(JP,n),o=ua(n),c=dt(t,i);return s.jsx(vh,{...o,...r,ref:c})});e4.displayName=JP;var xJ=({contentRef:e})=>{const t=`\`${Nc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Nc}\` by passing a \`${XP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Nc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},vJ=VP,yJ=GP,t4=qP,s4=WP,n4=QP,r4=e4,i4=YP,a4=ZP;const po=vJ,bJ=yJ,o4=y.forwardRef(({className:e,...t},n)=>s.jsx(t4,{className:le("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));o4.displayName=t4.displayName;const da=y.forwardRef(({className:e,...t},n)=>s.jsxs(bJ,{children:[s.jsx(o4,{}),s.jsx(s4,{ref:n,className:le("fixed left-[50%] top-[50%] z-50 w-full max-w-lg max-h-[90vh]","translate-x-[-50%] translate-y-[-50%]","bg-card border border-border rounded-2xl p-6","shadow-xl","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","duration-200",e),...t})]}));da.displayName=s4.displayName;const ha=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col space-y-2 text-center sm:text-left",e),...t});ha.displayName="AlertDialogHeader";const fa=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 mt-6",e),...t});fa.displayName="AlertDialogFooter";const ma=y.forwardRef(({className:e,...t},n)=>s.jsx(i4,{ref:n,className:le("text-lg font-semibold text-foreground",e),...t}));ma.displayName=i4.displayName;const pa=y.forwardRef(({className:e,...t},n)=>s.jsx(a4,{ref:n,className:le("text-sm text-muted-foreground",e),...t}));pa.displayName=a4.displayName;const pl=y.forwardRef(({className:e,...t},n)=>s.jsx(n4,{ref:n,className:le(gw(),e),...t}));pl.displayName=n4.displayName;const go=y.forwardRef(({className:e,...t},n)=>s.jsx(r4,{ref:n,className:le(gw({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));go.displayName=r4.displayName;const _i=y.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:le("flex min-h-[80px] w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","resize-none",e),ref:n,...t}));_i.displayName="Textarea";function wJ(e){const t=SJ(e),n=y.forwardRef((r,i)=>{const{children:o,...c}=r,l=y.Children.toArray(o),d=l.find(_J);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function SJ(e){const t=y.forwardRef((n,r)=>{const{children:i,...o}=n;if(y.isValidElement(i)){const c=NJ(i),l=CJ(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jJ=Symbol("radix.slottable");function _J(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jJ}function CJ(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function NJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var kJ=[" ","Enter","ArrowUp","ArrowDown"],EJ=[" ","Enter"],il="Select",[pg,gg,AJ]=gS(il),[iu]=An(il,[AJ,Xc]),xg=Xc(),[TJ,xo]=iu(il),[DJ,RJ]=iu(il),l4=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:l,onValueChange:d,dir:h,name:m,autoComplete:f,disabled:g,required:x,form:C}=e,_=xg(t),[b,w]=y.useState(null),[j,S]=y.useState(null),[N,T]=y.useState(!1),E=Jc(h),[D,A]=ii({prop:r,defaultProp:i??!1,onChange:o,caller:il}),[P,M]=ii({prop:c,defaultProp:l,onChange:d,caller:il}),B=y.useRef(null),F=b?C||!!b.closest("form"):!0,[U,G]=y.useState(new Set),$=Array.from(U).map(V=>V.props.value).join(";");return s.jsx(lw,{..._,children:s.jsxs(TJ,{required:x,scope:t,trigger:b,onTriggerChange:w,valueNode:j,onValueNodeChange:S,valueNodeHasChildren:N,onValueNodeHasChildrenChange:T,contentId:Mr(),value:P,onValueChange:M,open:D,onOpenChange:A,dir:E,triggerPointerDownPosRef:B,disabled:g,children:[s.jsx(pg.Provider,{scope:t,children:s.jsx(DJ,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(V=>{G(Y=>new Set(Y).add(V))},[]),onNativeOptionRemove:y.useCallback(V=>{G(Y=>{const K=new Set(Y);return K.delete(V),K})},[]),children:n})}),F?s.jsxs(R4,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:f,value:P,onChange:V=>M(V.target.value),disabled:g,form:C,children:[P===void 0?s.jsx("option",{value:""}):null,Array.from(U)]},$):null]})})};l4.displayName=il;var c4="SelectTrigger",u4=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,o=xg(n),c=xo(c4,n),l=c.disabled||r,d=dt(t,c.onTriggerChange),h=gg(n),m=y.useRef("touch"),[f,g,x]=M4(_=>{const b=h().filter(S=>!S.disabled),w=b.find(S=>S.value===c.value),j=L4(b,_,w);j!==void 0&&c.onValueChange(j.value)}),C=_=>{l||(c.onOpenChange(!0),x()),_&&(c.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return s.jsx(cw,{asChild:!0,...o,children:s.jsx(tt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":P4(c.value)?"":void 0,...i,ref:d,onClick:Oe(i.onClick,_=>{_.currentTarget.focus(),m.current!=="mouse"&&C(_)}),onPointerDown:Oe(i.onPointerDown,_=>{m.current=_.pointerType;const b=_.target;b.hasPointerCapture(_.pointerId)&&b.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(C(_),_.preventDefault())}),onKeyDown:Oe(i.onKeyDown,_=>{const b=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&g(_.key),!(b&&_.key===" ")&&kJ.includes(_.key)&&(C(),_.preventDefault())})})})});u4.displayName=c4;var d4="SelectValue",h4=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:c="",...l}=e,d=xo(d4,n),{onValueNodeHasChildrenChange:h}=d,m=o!==void 0,f=dt(t,d.onValueNodeChange);return hn(()=>{h(m)},[h,m]),s.jsx(tt.span,{...l,ref:f,style:{pointerEvents:"none"},children:P4(d.value)?s.jsx(s.Fragment,{children:c}):o})});h4.displayName=d4;var PJ="SelectIcon",f4=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return s.jsx(tt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});f4.displayName=PJ;var MJ="SelectPortal",m4=e=>s.jsx(Gp,{asChild:!0,...e});m4.displayName=MJ;var al="SelectContent",p4=y.forwardRef((e,t)=>{const n=xo(al,e.__scopeSelect),[r,i]=y.useState();if(hn(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?Kr.createPortal(s.jsx(g4,{scope:e.__scopeSelect,children:s.jsx(pg.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(x4,{...e,ref:t})});p4.displayName=al;var Gr=10,[g4,vo]=iu(al),LJ="SelectContentImpl",IJ=wJ("SelectContent.RemoveScroll"),x4=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:l,sideOffset:d,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:x,sticky:C,hideWhenDetached:_,avoidCollisions:b,...w}=e,j=xo(al,n),[S,N]=y.useState(null),[T,E]=y.useState(null),D=dt(t,X=>N(X)),[A,P]=y.useState(null),[M,B]=y.useState(null),F=gg(n),[U,G]=y.useState(!1),$=y.useRef(!1);y.useEffect(()=>{if(S)return vw(S)},[S]),xw();const V=y.useCallback(X=>{const[W,...Q]=F().map(de=>de.ref.current),[se]=Q.slice(-1),he=document.activeElement;for(const de of X)if(de===he||(de?.scrollIntoView({block:"nearest"}),de===W&&T&&(T.scrollTop=0),de===se&&T&&(T.scrollTop=T.scrollHeight),de?.focus(),document.activeElement!==he))return},[F,T]),Y=y.useCallback(()=>V([A,S]),[V,A,S]);y.useEffect(()=>{U&&Y()},[U,Y]);const{onOpenChange:K,triggerPointerDownPosRef:O}=j;y.useEffect(()=>{if(S){let X={x:0,y:0};const W=se=>{X={x:Math.abs(Math.round(se.pageX)-(O.current?.x??0)),y:Math.abs(Math.round(se.pageY)-(O.current?.y??0))}},Q=se=>{X.x<=10&&X.y<=10?se.preventDefault():S.contains(se.target)||K(!1),document.removeEventListener("pointermove",W),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",Q,{capture:!0})}}},[S,K,O]),y.useEffect(()=>{const X=()=>K(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[K]);const[L,I]=M4(X=>{const W=F().filter(he=>!he.disabled),Q=W.find(he=>he.ref.current===document.activeElement),se=L4(W,X,Q);se&&setTimeout(()=>se.ref.current.focus())}),q=y.useCallback((X,W,Q)=>{const se=!$.current&&!Q;(j.value!==void 0&&j.value===W||se)&&(P(X),se&&($.current=!0))},[j.value]),z=y.useCallback(()=>S?.focus(),[S]),ee=y.useCallback((X,W,Q)=>{const se=!$.current&&!Q;(j.value!==void 0&&j.value===W||se)&&B(X)},[j.value]),ie=r==="popper"?h0:v4,re=ie===h0?{side:l,sideOffset:d,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:x,sticky:C,hideWhenDetached:_,avoidCollisions:b}:{};return s.jsx(g4,{scope:n,content:S,viewport:T,onViewportChange:E,itemRefCallback:q,selectedItem:A,onItemLeave:z,itemTextRefCallback:ee,focusSelectedItem:Y,selectedItemText:M,position:r,isPositioned:U,searchRef:L,children:s.jsx(Zp,{as:IJ,allowPinchZoom:!0,children:s.jsx(Yp,{asChild:!0,trapped:j.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Oe(i,X=>{j.trigger?.focus({preventScroll:!0}),X.preventDefault()}),children:s.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:s.jsx(ie,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:X=>X.preventDefault(),...w,...re,onPlaced:()=>G(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Oe(w.onKeyDown,X=>{const W=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!W&&X.key.length===1&&I(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let se=F().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(X.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const he=X.target,de=se.indexOf(he);se=se.slice(de+1)}setTimeout(()=>V(se)),X.preventDefault()}})})})})})})});x4.displayName=LJ;var OJ="SelectItemAlignedPosition",v4=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,o=xo(al,n),c=vo(al,n),[l,d]=y.useState(null),[h,m]=y.useState(null),f=dt(t,D=>m(D)),g=gg(n),x=y.useRef(!1),C=y.useRef(!0),{viewport:_,selectedItem:b,selectedItemText:w,focusSelectedItem:j}=c,S=y.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&h&&_&&b&&w){const D=o.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(o.dir!=="rtl"){const he=M.left-A.left,de=P.left-he,Ne=D.left-de,Re=D.width+Ne,ce=Math.max(Re,A.width),ge=window.innerWidth-Gr,ae=zb(de,[Gr,Math.max(Gr,ge-ce)]);l.style.minWidth=Re+"px",l.style.left=ae+"px"}else{const he=A.right-M.right,de=window.innerWidth-P.right-he,Ne=window.innerWidth-D.right-de,Re=D.width+Ne,ce=Math.max(Re,A.width),ge=window.innerWidth-Gr,ae=zb(de,[Gr,Math.max(Gr,ge-ce)]);l.style.minWidth=Re+"px",l.style.right=ae+"px"}const B=g(),F=window.innerHeight-Gr*2,U=_.scrollHeight,G=window.getComputedStyle(h),$=parseInt(G.borderTopWidth,10),V=parseInt(G.paddingTop,10),Y=parseInt(G.borderBottomWidth,10),K=parseInt(G.paddingBottom,10),O=$+V+U+K+Y,L=Math.min(b.offsetHeight*5,O),I=window.getComputedStyle(_),q=parseInt(I.paddingTop,10),z=parseInt(I.paddingBottom,10),ee=D.top+D.height/2-Gr,ie=F-ee,re=b.offsetHeight/2,X=b.offsetTop+re,W=$+V+X,Q=O-W;if(W<=ee){const he=B.length>0&&b===B[B.length-1].ref.current;l.style.bottom="0px";const de=h.clientHeight-_.offsetTop-_.offsetHeight,Ne=Math.max(ie,re+(he?z:0)+de+Y),Re=W+Ne;l.style.height=Re+"px"}else{const he=B.length>0&&b===B[0].ref.current;l.style.top="0px";const Ne=Math.max(ee,$+_.offsetTop+(he?q:0)+re)+Q;l.style.height=Ne+"px",_.scrollTop=W-ee+_.offsetTop}l.style.margin=`${Gr}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[g,o.trigger,o.valueNode,l,h,_,b,w,o.dir,r]);hn(()=>S(),[S]);const[N,T]=y.useState();hn(()=>{h&&T(window.getComputedStyle(h).zIndex)},[h]);const E=y.useCallback(D=>{D&&C.current===!0&&(S(),j?.(),C.current=!1)},[S,j]);return s.jsx(zJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:E,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(tt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});v4.displayName=OJ;var BJ="SelectPopperPosition",h0=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Gr,...o}=e,c=xg(n);return s.jsx(uw,{...c,...o,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});h0.displayName=BJ;var[zJ,SS]=iu(al,{}),f0="SelectViewport",y4=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,o=vo(f0,n),c=SS(f0,n),l=dt(t,o.onViewportChange),d=y.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(pg.Slot,{scope:n,children:s.jsx(tt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Oe(i.onScroll,h=>{const m=h.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=c;if(g?.current&&f){const x=Math.abs(d.current-m.scrollTop);if(x>0){const C=window.innerHeight-Gr*2,_=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),w=Math.max(_,b);if(w<C){const j=w+x,S=Math.min(C,j),N=j-S;f.style.height=S+"px",f.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});y4.displayName=f0;var b4="SelectGroup",[FJ,HJ]=iu(b4),UJ=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Mr();return s.jsx(FJ,{scope:n,id:i,children:s.jsx(tt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});UJ.displayName=b4;var w4="SelectLabel",S4=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=HJ(w4,n);return s.jsx(tt.div,{id:i.id,...r,ref:t})});S4.displayName=w4;var dp="SelectItem",[$J,j4]=iu(dp),_4=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...c}=e,l=xo(dp,n),d=vo(dp,n),h=l.value===r,[m,f]=y.useState(o??""),[g,x]=y.useState(!1),C=dt(t,j=>d.itemRefCallback?.(j,r,i)),_=Mr(),b=y.useRef("touch"),w=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx($J,{scope:n,value:r,disabled:i,textId:_,isSelected:h,onItemTextChange:y.useCallback(j=>{f(S=>S||(j?.textContent??"").trim())},[]),children:s.jsx(pg.ItemSlot,{scope:n,value:r,disabled:i,textValue:m,children:s.jsx(tt.div,{role:"option","aria-labelledby":_,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:C,onFocus:Oe(c.onFocus,()=>x(!0)),onBlur:Oe(c.onBlur,()=>x(!1)),onClick:Oe(c.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:Oe(c.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:Oe(c.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:Oe(c.onPointerMove,j=>{b.current=j.pointerType,i?d.onItemLeave?.():b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Oe(c.onPointerLeave,j=>{j.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Oe(c.onKeyDown,j=>{d.searchRef?.current!==""&&j.key===" "||(EJ.includes(j.key)&&w(),j.key===" "&&j.preventDefault())})})})})});_4.displayName=dp;var fd="SelectItemText",C4=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,c=xo(fd,n),l=vo(fd,n),d=j4(fd,n),h=RJ(fd,n),[m,f]=y.useState(null),g=dt(t,w=>f(w),d.onItemTextChange,w=>l.itemTextRefCallback?.(w,d.value,d.disabled)),x=m?.textContent,C=y.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:_,onNativeOptionRemove:b}=h;return hn(()=>(_(C),()=>b(C)),[_,b,C]),s.jsxs(s.Fragment,{children:[s.jsx(tt.span,{id:d.textId,...o,ref:g}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Kr.createPortal(o.children,c.valueNode):null]})});C4.displayName=fd;var N4="SelectItemIndicator",k4=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return j4(N4,n).isSelected?s.jsx(tt.span,{"aria-hidden":!0,...r,ref:t}):null});k4.displayName=N4;var m0="SelectScrollUpButton",E4=y.forwardRef((e,t)=>{const n=vo(m0,e.__scopeSelect),r=SS(m0,e.__scopeSelect),[i,o]=y.useState(!1),c=dt(t,r.onScrollButtonChange);return hn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;o(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(T4,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});E4.displayName=m0;var p0="SelectScrollDownButton",A4=y.forwardRef((e,t)=>{const n=vo(p0,e.__scopeSelect),r=SS(p0,e.__scopeSelect),[i,o]=y.useState(!1),c=dt(t,r.onScrollButtonChange);return hn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;o(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(T4,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});A4.displayName=p0;var T4=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,o=vo("SelectScrollButton",n),c=y.useRef(null),l=gg(n),d=y.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return y.useEffect(()=>()=>d(),[d]),hn(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(tt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Oe(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Oe(i.onPointerMove,()=>{o.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Oe(i.onPointerLeave,()=>{d()})})}),VJ="SelectSeparator",D4=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(tt.div,{"aria-hidden":!0,...r,ref:t})});D4.displayName=VJ;var g0="SelectArrow",GJ=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=xg(n),o=xo(g0,n),c=vo(g0,n);return o.open&&c.position==="popper"?s.jsx(dw,{...i,...r,ref:t}):null});GJ.displayName=g0;var qJ="SelectBubbleInput",R4=y.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=y.useRef(null),o=dt(r,i),c=og(t);return y.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==t&&m){const f=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(f)}},[c,t]),s.jsx(tt.select,{...n,style:{...YT,...n.style},ref:o,defaultValue:t})});R4.displayName=qJ;function P4(e){return e===""||e===void 0}function M4(e){const t=yn(e),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(c=>{const l=n.current+c;t(l),(function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),o=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function L4(e,t,n){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let c=WJ(e,Math.max(o,0));i.length===1&&(c=c.filter(h=>h!==n));const d=c.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function WJ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var KJ=l4,I4=u4,YJ=h4,XJ=f4,ZJ=m4,O4=p4,QJ=y4,B4=S4,z4=_4,JJ=C4,eee=k4,F4=E4,H4=A4,U4=D4;const gt=KJ,xt=YJ,ft=y.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(I4,{ref:r,className:le("flex h-10 w-full items-center justify-between rounded-lg","border border-border bg-card px-3 py-2 text-sm","text-foreground placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","[&>span]:line-clamp-1",e),...n,children:[t,s.jsx(XJ,{asChild:!0,children:s.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})})]}));ft.displayName=I4.displayName;const $4=y.forwardRef(({className:e,...t},n)=>s.jsx(F4,{ref:n,className:le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})}));$4.displayName=F4.displayName;const V4=y.forwardRef(({className:e,...t},n)=>s.jsx(H4,{ref:n,className:le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})}));V4.displayName=H4.displayName;const mt=y.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>s.jsx(ZJ,{children:s.jsxs(O4,{ref:i,className:le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden","rounded-lg border border-border bg-card text-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx($4,{}),s.jsx(QJ,{className:le("p-1 max-h-[300px] overflow-y-auto",n==="popper"&&"w-full min-w-(--radix-select-trigger-width)"),children:t}),s.jsx(V4,{})]})}));mt.displayName=O4.displayName;const tee=y.forwardRef(({className:e,...t},n)=>s.jsx(B4,{ref:n,className:le("py-1.5 pl-8 pr-2 text-sm font-semibold text-muted-foreground",e),...t}));tee.displayName=B4.displayName;const Qe=y.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(z4,{ref:r,className:le("relative flex w-full cursor-default select-none items-center","rounded-md py-2 pl-8 pr-2 text-sm outline-none","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","transition-colors duration-150",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(eee,{children:s.jsx(ts,{className:"h-4 w-4 text-primary"})})}),s.jsx(JJ,{children:t})]}));Qe.displayName=z4.displayName;const see=y.forwardRef(({className:e,...t},n)=>s.jsx(U4,{ref:n,className:le("-mx-1 my-1 h-px bg-border",e),...t}));see.displayName=U4.displayName;function qd(){return`img-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function nee(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function ree(e){return Aw.includes(e.type)}function Wd(e){return Aw.includes(e)}async function iee(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}async function Kd(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}async function Yd(e,t=200){return new Promise(n=>{const r=new Image;r.onload=()=>{const i=document.createElement("canvas");let o=r.width,c=r.height;o>c?o>t&&(c=c*t/o,o=t):c>t&&(o=o*t/c,c=t),i.width=o,i.height=c,i.getContext("2d")?.drawImage(r,0,0,o,c),n(i.toDataURL("image/jpeg",.8))},r.onerror=()=>n(e),r.src=e})}function Fc(e,t){if(!t.includes(e))return e;const n=e.lastIndexOf("."),r=n!==-1?e.substring(0,n):e,i=n!==-1?e.substring(n):"",o=Date.now();return`${r}-${o}${i}`}function aee({images:e,onImagesChange:t,disabled:n=!1,className:r}){const[i,o]=y.useState(!1),[c,l]=y.useState(null),d=y.useRef(null),h=e.length<ur,m=y.useCallback(async w=>{l(null);const j=Array.from(w),S=ur-e.length;if(S<=0){l(`Maximum of ${ur} images allowed`);return}const N=j.slice(0,S);j.length>S&&l(`Only ${S} more image(s) can be added. Some files were skipped.`);const T=[],E=e.map(A=>A.filename),D=[];for(const A of N){if(!ree(A)){D.push(`"${A.name}" is not a valid image type. Allowed: ${rl}`);continue}A.size>jk&&D.push(`"${A.name}" is larger than 10MB. Consider compressing it for better performance.`);try{const P=await iee(A),M=await Yd(P),B=Fc(A.name,[...E,...T.map(F=>F.filename)]);T.push({id:qd(),filename:B,mimeType:A.type,size:A.size,data:P.split(",")[1],thumbnail:M})}catch{D.push(`Failed to process "${A.name}"`)}}D.length>0&&l(D.join(" ")),T.length>0&&t([...e,...T])},[e,t]),f=y.useCallback(w=>{const j=w.target.files;j&&j.length>0&&m(j),d.current&&(d.current.value="")},[m]),g=y.useCallback(w=>{w.preventDefault(),w.stopPropagation(),o(!0)},[]),x=y.useCallback(w=>{w.preventDefault(),w.stopPropagation(),o(!1)},[]),C=y.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),o(!1),n)return;const j=w.dataTransfer?.files;j&&j.length>0&&m(j)},[n,m]),_=y.useCallback(w=>{t(e.filter(j=>j.id!==w)),l(null)},[e,t]),b=y.useCallback(()=>{!n&&h&&d.current?.click()},[n,h]);return s.jsxs("div",{className:le("space-y-3",r),children:[s.jsxs("div",{onDragOver:g,onDragLeave:x,onDrop:C,onClick:b,className:le("relative border-2 border-dashed rounded-lg p-6 transition-all cursor-pointer","flex flex-col items-center justify-center gap-2 text-center",i&&!n?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50",n&&"opacity-50 cursor-not-allowed",!h&&"opacity-50 cursor-not-allowed"),children:[s.jsx("input",{ref:d,type:"file",accept:Aw.join(","),multiple:!0,onChange:f,disabled:n||!h,className:"hidden"}),s.jsx("div",{className:le("p-3 rounded-full transition-colors",i&&!n?"bg-primary/10":"bg-muted"),children:s.jsx(d7,{className:le("h-6 w-6",i&&!n?"text-primary":"text-muted-foreground")})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:h?"Drop images here or click to browse":"Maximum images reached"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:h?`${rl} up to 10MB each (${e.length}/${ur})`:`${ur} images maximum`})]})]}),c&&s.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:[s.jsx(ct,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:c})]}),e.length>0&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:e.map(w=>s.jsxs("div",{className:"relative group rounded-lg border border-border bg-card overflow-hidden",children:[s.jsx("div",{className:"aspect-square flex items-center justify-center bg-muted",children:w.thumbnail?s.jsx("img",{src:w.thumbnail,alt:w.filename,className:"w-full h-full object-cover"}):s.jsx(Ji,{className:"h-8 w-8 text-muted-foreground"})}),s.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:[s.jsx("p",{className:"text-xs text-white font-medium truncate",children:w.filename}),s.jsx("p",{className:"text-[10px] text-white/70",children:nee(w.size)})]}),!n&&s.jsx(te,{variant:"destructive",size:"icon",className:le("absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity","rounded-full"),onClick:j=>{j.stopPropagation(),_(w.id)},children:s.jsx(Ys,{className:"h-3 w-3"})}),w.size>jk&&s.jsx("div",{className:"absolute top-1 left-1 p-1 rounded-full bg-warning/90",title:"Large file - consider compressing",children:s.jsx(ct,{className:"h-3 w-3 text-warning-foreground"})})]},w.id))})]})}const W2={Brain:oa,Scale:Tc,Zap:ai,Sparkles:us},nd={spec:{label:"agentProfile.phases.spec.label",description:"agentProfile.phases.spec.description"},planning:{label:"agentProfile.phases.planning.label",description:"agentProfile.phases.planning.description"},coding:{label:"agentProfile.phases.coding.label",description:"agentProfile.phases.coding.description"},qa:{label:"agentProfile.phases.qa.label",description:"agentProfile.phases.qa.description"}};function G4({profileId:e,model:t,thinkingLevel:n,phaseModels:r,phaseThinking:i,onProfileChange:o,onModelChange:c,onThinkingLevelChange:l,onPhaseModelsChange:d,onPhaseThinkingChange:h,disabled:m}){const{t:f}=rs("settings"),[g,x]=y.useState(!1),C=e==="custom",_=e==="auto",b=r||dr,w=i||hr,j=D=>{if(D==="custom")o("custom",t||"sonnet",n||"medium");else if(D==="auto"){const A=Xn.find(P=>P.id==="auto");A&&(o("auto",A.model,A.thinkingLevel),d&&A.phaseModels&&d(A.phaseModels),h&&A.phaseThinking&&h(A.phaseThinking))}else{const A=Xn.find(P=>P.id===D);A&&o(A.id,A.model,A.thinkingLevel)}},S=(D,A)=>{d&&d({...b,[D]:A})},N=(D,A)=>{h&&h({...w,[D]:A})},E=(()=>{if(C)return{icon:Fm,label:f("agentProfile.customConfiguration"),description:f("agentProfile.customDescription")};const D=Xn.find(A=>A.id===e);return D?{icon:W2[D.icon||"Scale"]||Tc,label:D.name,description:D.description}:{icon:us,label:"Auto (Optimized)",description:"Uses Opus across all phases with optimized thinking levels"}})();return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"agent-profile",className:"text-sm font-medium text-foreground",children:f("agentProfile.label")}),s.jsxs(gt,{value:e,onValueChange:j,disabled:m,children:[s.jsx(ft,{id:"agent-profile",className:"h-10",children:s.jsx(xt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E.icon,{className:"h-4 w-4"}),s.jsx("span",{children:E.label})]})})}),s.jsxs(mt,{children:[Xn.map(D=>{const A=W2[D.icon||"Scale"]||Tc,P=Yr.find(M=>M.value===D.model)?.label;return s.jsx(Qe,{value:D.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-4 w-4 shrink-0"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:D.name}),s.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:D.isAutoProfile?"(per-phase optimization)":`(${P} + ${D.thinkingLevel})`})]})]})},D.id)}),s.jsx(Qe,{value:"custom",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fm,{className:"h-4 w-4 shrink-0"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:f("agentProfile.custom")}),s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",f("agentProfile.customDescription"),")"]})]})]})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:E.description})]}),_&&s.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>x(!g),className:le("flex w-full items-center justify-between p-4 text-left","hover:bg-muted/50 transition-colors",!m&&"cursor-pointer"),disabled:m,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm text-foreground",children:f("agentProfile.phaseConfiguration")}),!g&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(ml,{className:"h-3 w-3"}),s.jsx("span",{children:f("agentProfile.clickToCustomize")})]})]}),g?s.jsx(Or,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),!g&&s.jsx("div",{className:"px-4 pb-4 -mt-1",children:s.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.keys(nd).map(D=>{const A=Yr.find(P=>P.value===b[D])?.label?.replace("Claude ","")||b[D];return s.jsxs("div",{className:"flex items-center justify-between rounded bg-background/50 px-2 py-1",children:[s.jsxs("span",{className:"text-muted-foreground",children:[f(nd[D].label),":"]}),s.jsx("span",{className:"font-medium",children:A})]},D)})})}),g&&s.jsx("div",{className:"px-4 pb-4 space-y-4 border-t border-border pt-4",children:Object.keys(nd).map(D=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-xs font-medium text-foreground",children:f(nd[D].label)}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:f(nd[D].description)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-[10px] text-muted-foreground",children:f("agentProfile.model")}),s.jsxs(gt,{value:b[D],onValueChange:A=>S(D,A),disabled:m,children:[s.jsx(ft,{className:"h-8 text-xs",children:s.jsx(xt,{})}),s.jsx(mt,{children:Yr.map(A=>s.jsx(Qe,{value:A.value,children:A.label},A.value))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-[10px] text-muted-foreground",children:f("agentProfile.thinking")}),s.jsxs(gt,{value:w[D],onValueChange:A=>N(D,A),disabled:m,children:[s.jsx(ft,{className:"h-8 text-xs",children:s.jsx(xt,{})}),s.jsx(mt,{children:Oc.map(A=>s.jsx(Qe,{value:A.value,children:A.label},A.value))})]})]})]})]},D))})]}),C&&s.jsxs("div",{className:"space-y-4 rounded-lg border border-border bg-muted/30 p-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"custom-model",className:"text-xs font-medium text-muted-foreground",children:f("agentProfile.model")}),s.jsxs(gt,{value:t,onValueChange:D=>c(D),disabled:m,children:[s.jsx(ft,{id:"custom-model",className:"h-9",children:s.jsx(xt,{placeholder:f("agentProfile.selectModel")})}),s.jsx(mt,{children:Yr.map(D=>s.jsx(Qe,{value:D.value,children:D.label},D.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"custom-thinking",className:"text-xs font-medium text-muted-foreground",children:f("agentProfile.thinking")}),s.jsxs(gt,{value:n,onValueChange:D=>l(D),disabled:m,children:[s.jsx(ft,{id:"custom-thinking",className:"h-9",children:s.jsx(xt,{placeholder:f("agentProfile.selectThinkingLevel")})}),s.jsx(mt,{children:Oc.map(D=>s.jsx(Qe,{value:D.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:D.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["- ",D.description]})]})},D.value))})]})]})]})]})}function oee({task:e,open:t,onOpenChange:n,onSaved:r}){const{settings:i}=dn(),o=Xn.find(ge=>ge.id===i.selectedAgentProfile)||Xn.find(ge=>ge.id==="auto"),[c,l]=y.useState(e.title),[d,h]=y.useState(e.description),[m,f]=y.useState(!1),[g,x]=y.useState(null),[C,_]=y.useState(!1),[b,w]=y.useState(!1),[j,S]=y.useState(!1),[N,T]=y.useState(e.metadata?.category||""),[E,D]=y.useState(e.metadata?.priority||""),[A,P]=y.useState(e.metadata?.complexity||""),[M,B]=y.useState(e.metadata?.impact||""),[F,U]=y.useState(()=>{if(e.metadata?.isAutoProfile)return"auto";const ge=e.metadata?.model,ae=e.metadata?.thinkingLevel;return ge&&ae?Xn.find(Be=>Be.model===ge&&Be.thinkingLevel===ae&&!Be.isAutoProfile)?.id||"custom":i.selectedAgentProfile||"auto"}),[G,$]=y.useState(e.metadata?.model||o.model),[V,Y]=y.useState(e.metadata?.thinkingLevel||o.thinkingLevel),[K,O]=y.useState(e.metadata?.phaseModels||o.phaseModels||dr),[L,I]=y.useState(e.metadata?.phaseThinking||o.phaseThinking||hr),[q,z]=y.useState(e.metadata?.attachedImages||[]),[ee,ie]=y.useState(e.metadata?.requireReviewBeforeCoding??!1),re=y.useRef(null),[X,W]=y.useState(!1);y.useEffect(()=>{if(t){l(e.title),h(e.description),T(e.metadata?.category||""),D(e.metadata?.priority||""),P(e.metadata?.complexity||""),B(e.metadata?.impact||"");const ge=e.metadata?.model,ae=e.metadata?.thinkingLevel;if(e.metadata?.isAutoProfile)U("auto"),$(ge||o.model),Y(ae||o.thinkingLevel),O(e.metadata?.phaseModels||dr),I(e.metadata?.phaseThinking||hr);else if(ge&&ae){const Be=Xn.find(et=>et.model===ge&&et.thinkingLevel===ae&&!et.isAutoProfile);U(Be?.id||"custom"),$(ge),Y(ae),O(dr),I(hr)}else U(i.selectedAgentProfile||"auto"),$(o.model),Y(o.thinkingLevel),O(o.phaseModels||dr),I(o.phaseThinking||hr);z(e.metadata?.attachedImages||[]),ie(e.metadata?.requireReviewBeforeCoding??!1),x(null),(e.metadata?.category||e.metadata?.priority||e.metadata?.complexity||e.metadata?.impact)&&_(!0),w((e.metadata?.attachedImages||[]).length>0),S(!1)}},[t,e,i.selectedAgentProfile,o.model,o.thinkingLevel]);const Q=y.useCallback(async ge=>{const ae=ge.clipboardData?.items;if(!ae)return;const Ee=[];for(let Me=0;Me<ae.length;Me++){const qe=ae[Me];qe.type.startsWith("image/")&&Ee.push(qe)}if(Ee.length===0)return;ge.preventDefault();const Be=ur-q.length;if(Be<=0){x(`Maximum of ${ur} images allowed`);return}x(null);const et=[],De=q.map(Me=>Me.filename);for(const Me of Ee.slice(0,Be)){const qe=Me.getAsFile();if(qe){if(!Wd(qe.type)){x(`Invalid image type. Allowed: ${rl}`);continue}try{const st=await Kd(qe),_t=await Yd(st),fe=qe.type.split("/")[1]||"png",Ae=`screenshot-${Date.now()}.${fe}`,Le=Fc(Ae,[...De,...et.map(We=>We.filename)]);et.push({id:qd(),filename:Le,mimeType:qe.type,size:qe.size,data:st.split(",")[1],thumbnail:_t})}catch{x("Failed to process pasted image")}}}et.length>0&&(z(Me=>[...Me,...et]),w(!0),S(!0),setTimeout(()=>S(!1),2e3))},[q]),se=y.useCallback(ge=>{ge.preventDefault(),ge.stopPropagation(),W(!0)},[]),he=y.useCallback(ge=>{ge.preventDefault(),ge.stopPropagation(),W(!1)},[]),de=y.useCallback(async ge=>{if(ge.preventDefault(),ge.stopPropagation(),W(!1),m)return;const ae=ge.dataTransfer?.files;if(!ae||ae.length===0)return;const Ee=[];for(let Me=0;Me<ae.length;Me++){const qe=ae[Me];qe.type.startsWith("image/")&&Ee.push(qe)}if(Ee.length===0)return;const Be=ur-q.length;if(Be<=0){x(`Maximum of ${ur} images allowed`);return}x(null);const et=[],De=q.map(Me=>Me.filename);for(const Me of Ee.slice(0,Be)){if(!Wd(Me.type)){x(`Invalid image type. Allowed: ${rl}`);continue}try{const qe=await Kd(Me),st=await Yd(qe),_t=Me.name||`dropped-image-${Date.now()}.${Me.type.split("/")[1]||"png"}`,fe=Fc(_t,[...De,...et.map(Ae=>Ae.filename)]);et.push({id:qd(),filename:fe,mimeType:Me.type,size:Me.size,data:qe.split(",")[1],thumbnail:st})}catch{x("Failed to process dropped image")}}et.length>0&&(z(Me=>[...Me,...et]),w(!0),S(!0),setTimeout(()=>S(!1),2e3))},[q,m]),Ne=async()=>{if(!d.trim()){x("Description is required");return}const ge=c.trim(),ae=d.trim();if(!(ge!==e.title||ae!==e.description||N!==(e.metadata?.category||"")||E!==(e.metadata?.priority||"")||A!==(e.metadata?.complexity||"")||M!==(e.metadata?.impact||"")||G!==(e.metadata?.model||"")||V!==(e.metadata?.thinkingLevel||"")||ee!==(e.metadata?.requireReviewBeforeCoding??!1)||JSON.stringify(q)!==JSON.stringify(e.metadata?.attachedImages||[]))){n(!1);return}f(!0),x(null);const Be={};N&&(Be.category=N),E&&(Be.priority=E),A&&(Be.complexity=A),M&&(Be.impact=M),G&&(Be.model=G),V&&(Be.thinkingLevel=V),F==="auto"?(Be.isAutoProfile=!0,K&&(Be.phaseModels=K),L&&(Be.phaseThinking=L)):Be.isAutoProfile=!1,q.length>0&&(Be.attachedImages=q),Be.requireReviewBeforeCoding=ee,await SQ(e.id,{title:ge,description:ae,metadata:Be})?(n(!1),r?.()):x("Failed to update task. Please try again."),f(!1)},Re=()=>{m||n(!1)},ce=d.trim().length>0;return s.jsx(sn,{open:t,onOpenChange:Re,children:s.jsxs(Xs,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Jt,{children:[s.jsx(es,{className:"text-foreground",children:"Edit Task"}),s.jsx(fs,{children:"Update task details including title, description, classification, images, and settings. Changes will be saved to the spec files."})]}),s.jsxs("div",{className:"space-y-5 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"edit-description",className:"text-sm font-medium text-foreground",children:["Description ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(_i,{ref:re,id:"edit-description",placeholder:"Describe the feature, bug fix, or improvement. Be as specific as possible about requirements, constraints, and expected behavior.",value:d,onChange:ge=>h(ge.target.value),onPaste:Q,onDragOver:se,onDragLeave:he,onDrop:de,rows:5,disabled:m,className:le(X&&!m&&"border-primary bg-primary/5 ring-2 ring-primary/20")}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tip: Paste screenshots directly with ",navigator.platform.includes("Mac")?"V":"Ctrl+V"," to add reference images."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"edit-title",className:"text-sm font-medium text-foreground",children:["Task Title ",s.jsx("span",{className:"text-muted-foreground font-normal",children:"(optional)"})]}),s.jsx(Je,{id:"edit-title",placeholder:"Leave empty to auto-generate from description",value:c,onChange:ge=>l(ge.target.value),disabled:m}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"A short, descriptive title will be generated automatically if left empty."})]}),s.jsx(G4,{profileId:F,model:G,thinkingLevel:V,phaseModels:K,phaseThinking:L,onProfileChange:(ge,ae,Ee)=>{U(ge),$(ae),Y(Ee)},onModelChange:$,onThinkingLevelChange:Y,onPhaseModelsChange:O,onPhaseThinkingChange:I,disabled:m}),j&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(Ji,{className:"h-4 w-4"}),"Image added successfully!"]}),s.jsxs("button",{type:"button",onClick:()=>_(!C),className:le("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:m,children:[s.jsx("span",{children:"Classification (optional)"}),C?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),C&&s.jsxs("div",{className:"space-y-4 p-4 rounded-lg border border-border bg-muted/30",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"edit-category",className:"text-xs font-medium text-muted-foreground",children:"Category"}),s.jsxs(gt,{value:N,onValueChange:ge=>T(ge),disabled:m,children:[s.jsx(ft,{id:"edit-category",className:"h-9",children:s.jsx(xt,{placeholder:"Select category"})}),s.jsx(mt,{children:Object.entries(yh).map(([ge,ae])=>s.jsx(Qe,{value:ge,children:ae},ge))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"edit-priority",className:"text-xs font-medium text-muted-foreground",children:"Priority"}),s.jsxs(gt,{value:E,onValueChange:ge=>D(ge),disabled:m,children:[s.jsx(ft,{id:"edit-priority",className:"h-9",children:s.jsx(xt,{placeholder:"Select priority"})}),s.jsx(mt,{children:Object.entries(ig).map(([ge,ae])=>s.jsx(Qe,{value:ge,children:ae},ge))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"edit-complexity",className:"text-xs font-medium text-muted-foreground",children:"Complexity"}),s.jsxs(gt,{value:A,onValueChange:ge=>P(ge),disabled:m,children:[s.jsx(ft,{id:"edit-complexity",className:"h-9",children:s.jsx(xt,{placeholder:"Select complexity"})}),s.jsx(mt,{children:Object.entries(bh).map(([ge,ae])=>s.jsx(Qe,{value:ge,children:ae},ge))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"edit-impact",className:"text-xs font-medium text-muted-foreground",children:"Impact"}),s.jsxs(gt,{value:M,onValueChange:ge=>B(ge),disabled:m,children:[s.jsx(ft,{id:"edit-impact",className:"h-9",children:s.jsx(xt,{placeholder:"Select impact"})}),s.jsx(mt,{children:Object.entries(rg).map(([ge,ae])=>s.jsx(Qe,{value:ge,children:ae},ge))})]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"These labels help organize and prioritize tasks. They're optional but useful for filtering."})]}),s.jsxs("button",{type:"button",onClick:()=>w(!b),className:le("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:m,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ji,{className:"h-4 w-4"}),"Reference Images (optional)",q.length>0&&s.jsx("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:q.length})]}),b?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),b&&s.jsxs("div",{className:"space-y-3 p-4 rounded-lg border border-border bg-muted/30",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Attach screenshots, mockups, or diagrams to provide visual context for the AI."}),s.jsx(aee,{images:q,onImagesChange:z,disabled:m})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-border bg-muted/30",children:[s.jsx(ca,{id:"edit-require-review",checked:ee,onCheckedChange:ge=>ie(ge===!0),disabled:m,className:"mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx(we,{htmlFor:"edit-require-review",className:"text-sm font-medium text-foreground cursor-pointer",children:"Require human review before coding"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, you'll be prompted to review the spec and implementation plan before the coding phase begins. This allows you to approve, request changes, or provide feedback."})]})]}),g&&s.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:[s.jsx(Ys,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:g})]})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:Re,disabled:m,children:"Cancel"}),s.jsx(te,{onClick:Ne,disabled:m||!ce,children:m?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}function lee({task:e}){const[t,n]=y.useState(""),[r,i]=y.useState(!1),[o,c]=y.useState("overview"),[l,d]=y.useState(!1),[h,m]=y.useState(!1),[f,g]=y.useState(!1),[x,C]=y.useState(!1),[_,b]=y.useState(!1),[w,j]=y.useState(!1),[S,N]=y.useState(null),[T,E]=y.useState(!1),[D,A]=y.useState(null),[P,M]=y.useState(null),[B,F]=y.useState(!1),[U,G]=y.useState(!1),[$,V]=y.useState(!1),[Y,K]=y.useState(!1),[O,L]=y.useState(null),[I,q]=y.useState(!1),[z,ee]=y.useState(e.status==="human_review"),[ie,re]=y.useState(null),[X,W]=y.useState(void 0),[Q,se]=y.useState(void 0),[he,de]=y.useState(null),[Ne,Re]=y.useState(!1),[ce,ge]=y.useState(new Set),ae=y.useRef(null),Ee=y.useRef(null),[Be,et]=y.useState(null),[De,Me]=y.useState(!1),[qe,st]=y.useState(!1),_t=Et(Ke=>Ke.getSelectedProject()),fe=e.status==="in_progress"||e.status==="ai_review",Ae=e.status==="human_review",Le=e.executionProgress?.phase,We=Le&&Le!=="idle"&&Le!=="complete"&&Le!=="failed",ve=xP(e),Fe=kQ(e);y.useEffect(()=>{let Ke;return fe&&!x?Ke=setTimeout(()=>{Dm(e.id).then(Xe=>{m(!Xe),C(!0)})},2e3):fe||(m(!1),C(!1)),()=>{Ke&&clearTimeout(Ke)}},[e.id,fe,x]);const Ue=Ke=>{const Xe=Ke.target,Ft=Xe.scrollHeight-Xe.scrollTop-Xe.clientHeight<100;d(!Ft)};y.useEffect(()=>{o==="logs"&&ae.current&&!l&&ae.current.scrollIntoView({behavior:"smooth"})},[e.logs,o,l]),y.useEffect(()=>{o==="logs"&&d(!1)},[o]),y.useEffect(()=>{Ae?(F(!0),L(null),Promise.all([J.getWorktreeStatus(e.id),J.getWorktreeDiff(e.id)]).then(([Ke,Xe])=>{Ke.success&&Ke.data&&A(Ke.data),Xe.success&&Xe.data&&M(Xe.data)}).catch(Ke=>{console.error("Failed to load worktree info:",Ke)}).finally(()=>{F(!1)})):(A(null),M(null))},[e.id,Ae]),y.useEffect(()=>{if(!_t)return;(async()=>{Re(!0);try{const Ft=await J.getTaskLogs(_t.id,e.specId);if(Ft.success&&Ft.data){de(Ft.data);const js=["planning","coding","validation"].find(vr=>Ft.data?.phases[vr]?.status==="active");js&&ge(new Set([js]))}}catch(Ft){console.error("Failed to load task logs:",Ft)}finally{Re(!1)}})(),J.watchTaskLogs(_t.id,e.specId);const Xe=J.onTaskLogsChanged((Ft,js)=>{if(Ft===e.specId){de(js);const vr=["planning","coding","validation"].find(ye=>js.phases[ye]?.status==="active");vr&&ge(ye=>{const Jn=new Set(ye);return Jn.add(vr),Jn})}});return()=>{Xe(),J.unwatchTaskLogs(e.specId)}},[_t,e.specId]);const Ct=y.useCallback(Ke=>{ge(Xe=>{const Ft=new Set(Xe);return Ft.has(Ke)?Ft.delete(Ke):Ft.add(Ke),Ft})},[]);y.useEffect(()=>{const Ke=`mergePreview-${e.id}`,Xe=sessionStorage.getItem(Ke);if(Xe)try{const Ft=JSON.parse(Xe);console.warn("%c[useTaskDetail] Restored merge preview from sessionStorage:","color: magenta;",Ft),et(Ft)}catch{console.warn("[useTaskDetail] Failed to parse stored merge preview"),sessionStorage.removeItem(Ke)}},[e.id]);const Ot=y.useCallback(async()=>{console.warn("%c[useTaskDetail] loadMergePreview called for task:","color: cyan; font-weight: bold;",e.id),Me(!0);try{console.warn("[useTaskDetail] Calling mergeWorktreePreview...");const Ke=await J.mergeWorktreePreview(e.id);if(console.warn("%c[useTaskDetail] mergeWorktreePreview result:","color: lime; font-weight: bold;",JSON.stringify(Ke,null,2)),Ke.success&&Ke.data?.preview){const Xe=Ke.data.preview;console.warn("%c[useTaskDetail] Setting merge preview:","color: lime; font-weight: bold;",Xe),console.warn("  - files:",Xe.files),console.warn("  - conflicts:",Xe.conflicts),console.warn("  - summary:",Xe.summary),et(Xe),sessionStorage.setItem(`mergePreview-${e.id}`,JSON.stringify(Xe))}else console.warn("%c[useTaskDetail] Preview not successful or no preview data:","color: orange;",Ke),console.warn("  - success:",Ke.success),console.warn("  - data:",Ke.data),console.warn("  - error:",Ke.error)}catch(Ke){console.error("%c[useTaskDetail] Failed to load merge preview:","color: red; font-weight: bold;",Ke)}finally{console.warn("[useTaskDetail] Setting isLoadingPreview to false"),Me(!1)}},[e.id]);return y.useEffect(()=>{Ae&&D?.exists&&!Be&&!De&&(console.warn("[useTaskDetail] Auto-loading merge preview for task:",e.id),Ot())},[Ae,D?.exists,Be,De,e.id,Ot]),{feedback:t,isSubmitting:r,activeTab:o,isUserScrolledUp:l,isStuck:h,isRecovering:f,hasCheckedRunning:x,showDeleteDialog:_,isDeleting:w,deleteError:S,isEditDialogOpen:T,worktreeStatus:D,worktreeDiff:P,isLoadingWorktree:B,isMerging:U,isDiscarding:$,showDiscardDialog:Y,workspaceError:O,showDiffDialog:I,stageOnly:z,stagedSuccess:ie,stagedProjectPath:X,suggestedCommitMessage:Q,phaseLogs:he,isLoadingLogs:Ne,expandedPhases:ce,logsEndRef:ae,logsContainerRef:Ee,selectedProject:_t,isRunning:fe,needsReview:Ae,executionPhase:Le,hasActiveExecution:We,isIncomplete:ve,taskProgress:Fe,mergePreview:Be,isLoadingPreview:De,showConflictDialog:qe,setFeedback:n,setIsSubmitting:i,setActiveTab:c,setIsUserScrolledUp:d,setIsStuck:m,setIsRecovering:g,setHasCheckedRunning:C,setShowDeleteDialog:b,setIsDeleting:j,setDeleteError:N,setIsEditDialogOpen:E,setWorktreeStatus:A,setWorktreeDiff:M,setIsLoadingWorktree:F,setIsMerging:G,setIsDiscarding:V,setShowDiscardDialog:K,setWorkspaceError:L,setShowDiffDialog:q,setStageOnly:ee,setStagedSuccess:re,setStagedProjectPath:W,setSuggestedCommitMessage:se,setPhaseLogs:de,setIsLoadingLogs:Re,setExpandedPhases:ge,setMergePreview:et,setIsLoadingPreview:Me,setShowConflictDialog:st,handleLogsScroll:Ue,togglePhase:Ct,loadMergePreview:Ot}}const K2={feature:Ep,bug_fix:FA,refactoring:eo,documentation:ms,security:Uc,performance:ih,ui_ux:ah,infrastructure:eo,testing:ms};function cee({task:e}){const t=e.metadata&&(e.metadata.category||e.metadata.priority||e.metadata.complexity||e.metadata.impact||e.metadata.securitySeverity||e.metadata.sourceType);return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 pb-4 border-b border-border",children:[t&&s.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[e.metadata?.category&&s.jsxs(je,{variant:"outline",className:le("text-xs",kw[e.metadata.category]),children:[K2[e.metadata.category]&&(()=>{const n=K2[e.metadata.category];return s.jsx(n,{className:"h-3 w-3 mr-1"})})(),yh[e.metadata.category]]}),e.metadata?.priority&&s.jsx(je,{variant:"outline",className:le("text-xs",xR[e.metadata.priority]),children:ig[e.metadata.priority]}),e.metadata?.complexity&&s.jsx(je,{variant:"outline",className:le("text-xs",Ew[e.metadata.complexity]),children:bh[e.metadata.complexity]}),e.metadata?.impact&&s.jsx(je,{variant:"outline",className:le("text-xs",sp[e.metadata.impact]),children:rg[e.metadata.impact]}),e.metadata?.securitySeverity&&s.jsxs(je,{variant:"outline",className:le("text-xs",sp[e.metadata.securitySeverity]),children:[s.jsx(Uc,{className:"h-3 w-3 mr-1"}),e.metadata.securitySeverity]}),e.metadata?.sourceType&&s.jsx(je,{variant:"secondary",className:"text-xs",children:e.metadata.sourceType==="ideation"&&e.metadata.ideationType?no[e.metadata.ideationType]||e.metadata.ideationType:e.metadata.sourceType})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Ci,{className:"h-3 w-3"}),"Created ",Ob(e.createdAt)]}),s.jsx("span",{className:"text-border",children:""}),s.jsxs("span",{children:["Updated ",Ob(e.updatedAt)]})]})]}),e.description&&s.jsx("div",{children:s.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:bD(e.description,800)})}),e.metadata&&s.jsxs("div",{className:"space-y-4 pt-2",children:[e.metadata.rationale&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(Ni,{className:"h-3 w-3 text-warning"}),"Rationale"]}),s.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.rationale})]}),e.metadata.problemSolved&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(Ep,{className:"h-3 w-3 text-success"}),"Problem Solved"]}),s.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.problemSolved})]}),e.metadata.targetAudience&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(wi,{className:"h-3 w-3 text-info"}),"Target Audience"]}),s.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.targetAudience})]}),e.metadata.dependencies&&e.metadata.dependencies.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(bn,{className:"h-3 w-3 text-purple-400"}),"Dependencies"]}),s.jsx("ul",{className:"text-sm text-foreground/80 list-disc list-inside space-y-0.5",children:e.metadata.dependencies.map((n,r)=>s.jsx("li",{children:n},r))})]}),e.metadata.acceptanceCriteria&&e.metadata.acceptanceCriteria.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(GA,{className:"h-3 w-3 text-success"}),"Acceptance Criteria"]}),s.jsx("ul",{className:"text-sm text-foreground/80 list-disc list-inside space-y-0.5",children:e.metadata.acceptanceCriteria.map((n,r)=>s.jsx("li",{children:n},r))})]}),e.metadata.affectedFiles&&e.metadata.affectedFiles.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[s.jsx(ms,{className:"h-3 w-3"}),"Affected Files"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.metadata.affectedFiles.map((n,r)=>s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(je,{variant:"secondary",className:"text-xs font-mono cursor-help",children:n.split("/").pop()})}),s.jsx(jt,{side:"top",className:"font-mono text-xs",children:n})]},r))})]})]})]})}function uee({isStuck:e,isIncomplete:t,isRecovering:n,taskProgress:r,onRecover:i,onResume:o}){return!e&&!t?null:s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"rounded-xl border border-warning/30 bg-warning/10 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Is,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-sm text-foreground mb-1",children:"Task Appears Stuck"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"This task is marked as running but no active process was found. This can happen if the app crashed or the process was terminated unexpectedly."}),s.jsx(te,{variant:"warning",size:"sm",onClick:i,disabled:n,className:"w-full",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Recovering..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"mr-2 h-4 w-4"}),"Recover & Restart Task"]})})]})]})}),t&&!e&&s.jsx("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/10 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Is,{className:"h-5 w-5 text-orange-400 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-sm text-foreground mb-1",children:"Task Incomplete"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["This task has a spec and implementation plan but never completed any subtasks (",r.completed,"/",r.total,"). The process likely crashed during spec creation. Click Resume to continue implementation."]}),s.jsxs(te,{variant:"default",size:"sm",onClick:o,className:"w-full",children:[s.jsx(ei,{className:"mr-2 h-4 w-4"}),"Resume Task"]})]})]})})]})}function dee(e){switch(e){case"completed":return s.jsx(rt,{className:"h-4 w-4 text-[var(--success)]"});case"in_progress":return s.jsx(Ci,{className:"h-4 w-4 text-[var(--info)] animate-pulse"});case"failed":return s.jsx(uo,{className:"h-4 w-4 text-[var(--error)]"});default:return s.jsx(ct,{className:"h-4 w-4 text-muted-foreground"})}}function hee({task:e}){const t=yD(e.subtasks);return s.jsx(cs,{className:"h-full",children:s.jsx("div",{className:"p-4 space-y-3",children:e.subtasks.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(GA,{className:"h-10 w-10 mx-auto mb-3 text-muted-foreground/30"}),s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No subtasks defined"}),s.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Implementation subtasks will appear here after planning"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pb-2 border-b border-border/50",children:[s.jsxs("span",{children:[e.subtasks.filter(n=>n.status==="completed").length," of ",e.subtasks.length," completed"]}),s.jsxs("span",{className:"tabular-nums",children:[t,"%"]})]}),e.subtasks.map((n,r)=>s.jsx("div",{className:le("rounded-xl border border-border bg-secondary/30 p-3 transition-all duration-200 hover:bg-secondary/50",n.status==="in_progress"&&"border-[var(--info)]/50 bg-[var(--info-light)] ring-1 ring-info/20",n.status==="completed"&&"border-[var(--success)]/50 bg-[var(--success-light)]",n.status==="failed"&&"border-[var(--error)]/50 bg-[var(--error-light)]"),children:s.jsxs("div",{className:"flex items-start gap-2",children:[dee(n.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:le("text-[10px] font-medium px-1.5 py-0.5 rounded-full",n.status==="completed"?"bg-success/20 text-success":n.status==="in_progress"?"bg-info/20 text-info":n.status==="failed"?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"),children:["#",r+1]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx("span",{className:"text-sm font-medium text-foreground truncate cursor-default",children:n.id})}),s.jsx(jt,{side:"top",className:"max-w-xs",children:s.jsx("p",{className:"font-mono text-xs",children:n.id})})]})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2 cursor-default",children:n.description})}),n.description&&n.description.length>80&&s.jsx(jt,{side:"bottom",className:"max-w-sm",children:s.jsx("p",{className:"text-xs",children:n.description})})]}),n.files&&n.files.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:n.files.map(i=>s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(je,{variant:"secondary",className:"text-xs font-mono cursor-help",children:[s.jsx(ms,{className:"mr-1 h-3 w-3"}),i.split("/").pop()]})}),s.jsx(jt,{side:"top",className:"font-mono text-xs",children:i})]},i))})]})]})},n.id))]})})})}var vg="Collapsible",[fee]=An(vg),[mee,jS]=fee(vg),q4=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:c,...l}=e,[d,h]=ii({prop:r,defaultProp:i??!1,onChange:c,caller:vg});return s.jsx(mee,{scope:n,disabled:o,contentId:Mr(),open:d,onOpenToggle:y.useCallback(()=>h(m=>!m),[h]),children:s.jsx(tt.div,{"data-state":CS(d),"data-disabled":o?"":void 0,...l,ref:t})})});q4.displayName=vg;var W4="CollapsibleTrigger",K4=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=jS(W4,n);return s.jsx(tt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":CS(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:Oe(e.onClick,i.onOpenToggle)})});K4.displayName=W4;var _S="CollapsibleContent",Y4=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jS(_S,e.__scopeCollapsible);return s.jsx(wn,{present:n||i.open,children:({present:o})=>s.jsx(pee,{...r,ref:t,present:o})})});Y4.displayName=_S;var pee=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...o}=e,c=jS(_S,n),[l,d]=y.useState(r),h=y.useRef(null),m=dt(t,h),f=y.useRef(0),g=f.current,x=y.useRef(0),C=x.current,_=c.open||l,b=y.useRef(_),w=y.useRef(void 0);return y.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),hn(()=>{const j=h.current;if(j){w.current=w.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const S=j.getBoundingClientRect();f.current=S.height,x.current=S.width,b.current||(j.style.transitionDuration=w.current.transitionDuration,j.style.animationName=w.current.animationName),d(r)}},[c.open,r]),s.jsx(tt.div,{"data-state":CS(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!_,...o,ref:m,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...e.style},children:_&&i})});function CS(e){return e?"open":"closed"}var gee=q4;const yo=gee,bo=K4,wo=Y4,xee={planning:"Planning",coding:"Coding",validation:"Validation"},vee={planning:ml,coding:ms,validation:k8},Y2={planning:"text-amber-500 bg-amber-500/10 border-amber-500/30",coding:"text-info bg-info/10 border-info/30",validation:"text-purple-500 bg-purple-500/10 border-purple-500/30"},yee={planning:"spec",coding:"coding",validation:"qa"},X2={opus:"Opus",sonnet:"Sonnet",haiku:"Haiku"},Z2={none:"None",low:"Low",medium:"Med",high:"High",ultrathink:"Ultra"};function bee(e,t){if(!e)return null;const n=yee[t];if(e.isAutoProfile&&e.phaseModels&&e.phaseThinking){const r=e.phaseModels[n],i=e.phaseThinking[n];return{model:X2[r]||r,thinking:Z2[i]||i}}return e.model&&e.thinkingLevel?{model:X2[e.model]||e.model,thinking:Z2[e.thinkingLevel]||e.thinkingLevel}:null}function wee({task:e,phaseLogs:t,isLoadingLogs:n,expandedPhases:r,isStuck:i,logsEndRef:o,logsContainerRef:c,onLogsScroll:l,onTogglePhase:d}){return s.jsx("div",{ref:c,className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",onScroll:l,children:s.jsx("div",{className:"p-4 space-y-2",children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t?s.jsxs(s.Fragment,{children:[["planning","coding","validation"].map(h=>s.jsx(See,{phase:h,phaseLog:t.phases[h],isExpanded:r.has(h),onToggle:()=>d(h),isTaskStuck:i,phaseConfig:bee(e.metadata,h)},h)),s.jsx("div",{ref:o})]}):e.logs&&e.logs.length>0?s.jsxs("pre",{className:"text-xs font-mono text-muted-foreground whitespace-pre-wrap break-all",children:[e.logs.join(""),s.jsx("div",{ref:o})]}):s.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[s.jsx(tl,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),s.jsx("p",{children:"No logs yet"}),s.jsx("p",{className:"text-xs mt-1",children:"Logs will appear here when the task runs"})]})})})}function See({phase:e,phaseLog:t,isExpanded:n,onToggle:r,isTaskStuck:i,phaseConfig:o}){const c=vee[e],l=t?.status||"pending",d=(t?.entries.length||0)>0,h=()=>{switch(l){case"active":return i?s.jsxs(je,{variant:"outline",className:"text-xs bg-warning/10 text-warning border-warning/30 flex items-center gap-1",children:[s.jsx(Is,{className:"h-3 w-3"}),"Interrupted"]}):s.jsxs(je,{variant:"outline",className:"text-xs bg-info/10 text-info border-info/30 flex items-center gap-1",children:[s.jsx(Ie,{className:"h-3 w-3 animate-spin"}),"Running"]});case"completed":return s.jsxs(je,{variant:"outline",className:"text-xs bg-success/10 text-success border-success/30 flex items-center gap-1",children:[s.jsx(rt,{className:"h-3 w-3"}),"Complete"]});case"failed":return s.jsxs(je,{variant:"outline",className:"text-xs bg-destructive/10 text-destructive border-destructive/30 flex items-center gap-1",children:[s.jsx(uo,{className:"h-3 w-3"}),"Failed"]});default:return s.jsx(je,{variant:"secondary",className:"text-xs text-muted-foreground",children:"Pending"})}},m=i&&l==="active";return s.jsxs(yo,{open:n,onOpenChange:r,children:[s.jsx(bo,{asChild:!0,children:s.jsxs("button",{className:le("w-full flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-secondary/50",l==="active"&&!m&&Y2[e],m&&"border-warning/30 bg-warning/5",l==="completed"&&"border-success/30 bg-success/5",l==="failed"&&"border-destructive/30 bg-destructive/5",l==="pending"&&"border-border bg-secondary/30"),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[n?s.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(c,{className:le("h-4 w-4",m?"text-warning":l==="active"?Y2[e].split(" ")[0]:"text-muted-foreground")}),s.jsx("span",{className:"font-medium text-sm",children:xee[e]}),d&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t?.entries.length," entries)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[o&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-0.5",title:`Model: ${o.model}`,children:[s.jsx(o8,{className:"h-3 w-3"}),s.jsx("span",{children:o.model})]}),s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsxs("div",{className:"flex items-center gap-0.5",title:`Thinking: ${o.thinking}`,children:[s.jsx(oa,{className:"h-3 w-3"}),s.jsx("span",{children:o.thinking})]})]}),h()]})]})}),s.jsx(wo,{children:s.jsx("div",{className:"mt-1 ml-6 border-l-2 border-border pl-4 py-2 space-y-1",children:d?t?.entries.map((f,g)=>s.jsx(jee,{entry:f},`${f.timestamp}-${g}`)):s.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No logs yet"})})})]})}function jee({entry:e}){const[t,n]=y.useState(!1),r=!!e.detail,i=l=>{switch(l){case"Read":return{icon:pr,label:"Reading",color:"text-blue-500 bg-blue-500/10"};case"Glob":return{icon:B0,label:"Searching files",color:"text-amber-500 bg-amber-500/10"};case"Grep":return{icon:bi,label:"Searching code",color:"text-green-500 bg-green-500/10"};case"Edit":return{icon:ml,label:"Editing",color:"text-purple-500 bg-purple-500/10"};case"Write":return{icon:ms,label:"Writing",color:"text-cyan-500 bg-cyan-500/10"};case"Bash":return{icon:tl,label:"Running",color:"text-orange-500 bg-orange-500/10"};default:return{icon:eo,label:l,color:"text-muted-foreground bg-muted"}}},o=l=>{try{return new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}},c=()=>e.subphase?s.jsx(je,{variant:"outline",className:"text-[9px] px-1 py-0 ml-1 text-muted-foreground border-muted-foreground/30",children:e.subphase}):null;if(e.type==="tool_start"&&e.tool_name){const{icon:l,label:d,color:h}=i(e.tool_name);return s.jsx("div",{className:"flex flex-col",children:s.jsxs("div",{className:le("inline-flex items-center gap-2 rounded-md px-2 py-1 text-xs",h),children:[s.jsx(l,{className:"h-3 w-3 animate-pulse"}),s.jsx("span",{className:"font-medium",children:d}),e.tool_input&&s.jsx("span",{className:"text-muted-foreground truncate max-w-[500px]",title:e.tool_input,children:e.tool_input}),s.jsx(c,{})]})})}if(e.type==="tool_end"&&e.tool_name){const{icon:l,color:d}=i(e.tool_name);return s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:le("inline-flex items-center gap-2 rounded-md px-2 py-1 text-xs",d,"opacity-60"),children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx(rt,{className:"h-3 w-3 text-success"}),s.jsx("span",{className:"text-muted-foreground",children:"Done"})]}),r&&s.jsx("button",{onClick:()=>n(!t),className:le("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"h-2.5 w-2.5"}),s.jsx("span",{children:"Hide output"})]}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"h-2.5 w-2.5"}),s.jsx("span",{children:"Show output"})]})})]}),r&&t&&s.jsx("div",{className:"mt-1.5 ml-4 p-2 bg-secondary/30 rounded-md border border-border/50 overflow-x-auto",children:s.jsx("pre",{className:"text-[10px] text-muted-foreground whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]})}return e.type==="error"?s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive bg-destructive/10 rounded-md px-2 py-1",children:[s.jsx(uo,{className:"h-3 w-3 mt-0.5 shrink-0"}),s.jsx("span",{className:"break-words flex-1",children:e.content}),s.jsx(c,{}),r&&s.jsx("button",{onClick:()=>n(!t),className:le("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?s.jsx(Gt,{className:"h-2.5 w-2.5"}):s.jsx(vs,{className:"h-2.5 w-2.5"})})]}),r&&t&&s.jsx("div",{className:"mt-1.5 ml-4 p-2 bg-destructive/5 rounded-md border border-destructive/20 overflow-x-auto",children:s.jsx("pre",{className:"text-[10px] text-destructive/80 whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]}):e.type==="success"?s.jsxs("div",{className:"flex items-start gap-2 text-xs text-success bg-success/10 rounded-md px-2 py-1",children:[s.jsx(rt,{className:"h-3 w-3 mt-0.5 shrink-0"}),s.jsx("span",{className:"break-words flex-1",children:e.content}),s.jsx(c,{})]}):e.type==="info"?s.jsxs("div",{className:"flex items-start gap-2 text-xs text-info bg-info/10 rounded-md px-2 py-1",children:[s.jsx(sa,{className:"h-3 w-3 mt-0.5 shrink-0"}),s.jsx("span",{className:"break-words flex-1",children:e.content}),s.jsx(c,{})]}):s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground py-0.5",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground/60 tabular-nums shrink-0",children:o(e.timestamp)}),s.jsx("span",{className:"break-words whitespace-pre-wrap flex-1",children:e.content}),s.jsx(c,{}),r&&s.jsx("button",{onClick:()=>n(!t),className:le("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"h-2.5 w-2.5"}),s.jsx("span",{children:"Less"})]}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"h-2.5 w-2.5"}),s.jsx("span",{children:"More"})]})})]}),r&&t&&s.jsx("div",{className:"mt-1.5 ml-12 p-2 bg-secondary/30 rounded-md border border-border/50 overflow-x-auto",children:s.jsx("pre",{className:"text-[10px] text-muted-foreground whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]})}function X4(){const[e,t]=y.useState(null),[n,r]=y.useState(!1);return{openTerminal:async(o,c)=>{r(!0),t(null);try{const l=await J.createTerminal({id:o,cwd:c});l.success||(t(l.error||"Failed to open terminal"),console.error("[Terminal] Failed to open:",l.error))}catch(l){const d=l instanceof Error?l.message:"Unknown error";t(`Failed to open terminal: ${d}`),console.error("[Terminal] Exception:",l)}finally{r(!1)}},error:e,isOpening:n}}function _ee({stagedSuccess:e,stagedProjectPath:t,task:n,suggestedCommitMessage:r}){const[i,o]=y.useState(r||""),[c,l]=y.useState(!1),{openTerminal:d,error:h,isOpening:m}=X4(),f=async()=>{if(i)try{await navigator.clipboard.writeText(i),l(!0),setTimeout(()=>l(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};return s.jsxs("div",{className:"rounded-xl border border-success/30 bg-success/10 p-4",children:[s.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[s.jsx(Ko,{className:"h-4 w-4 text-success"}),"Changes Staged Successfully"]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e}),r&&s.jsxs("div",{className:"bg-background/50 rounded-lg p-3 mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[s.jsx(us,{className:"h-3 w-3 text-purple-400"}),"AI-generated commit message"]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:f,className:"h-6 px-2 text-xs",disabled:!i,children:c?s.jsxs(s.Fragment,{children:[s.jsx(ts,{className:"h-3 w-3 mr-1 text-success"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ac,{className:"h-3 w-3 mr-1"}),"Copy"]})})]}),s.jsx(_i,{value:i,onChange:g=>o(g.target.value),className:"font-mono text-xs min-h-[100px] bg-background/80 resize-y",placeholder:"Commit message..."}),s.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1.5",children:["Edit as needed, then copy and use with ",s.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "..."'})]})]}),s.jsxs("div",{className:"bg-background/50 rounded-lg p-3 mb-3",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next steps:"}),s.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Open your project in your IDE or terminal"}),s.jsxs("li",{children:["Review the staged changes with ",s.jsx("code",{className:"bg-background px-1 rounded",children:"git status"})," and ",s.jsx("code",{className:"bg-background px-1 rounded",children:"git diff --staged"})]}),s.jsxs("li",{children:["Commit when ready: ",s.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "your message"'})]})]})]}),t&&s.jsxs(s.Fragment,{children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>d(`project-${n.id}`,t),className:"w-full",disabled:m,children:[s.jsx(Fs,{className:"mr-2 h-4 w-4"}),m?"Opening Terminal...":"Open Project in Terminal"]}),h&&s.jsx("div",{className:"mt-2 text-sm text-red-600",children:h})]})]})}function Cee({task:e,worktreeStatus:t,workspaceError:n,stageOnly:r,mergePreview:i,isLoadingPreview:o,isMerging:c,isDiscarding:l,onShowDiffDialog:d,onShowDiscardDialog:h,onShowConflictDialog:m,onLoadMergePreview:f,onStageOnlyChange:g,onMerge:x}){const{openTerminal:C,error:_,isOpening:b}=X4(),w=i?.gitConflicts?.hasConflicts,j=i?.uncommittedChanges?.hasChanges,S=i?.uncommittedChanges?.count||0,N=i&&i.conflicts.length>0;return s.jsxs("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 bg-muted/30 border-b border-border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-medium text-sm text-foreground flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 text-purple-400"}),"Build Ready for Review"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>d(!0),className:"h-7 px-2 text-xs",children:[s.jsx(zs,{className:"h-3.5 w-3.5 mr-1"}),"View"]}),t.worktreePath&&s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>C(`open-${e.id}`,t.worktreePath),className:"h-7 px-2",title:"Open in terminal",disabled:b,children:s.jsx(tl,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[s.jsx(ms,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium text-foreground",children:t.filesChanged||0})," files"]}),s.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[s.jsx(Cp,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium text-foreground",children:t.commitCount||0})," commits"]}),s.jsxs("span",{className:"flex items-center gap-1 text-success",children:[s.jsx(ys,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:t.additions||0})]}),s.jsxs("span",{className:"flex items-center gap-1 text-destructive",children:[s.jsx(U0,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:t.deletions||0})]})]}),t.branch&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[s.jsx("code",{className:"bg-background/80 px-1.5 py-0.5 rounded text-[11px]",children:t.branch}),s.jsx("span",{className:"mx-1.5",children:""}),s.jsx("code",{className:"bg-background/80 px-1.5 py-0.5 rounded text-[11px]",children:t.baseBranch||"main"})]}),t.worktreePath&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground font-mono",children:[" ",t.worktreePath]}),_&&s.jsx("div",{className:"mt-2 text-sm text-red-600",children:_})]}),s.jsxs("div",{className:"px-4 py-3 space-y-3",children:[n&&s.jsxs("div",{className:"flex items-start gap-2 p-2.5 rounded-lg bg-destructive/10 border border-destructive/20",children:[s.jsx(Is,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-destructive",children:n})]}),j&&s.jsxs("div",{className:"flex items-start gap-2 p-2.5 rounded-lg bg-warning/10 border border-warning/20",children:[s.jsx(Is,{className:"h-4 w-4 text-warning mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium text-warning",children:[S," uncommitted ",S===1?"change":"changes"," in main project"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Commit or stash them before staging to avoid conflicts."}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{const T=t.worktreePath?.replace(".worktrees/"+e.specId,"")||"";T&&C(`stash-${e.id}`,T)},className:"text-xs h-6 mt-2",disabled:b,children:[s.jsx(tl,{className:"h-3 w-3 mr-1"}),b?"Opening...":"Open Terminal"]})]})]}),o&&!i&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm py-2",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Checking for conflicts..."]}),i&&s.jsxs("div",{className:le("flex items-center justify-between p-2.5 rounded-lg border",w||N?"bg-warning/10 border-warning/20":"bg-success/10 border-success/20"),children:[s.jsx("div",{className:"flex items-center gap-2",children:w?s.jsxs(s.Fragment,{children:[s.jsx(Is,{className:"h-4 w-4 text-warning"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-warning",children:"Branch Diverged"}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"AI will resolve"})]})]}):N?s.jsxs(s.Fragment,{children:[s.jsx(Is,{className:"h-4 w-4 text-warning"}),s.jsxs("span",{className:"text-sm font-medium text-warning",children:[i.conflicts.length," conflict",i.conflicts.length!==1?"s":""]})]}):s.jsxs(s.Fragment,{children:[s.jsx(ta,{className:"h-4 w-4 text-success"}),s.jsx("span",{className:"text-sm font-medium text-success",children:"Ready to merge"}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:[i.summary.totalFiles," files"]})]})}),s.jsxs("div",{className:"flex items-center gap-1",children:[(w||N)&&s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"h-7 text-xs",children:"Details"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:f,disabled:o,className:"h-7 px-2",title:"Refresh",children:o?s.jsx(Ie,{className:"h-3.5 w-3.5 animate-spin"}):s.jsx(ho,{className:"h-3.5 w-3.5"})})]})]}),w&&i?.gitConflicts&&s.jsxs("div",{className:"text-xs text-muted-foreground pl-6",children:["Main branch has ",i.gitConflicts.commitsBehind," new commit",i.gitConflicts.commitsBehind!==1?"s":"",".",i.gitConflicts.conflictingFiles.length>0&&s.jsxs("span",{className:"text-warning",children:[" ",i.gitConflicts.conflictingFiles.length," file",i.gitConflicts.conflictingFiles.length!==1?"s":""," need merging."]})]})]}),s.jsxs("div",{className:"px-4 py-3 bg-muted/20 border-t border-border space-y-3",children:[s.jsxs("label",{className:"inline-flex items-center gap-2.5 text-sm cursor-pointer select-none px-3 py-2 rounded-lg border border-border bg-background/50 hover:bg-background/80 transition-colors",children:[s.jsx(ca,{checked:r,onCheckedChange:T=>g(T===!0),className:"border-muted-foreground/50 data-[state=checked]:border-primary"}),s.jsx("span",{className:le("transition-colors",r?"text-foreground":"text-muted-foreground"),children:"Stage only (review in IDE before committing)"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:w?"warning":"success",onClick:x,disabled:c||l,className:"flex-1",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),w?"Resolving...":r?"Staging...":"Merging..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ko,{className:"mr-2 h-4 w-4"}),w?r?"Stage with AI Merge":"Merge with AI":r?"Stage Changes":"Merge to Main"]})}),s.jsx(te,{variant:"outline",size:"icon",onClick:()=>h(!0),disabled:c||l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 hover:border-destructive/30",title:"Discard build",children:s.jsx(jb,{className:"h-4 w-4"})})]})]})]})}function Nee({feedback:e,isSubmitting:t,onFeedbackChange:n,onReject:r}){return s.jsxs("div",{className:"rounded-xl border border-warning/30 bg-warning/10 p-4",children:[s.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-warning"}),"Request Changes"]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Found issues? Describe what needs to be fixed and the AI will continue working on it."}),s.jsx(_i,{placeholder:"Describe the issues or changes needed...",value:e,onChange:i=>n(i.target.value),className:"mb-3",rows:3}),s.jsx(te,{variant:"warning",onClick:r,disabled:t||!e.trim(),className:"w-full",children:t?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"mr-2 h-4 w-4"}),"Request Changes"]})})]})}function kee({open:e,task:t,worktreeStatus:n,isDiscarding:r,onOpenChange:i,onDiscard:o}){return s.jsx(po,{open:e,onOpenChange:i,children:s.jsxs(da,{children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2",children:[s.jsx(jb,{className:"h-5 w-5 text-destructive"}),"Discard Build"]}),s.jsx(pa,{asChild:!0,children:s.jsxs("div",{className:"text-sm text-muted-foreground space-y-3",children:[s.jsxs("p",{children:["Are you sure you want to discard all changes for ",s.jsxs("strong",{className:"text-foreground",children:['"',t.title,'"']}),"?"]}),s.jsx("p",{className:"text-destructive",children:"This will permanently delete the isolated workspace and all uncommitted changes. The task will be moved back to Planning status."}),n?.exists&&s.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-muted-foreground",children:"Files changed:"}),s.jsx("span",{children:n.filesChanged||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Lines:"}),s.jsxs("span",{className:"text-success",children:["+",n.additions||0]}),s.jsxs("span",{className:"text-destructive",children:["-",n.deletions||0]})]})]})]})})]}),s.jsxs(fa,{children:[s.jsx(go,{disabled:r,children:"Cancel"}),s.jsx(pl,{onClick:c=>{c.preventDefault(),o()},disabled:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Discarding..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jb,{className:"mr-2 h-4 w-4"}),"Discard Build"]})})]})]})})}function Eee({open:e,worktreeDiff:t,onOpenChange:n}){return s.jsx(po,{open:e,onOpenChange:n,children:s.jsxs(da,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2",children:[s.jsx(zs,{className:"h-5 w-5 text-purple-400"}),"Changed Files"]}),s.jsx(pa,{children:t?.summary||"No changes found"})]}),s.jsx("div",{className:"flex-1 overflow-auto min-h-0 -mx-6 px-6",children:t?.files&&t.files.length>0?s.jsx("div",{className:"space-y-2",children:t.files.map((r,i)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx(ms,{className:le("h-4 w-4 shrink-0",r.status==="added"&&"text-success",r.status==="deleted"&&"text-destructive",r.status==="modified"&&"text-info",r.status==="renamed"&&"text-warning")}),s.jsx("span",{className:"text-sm font-mono truncate",children:r.path})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-2",children:[s.jsx(je,{variant:"secondary",className:le("text-xs",r.status==="added"&&"bg-success/10 text-success",r.status==="deleted"&&"bg-destructive/10 text-destructive",r.status==="modified"&&"bg-info/10 text-info",r.status==="renamed"&&"bg-warning/10 text-warning"),children:r.status}),s.jsxs("span",{className:"text-xs text-success",children:["+",r.additions]}),s.jsxs("span",{className:"text-xs text-destructive",children:["-",r.deletions]})]})]},i))}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No changed files found"})}),s.jsx(fa,{className:"mt-4",children:s.jsx(go,{children:"Close"})})]})})}function Aee(e){switch(e){case"none":case"low":return s.jsx(ta,{className:"h-4 w-4 text-success"});case"medium":return s.jsx(Is,{className:"h-4 w-4 text-warning"});case"high":case"critical":return s.jsx(uo,{className:"h-4 w-4 text-destructive"});default:return s.jsx(ct,{className:"h-4 w-4 text-muted-foreground"})}}function Tee(e){switch(e){case"none":case"low":return"bg-success/10 text-success";case"medium":return"bg-warning/10 text-warning";case"high":case"critical":return"bg-destructive/10 text-destructive";default:return"bg-muted text-muted-foreground"}}function Dee({open:e,mergePreview:t,stageOnly:n,onOpenChange:r,onMerge:i}){return s.jsx(po,{open:e,onOpenChange:r,children:s.jsxs(da,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"h-5 w-5 text-warning"}),"Merge Conflicts Preview"]}),s.jsxs(pa,{children:[t?.conflicts.length||0," potential conflict",(t?.conflicts.length||0)!==1?"s":""," detected.",t&&t.summary.autoMergeable>0&&s.jsxs("span",{className:"text-success ml-1",children:[t.summary.autoMergeable," can be auto-merged."]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto min-h-0 -mx-6 px-6",children:t?.conflicts&&t.conflicts.length>0?s.jsx("div",{className:"space-y-3",children:t.conflicts.map((o,c)=>s.jsxs("div",{className:le("p-3 rounded-lg border",o.canAutoMerge?"bg-secondary/30 border-border":o.severity==="high"||o.severity==="critical"?"bg-destructive/10 border-destructive/30":"bg-warning/10 border-warning/30"),children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[Aee(o.severity),s.jsx("span",{className:"text-sm font-mono truncate",children:o.file})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx(je,{variant:"secondary",className:le("text-xs",Tee(o.severity)),children:o.severity}),o.canAutoMerge&&s.jsx(je,{variant:"secondary",className:"text-xs bg-success/10 text-success",children:"auto-merge"})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.location&&s.jsxs("div",{children:[s.jsx("span",{className:"text-foreground/70",children:"Location:"})," ",o.location]}),o.reason&&s.jsxs("div",{children:[s.jsx("span",{className:"text-foreground/70",children:"Reason:"})," ",o.reason]}),o.strategy&&s.jsxs("div",{children:[s.jsx("span",{className:"text-foreground/70",children:"Strategy:"})," ",o.strategy]})]})]},c))}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No conflicts detected"})}),s.jsxs(fa,{className:"mt-4",children:[s.jsx(go,{children:"Close"}),s.jsxs(pl,{onClick:o=>{o.preventDefault(),r(!1),i()},className:"bg-warning text-warning-foreground hover:bg-warning/90",children:[s.jsx(Ko,{className:"mr-2 h-4 w-4"}),n?"Stage with AI Merge":"Merge with AI"]})]})]})})}function Ree({message:e="Loading workspace info..."}){return s.jsx("div",{className:"rounded-xl border border-border bg-secondary/30 p-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{className:"text-sm",children:e})]})})}function Pee({task:e,onClose:t}){const[n,r]=y.useState(!1),i=async()=>{if(e){r(!0);try{await cp(e.id,"done"),t?.()}catch(o){console.error("Error marking task as done:",o)}finally{r(!1)}}};return s.jsxs("div",{className:"rounded-xl border border-border bg-secondary/30 p-4",children:[s.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-muted-foreground"}),"No Workspace Found"]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No isolated workspace was found for this task. The changes may have been made directly in your project."}),e&&e.status==="human_review"&&s.jsx(te,{onClick:i,disabled:n,size:"sm",variant:"default",className:"w-full",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Mark as Done"]})})]})}function Mee({task:e,projectPath:t,hasWorktree:n=!1,onClose:r}){const[i,o]=y.useState(!1),[c,l]=y.useState(null),d=async()=>{o(!0),l(null);try{const h=await J.discardWorktree(e.id);if(!h.success){l(h.error||"Failed to delete worktree");return}await cp(e.id,"done"),r?.()}catch(h){console.error("Error deleting worktree:",h),l(h instanceof Error?h.message:"Failed to delete worktree")}finally{o(!1)}};return s.jsxs("div",{className:"rounded-xl border border-success/30 bg-success/10 p-4",children:[s.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[s.jsx(Ko,{className:"h-4 w-4 text-success"}),"Changes Staged in Project"]}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["This task's changes have been staged in your main project",e.stagedAt?` on ${new Date(e.stagedAt).toLocaleDateString()}`:"","."]}),s.jsxs("div",{className:"bg-background/50 rounded-lg p-3 mb-3",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next steps:"}),s.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Review staged changes with ",s.jsx("code",{className:"bg-background px-1 rounded",children:"git status"})," and ",s.jsx("code",{className:"bg-background px-1 rounded",children:"git diff --staged"})]}),s.jsxs("li",{children:["Commit when ready: ",s.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "your message"'})]}),s.jsx("li",{children:"Push to remote when satisfied"})]})]}),n&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"flex gap-2",children:s.jsx(te,{onClick:d,disabled:i,size:"sm",variant:"default",className:"flex-1",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Cleaning up..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Delete Worktree & Mark Done"]})})}),c&&s.jsx("p",{className:"text-xs text-destructive",children:c}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This will delete the isolated workspace and mark the task as complete."})]})]})}function Lee({task:e,feedback:t,isSubmitting:n,worktreeStatus:r,worktreeDiff:i,isLoadingWorktree:o,isMerging:c,isDiscarding:l,showDiscardDialog:d,showDiffDialog:h,workspaceError:m,stageOnly:f,stagedSuccess:g,stagedProjectPath:x,suggestedCommitMessage:C,mergePreview:_,isLoadingPreview:b,showConflictDialog:w,onFeedbackChange:j,onReject:S,onMerge:N,onDiscard:T,onShowDiscardDialog:E,onShowDiffDialog:D,onStageOnlyChange:A,onShowConflictDialog:P,onLoadMergePreview:M,onClose:B}){return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"section-divider-gradient"}),g&&s.jsx(_ee,{stagedSuccess:g,stagedProjectPath:x,task:e,suggestedCommitMessage:C}),o?s.jsx(Ree,{}):r?.exists&&!g?s.jsx(Cee,{task:e,worktreeStatus:r,workspaceError:m,stageOnly:f,mergePreview:_,isLoadingPreview:b,isMerging:c,isDiscarding:l,onShowDiffDialog:D,onShowDiscardDialog:E,onShowConflictDialog:P,onLoadMergePreview:M,onStageOnlyChange:A,onMerge:N}):e.stagedInMainProject&&!g?s.jsx(Mee,{task:e,projectPath:x,hasWorktree:r?.exists||!1,onClose:B}):s.jsx(Pee,{task:e,onClose:B}),s.jsx(Nee,{feedback:t,isSubmitting:n,onFeedbackChange:j,onReject:S}),s.jsx(kee,{open:d,task:e,worktreeStatus:r,isDiscarding:l,onOpenChange:E,onDiscard:T}),s.jsx(Eee,{open:h,worktreeDiff:i,onOpenChange:D}),s.jsx(Dee,{open:w,mergePreview:_,stageOnly:f,onOpenChange:P,onMerge:N})]})}function Iee({open:e,task:t,onOpenChange:n}){return t?s.jsx(Oee,{open:e,task:t,onOpenChange:n}):null}function Oee({open:e,task:t,onOpenChange:n}){const r=lee({task:t}),i=yD(t.subtasks),o=t.subtasks.filter(_=>_.status==="completed").length,c=t.subtasks.length,l=()=>{r.isRunning&&!r.isStuck?mP(t.id):fP(t.id)},d=async()=>{r.setIsRecovering(!0),(await pP(t.id,{autoRestart:!0})).success&&(r.setIsStuck(!1),r.setHasCheckedRunning(!1)),r.setIsRecovering(!1)},h=async()=>{r.feedback.trim()&&(r.setIsSubmitting(!0),await wQ(t.id,!1,r.feedback),r.setIsSubmitting(!1),r.setFeedback(""))},m=async()=>{r.setIsDeleting(!0),r.setDeleteError(null);const _=await jQ(t.id);_.success?(r.setShowDeleteDialog(!1),n(!1)):r.setDeleteError(_.error||"Failed to delete task"),r.setIsDeleting(!1)},f=async()=>{r.setIsMerging(!0),r.setWorkspaceError(null);try{const _=await J.mergeWorktree(t.id,{noCommit:r.stageOnly});_.success&&_.data?.success?r.stageOnly&&_.data.staged?(r.setWorkspaceError(null),r.setStagedSuccess(_.data.message||"Changes staged in main project"),r.setStagedProjectPath(_.data.projectPath),r.setSuggestedCommitMessage(_.data.suggestedCommitMessage)):n(!1):r.setWorkspaceError(_.data?.message||_.error||"Failed to merge changes")}catch(_){r.setWorkspaceError(_ instanceof Error?_.message:"Unknown error during merge")}finally{r.setIsMerging(!1)}},g=async()=>{r.setIsDiscarding(!0),r.setWorkspaceError(null);const _=await J.discardWorktree(t.id);_.success&&_.data?.success?(r.setShowDiscardDialog(!1),n(!1)):r.setWorkspaceError(_.data?.message||_.error||"Failed to discard changes"),r.setIsDiscarding(!1)},x=()=>{n(!1)},C=()=>r.isStuck?s.jsx(te,{variant:"warning",onClick:d,disabled:r.isRecovering,children:r.isRecovering?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Recovering..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"mr-2 h-4 w-4"}),"Recover Task"]})}):r.isIncomplete?s.jsxs(te,{variant:"default",onClick:l,children:[s.jsx(ei,{className:"mr-2 h-4 w-4"}),"Resume Task"]}):t.status==="backlog"||t.status==="in_progress"?s.jsx(te,{variant:r.isRunning?"destructive":"default",onClick:l,children:r.isRunning?s.jsxs(s.Fragment,{children:[s.jsx($c,{className:"mr-2 h-4 w-4"}),"Stop Task"]}):s.jsxs(s.Fragment,{children:[s.jsx(ei,{className:"mr-2 h-4 w-4"}),"Start Task"]})}):t.status==="done"?s.jsxs("div",{className:"completion-state text-sm flex items-center gap-2 text-success",children:[s.jsx(rt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Task completed"})]}):null;return s.jsxs(Mc,{delayDuration:300,children:[s.jsx(Jp,{open:e,onOpenChange:n,children:s.jsxs(eg,{children:[s.jsx(mh,{className:le("fixed inset-0 z-50 bg-black/60","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),s.jsxs(ph,{className:le("fixed left-[50%] top-4 z-50","translate-x-[-50%]","w-[95vw] max-w-5xl h-[calc(100vh-32px)]","bg-card border border-border rounded-xl","shadow-2xl overflow-hidden flex flex-col","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","duration-200"),children:[s.jsxs("div",{className:"p-5 pb-4 border-b border-border shrink-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[s.jsx(gh,{className:"text-xl font-semibold leading-tight text-foreground truncate",children:t.title}),s.jsx(xh,{asChild:!0,children:s.jsxs("div",{className:"mt-2.5 flex items-center gap-2 flex-wrap",children:[s.jsx(je,{variant:"outline",className:"text-xs font-mono",children:t.specId}),r.isStuck?s.jsxs(je,{variant:"warning",className:"text-xs flex items-center gap-1 animate-pulse",children:[s.jsx(Is,{className:"h-3 w-3"}),"Stuck"]}):r.isIncomplete?s.jsx(s.Fragment,{children:s.jsxs(je,{variant:"warning",className:"text-xs flex items-center gap-1",children:[s.jsx(Is,{className:"h-3 w-3"}),"Incomplete"]})}):s.jsxs(s.Fragment,{children:[s.jsx(je,{variant:t.status==="done"?"success":t.status==="human_review"?"purple":t.status==="in_progress"?"info":"secondary",className:le("text-xs",t.status==="in_progress"&&!r.isStuck&&"status-running"),children:gR[t.status]}),t.status==="human_review"&&t.reviewReason&&s.jsx(je,{variant:t.reviewReason==="completed"?"success":t.reviewReason==="errors"?"destructive":"warning",className:"text-xs",children:t.reviewReason==="completed"?"Completed":t.reviewReason==="errors"?"Has Errors":t.reviewReason==="plan_review"?"Approve Plan":"QA Issues"})]}),c>0&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:[o,"/",c," subtasks"]})]})})]}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0 electron-no-drag",children:[s.jsx(te,{variant:"ghost",size:"icon",className:"hover:bg-primary/10 hover:text-primary transition-colors",onClick:()=>r.setIsEditDialogOpen(!0),disabled:r.isRunning&&!r.isStuck,children:s.jsx(ml,{className:"h-4 w-4"})}),s.jsx(vh,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"icon",className:"hover:bg-muted transition-colors",children:[s.jsx(Ys,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Close"})]})})]})]}),(r.isRunning||o>0)&&c>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[s.jsx(ao,{value:i,className:"h-1.5 flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums w-10 text-right",children:[i,"%"]})]}),(r.isStuck||r.isIncomplete)&&s.jsx("div",{className:"mt-3",children:s.jsx(uee,{isStuck:r.isStuck,isIncomplete:r.isIncomplete,isRecovering:r.isRecovering,taskProgress:r.taskProgress,onRecover:d,onResume:l})})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:s.jsxs(mg,{value:r.activeTab,onValueChange:r.setActiveTab,className:"flex flex-col h-full",children:[s.jsxs(Eh,{className:"w-full justify-start rounded-none border-b border-border bg-transparent px-5 h-auto shrink-0",children:[s.jsx(Cn,{value:"overview",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:"Overview"}),s.jsxs(Cn,{value:"subtasks",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:["Subtasks (",t.subtasks.length,")"]}),s.jsx(Cn,{value:"logs",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:"Logs"})]}),s.jsx(Pr,{value:"overview",className:"flex-1 min-h-0 overflow-hidden mt-0",children:s.jsx(cs,{className:"h-full",children:s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsx(cee,{task:t}),r.needsReview&&s.jsxs(s.Fragment,{children:[s.jsx(En,{}),s.jsx(Lee,{task:t,feedback:r.feedback,isSubmitting:r.isSubmitting,worktreeStatus:r.worktreeStatus,worktreeDiff:r.worktreeDiff,isLoadingWorktree:r.isLoadingWorktree,isMerging:r.isMerging,isDiscarding:r.isDiscarding,showDiscardDialog:r.showDiscardDialog,showDiffDialog:r.showDiffDialog,workspaceError:r.workspaceError,stageOnly:r.stageOnly,stagedSuccess:r.stagedSuccess,stagedProjectPath:r.stagedProjectPath,suggestedCommitMessage:r.suggestedCommitMessage,mergePreview:r.mergePreview,isLoadingPreview:r.isLoadingPreview,showConflictDialog:r.showConflictDialog,onFeedbackChange:r.setFeedback,onReject:h,onMerge:f,onDiscard:g,onShowDiscardDialog:r.setShowDiscardDialog,onShowDiffDialog:r.setShowDiffDialog,onStageOnlyChange:r.setStageOnly,onShowConflictDialog:r.setShowConflictDialog,onLoadMergePreview:r.loadMergePreview,onClose:x})]})]})})}),s.jsx(Pr,{value:"subtasks",className:"flex-1 min-h-0 overflow-hidden mt-0",children:s.jsx(hee,{task:t})}),s.jsx(Pr,{value:"logs",className:"flex-1 min-h-0 overflow-hidden mt-0",children:s.jsx(wee,{task:t,phaseLogs:r.phaseLogs,isLoadingLogs:r.isLoadingLogs,expandedPhases:r.expandedPhases,isStuck:r.isStuck,logsEndRef:r.logsEndRef,logsContainerRef:r.logsContainerRef,onLogsScroll:r.handleLogsScroll,onTogglePhase:r.togglePhase})})]})}),s.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 border-t border-border shrink-0",children:[s.jsxs(te,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>r.setShowDeleteDialog(!0),disabled:r.isRunning&&!r.isStuck,children:[s.jsx(Br,{className:"mr-2 h-4 w-4"}),"Delete Task"]}),s.jsx("div",{className:"flex-1"}),C(),s.jsx(te,{variant:"outline",onClick:x,children:"Close"})]})]})]})}),s.jsx(oee,{task:t,open:r.isEditDialogOpen,onOpenChange:r.setIsEditDialogOpen}),s.jsx(po,{open:r.showDeleteDialog,onOpenChange:r.setShowDeleteDialog,children:s.jsxs(da,{children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"h-5 w-5 text-destructive"}),"Delete Task"]}),s.jsx(pa,{asChild:!0,children:s.jsxs("div",{className:"text-sm text-muted-foreground space-y-3",children:[s.jsxs("p",{children:["Are you sure you want to delete ",s.jsxs("strong",{className:"text-foreground",children:['"',t.title,'"']}),"?"]}),s.jsx("p",{className:"text-destructive",children:"This action cannot be undone. All task files, including the spec, implementation plan, and any generated code will be permanently deleted from the project."}),r.deleteError&&s.jsx("p",{className:"text-destructive bg-destructive/10 px-3 py-2 rounded-lg text-sm",children:r.deleteError})]})})]}),s.jsxs(fa,{children:[s.jsx(go,{disabled:r.isDeleting,children:"Cancel"}),s.jsx(pl,{onClick:_=>{_.preventDefault(),m()},disabled:r.isDeleting,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:r.isDeleting?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"mr-2 h-4 w-4"}),"Delete Permanently"]})})]})]})})]})}function lc(e,t,n){let r=n.initialDeps??[],i,o=!0;function c(){var l,d,h;let m;n.key&&((l=n.debug)!=null&&l.call(n))&&(m=Date.now());const f=e();if(!(f.length!==r.length||f.some((C,_)=>r[_]!==C)))return i;r=f;let x;if(n.key&&((d=n.debug)!=null&&d.call(n))&&(x=Date.now()),i=t(...f),n.key&&((h=n.debug)!=null&&h.call(n))){const C=Math.round((Date.now()-m)*100)/100,_=Math.round((Date.now()-x)*100)/100,b=_/16,w=(j,S)=>{for(j=String(j);j.length<S;)j=" "+j;return j};console.info(`%c ${w(_,5)} /${w(C,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n?.key)}return n?.onChange&&!(o&&n.skipInitialOnChange)&&n.onChange(i),o=!1,i}return c.updateDeps=l=>{r=l},c}function Q2(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Bee=(e,t)=>Math.abs(e-t)<1.01,zee=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},J2=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Fee=e=>e,Hee=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},Uee=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=c=>{const{width:l,height:d}=c;t({width:Math.round(l),height:Math.round(d)})};if(i(J2(n)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(c=>{const l=()=>{const d=c[0];if(d?.borderBoxSize){const h=d.borderBoxSize[0];if(h){i({width:h.inlineSize,height:h.blockSize});return}}i(J2(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},eE={passive:!0},tE=typeof window>"u"?!0:"onscrollend"in window,$ee=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=e.options.useScrollendEvent&&tE?()=>{}:zee(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),c=m=>()=>{const{horizontal:f,isRtl:g}=e.options;i=f?n.scrollLeft*(g&&-1||1):n.scrollTop,o(),t(i,m)},l=c(!0),d=c(!1);d(),n.addEventListener("scroll",l,eE);const h=e.options.useScrollendEvent&&tE;return h&&n.addEventListener("scrollend",d,eE),()=>{n.removeEventListener("scroll",l),h&&n.removeEventListener("scrollend",d)}},Vee=(e,t,n)=>{if(t?.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},Gee=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const c=e+t;(o=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[r.options.horizontal?"left":"top"]:c,behavior:n})};class qee{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{const c=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var o;return(o=r())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=r())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Fee,rangeExtractor:Hee,onChange:()=>{},measureElement:Vee,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=lc(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,o=new Map;for(let c=r-1;c>=0;c--){const l=n[c];if(i.has(l.lane))continue;const d=o.get(l.lane);if(d==null||l.end>d.end?o.set(l.lane,l):l.end<d.end&&i.set(l.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((c,l)=>c.end===l.end?c.index-l.index:c.end-l.end)[0]:void 0},this.getMeasurementOptions=lc(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,i,o,c,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:c,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=lc(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:c,lanes:l},d)=>{if(!c)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const h=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const m=this.measurementsCache.slice(0,h),f=new Array(l).fill(void 0);for(let g=0;g<h;g++){const x=m[g];x&&(f[x.lane]=g)}for(let g=h;g<n;g++){const x=o(g),C=this.laneAssignments.get(g);let _,b;if(C!==void 0&&this.options.lanes>1){_=C;const N=f[_],T=N!==void 0?m[N]:void 0;b=T?T.end+this.options.gap:r+i}else{const N=this.options.lanes===1?m[g-1]:this.getFurthestMeasurement(m,g);b=N?N.end+this.options.gap:r+i,_=N?N.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,_)}const w=d.get(x),j=typeof w=="number"?w:this.options.estimateSize(g),S=b+j;m[g]={index:g,start:b,size:j,end:S,key:x,lane:_},f[_]=g}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=lc(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,o)=>this.range=n.length>0&&r>0?Wee({measurements:n,outerSize:r,scrollOffset:i,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=lc(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,o,c)=>o===null||c===null?[]:n({startIndex:o,endIndex:c,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),o=this.measurementsCache[i];if(!o)return;const c=o.key,l=this.elementsCache.get(c);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(c,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const o=this.itemSizeCache.get(i.key)??i.size,c=r-o;c!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,c,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=c,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=lc(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let o=0,c=n.length;o<c;o++){const l=n[o],d=r[l];i.push(d)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Q2(r[Z4(0,r.length-1,i=>Q2(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const o=this.getSize(),c=this.getScrollOffset();r==="auto"&&(r=n>=c+o?"end":"start"),r==="center"?n+=(i-o)/2:r==="end"&&(n-=o);const l=this.getTotalSize()+this.options.scrollMargin-o;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const o=this.getSize(),c=this.getScrollOffset();if(r==="auto")if(i.end>=c+o-this.options.scrollPaddingEnd)r="end";else if(i.start<=c+this.options.scrollPaddingStart)r="start";else return[c,r];const l=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let o=0;const c=10,l=h=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(n,h);if(!m){console.warn("Failed to get offset for index:",n);return}const[f,g]=m;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const x=this.getScrollOffset(),C=this.getOffsetForIndex(n,g);if(!C){console.warn("Failed to get offset for index:",n);return}Bee(C[0],x)||d(g)})},d=h=>{this.targetWindow&&(o++,o<c?this.targetWindow.requestAnimationFrame(()=>l(h)):console.warn(`Failed to scroll to index ${n} after ${c} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const o=Array(this.options.lanes).fill(null);let c=r.length-1;for(;c>=0&&o.some(l=>l===null);){const l=r[c];o[l.lane]===null&&(o[l.lane]=l.end),c--}i=Math.max(...o.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Z4=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else if(o>r)t=i-1;else return i}return e>0?e-1:0};function Wee({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,o=d=>e[d].start;if(e.length<=r)return{startIndex:0,endIndex:i};let c=Z4(0,i,o,n),l=c;if(r===1)for(;l<i&&e[l].end<n+t;)l++;else if(r>1){const d=Array(r).fill(0);for(;l<i&&d.some(m=>m<n+t);){const m=e[l];d[m.lane]=m.end,l++}const h=Array(r).fill(n+t);for(;c>=0&&h.some(m=>m>=n);){const m=e[c];h[m.lane]=m.start,c--}c=Math.max(0,c-c%r),l=Math.min(i,l+(r-1-l%r))}return{startIndex:c,endIndex:l}}const sE=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Kee(e){const t=y.useReducer(()=>({}),{})[1],n={...e,onChange:(i,o)=>{var c;o?Kr.flushSync(t):t(),(c=e.onChange)==null||c.call(e,i,o)}},[r]=y.useState(()=>new qee(n));return r.setOptions(n),sE(()=>r._didMount(),[]),sE(()=>r._willUpdate()),r}function Yee(e){return Kee({observeElementRect:Uee,observeElementOffset:$ee,scrollToFn:Gee,...e})}function Xee(e){switch(e.split(".").pop()?.toLowerCase()){case"ts":case"tsx":case"js":case"jsx":case"py":case"rb":case"go":case"rs":case"java":case"c":case"cpp":case"h":case"cs":case"php":case"swift":case"kt":return s.jsx(ms,{className:"h-4 w-4 text-info"});case"json":case"yaml":case"yml":case"toml":return s.jsx(v8,{className:"h-4 w-4 text-warning"});case"md":case"txt":case"rst":return s.jsx(pr,{className:"h-4 w-4 text-muted-foreground"});case"png":case"jpg":case"jpeg":case"gif":case"svg":case"webp":case"ico":return s.jsx(j8,{className:"h-4 w-4 text-purple-400"});case"css":case"scss":case"sass":case"less":return s.jsx(ms,{className:"h-4 w-4 text-pink-400"});case"html":case"htm":return s.jsx(ms,{className:"h-4 w-4 text-orange-400"});default:return s.jsx(O0,{className:"h-4 w-4 text-muted-foreground"})}}function Zee({node:e,depth:t,isExpanded:n,isLoading:r,onToggle:i}){const[o,c]=y.useState(!1),l=y.useRef(null);y.useEffect(()=>()=>{l.current&&l.current.parentNode&&(l.current.parentNode.removeChild(l.current),l.current=null)},[]);const d=g=>{g.stopPropagation(),e.isDirectory&&i()},h=g=>{g.stopPropagation(),e.isDirectory&&i()},m=g=>{g.stopPropagation(),c(!0);const x={type:"file-reference",path:e.path,name:e.name,isDirectory:e.isDirectory};g.dataTransfer.setData("application/json",JSON.stringify(x)),g.dataTransfer.setData("text/plain",`@${e.name}`),g.dataTransfer.effectAllowed="copy";const C=document.createElement("div");C.className="flex items-center gap-2 bg-card border border-primary rounded-md px-3 py-2 shadow-lg text-sm";const _=document.createElement("span");_.textContent=e.isDirectory?"":"";const b=document.createElement("span");b.textContent=e.name,C.appendChild(_),C.appendChild(b),C.style.position="absolute",C.style.top="-1000px",C.style.left="-1000px",document.body.appendChild(C),g.dataTransfer.setDragImage(C,0,0),l.current=C},f=()=>{c(!1),l.current&&l.current.parentNode&&(l.current.parentNode.removeChild(l.current),l.current=null)};return s.jsxs("div",{draggable:!0,onDragStart:m,onDragEnd:f,className:le("flex items-center gap-1 py-1 px-2 rounded cursor-grab select-none","hover:bg-accent/50 transition-colors",o&&"opacity-50 bg-accent ring-2 ring-primary"),style:{paddingLeft:`${t*12+8}px`},onClick:d,onDoubleClick:h,children:[e.isDirectory?s.jsx("button",{className:"flex items-center justify-center w-4 h-4 hover:bg-accent rounded",onClick:g=>{g.stopPropagation(),i()},children:r?s.jsx(Ie,{className:"h-3 w-3 animate-spin text-muted-foreground"}):n?s.jsx(Gt,{className:"h-3 w-3 text-muted-foreground"}):s.jsx(vs,{className:"h-3 w-3 text-muted-foreground"})}):s.jsx("span",{className:"w-4"}),e.isDirectory?s.jsx(Dd,{className:le("h-4 w-4",n?"text-primary":"text-warning")}):Xee(e.name),s.jsx("span",{className:"text-xs truncate flex-1 text-foreground",children:e.name})]})}const Wr=xr((e,t)=>({isOpen:!1,expandedFolders:new Set,files:new Map,isLoading:new Map,error:null,toggle:()=>{e(n=>({isOpen:!n.isOpen}))},open:()=>{e({isOpen:!0})},close:()=>{e({isOpen:!1})},toggleFolder:n=>{e(r=>{const i=new Set(r.expandedFolders);return i.has(n)?i.delete(n):i.add(n),{expandedFolders:i}})},expandFolder:n=>{e(r=>{const i=new Set(r.expandedFolders);return i.add(n),{expandedFolders:i}})},collapseFolder:n=>{e(r=>{const i=new Set(r.expandedFolders);return i.delete(n),{expandedFolders:i}})},loadDirectory:async n=>{const i=t().files.get(n);if(i)return i;e(o=>{const c=new Map(o.isLoading);return c.set(n,!0),{isLoading:c,error:null}});try{const o=await J.listDirectory(n);if(!o.success||!o.data)throw new Error(o.error||"Failed to load directory");return e(c=>{const l=new Map(c.files);l.set(n,o.data);const d=new Map(c.isLoading);return d.set(n,!1),{files:l,isLoading:d}}),o.data}catch(o){const c=o instanceof Error?o.message:"Unknown error";return e(l=>{const d=new Map(l.isLoading);return d.set(n,!1),{isLoading:d,error:c}}),[]}},setError:n=>{e({error:n})},clearCache:()=>{e({files:new Map,expandedFolders:new Set})},isExpanded:n=>t().expandedFolders.has(n),getFiles:n=>t().files.get(n),isLoadingDir:n=>t().isLoading.get(n)??!1,getAllExpandedFiles:()=>new Set(t().expandedFolders),getVisibleFiles:n=>{const r=t(),i=[],o=c=>{const l=r.files.get(c);if(l)for(const d of l)i.push(d),d.isDirectory&&r.expandedFolders.has(d.path)&&o(d.path)};return o(n),i},computeVisibleItems:n=>{const r=t(),i=[],o=c=>{const l=r.files.get(c);if(l)for(const d of l)i.push(d),d.isDirectory&&r.expandedFolders.has(d.path)&&o(d.path)};return o(n),{nodes:i,count:i.length}}}));function Q4(e,t,n,r,i){const o=[];for(const c of e){const l=n.has(c.path),d=i.get(c.path)??!1;if(o.push({node:c,depth:t,isExpanded:l,isLoading:d,key:c.path}),c.isDirectory&&l){const h=r.get(c.path);if(h&&h.length>0){const m=Q4(h,t+1,n,r,i);o.push(...m)}}}return o}function Qee(e){const t=Wr(h=>h.expandedFolders),n=Wr(h=>h.files),r=Wr(h=>h.isLoading),i=Wr(h=>h.toggleFolder),o=Wr(h=>h.loadDirectory),c=n.get(e),l=y.useMemo(()=>c?Q4(c,0,t,n,r):[],[c,t,n,r]),d=h=>{if(!h.isDirectory)return;const m=t.has(h.path);i(h.path),!m&&!n.has(h.path)&&o(h.path)};return{flattenedNodes:l,count:l.length,handleToggle:d,isRootLoading:r.get(e)??!1,hasRootFiles:!!c}}const Jee=28,ete=10;function J4({rootPath:e}){const t=y.useRef(null),{loadDirectory:n,isLoadingDir:r,error:i}=Wr(),{flattenedNodes:o,count:c,handleToggle:l,isRootLoading:d,hasRootFiles:h}=Qee(e),m=r(e);y.useEffect(()=>{!h&&!m&&n(e)},[e,h,m,n]);const f=Yee({count:c,getScrollElement:()=>t.current,estimateSize:()=>Jee,overscan:ete}),g=y.useCallback(x=>()=>{const C=o[x];C&&l(C.node)},[o,l]);return d&&!h?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):i?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[s.jsx(ct,{className:"h-5 w-5 text-destructive mb-2"}),s.jsx("p",{className:"text-xs text-destructive",children:i})]}):!h||c===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[s.jsx(fl,{className:"h-6 w-6 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"No files found"})]}):s.jsx("div",{ref:t,className:"h-full overflow-auto py-1",children:s.jsx("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(x=>{const C=o[x.index];return C?s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${x.size}px`,transform:`translateY(${x.start}px)`},children:s.jsx(Zee,{node:C.node,depth:C.depth,isExpanded:C.isExpanded,isLoading:C.isLoading,onToggle:g(x.index)})},C.key):null})})})}const tte={hidden:{width:0,opacity:0},visible:{width:288,opacity:1}},ste={hidden:{x:20,opacity:0},visible:{x:0,opacity:1}};function nte({isOpen:e,onClose:t,projectPath:n}){const{clearCache:r,loadDirectory:i}=Wr(),o=()=>{r(),i(n)};return s.jsx($d,{mode:"wait",children:e&&s.jsx(cn.div,{variants:tte,initial:"hidden",animate:"visible",exit:"hidden",transition:{width:{duration:.3,ease:[.4,0,.2,1]},opacity:{duration:.2}},className:"h-full bg-card border-l border-border flex flex-col shadow-xl overflow-hidden",style:{minWidth:0},children:s.jsxs(cn.div,{variants:ste,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25,delay:.1,ease:[.4,0,.2,1]},className:"flex flex-col h-full w-72",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-card/80 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qa,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Project Files"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:o,title:"Refresh",children:s.jsx(Dt,{className:"h-3.5 w-3.5"})}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t,title:"Close",children:s.jsx(Ys,{className:"h-3.5 w-3.5"})})]})]}),s.jsx("div",{className:"px-3 py-2 bg-muted/30 border-b border-border shrink-0",children:s.jsx("p",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:"Drag files to add as references"})}),s.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:s.jsx(J4,{rootPath:n})})]})})})}function rte({query:e,projectPath:t,position:n,onSelect:r,onClose:i,maxResults:o=10}){const[c,l]=y.useState(0),d=y.useRef(null),{files:h,loadDirectory:m}=Wr();y.useEffect(()=>{t&&!h.has(t)&&m(t)},[t,h,m]);const f=y.useMemo(()=>{const _=[],b=(w,j=new Set)=>{if(j.has(w))return;j.add(w);const S=h.get(w);if(S)for(const N of S)_.push(N),N.isDirectory&&h.has(N.path)&&b(N.path,j)};return b(t),_},[h,t]),g=y.useMemo(()=>{if(!e)return f.filter(w=>!w.isDirectory).slice(0,o);const _=e.toLowerCase();return f.filter(w=>!w.isDirectory).map(w=>{const j=w.name.toLowerCase(),S=w.path.toLowerCase();let N=0;return j===_?N=1e3:j.startsWith(_)?N=100:j.includes(_)?N=50:S.includes(_)&&(N=10),{file:w,score:N}}).filter(w=>w.score>0).sort((w,j)=>j.score-w.score).slice(0,o).map(w=>w.file)},[f,e,o]);y.useEffect(()=>{l(0)},[g]),y.useEffect(()=>{const _=d.current;if(!_)return;const b=_.children[c];b&&b.scrollIntoView({block:"nearest"})},[c]);const x=y.useCallback(_=>{switch(_.key){case"ArrowDown":_.preventDefault(),l(b=>b<g.length-1?b+1:b);break;case"ArrowUp":_.preventDefault(),l(b=>b>0?b-1:b);break;case"Enter":if(_.preventDefault(),g[c]){const b=g[c];r(b.name,b.path)}break;case"Escape":_.preventDefault(),i();break;case"Tab":if(_.preventDefault(),g[c]){const b=g[c];r(b.name,b.path)}break}},[g,c,r,i]);y.useEffect(()=>(document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)),[x]);const C=_=>_.startsWith(t)?_.slice(t.length+1):_;return g.length===0?s.jsx("div",{className:"absolute z-50 bg-popover border border-border rounded-md shadow-lg p-3 text-sm text-muted-foreground",style:{top:n.top,left:n.left,minWidth:"200px"},children:"No files found"}):s.jsxs("div",{className:"absolute z-50 bg-popover border border-border rounded-md shadow-lg overflow-hidden",style:{top:n.top,left:n.left,minWidth:"280px",maxWidth:"400px",maxHeight:"240px"},children:[s.jsx("div",{ref:d,className:"overflow-y-auto max-h-[240px]",children:g.map((_,b)=>s.jsxs("button",{className:le("w-full flex items-center gap-2 px-3 py-2 text-left text-sm","hover:bg-accent hover:text-accent-foreground","focus:outline-none transition-colors",b===c&&"bg-accent text-accent-foreground"),onClick:()=>r(_.name,_.path),onMouseEnter:()=>l(b),children:[_.isDirectory?s.jsx(Dd,{className:"h-4 w-4 text-muted-foreground shrink-0"}):s.jsx(O0,{className:"h-4 w-4 text-muted-foreground shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:_.name}),s.jsxs("div",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 shrink-0"}),C(_.path)]})]})]},_.path))}),s.jsxs("div",{className:"border-t border-border px-3 py-1.5 text-[10px] text-muted-foreground bg-muted/30",children:[s.jsx("span",{className:"font-medium",children:""})," navigate  ",s.jsx("span",{className:"font-medium",children:"Enter"})," select  ",s.jsx("span",{className:"font-medium",children:"Esc"})," close"]})]})}function ite({projectId:e,open:t,onOpenChange:n}){const{settings:r}=dn(),i=Xn.find(Se=>Se.id===r.selectedAgentProfile)||Xn.find(Se=>Se.id==="auto"),[o,c]=y.useState(""),[l,d]=y.useState(""),[h,m]=y.useState(!1),[f,g]=y.useState(null),[x,C]=y.useState(!1),[_,b]=y.useState(!1),[w,j]=y.useState(!1),S="__project_default__",[N,T]=y.useState([]),[E,D]=y.useState(!1),[A,P]=y.useState(S),[M,B]=y.useState(""),F=Et(Se=>Se.projects),U=y.useMemo(()=>F.find(ze=>ze.id===e)?.path??null,[F,e]),[G,$]=y.useState(""),[V,Y]=y.useState(""),[K,O]=y.useState(""),[L,I]=y.useState(""),[q,z]=y.useState(r.selectedAgentProfile||"auto"),[ee,ie]=y.useState(i.model),[re,X]=y.useState(i.thinkingLevel),[W,Q]=y.useState(r.customPhaseModels||i.phaseModels||dr),[se,he]=y.useState(r.customPhaseThinking||i.phaseThinking||hr),[de,Ne]=y.useState([]),[Re,ce]=y.useState([]),[ge,ae]=y.useState(!1),[Ee,Be]=y.useState(!1),[et,De]=y.useState(!1),Me=y.useRef(null),qe=y.useRef(null),[st,_t]=y.useState(!1),[fe,Ae]=y.useState(null);y.useEffect(()=>{if(t&&e){const Se=NQ(e);Se&&!U2(Se)?(c(Se.title),d(Se.description),$(Se.category),Y(Se.priority),O(Se.complexity),I(Se.impact),z(Se.profileId||r.selectedAgentProfile||"auto"),ie(Se.model||i.model),X(Se.thinkingLevel||i.thinkingLevel),Q(Se.phaseModels||r.customPhaseModels||i.phaseModels||dr),he(Se.phaseThinking||r.customPhaseThinking||i.phaseThinking||hr),Ne(Se.images),ce(Se.referencedFiles??[]),ae(Se.requireReviewBeforeCoding??!1),Be(!0),(Se.category||Se.priority||Se.complexity||Se.impact)&&C(!0)):(z(r.selectedAgentProfile||"auto"),ie(i.model),X(i.thinkingLevel),Q(r.customPhaseModels||i.phaseModels||dr),he(r.customPhaseThinking||i.phaseThinking||hr))}},[t,e,r.selectedAgentProfile,r.customPhaseModels,r.customPhaseThinking,i.model,i.thinkingLevel]),y.useEffect(()=>{t&&U&&(Le(),We())},[t,U]);const Le=async()=>{if(U){D(!0);try{const Se=await J.getGitBranches(U);Se.success&&Se.data&&T(Se.data)}catch(Se){console.error("Failed to fetch branches:",Se)}finally{D(!1)}}},We=async()=>{if(e)try{const Se=await J.getProjectEnv(e);if(Se.success&&Se.data?.defaultBranch)B(Se.data.defaultBranch);else if(U){const ze=await J.detectMainBranch(U);ze.success&&ze.data&&B(ze.data)}}catch(Se){console.error("Failed to fetch project default branch:",Se)}},ve=y.useCallback(()=>({projectId:e,title:o,description:l,category:G,priority:V,complexity:K,impact:L,profileId:q,model:ee,thinkingLevel:re,phaseModels:W,phaseThinking:se,images:de,referencedFiles:Re,requireReviewBeforeCoding:ge,savedAt:new Date}),[e,o,l,G,V,K,L,q,ee,re,W,se,de,Re,ge]),Fe=y.useCallback(async Se=>{const ze=Se.clipboardData?.items;if(!ze)return;const yt=[];for(let Yt=0;Yt<ze.length;Yt++){const ot=ze[Yt];ot.type.startsWith("image/")&&yt.push(ot)}if(yt.length===0)return;Se.preventDefault();const Nt=ur-de.length;if(Nt<=0){g(`Maximum of ${ur} images allowed`);return}g(null);const qt=[],$t=de.map(Yt=>Yt.filename);for(const Yt of yt.slice(0,Nt)){const ot=Yt.getAsFile();if(ot){if(!Wd(ot.type)){g(`Invalid image type. Allowed: ${rl}`);continue}try{const is=await Kd(ot),Zs=await Yd(is),Sn=ot.type.split("/")[1]||"png",Hs=`screenshot-${Date.now()}.${Sn}`,nn=Fc(Hs,[...$t,...qt.map(rn=>rn.filename)]);qt.push({id:qd(),filename:nn,mimeType:ot.type,size:ot.size,data:is.split(",")[1],thumbnail:Zs})}catch{g("Failed to process pasted image")}}}qt.length>0&&(Ne(Yt=>[...Yt,...qt]),De(!0),setTimeout(()=>De(!1),2e3))},[de]),Ue=y.useCallback((Se,ze)=>{const Nt=Se.slice(0,ze).match(/@([\w\-./\\]*)$/);return Nt?{query:Nt[1],startPos:ze-Nt[0].length}:null},[]),Ct=y.useCallback(Se=>{const ze=Se.target.value,yt=Se.target.selectionStart||0;d(ze);const Nt=Ue(ze,yt);if(Nt){const qt=Me.current;if(qt){const $t=qt.getBoundingClientRect(),Yt=window.getComputedStyle(qt),ot=parseFloat(Yt.lineHeight)||20,is=parseFloat(Yt.paddingTop)||8,Zs=parseFloat(Yt.paddingLeft)||12,Hs=ze.slice(0,yt).split(`
`),nn=Hs.length-1,rn=Hs[nn].length,Ds=8,jn=is+(nn+1)*ot+4,xa=Zs+Math.min(rn*Ds,$t.width-300);Ae({show:!0,query:Nt.query,startPos:Nt.startPos,position:{top:jn,left:Math.max(0,xa)}})}}else fe?.show&&Ae(null)},[Ue,fe?.show]),Ot=y.useCallback(Se=>{if(!fe)return;const ze=Me.current;if(!ze)return;const yt=l.slice(0,fe.startPos),Nt=l.slice(fe.startPos+1+fe.query.length),qt=yt+"@"+Se+Nt;d(qt),Ae(null),setTimeout(()=>{const $t=fe.startPos+1+Se.length;ze.focus(),ze.setSelectionRange($t,$t)},0)},[fe,l]),Ke=y.useCallback(()=>{Ae(null)},[]),Xe=y.useCallback(Se=>{const ze=qe.current;if(!ze)return;const yt=ze.getBoundingClientRect(),Nt=60,qt=8;Se.clientY<yt.top+Nt?ze.scrollTop-=qt:Se.clientY>yt.bottom-Nt&&(ze.scrollTop+=qt)},[]),Ft=y.useCallback(Se=>{Se.preventDefault(),Se.stopPropagation(),_t(!0)},[]),js=y.useCallback(Se=>{Se.preventDefault(),Se.stopPropagation(),_t(!1)},[]),vr=y.useCallback(async Se=>{if(Se.preventDefault(),Se.stopPropagation(),_t(!1),h)return;const ze=Se.dataTransfer?.getData("application/json");if(ze)try{const ot=JSON.parse(ze);if(ot.type==="file-reference"&&ot.name){const is=Me.current;if(is){const Zs=is.selectionStart||0,Sn=l.substring(0,Zs),Hs=l.substring(Zs),nn=`@${ot.name}`,rn=Sn+nn+Hs;d(rn),setTimeout(()=>{is.focus();const Ds=Zs+nn.length;is.setSelectionRange(Ds,Ds)},0);return}}}catch{}const yt=Se.dataTransfer?.files;if(!yt||yt.length===0)return;const Nt=[];for(let ot=0;ot<yt.length;ot++){const is=yt[ot];is.type.startsWith("image/")&&Nt.push(is)}if(Nt.length===0)return;const qt=ur-de.length;if(qt<=0){g(`Maximum of ${ur} images allowed`);return}g(null);const $t=[],Yt=de.map(ot=>ot.filename);for(const ot of Nt.slice(0,qt)){if(!Wd(ot.type)){g(`Invalid image type. Allowed: ${rl}`);continue}try{const is=await Kd(ot),Zs=await Yd(is),Sn=ot.name||`dropped-image-${Date.now()}.${ot.type.split("/")[1]||"png"}`,Hs=Fc(Sn,[...Yt,...$t.map(nn=>nn.filename)]);$t.push({id:qd(),filename:Hs,mimeType:ot.type,size:ot.size,data:is.split(",")[1],thumbnail:Zs})}catch{g("Failed to process dropped image")}}$t.length>0&&(Ne(ot=>[...ot,...$t]),De(!0),setTimeout(()=>De(!1),2e3))},[de,h,l]),ye=y.useCallback((Se,ze)=>{const yt=/@([\w\-./\\]+\.\w+)/g,Nt=Array.from(Se.matchAll(yt));if(Nt.length===0)return ze;const qt=new Set(ze.map(Yt=>Yt.name)),$t=[];return Nt.forEach(Yt=>{const ot=Yt[1];qt.has(ot)||($t.push({id:crypto.randomUUID(),path:ot,name:ot,isDirectory:!1,addedAt:new Date}),qt.add(ot))}),[...ze,...$t]},[]),Jn=async()=>{if(!l.trim()){g("Please provide a description");return}m(!0),g(null);try{const Se=ye(l,Re),ze={sourceType:"manual"};G&&(ze.category=G),V&&(ze.priority=V),K&&(ze.complexity=K),L&&(ze.impact=L),ee&&(ze.model=ee),re&&(ze.thinkingLevel=re),q==="auto"&&(ze.isAutoProfile=!0,W&&(ze.phaseModels=W),se&&(ze.phaseThinking=se)),de.length>0&&(ze.attachedImages=de),Se.length>0&&(ze.referencedFiles=Se),ge&&(ze.requireReviewBeforeCoding=!0),A&&A!==S&&(ze.baseBranch=A),await bQ(e,o.trim(),l.trim(),ze)?(zy(e),ds(),n(!1)):g("Failed to create task. Please try again.")}catch(Se){g(Se instanceof Error?Se.message:"Unknown error")}finally{m(!1)}},ds=()=>{c(""),d(""),$(""),Y(""),O(""),I(""),z(r.selectedAgentProfile||"auto"),ie(i.model),X(i.thinkingLevel),Q(r.customPhaseModels||i.phaseModels||dr),he(r.customPhaseThinking||i.phaseThinking||hr),Ne([]),ce([]),ae(!1),P(S),g(null),C(!1),b(!1),j(!1),Be(!1),De(!1)},Zt=()=>{if(h)return;const Se=ve();U2(Se)?zy(e):CQ(Se),ds(),n(!1)},Qt=()=>{zy(e),ds(),g(null)};return s.jsx(sn,{open:t,onOpenChange:Zt,children:s.jsx(Xs,{className:le("max-h-[90vh] p-0 overflow-hidden transition-all duration-300 ease-out",_?"sm:max-w-[900px]":"sm:max-w-[550px]"),hideCloseButton:_,children:s.jsxs("div",{className:"flex h-full min-h-0 overflow-hidden",children:[s.jsxs("div",{ref:qe,onDragOver:Xe,className:"flex-1 flex flex-col p-6 min-w-0 min-h-0 overflow-y-auto relative",children:[s.jsxs(Jt,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(es,{className:"text-foreground",children:"Create New Task"}),Ee&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs bg-info/10 text-info px-2 py-1 rounded-md",children:"Draft restored"}),s.jsxs(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:Qt,children:[s.jsx(ho,{className:"h-3 w-3 mr-1"}),"Start Fresh"]})]})]}),s.jsx(fs,{children:"Describe what you want to build. The AI will analyze your request and create a detailed specification."})]}),s.jsxs("div",{className:"space-y-5 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"description",className:"text-sm font-medium text-foreground",children:["Description ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-md border border-transparent",style:{padding:"0.5rem 0.75rem",font:"inherit",lineHeight:"1.5",wordWrap:"break-word",whiteSpace:"pre-wrap",color:"transparent"},children:l.split(/(@[\w\-./\\]+\.\w+)/g).map((Se,ze)=>Se.match(/^@[\w\-./\\]+\.\w+$/)?s.jsx("span",{className:"bg-info/20 text-info-foreground rounded px-0.5",style:{color:"hsl(var(--info))"},children:Se},ze):s.jsx("span",{children:Se},ze))}),s.jsx(_i,{ref:Me,id:"description",placeholder:"Describe the feature, bug fix, or improvement you want to implement. Be as specific as possible about requirements, constraints, and expected behavior. Type @ to reference files.",value:l,onChange:Ct,onPaste:Fe,onDragOver:Ft,onDragLeave:js,onDrop:vr,rows:5,disabled:h,className:le("resize-y min-h-[120px] max-h-[400px] relative bg-transparent",st&&!h&&"border-primary bg-primary/5 ring-2 ring-primary/20"),style:{caretColor:"auto"}}),fe?.show&&U&&s.jsx(rte,{query:fe.query,projectPath:U,position:fe.position,onSelect:Ot,onClose:Ke})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Files and images can be copy/pasted or dragged & dropped into the description."}),de.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:de.map(Se=>s.jsxs("div",{className:"relative group rounded-md border border-border overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all",style:{width:"64px",height:"64px"},onClick:()=>{},title:Se.filename,children:[Se.thumbnail?s.jsx("img",{src:Se.thumbnail,alt:Se.filename,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:s.jsx(Ji,{className:"h-6 w-6 text-muted-foreground"})}),!h&&s.jsx("button",{type:"button",className:"absolute top-0.5 right-0.5 h-4 w-4 flex items-center justify-center rounded-full bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity",onClick:ze=>{ze.stopPropagation(),Ne(yt=>yt.filter(Nt=>Nt.id!==Se.id))},children:s.jsx(Ys,{className:"h-3 w-3"})})]},Se.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"title",className:"text-sm font-medium text-foreground",children:["Task Title ",s.jsx("span",{className:"text-muted-foreground font-normal",children:"(optional)"})]}),s.jsx(Je,{id:"title",placeholder:"Leave empty to auto-generate from description",value:o,onChange:Se=>c(Se.target.value),disabled:h}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"A short, descriptive title will be generated automatically if left empty."})]}),s.jsx(G4,{profileId:q,model:ee,thinkingLevel:re,phaseModels:W,phaseThinking:se,onProfileChange:(Se,ze,yt)=>{z(Se),ie(ze),X(yt)},onModelChange:ie,onThinkingLevelChange:X,onPhaseModelsChange:Q,onPhaseThinkingChange:he,disabled:h}),et&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(Ji,{className:"h-4 w-4"}),"Image added successfully!"]}),s.jsxs("button",{type:"button",onClick:()=>C(!x),className:le("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:h,children:[s.jsx("span",{children:"Classification (optional)"}),x?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),x&&s.jsxs("div",{className:"space-y-4 p-4 rounded-lg border border-border bg-muted/30",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"category",className:"text-xs font-medium text-muted-foreground",children:"Category"}),s.jsxs(gt,{value:G,onValueChange:Se=>$(Se),disabled:h,children:[s.jsx(ft,{id:"category",className:"h-9",children:s.jsx(xt,{placeholder:"Select category"})}),s.jsx(mt,{children:Object.entries(yh).map(([Se,ze])=>s.jsx(Qe,{value:Se,children:ze},Se))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"priority",className:"text-xs font-medium text-muted-foreground",children:"Priority"}),s.jsxs(gt,{value:V,onValueChange:Se=>Y(Se),disabled:h,children:[s.jsx(ft,{id:"priority",className:"h-9",children:s.jsx(xt,{placeholder:"Select priority"})}),s.jsx(mt,{children:Object.entries(ig).map(([Se,ze])=>s.jsx(Qe,{value:Se,children:ze},Se))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"complexity",className:"text-xs font-medium text-muted-foreground",children:"Complexity"}),s.jsxs(gt,{value:K,onValueChange:Se=>O(Se),disabled:h,children:[s.jsx(ft,{id:"complexity",className:"h-9",children:s.jsx(xt,{placeholder:"Select complexity"})}),s.jsx(mt,{children:Object.entries(bh).map(([Se,ze])=>s.jsx(Qe,{value:Se,children:ze},Se))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"impact",className:"text-xs font-medium text-muted-foreground",children:"Impact"}),s.jsxs(gt,{value:L,onValueChange:Se=>I(Se),disabled:h,children:[s.jsx(ft,{id:"impact",className:"h-9",children:s.jsx(xt,{placeholder:"Select impact"})}),s.jsx(mt,{children:Object.entries(rg).map(([Se,ze])=>s.jsx(Qe,{value:Se,children:ze},Se))})]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"These labels help organize and prioritize tasks. They're optional but useful for filtering."})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-border bg-muted/30",children:[s.jsx(ca,{id:"require-review",checked:ge,onCheckedChange:Se=>ae(Se===!0),disabled:h,className:"mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx(we,{htmlFor:"require-review",className:"text-sm font-medium text-foreground cursor-pointer",children:"Require human review before coding"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, you'll be prompted to review the spec and implementation plan before the coding phase begins. This allows you to approve, request changes, or provide feedback."})]})]}),s.jsxs("button",{type:"button",onClick:()=>j(!w),className:le("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:h,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),"Git Options (optional)",A&&A!==S&&s.jsx("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:A})]}),w?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),w&&s.jsx("div",{className:"space-y-4 p-4 rounded-lg border border-border bg-muted/30",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"base-branch",className:"text-sm font-medium text-foreground",children:"Base Branch (optional)"}),s.jsxs(gt,{value:A,onValueChange:P,disabled:h||E,children:[s.jsx(ft,{id:"base-branch",className:"h-9",children:s.jsx(xt,{placeholder:`Use project default${M?` (${M})`:""}`})}),s.jsxs(mt,{children:[s.jsxs(Qe,{value:S,children:["Use project default",M?` (${M})`:""]}),N.map(Se=>s.jsx(Qe,{value:Se,children:Se},Se))]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Override the branch this task's worktree will be created from. Leave empty to use the project's configured default branch."})]})}),f&&s.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:[s.jsx(Ys,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:f})]})]}),s.jsxs(Ts,{children:[s.jsx("div",{className:"flex items-center gap-2",children:U&&s.jsxs(te,{type:"button",variant:_?"default":"outline",size:"sm",onClick:()=>b(!_),disabled:h,className:"gap-1.5",children:[s.jsx(Qa,{className:"h-4 w-4"}),_?"Hide Files":"Browse Files"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",onClick:Zt,disabled:h,children:"Cancel"}),s.jsx(te,{onClick:Jn,disabled:h||!l.trim(),children:h?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Task"})]})]})]}),U&&s.jsx(nte,{isOpen:_,onClose:()=>b(!1),projectPath:U})]})})})}const eM=Jp,ate=eg,tM=y.forwardRef(({className:e,...t},n)=>s.jsx(mh,{ref:n,className:le("fixed inset-0 z-50 bg-background/95 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tM.displayName="FullScreenDialogOverlay";const NS=y.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(ate,{children:[s.jsx(tM,{}),s.jsxs(ph,{ref:r,className:le("fixed inset-4 z-50 flex flex-col","bg-card border border-border rounded-2xl","shadow-2xl overflow-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-98 data-[state=open]:zoom-in-98","duration-200",e),...n,children:[t,s.jsxs(vh,{className:le("absolute right-4 top-4 rounded-lg p-2","text-muted-foreground hover:text-foreground","hover:bg-accent transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","disabled:pointer-events-none z-10"),children:[s.jsx(Ys,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));NS.displayName="FullScreenDialogContent";const kS=({className:e,...t})=>s.jsx("div",{className:le("flex flex-col space-y-1.5 p-6 pb-4 border-b border-border",e),...t});kS.displayName="FullScreenDialogHeader";const ES=({className:e,...t})=>s.jsx("div",{className:le("flex-1 overflow-hidden",e),...t});ES.displayName="FullScreenDialogBody";const sM=({className:e,...t})=>s.jsx("div",{className:le("flex items-center justify-end gap-3 p-6 pt-4 border-t border-border",e),...t});sM.displayName="FullScreenDialogFooter";const AS=y.forwardRef(({className:e,...t},n)=>s.jsx(gh,{ref:n,className:le("text-xl font-semibold leading-none tracking-tight text-foreground",e),...t}));AS.displayName="FullScreenDialogTitle";const TS=y.forwardRef(({className:e,...t},n)=>s.jsx(xh,{ref:n,className:le("text-sm text-muted-foreground",e),...t}));TS.displayName="FullScreenDialogDescription";function ote(){const e=dn(C=>C.settings),t=dn(C=>C.updateSettings),[n,r]=y.useState(e),[i,o]=y.useState(!1),[c,l]=y.useState(null),d=y.useRef({theme:e.theme,colorTheme:e.colorTheme,uiScale:e.uiScale??ea});y.useEffect(()=>{r(e)},[e]),y.useEffect(()=>{NR(),d.current={theme:e.theme,colorTheme:e.colorTheme,uiScale:e.uiScale??ea}},[]);const h=async()=>{o(!0),l(null);try{return await Ya(n)?(m(n.theme),!0):(l("Failed to save settings"),!1)}catch(C){return l(C instanceof Error?C.message:"Unknown error"),!1}finally{o(!1)}},m=C=>{C==="dark"?document.documentElement.classList.add("dark"):C==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},f=C=>{r(_=>({..._,...C}))},g=y.useCallback(()=>{const C=d.current;t({theme:C.theme,colorTheme:C.colorTheme,uiScale:C.uiScale})},[t]),x=y.useCallback(()=>{d.current={theme:n.theme,colorTheme:n.colorTheme,uiScale:n.uiScale??ea}},[n.theme,n.colorTheme,n.uiScale]);return{settings:n,setSettings:r,updateSettings:f,isSaving:i,error:c,saveSettings:h,applyTheme:m,revertTheme:g,commitTheme:x}}function Rn({title:e,description:t,children:n}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:e}),s.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),s.jsx(En,{}),n]})}function lte({settings:e,onSettingsChange:t}){const n=dn(h=>h.updateSettings),r=e.colorTheme||"default",i=e.theme,o=i==="dark"||i==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches,c=h=>{t({...e,colorTheme:h}),n({colorTheme:h})},l=h=>{t({...e,theme:h}),n({theme:h})},d=h=>{switch(h){case"light":return s.jsx(t7,{className:"h-4 w-4"});case"dark":return s.jsx(yH,{className:"h-4 w-4"});default:return s.jsx($0,{className:"h-4 w-4"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Appearance Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose light, dark, or system preference"}),s.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-md pt-1",children:["system","light","dark"].map(h=>s.jsxs("button",{onClick:()=>l(h),className:le("flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i===h?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[d(h),s.jsx("span",{className:"text-sm font-medium capitalize",children:h})]},h))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Color Theme"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a color palette for the interface"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 pt-1",children:jR.map(h=>{const m=r===h.id,f=o?h.previewColors.darkBg:h.previewColors.bg,g=o&&h.previewColors.darkAccent||h.previewColors.accent;return s.jsxs("button",{onClick:()=>c(h.id),className:le("relative flex flex-col p-4 rounded-lg border-2 text-left transition-all","hover:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",m?"border-primary bg-primary/5 shadow-sm":"border-border hover:border-primary/50 hover:bg-accent/30"),children:[m&&s.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:s.jsx(ts,{className:"w-3 h-3 text-primary-foreground"})}),s.jsx("div",{className:"flex items-center gap-2 mb-3",children:s.jsxs("div",{className:"flex -space-x-1.5",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-background shadow-sm",style:{backgroundColor:f},title:"Background color"}),s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-background shadow-sm",style:{backgroundColor:g},title:"Accent color"})]})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium text-sm text-foreground",children:h.name}),s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:h.description})]})]},h.id)})})]})]})}function cte({settings:e,onSettingsChange:t}){const{t:n}=rs("settings");return s.jsx(Rn,{title:n("theme.title"),description:n("theme.description"),children:s.jsx(lte,{settings:e,onSettingsChange:t})})}const ute=[{value:ea,label:"100%",descriptionKey:"scale.default"},{value:125,label:"125%",descriptionKey:"scale.comfortable"},{value:150,label:"150%",descriptionKey:"scale.large"}];function dte({settings:e,onSettingsChange:t}){const{t:n}=rs("settings"),r=dn(l=>l.updateSettings),i=e.uiScale??ea,o=l=>{const d=Math.max(Cm,Math.min(Nm,l));t({...e,uiScale:d}),r({uiScale:d})},c=()=>{o(ea)};return s.jsx(Rn,{title:n("sections.display.title"),description:n("sections.display.description"),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:n("scale.presets")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n("scale.presetsDescription")}),s.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-md pt-1",children:ute.map(l=>{const d=i===l.value;return s.jsxs("button",{onClick:()=>o(l.value),className:le("flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",d?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[s.jsx($0,{className:"h-4 w-4"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium",children:l.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:n(l.descriptionKey)})]})]},l.value)})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:n("scale.fineTune")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[i,"%"]}),i!==ea&&s.jsx("button",{onClick:c,className:le("p-1.5 rounded-md transition-colors","hover:bg-accent text-muted-foreground hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),title:"Reset to default (100%)",children:s.jsx(ho,{className:"h-3.5 w-3.5"})})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n("scale.fineTuneDescription")}),s.jsxs("div",{className:"flex items-center gap-3 pt-1",children:[s.jsx(_7,{className:"h-4 w-4 text-muted-foreground shrink-0"}),s.jsx("input",{type:"range",min:Cm,max:Nm,step:_W,value:i,onChange:l=>o(parseInt(l.target.value,10)),className:le("flex-1 h-2 bg-muted rounded-lg appearance-none cursor-pointer","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","[&::-webkit-slider-thumb]:appearance-none","[&::-webkit-slider-thumb]:w-4","[&::-webkit-slider-thumb]:h-4","[&::-webkit-slider-thumb]:rounded-full","[&::-webkit-slider-thumb]:bg-primary","[&::-webkit-slider-thumb]:cursor-pointer","[&::-webkit-slider-thumb]:transition-all","[&::-webkit-slider-thumb]:hover:scale-110","[&::-moz-range-thumb]:w-4","[&::-moz-range-thumb]:h-4","[&::-moz-range-thumb]:rounded-full","[&::-moz-range-thumb]:bg-primary","[&::-moz-range-thumb]:border-0","[&::-moz-range-thumb]:cursor-pointer","[&::-moz-range-thumb]:transition-all","[&::-moz-range-thumb]:hover:scale-110")}),s.jsx(S7,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:[Cm,"%"]}),s.jsxs("span",{children:[Nm,"%"]})]})]}),s.jsx("div",{className:"rounded-lg bg-muted/50 border border-border p-4 text-sm",children:s.jsx("p",{className:"text-muted-foreground",children:n("scale.preview")})})]})})}const hte=[{value:"en",label:"English",nativeLabel:"English"},{value:"fr",label:"French",nativeLabel:"Franais"}];function fte({settings:e,onSettingsChange:t}){const{t:n,i18n:r}=rs("settings"),i=dn(l=>l.updateSettings),o=e.language??"en",c=l=>{t({...e,language:l}),i({language:l}),r.changeLanguage(l)};return s.jsx(Rn,{title:n("sections.language.title"),description:n("sections.language.description"),children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:n("language.label")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n("language.description")}),s.jsx("div",{className:"grid grid-cols-2 gap-3 max-w-md pt-1",children:hte.map(l=>{const d=o===l.value;return s.jsxs("button",{onClick:()=>c(l.value),className:le("flex items-center gap-3 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",d?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[s.jsx(Jr,{className:"h-5 w-5 shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-sm font-medium",children:l.nativeLabel}),s.jsx("div",{className:"text-xs text-muted-foreground",children:l.label})]})]},l.value)})})]})})})}var yg="Switch",[mte]=An(yg),[pte,gte]=mte(yg),nM=y.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:o,required:c,disabled:l,value:d="on",onCheckedChange:h,form:m,...f}=e,[g,x]=y.useState(null),C=dt(t,S=>x(S)),_=y.useRef(!1),b=g?m||!!g.closest("form"):!0,[w,j]=ii({prop:i,defaultProp:o??!1,onChange:h,caller:yg});return s.jsxs(pte,{scope:n,checked:w,disabled:l,children:[s.jsx(tt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":oM(w),"data-disabled":l?"":void 0,disabled:l,value:d,...f,ref:C,onClick:Oe(e.onClick,S=>{j(N=>!N),b&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})}),b&&s.jsx(aM,{control:g,bubbles:!_.current,name:r,value:d,checked:w,required:c,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});nM.displayName=yg;var rM="SwitchThumb",iM=y.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=gte(rM,n);return s.jsx(tt.span,{"data-state":oM(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});iM.displayName=rM;var xte="SwitchBubbleInput",aM=y.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},o)=>{const c=y.useRef(null),l=dt(c,o),d=og(n),h=Vp(t);return y.useEffect(()=>{const m=c.current;if(!m)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==n&&x){const C=new Event("click",{bubbles:r});x.call(m,n),m.dispatchEvent(C)}},[d,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aM.displayName=xte;function oM(e){return e?"checked":"unchecked"}var lM=nM,vte=iM;const Es=y.forwardRef(({className:e,...t},n)=>s.jsx(lM,{className:le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full","border-2 border-transparent transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-border",e),...t,ref:n,children:s.jsx(vte,{className:le("pointer-events-none block h-5 w-5 rounded-full shadow-sm ring-0 transition-transform duration-200","bg-white dark:bg-foreground","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0","data-[state=checked]:bg-primary-foreground")})}));Es.displayName=lM.displayName;const yte={Brain:oa,Scale:Tc,Zap:ai,Sparkles:us},nE=["spec","planning","coding","qa"];function bte(){const{t:e}=rs("settings"),t=dn(_=>_.settings),n=t.selectedAgentProfile||"auto",[r,i]=y.useState(n==="auto"),o=t.customPhaseModels||dr,c=t.customPhaseThinking||hr,l=async _=>{if(!await Ya({selectedAgentProfile:_})){console.error("Failed to save agent profile selection");return}_==="auto"&&i(!0)},d=async(_,b)=>{const w={...o,[_]:b};await Ya({customPhaseModels:w})},h=async(_,b)=>{const w={...c,[_]:b};await Ya({customPhaseThinking:w})},m=async()=>{await Ya({customPhaseModels:dr,customPhaseThinking:hr})},f=_=>Yr.find(w=>w.value===_)?.label||_,g=_=>Oc.find(w=>w.value===_)?.label||_,x=()=>nE.some(_=>o[_]!==dr[_]||c[_]!==hr[_]),C=_=>{const b=n===_.id,w=yte[_.icon||"Brain"]||oa;return s.jsxs("button",{onClick:()=>l(_.id),className:le("relative w-full rounded-lg border p-4 text-left transition-all duration-200","hover:border-primary/50 hover:shadow-sm",b?"border-primary bg-primary/5":"border-border bg-card"),children:[b&&s.jsx("div",{className:"absolute right-3 top-3 flex h-5 w-5 items-center justify-center rounded-full bg-primary",children:s.jsx(ts,{className:"h-3 w-3 text-primary-foreground"})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:le("flex h-10 w-10 items-center justify-center rounded-lg shrink-0",b?"bg-primary/10":"bg-muted"),children:s.jsx(w,{className:le("h-5 w-5",b?"text-primary":"text-muted-foreground")})}),s.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[s.jsx("h3",{className:"font-medium text-sm text-foreground",children:_.name}),s.jsx("p",{className:"mt-0.5 text-xs text-muted-foreground line-clamp-2",children:_.description}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[s.jsx("span",{className:"inline-flex items-center rounded bg-muted px-2 py-0.5 text-[10px] font-medium text-muted-foreground",children:f(_.model)}),s.jsxs("span",{className:"inline-flex items-center rounded bg-muted px-2 py-0.5 text-[10px] font-medium text-muted-foreground",children:[g(_.thinkingLevel)," ",e("agentProfile.thinking")]})]})]})]})]},_.id)};return s.jsx(Rn,{title:e("agentProfile.title"),description:e("agentProfile.sectionDescription"),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:e("agentProfile.profilesInfo")})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:Xn.map(C)}),n==="auto"&&s.jsxs("div",{className:"mt-6 rounded-lg border border-border bg-card",children:[s.jsxs("button",{type:"button",onClick:()=>i(!r),className:"flex w-full items-center justify-between p-4 text-left hover:bg-muted/50 transition-colors rounded-t-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-foreground",children:e("agentProfile.phaseConfiguration")}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("agentProfile.phaseConfigurationDescription")})]}),r?s.jsx(Or,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),r&&s.jsxs("div",{className:"border-t border-border p-4 space-y-4",children:[x()&&s.jsx("div",{className:"flex justify-end",children:s.jsxs(te,{variant:"ghost",size:"sm",onClick:m,className:"text-xs h-7",children:[s.jsx(ho,{className:"h-3 w-3 mr-1.5"}),e("agentProfile.resetToDefaults")]})}),s.jsx("div",{className:"space-y-4",children:nE.map(_=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:e(`agentProfile.phases.${_}.label`)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:e(`agentProfile.phases.${_}.description`)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:e("agentProfile.model")}),s.jsxs(gt,{value:o[_],onValueChange:b=>d(_,b),children:[s.jsx(ft,{className:"h-9",children:s.jsx(xt,{})}),s.jsx(mt,{children:Yr.map(b=>s.jsx(Qe,{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:e("agentProfile.thinkingLevel")}),s.jsxs(gt,{value:c[_],onValueChange:b=>h(_,b),children:[s.jsx(ft,{className:"h-9",children:s.jsx(xt,{})}),s.jsx(mt,{children:Oc.map(b=>s.jsx(Qe,{value:b.value,children:b.label},b.value))})]})]})]})]},_))}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-4 pt-3 border-t border-border",children:e("agentProfile.phaseConfigNote")})]})]})]})})}function rE({settings:e,onSettingsChange:t,section:n}){const{t:r}=rs("settings");return n==="agent"?s.jsxs("div",{className:"space-y-8",children:[s.jsx(bte,{}),s.jsx(Rn,{title:r("general.otherAgentSettings"),description:r("general.otherAgentSettingsDescription"),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{htmlFor:"agentFramework",className:"text-sm font-medium text-foreground",children:r("general.agentFramework")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.agentFrameworkDescription")}),s.jsxs(gt,{value:e.agentFramework,onValueChange:i=>t({...e,agentFramework:i}),children:[s.jsx(ft,{id:"agentFramework",className:"w-full max-w-md",children:s.jsx(xt,{})}),s.jsx(mt,{children:s.jsx(Qe,{value:"auto-claude",children:r("general.agentFrameworkAutoClaude")})})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{htmlFor:"autoNameTerminals",className:"text-sm font-medium text-foreground",children:r("general.aiTerminalNaming")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.aiTerminalNamingDescription")})]}),s.jsx(Es,{id:"autoNameTerminals",checked:e.autoNameTerminals,onCheckedChange:i=>t({...e,autoNameTerminals:i})})]})}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:r("general.featureModelSettings")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.featureModelSettingsDescription")})]}),Object.keys(jy).map(i=>{const o=e.featureModels||wW,c=e.featureThinking||SW;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:jy[i].label}),s.jsx("span",{className:"text-xs text-muted-foreground",children:jy[i].description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-md",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:r("general.model")}),s.jsxs(gt,{value:o[i],onValueChange:l=>{const d={...o,[i]:l};t({...e,featureModels:d})},children:[s.jsx(ft,{className:"h-9",children:s.jsx(xt,{})}),s.jsx(mt,{children:Yr.map(l=>s.jsx(Qe,{value:l.value,children:l.label},l.value))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:r("general.thinkingLevel")}),s.jsxs(gt,{value:c[i],onValueChange:l=>{const d={...c,[i]:l};t({...e,featureThinking:d})},children:[s.jsx(ft,{className:"h-9",children:s.jsx(xt,{})}),s.jsx(mt,{children:Oc.map(l=>s.jsx(Qe,{value:l.value,children:l.label},l.value))})]})]})]})]},i)})]})]})})]}):s.jsx(Rn,{title:r("general.paths"),description:r("general.pathsDescription"),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{htmlFor:"pythonPath",className:"text-sm font-medium text-foreground",children:r("general.pythonPath")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.pythonPathDescription")}),s.jsx(Je,{id:"pythonPath",placeholder:r("general.pythonPathPlaceholder"),className:"w-full max-w-lg",value:e.pythonPath||"",onChange:i=>t({...e,pythonPath:i.target.value})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{htmlFor:"autoBuildPath",className:"text-sm font-medium text-foreground",children:r("general.autoClaudePath")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.autoClaudePathDescription")}),s.jsx(Je,{id:"autoBuildPath",placeholder:r("general.autoClaudePathPlaceholder"),className:"w-full max-w-lg",value:e.autoBuildPath||"",onChange:i=>t({...e,autoBuildPath:i.target.value})})]})]})})}const bg=xr(e=>({profiles:[],activeProfileId:"default",isLoading:!1,isSwitching:!1,setProfiles:t=>{e({profiles:t.profiles,activeProfileId:t.activeProfileId})},setActiveProfile:t=>{e({activeProfileId:t})},addProfile:t=>{e(n=>({profiles:[...n.profiles,t]}))},updateProfile:t=>{e(n=>({profiles:n.profiles.map(r=>r.id===t.id?t:r)}))},removeProfile:t=>{e(n=>({profiles:n.profiles.filter(r=>r.id!==t)}))},setLoading:t=>{e({isLoading:t})},setSwitching:t=>{e({isSwitching:t})}}));async function oo(){const e=bg.getState();e.setLoading(!0),console.log("[loadClaudeProfiles] About to call api.getClaudeProfiles, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasGetClaudeProfiles:typeof J?.getClaudeProfiles,api:J,windowAPI:window.__claudeAPI});try{const t=await J.getClaudeProfiles();t.success&&t.data&&e.setProfiles(t.data)}catch(t){console.error("[ClaudeProfileStore] Error loading profiles:",t)}finally{e.setLoading(!1)}}async function wte(e,t){const n=bg.getState();n.setSwitching(!0);try{return(await J.switchClaudeProfile(e,t)).success?(n.setActiveProfile(t),!0):!1}catch(r){return console.error("[ClaudeProfileStore] Error switching profile:",r),!1}finally{n.setSwitching(!1)}}function Ste({settings:e,onSettingsChange:t,isOpen:n}){const{t:r}=rs("settings"),{t:i}=rs("common"),[o,c]=y.useState(!1),[l,d]=y.useState([]),[h,m]=y.useState(null),[f,g]=y.useState(!1),[x,C]=y.useState(""),[_,b]=y.useState(!1),[w,j]=y.useState(null),[S,N]=y.useState(null),[T,E]=y.useState(""),[D,A]=y.useState(null),[P,M]=y.useState(null),[B,F]=y.useState(""),[U,G]=y.useState(""),[$,V]=y.useState(!1),[Y,K]=y.useState(null),[O,L]=y.useState(null),[I,q]=y.useState(!1);y.useEffect(()=>{n&&(z(),Ne())},[n]),y.useEffect(()=>J.onTerminalOAuthToken(async ge=>{ge.success&&ge.profileId&&(await z(),alert(` Profile authenticated successfully!

${ge.email?`Account: ${ge.email}`:"Authentication complete."}

You can now use this profile.`))}),[]);const z=async()=>{g(!0);try{const ce=await J.getClaudeProfiles();ce.success&&ce.data&&(d(ce.data.profiles),m(ce.data.activeProfileId),await oo())}catch(ce){console.error("Failed to load Claude profiles:",ce)}finally{g(!1)}},ee=async()=>{if(x.trim()){b(!0);try{const ce=x.trim(),ge=ce.toLowerCase().replace(/\s+/g,"-"),ae=await J.saveClaudeProfile({id:`profile-${Date.now()}`,name:ce,configDir:`~/.claude-profiles/${ge}`,isDefault:!1,createdAt:new Date});if(ae.success&&ae.data){const Ee=await J.initializeClaudeProfile(ae.data.id);Ee.success?(await z(),C(""),alert(`Authenticating "${ce}"...

A browser window will open for you to log in with your Claude account.

The authentication will be saved automatically once complete.`)):(await z(),alert(`Failed to start authentication: ${Ee.error||"Please try again."}`))}}catch(ce){console.error("Failed to add profile:",ce),alert("Failed to add profile. Please try again.")}finally{b(!1)}}},ie=async ce=>{j(ce);try{(await J.deleteClaudeProfile(ce)).success&&await z()}catch(ge){console.error("Failed to delete profile:",ge)}finally{j(null)}},re=ce=>{N(ce.id),E(ce.name)},X=()=>{N(null),E("")},W=async()=>{if(!(!S||!T.trim()))try{(await J.renameClaudeProfile(S,T.trim())).success&&await z()}catch(ce){console.error("Failed to rename profile:",ce)}finally{N(null),E("")}},Q=async ce=>{try{(await J.setActiveClaudeProfile(ce)).success&&(m(ce),await oo())}catch(ge){console.error("Failed to set active profile:",ge)}},se=async ce=>{A(ce);try{const ge=await J.initializeClaudeProfile(ce);ge.success?alert(`Authenticating profile...

A browser window will open for you to log in with your Claude account.

The authentication will be saved automatically once complete.`):alert(`Failed to start authentication: ${ge.error||"Please try again."}`)}catch(ge){console.error("Failed to authenticate profile:",ge),alert("Failed to start authentication. Please try again.")}finally{A(null)}},he=ce=>{P===ce?(M(null),F(""),G(""),V(!1)):(M(ce),F(""),G(""),V(!1))},de=async ce=>{if(B.trim()){K(ce);try{const ge=await J.setClaudeProfileToken(ce,B.trim(),U.trim()||void 0);ge.success?(await z(),M(null),F(""),G(""),V(!1)):alert(`Failed to save token: ${ge.error||"Please try again."}`)}catch(ge){console.error("Failed to save token:",ge),alert("Failed to save token. Please try again.")}finally{K(null)}}},Ne=async()=>{q(!0);try{const ce=await J.getAutoSwitchSettings();ce.success&&ce.data&&L(ce.data)}catch(ce){console.error("Failed to load auto-switch settings:",ce)}finally{q(!1)}},Re=async ce=>{q(!0);try{const ge=await J.updateAutoSwitchSettings(ce);ge.success?await Ne():alert(`Failed to update settings: ${ge.error||"Please try again."}`)}catch(ge){console.error("Failed to update auto-switch settings:",ge),alert("Failed to update settings. Please try again.")}finally{q(!1)}};return s.jsx(Rn,{title:r("integrations.title"),description:r("integrations.description"),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.claudeAccounts")})]}),s.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r("integrations.claudeAccountsDescription")}),f?s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx(Ie,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):l.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-border p-4 text-center mb-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:r("integrations.noAccountsYet")})}):s.jsx("div",{className:"space-y-2 mb-4",children:l.map(ce=>s.jsxs("div",{className:le("rounded-lg border transition-colors",ce.id===h?"border-primary bg-primary/5":"border-border bg-background"),children:[s.jsxs("div",{className:le("flex items-center justify-between p-3",P!==ce.id&&"hover:bg-muted/50"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:le("h-7 w-7 rounded-full flex items-center justify-center text-xs font-medium shrink-0",ce.id===h?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(S===ce.id?T:ce.name).charAt(0).toUpperCase()}),s.jsx("div",{className:"min-w-0",children:S===ce.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{value:T,onChange:ge=>E(ge.target.value),className:"h-7 text-sm w-40",autoFocus:!0,onKeyDown:ge=>{ge.key==="Enter"&&W(),ge.key==="Escape"&&X()}}),s.jsx(te,{variant:"ghost",size:"icon",onClick:W,className:"h-7 w-7 text-success hover:text-success hover:bg-success/10",children:s.jsx(ts,{className:"h-3 w-3"})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:X,className:"h-7 w-7 text-muted-foreground hover:text-foreground",children:s.jsx(Ys,{className:"h-3 w-3"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:ce.name}),ce.isDefault&&s.jsx("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:r("integrations.default")}),ce.id===h&&s.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(el,{className:"h-3 w-3"}),r("integrations.active")]}),ce.oauthToken||ce.isDefault&&ce.configDir?s.jsxs("span",{className:"text-xs bg-success/20 text-success px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(ts,{className:"h-3 w-3"}),r("integrations.authenticated")]}):s.jsx("span",{className:"text-xs bg-warning/20 text-warning px-1.5 py-0.5 rounded",children:r("integrations.needsAuth")})]}),ce.email&&s.jsx("span",{className:"text-xs text-muted-foreground",children:ce.email})]})})]}),S!==ce.id&&s.jsxs("div",{className:"flex items-center gap-1",children:[ce.oauthToken||ce.isDefault&&ce.configDir?s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>se(ce.id),disabled:D===ce.id,className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Re-authenticate profile",children:D===ce.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(Dt,{className:"h-3 w-3"})}):s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>se(ce.id),disabled:D===ce.id,className:"gap-1 h-7 text-xs",children:[D===ce.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(z0,{className:"h-3 w-3"}),r("integrations.authenticate")]}),ce.id!==h&&s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>Q(ce.id),className:"gap-1 h-7 text-xs",children:[s.jsx(ts,{className:"h-3 w-3"}),r("integrations.setActive")]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>he(ce.id),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:P===ce.id?"Hide token entry":"Enter token manually",children:P===ce.id?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>re(ce),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Rename profile",children:s.jsx(ml,{className:"h-3 w-3"})}),!ce.isDefault&&s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>ie(ce.id),disabled:w===ce.id,className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-destructive/10",title:"Delete profile",children:w===ce.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(Br,{className:"h-3 w-3"})})]})]}),P===ce.id&&s.jsx("div",{className:"px-3 pb-3 pt-0 border-t border-border/50 mt-0",children:s.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mt-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-xs font-medium text-muted-foreground",children:r("integrations.manualTokenEntry")}),s.jsx("span",{className:"text-xs text-muted-foreground",children:r("integrations.runSetupToken")})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:$?"text":"password",placeholder:r("integrations.tokenPlaceholder"),value:B,onChange:ge=>F(ge.target.value),className:"pr-10 font-mono text-xs h-8"}),s.jsx("button",{type:"button",onClick:()=>V(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:$?s.jsx(Ln,{className:"h-3 w-3"}):s.jsx(zs,{className:"h-3 w-3"})})]}),s.jsx(Je,{type:"email",placeholder:r("integrations.emailPlaceholder"),value:U,onChange:ge=>G(ge.target.value),className:"text-xs h-8"})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>he(ce.id),className:"h-7 text-xs",children:i("buttons.cancel")}),s.jsxs(te,{size:"sm",onClick:()=>de(ce.id),disabled:!B.trim()||Y===ce.id,className:"h-7 text-xs gap-1",children:[Y===ce.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(ts,{className:"h-3 w-3"}),r("integrations.saveToken")]})]})]})})]},ce.id))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{placeholder:r("integrations.accountNamePlaceholder"),value:x,onChange:ce=>C(ce.target.value),className:"flex-1 h-8 text-sm",onKeyDown:ce=>{ce.key==="Enter"&&x.trim()&&ee()}}),s.jsxs(te,{onClick:ee,disabled:!x.trim()||_,size:"sm",className:"gap-1 shrink-0",children:[_?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(ys,{className:"h-3 w-3"}),i("buttons.add")]})]})]})]}),l.length>1&&s.jsxs("div",{className:"space-y-4 pt-6 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.autoSwitching")})]}),s.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4 space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:r("integrations.autoSwitchingDescription")}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(we,{className:"text-sm font-medium",children:r("integrations.enableAutoSwitching")}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.masterSwitch")})]}),s.jsx(Es,{checked:O?.enabled??!1,onCheckedChange:ce=>Re({enabled:ce}),disabled:I})]}),O?.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pl-6 space-y-4 pt-2 border-l-2 border-primary/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(we,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(zA,{className:"h-3.5 w-3.5"}),r("integrations.proactiveMonitoring")]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.proactiveDescription")})]}),s.jsx(Es,{checked:O?.proactiveSwapEnabled??!0,onCheckedChange:ce=>Re({proactiveSwapEnabled:ce}),disabled:I})]}),O?.proactiveSwapEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm",children:r("integrations.checkUsageEvery")}),s.jsxs("select",{className:"w-full px-3 py-2 bg-background border border-input rounded-md text-sm",value:O?.usageCheckInterval??3e4,onChange:ce=>Re({usageCheckInterval:parseInt(ce.target.value)}),disabled:I,children:[s.jsx("option",{value:15e3,children:r("integrations.seconds15")}),s.jsx("option",{value:3e4,children:r("integrations.seconds30")}),s.jsx("option",{value:6e4,children:r("integrations.minute1")}),s.jsx("option",{value:0,children:r("integrations.disabled")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm",children:r("integrations.sessionThreshold")}),s.jsxs("span",{className:"text-sm font-mono",children:[O?.sessionThreshold??95,"%"]})]}),s.jsx("input",{type:"range",min:"70",max:"99",step:"1",value:O?.sessionThreshold??95,onChange:ce=>Re({sessionThreshold:parseInt(ce.target.value)}),disabled:I,className:"w-full"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.sessionThresholdDescription")})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm",children:r("integrations.weeklyThreshold")}),s.jsxs("span",{className:"text-sm font-mono",children:[O?.weeklyThreshold??99,"%"]})]}),s.jsx("input",{type:"range",min:"70",max:"99",step:"1",value:O?.weeklyThreshold??99,onChange:ce=>Re({weeklyThreshold:parseInt(ce.target.value)}),disabled:I,className:"w-full"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.weeklyThresholdDescription")})]})]})]}),s.jsx("div",{className:"pl-6 space-y-4 pt-2 border-l-2 border-orange-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(we,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ct,{className:"h-3.5 w-3.5"}),r("integrations.reactiveRecovery")]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.reactiveDescription")})]}),s.jsx(Es,{checked:O?.autoSwitchOnRateLimit??!1,onCheckedChange:ce=>Re({autoSwitchOnRateLimit:ce}),disabled:I})]})})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.apiKeys")})]}),s.jsx("div",{className:"rounded-lg bg-info/10 border border-info/30 p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(sa,{className:"h-4 w-4 text-info shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.apiKeysInfo")})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"globalOpenAIKey",className:"text-sm font-medium text-foreground",children:r("integrations.openaiKey")}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.openaiKeyDescription")}),s.jsxs("div",{className:"relative max-w-lg",children:[s.jsx(Je,{id:"globalOpenAIKey",type:o?"text":"password",placeholder:"sk-...",value:e.globalOpenAIApiKey||"",onChange:ce=>t({...e,globalOpenAIApiKey:ce.target.value||void 0}),className:"pr-10 font-mono text-sm"}),s.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]})]})})]})]})})}function iE({markdown:e}){const t=y.useMemo(()=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^### (.+)$/gm,'<h4 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h4>').replace(/^## (.+)$/gm,'<h3 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h3>').replace(/\*\*([^*]+)\*\*/g,'<strong class="text-foreground font-medium">$1</strong>').replace(/`([^`]+)`/g,'<code class="px-1 py-0.5 bg-muted rounded text-xs">$1</code>').replace(/^- (.+)$/gm,`<li class="ml-4 text-muted-foreground before:content-[''] before:mr-2 before:text-muted-foreground/60">$1</li>`).replace(/(<li[^>]*>.*?<\/li>\n?)+/g,'<ul class="space-y-1 my-2">$&</ul>').replace(/\n\n/g,'<div class="h-2"></div>').replace(/\n/g,"<br/>"),[e]);return s.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:t}})}function aE({settings:e,onSettingsChange:t,section:n,version:r}){const{t:i}=rs("settings"),[o,c]=y.useState(null),[l,d]=y.useState(!1),[h,m]=y.useState(!1),[f,g]=y.useState(null),[x,C]=y.useState(r),[_,b]=y.useState(null),[w,j]=y.useState(!1),[S,N]=y.useState(!1),[T,E]=y.useState(null),[D,A]=y.useState(!1);y.useEffect(()=>{C(r)},[r]),y.useEffect(()=>{n==="updates"&&(F(),P())},[n]),y.useEffect(()=>J.onAutoBuildSourceUpdateProgress(V=>{g(V),V.stage==="complete"?(m(!1),V.newVersion&&C(V.newVersion),F()):V.stage==="error"&&m(!1)}),[]),y.useEffect(()=>{const $=J.onAppUpdateAvailable(K=>{b(K),j(!1)}),V=J.onAppUpdateDownloaded(K=>{b(K),N(!1),A(!0),E(null)}),Y=J.onAppUpdateProgress(K=>{E(K)});return()=>{$(),V(),Y()}},[]);const P=async()=>{j(!0);try{const $=await J.checkAppUpdate();$.success&&$.data?b($.data):b(null)}catch($){console.error("Failed to check for app updates:",$)}finally{j(!1)}},M=async()=>{N(!0);try{await J.downloadAppUpdate()}catch($){console.error("Failed to download app update:",$),N(!1)}},B=()=>{J.installAppUpdate()},F=async()=>{console.log("[AdvancedSettings] Checking for source updates..."),d(!0);try{const $=await J.checkAutoBuildSourceUpdate();console.log("[AdvancedSettings] Check result:",$),$.success&&$.data&&(c($.data),$.data.currentVersion&&C($.data.currentVersion))}catch($){console.error("[AdvancedSettings] Check error:",$)}finally{d(!1)}},U=()=>{m(!0),g(null),J.downloadAutoBuildSourceUpdate()};if(n==="updates")return s.jsx(Rn,{title:i("updates.title"),description:i("updates.description"),children:s.jsxs("div",{className:"space-y-6",children:[(_||D)&&s.jsxs("div",{className:"rounded-lg border-2 border-info/50 bg-info/5 p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-info",children:[s.jsx(us,{className:"h-5 w-5"}),s.jsx("h3",{className:"font-semibold",children:i("updates.appUpdateReady")})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:i("updates.newVersion")}),s.jsx("p",{className:"text-base font-medium text-foreground",children:_?.version||"Unknown"}),_?.releaseDate&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i("updates.released")," ",new Date(_.releaseDate).toLocaleDateString()]})]}),D?s.jsx(rt,{className:"h-6 w-6 text-success"}):S?s.jsx(Dt,{className:"h-6 w-6 animate-spin text-info"}):s.jsx(yi,{className:"h-6 w-6 text-info"})]}),_?.releaseNotes&&s.jsx("div",{className:"bg-background rounded-lg p-4 max-h-48 overflow-y-auto border border-border/50",children:s.jsx(iE,{markdown:_.releaseNotes})}),S&&T&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:i("updates.downloading")}),s.jsxs("span",{className:"text-foreground font-medium",children:[Math.round(T.percent),"%"]})]}),s.jsx(ao,{value:T.percent,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(T.transferred/1024/1024).toFixed(2)," MB / ",(T.total/1024/1024).toFixed(2)," MB"]})]}),D&&s.jsxs("div",{className:"flex items-center gap-3 text-sm text-success bg-success/10 border border-success/30 rounded-lg p-3",children:[s.jsx(rt,{className:"h-5 w-5 shrink-0"}),s.jsx("span",{children:i("updates.updateDownloaded")})]}),s.jsx("div",{className:"flex gap-3",children:D?s.jsxs(te,{onClick:B,children:[s.jsx(Dt,{className:"mr-2 h-4 w-4"}),i("updates.installAndRestart")]}):s.jsx(te,{onClick:M,disabled:S,children:S?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),i("updates.downloading")]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),i("updates.downloadUpdate")]})})})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:i("updates.version")}),s.jsx("p",{className:"text-base font-medium text-foreground",children:x||i("updates.loading")})]}),l?s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"}):o?.updateAvailable?s.jsx(ct,{className:"h-6 w-6 text-info"}):s.jsx(rt,{className:"h-6 w-6 text-success"})]}),l?s.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.checkingForUpdates")}):o?s.jsxs(s.Fragment,{children:[o.latestVersion&&o.updateAvailable&&s.jsxs("p",{className:"text-sm text-info",children:[i("updates.newVersionAvailable")," ",o.latestVersion]}),o.error&&s.jsx("p",{className:"text-sm text-destructive",children:o.error}),!o.updateAvailable&&!o.error&&s.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.latestVersion")}),o.updateAvailable&&s.jsxs("div",{className:"space-y-4 pt-2",children:[o.releaseNotes&&s.jsx("div",{className:"bg-background rounded-lg p-4 max-h-48 overflow-y-auto border border-border/50",children:s.jsx(iE,{markdown:o.releaseNotes})}),o.releaseUrl&&s.jsxs("button",{onClick:()=>J.openExternal(o.releaseUrl),className:"inline-flex items-center gap-1.5 text-sm text-info hover:text-info/80 hover:underline transition-colors",children:[s.jsx(Fs,{className:"h-3.5 w-3.5"}),i("updates.viewRelease")]}),h?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Dt,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{children:f?.message||"Downloading..."})]}),f?.percent!==void 0&&s.jsx(ao,{value:f.percent,className:"h-2"})]}):f?.stage==="complete"?s.jsxs("div",{className:"flex items-center gap-3 text-sm text-success",children:[s.jsx(rt,{className:"h-5 w-5"}),s.jsx("span",{children:f.message})]}):f?.stage==="error"?s.jsxs("div",{className:"flex items-center gap-3 text-sm text-destructive",children:[s.jsx(ct,{className:"h-5 w-5"}),s.jsx("span",{children:f.message})]}):s.jsxs(te,{onClick:U,children:[s.jsx(e8,{className:"mr-2 h-4 w-4"}),i("updates.downloadUpdate")]})]})]}):s.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.unableToCheck")}),s.jsx("div",{className:"pt-2",children:s.jsxs(te,{size:"sm",variant:"outline",onClick:F,disabled:l,children:[s.jsx(Dt,{className:le("mr-2 h-4 w-4",l&&"animate-spin")}),i("updates.checkForUpdates")]})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"font-medium text-foreground",children:i("updates.autoUpdateProjects")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.autoUpdateProjectsDescription")})]}),s.jsx(Es,{checked:e.autoUpdateAutoBuild,onCheckedChange:$=>t({...e,autoUpdateAutoBuild:$})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"font-medium text-foreground",children:i("updates.betaUpdates")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.betaUpdatesDescription")})]}),s.jsx(Es,{checked:e.betaUpdates??!1,onCheckedChange:$=>t({...e,betaUpdates:$})})]})]})});const G=[{key:"onTaskComplete",labelKey:"notifications.onTaskComplete",descriptionKey:"notifications.onTaskCompleteDescription"},{key:"onTaskFailed",labelKey:"notifications.onTaskFailed",descriptionKey:"notifications.onTaskFailedDescription"},{key:"onReviewNeeded",labelKey:"notifications.onReviewNeeded",descriptionKey:"notifications.onReviewNeededDescription"},{key:"sound",labelKey:"notifications.sound",descriptionKey:"notifications.soundDescription"}];return s.jsx(Rn,{title:i("notifications.title"),description:i("notifications.description"),children:s.jsx("div",{className:"space-y-4",children:G.map($=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"font-medium text-foreground",children:i($.labelKey)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i($.descriptionKey)})]}),s.jsx(Es,{checked:e.notifications[$.key],onCheckedChange:V=>t({...e,notifications:{...e.notifications,[$.key]:V}})})]},$.key))})})}function jte({selectedProjectId:e,onProjectChange:t,onProjectAdded:n}){const r=Et(f=>f.projects),[i,o]=y.useState(!1),[c,l]=y.useState(!1),d=f=>{f==="__add_new__"?(o(!0),l(!1)):(t(f||null),l(!1))},h=y.useCallback(async(f,g)=>{g.stopPropagation(),g.preventDefault(),await fR(f),l(!1)},[]),m=r.find(f=>f.id===e);return s.jsxs(s.Fragment,{children:[s.jsxs(gt,{value:e||"",onValueChange:d,open:c,onOpenChange:l,children:[s.jsx(ft,{className:"w-full [&_span]:truncate",children:s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1 overflow-hidden",children:[s.jsx(fl,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),s.jsx(xt,{placeholder:"Select a project...",className:"truncate min-w-0 flex-1"})]})}),s.jsxs(mt,{className:"min-w-(--radix-select-trigger-width) max-w-(--radix-select-trigger-width)",children:[r.length===0?s.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:s.jsx("p",{children:"No projects yet"})}):r.map(f=>s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Qe,{value:f.id,className:"flex-1 pr-10",children:s.jsx("span",{className:"truncate",title:`${f.name} - ${f.path}`,children:f.name})}),s.jsx("button",{type:"button",className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-md hover:bg-destructive/10 transition-colors",onPointerDown:g=>{g.stopPropagation()},onClick:g=>h(f.id,g),children:s.jsx(Br,{className:"h-3.5 w-3.5 text-destructive"})})]},f.id)),s.jsx(En,{className:"my-1"}),s.jsx(Qe,{value:"__add_new__",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4 shrink-0"}),s.jsx("span",{children:"Add Project..."})]})})]})]}),m&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"truncate block text-xs text-muted-foreground",title:m.path,children:m.path})}),s.jsx(Dw,{open:i,onOpenChange:o,onProjectAdded:(f,g)=>{t(f.id),n?.(f,g)}})]})}function _te(e,t){const[n,r]=y.useState([]),[i,o]=y.useState(!1),[c,l]=y.useState(null);return y.useEffect(()=>{(async()=>{if(t){o(!0),l(null);try{const h=await J.getLinearTeams(e);h.success&&h.data?r(h.data):l(h.error||"Failed to load teams")}catch(h){l(h instanceof Error?h.message:"Unknown error")}finally{o(!1)}}})()},[t,e]),{teams:n,isLoadingTeams:i,error:c,setError:l}}function Cte(e,t){const[n,r]=y.useState([]),[i,o]=y.useState(!1),[c,l]=y.useState(null);return y.useEffect(()=>{(async()=>{if(!t){r([]);return}o(!0),l(null);try{const h=await J.getLinearProjects(e,t);h.success&&h.data?r(h.data):l(h.error||"Failed to load projects")}catch(h){l(h instanceof Error?h.message:"Unknown error")}finally{o(!1)}})()},[e,t]),{projects:n,isLoadingProjects:i,error:c,setError:l}}function Nte(e,t,n,r){const[i,o]=y.useState([]),[c,l]=y.useState(!1),[d,h]=y.useState(null),m=y.useRef(r);return m.current=r,y.useEffect(()=>{(async()=>{if(!t){o([]);return}l(!0),h(null);try{const g=await J.getLinearIssues(e,t,n||void 0);g.success&&g.data?(o(g.data),m.current?.()):h(g.error||"Failed to load issues")}catch(g){h(g instanceof Error?g.message:"Unknown error")}finally{l(!1)}})()},[e,t,n]),{issues:i,isLoadingIssues:c,error:d,setError:h}}function kte(e,t,n){const r=y.useMemo(()=>e.filter(o=>{if(t){const c=t.toLowerCase(),l=o.title.toLowerCase().includes(c),d=o.identifier.toLowerCase().includes(c),h=o.description?.toLowerCase().includes(c);if(!l&&!d&&!h)return!1}return!(n!=="all"&&o.state.type!==n)}),[e,t,n]),i=y.useMemo(()=>{const o=new Set(e.map(c=>c.state.type));return Array.from(o)},[e]);return{filteredIssues:r,uniqueStateTypes:i}}function Ete(e){const[t,n]=y.useState(new Set),r=y.useCallback(d=>{n(h=>{const m=new Set(h);return m.has(d)?m.delete(d):m.add(d),m})},[]),i=y.useCallback(()=>{n(new Set(e.map(d=>d.id)))},[e]),o=y.useCallback(()=>{n(new Set)},[]),c=y.useMemo(()=>e.length>0&&e.every(d=>t.has(d.id)),[e,t]),l=y.useMemo(()=>e.some(d=>t.has(d.id))&&!c,[e,t,c]);return{selectedIssueIds:t,setSelectedIssueIds:n,selectionControls:{toggleIssue:r,selectAll:i,deselectAll:o,isAllSelected:c,isSomeSelected:l}}}function Ate(e,t){const[n,r]=y.useState(!1),[i,o]=y.useState(null),[c,l]=y.useState(null),d=y.useCallback(async h=>{if(h.size!==0){r(!0),l(null),o(null);try{const m=await J.importLinearIssues(e,Array.from(h));m.success&&m.data?(o(m.data),m.data.success&&t?.(m.data)):l(m.error||"Failed to import issues")}catch(m){l(m instanceof Error?m.message:"Unknown error")}finally{r(!1)}}},[e,t]);return{isImporting:n,importResult:i,error:c,setError:l,handleImport:d}}function Tte({projectId:e,open:t,onImportComplete:n}){const[r,i]=y.useState(""),[o,c]=y.useState(""),[l,d]=y.useState(""),[h,m]=y.useState("all"),{teams:f,isLoadingTeams:g,error:x,setError:C}=_te(e,t);y.useEffect(()=>{f.length===1&&!r&&i(f[0].id)},[f,r]);const{projects:_,isLoadingProjects:b,error:w,setError:j}=Cte(e,r),{issues:S,isLoadingIssues:N,error:T,setError:E}=Nte(e,r,o,()=>{M(new Set)}),{filteredIssues:D,uniqueStateTypes:A}=kte(S,l,h),{selectedIssueIds:P,setSelectedIssueIds:M,selectionControls:B}=Ete(D),{isImporting:F,importResult:U,error:G,setError:$,handleImport:V}=Ate(e,n),Y=G||T||w||x,K=y.useCallback(q=>{$(q),E(q),j(q),C(q)},[$,E,j,C]),O=y.useCallback(()=>{const q=r;i(""),setTimeout(()=>i(q),0)},[r]),L=y.useCallback(()=>{V(P)},[V,P]),I=y.useCallback(()=>{i(""),c(""),M(new Set),d(""),m("all"),K(null)},[K,M]);return{teams:f,projects:_,issues:D,uniqueStateTypes:A,selectedTeamId:r,selectedProjectId:o,selectedIssueIds:P,selectionControls:B,searchQuery:l,filterState:h,isLoadingTeams:g,isLoadingProjects:b,isLoadingIssues:N,isImporting:F,error:Y,setError:K,importResult:U,setSelectedTeamId:i,setSelectedProjectId:c,setSearchQuery:d,setFilterState:m,handleRefresh:O,handleImport:L,resetState:I}}function Dte({importResult:e,onClose:t}){return s.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4 flex items-center gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-success shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-success",children:["Successfully imported ",e.imported," task",e.imported!==1?"s":""]}),s.jsx("p",{className:"text-xs text-success/80 mt-1",children:"Tasks are being processed. Check your Kanban board for progress."})]}),s.jsx(te,{variant:"outline",size:"sm",onClick:t,children:"Close"})]})}function Rte({error:e}){return s.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive shrink-0"}),s.jsx("p",{className:"text-sm text-destructive",children:e})]})}function Pte({teams:e,projects:t,selectedTeamId:n,selectedProjectId:r,isLoadingTeams:i,isLoadingProjects:o,onTeamChange:c,onProjectChange:l}){return s.jsxs("div",{className:"flex gap-4 shrink-0",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Team"}),s.jsxs(gt,{value:n,onValueChange:c,disabled:i,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:i?"Loading...":"Select a team"})}),s.jsx(mt,{children:e.map(d=>s.jsxs(Qe,{value:d.id,children:[d.name," (",d.key,")"]},d.id))})]})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Project (Optional)"}),s.jsxs(gt,{value:r||"__all__",onValueChange:d=>l(d==="__all__"?"":d),disabled:o||!n,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:o?"Loading...":"All projects"})}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"__all__",children:"All projects"}),t.map(d=>s.jsx(Qe,{value:d.id,children:d.name},d.id))]})]})]})]})}function Mte({searchQuery:e,filterState:t,uniqueStateTypes:n,onSearchChange:r,onFilterChange:i}){return s.jsxs("div",{className:"flex gap-3 items-center shrink-0",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Je,{placeholder:"Search tasks...",value:e,onChange:o=>r(o.target.value),className:"pl-9"})]}),s.jsxs(gt,{value:t,onValueChange:i,children:[s.jsxs(ft,{className:"w-[150px]",children:[s.jsx($A,{className:"h-4 w-4 mr-2"}),s.jsx(xt,{})]}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"all",children:"All states"}),n.map(o=>s.jsx(Qe,{value:o,children:o.charAt(0).toUpperCase()+o.slice(1)},o))]})]})]})}function Lte({isAllSelected:e,isSomeSelected:t,selectedCount:n,filteredCount:r,isLoadingIssues:i,onSelectAll:o,onDeselectAll:c,onRefresh:l}){return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:e?c:o,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[e?s.jsx(V0,{className:"h-4 w-4 text-primary"}):t?s.jsx(U0,{className:"h-4 w-4"}):s.jsx($c,{className:"h-4 w-4"}),e?"Deselect all":"Select all"]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[n," of ",r," selected"]})]}),s.jsxs("button",{onClick:l,className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground",disabled:i,children:[s.jsx(Dt,{className:`h-3 w-3 ${i?"animate-spin":""}`}),"Refresh"]})]})}const Ite={0:"bg-muted text-muted-foreground",1:"bg-destructive/10 text-destructive",2:"bg-warning/10 text-warning",3:"bg-info/10 text-info",4:"bg-muted text-muted-foreground"},Ote={backlog:"bg-muted text-muted-foreground",unstarted:"bg-info/10 text-info",started:"bg-warning/10 text-warning",completed:"bg-success/10 text-success",canceled:"bg-destructive/10 text-destructive"};function Bte({issue:e,isSelected:t,onToggle:n}){const[r,i]=y.useState(!1);return s.jsx("div",{className:`
        rounded-lg border border-border p-3 cursor-pointer transition-colors
        ${t?"bg-primary/5 border-primary/30":"hover:bg-muted/50"}
      `,onClick:()=>n(e.id),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-0.5",children:t?s.jsx(V0,{className:"h-5 w-5 text-primary"}):s.jsx($c,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:e.identifier}),s.jsx(je,{variant:"secondary",className:`text-xs ${Ote[e.state.type]||""}`,children:e.state.name}),s.jsx(je,{variant:"secondary",className:`text-xs ${Ite[e.priority]||""}`,children:e.priorityLabel}),e.labels.slice(0,2).map(o=>s.jsx(je,{variant:"outline",className:"text-xs",style:{borderColor:o.color,color:o.color},children:o.name},o.id)),e.labels.length>2&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.labels.length-2," more"]})]}),s.jsx("h4",{className:"text-sm font-medium text-foreground mt-1 line-clamp-2",children:e.title}),e.description&&s.jsx("button",{onClick:o=>{o.stopPropagation(),i(!r)},className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mt-2",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"h-3 w-3"}),"Hide description"]}):s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"h-3 w-3"}),"Show description"]})}),r&&e.description&&s.jsx("div",{className:"mt-2 text-xs text-muted-foreground bg-muted/50 rounded p-2 max-h-32 overflow-auto",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.assignee&&s.jsxs("span",{children:["Assigned to ",e.assignee.name]}),e.project&&s.jsxs("span",{children:["Project: ",e.project.name]}),s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:o=>o.stopPropagation(),className:"flex items-center gap-1 hover:text-primary",children:[s.jsx(Fs,{className:"h-3 w-3"}),"View in Linear"]})]})]})]})})}function zte({issues:e,selectedIssueIds:t,isLoadingIssues:n,selectedTeamId:r,searchQuery:i,filterState:o,onToggleIssue:c}){return n?s.jsx(cs,{className:"flex-1 -mx-6 px-6 min-h-0",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):r?e.length===0?s.jsx(cs,{className:"flex-1 -mx-6 px-6 min-h-0",children:s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:i||o!=="all"?"No issues match your filters":"No issues found"})})}):s.jsx(cs,{className:"flex-1 -mx-6 px-6 min-h-0",children:s.jsx("div",{className:"space-y-2 py-2",children:e.map(l=>s.jsx(Bte,{issue:l,isSelected:t.has(l.id),onToggle:c},l.id))})}):s.jsx(cs,{className:"flex-1 -mx-6 px-6 min-h-0",children:s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:"Select a team to view issues"})})})}function Fte({projectId:e,open:t,onOpenChange:n,onImportComplete:r}){const{teams:i,projects:o,issues:c,uniqueStateTypes:l,selectedTeamId:d,selectedProjectId:h,selectedIssueIds:m,selectionControls:f,searchQuery:g,filterState:x,isLoadingTeams:C,isLoadingProjects:_,isLoadingIssues:b,isImporting:w,error:j,importResult:S,setSelectedTeamId:N,setSelectedProjectId:T,setSearchQuery:E,setFilterState:D,handleRefresh:A,handleImport:P,resetState:M}=Tte({projectId:e,open:t,onImportComplete:r}),B=F=>{F||M(),n(F)};return s.jsx(sn,{open:t,onOpenChange:B,children:s.jsxs(Xs,{className:"sm:max-w-[700px] max-h-[85vh] flex flex-col",children:[s.jsxs(Jt,{className:"shrink-0",children:[s.jsxs(es,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(yi,{className:"h-5 w-5"}),"Import Linear Tasks"]}),s.jsx(fs,{children:"Select tasks from Linear to import into AutoBuild"})]}),S?.success&&s.jsx(Dte,{importResult:S,onClose:()=>B(!1)}),j&&s.jsx(Rte,{error:j}),!S?.success&&s.jsxs(s.Fragment,{children:[s.jsx(Pte,{teams:i,projects:o,selectedTeamId:d,selectedProjectId:h,isLoadingTeams:C,isLoadingProjects:_,onTeamChange:N,onProjectChange:T}),s.jsx(Mte,{searchQuery:g,filterState:x,uniqueStateTypes:l,onSearchChange:E,onFilterChange:D}),c.length>0&&s.jsx(Lte,{isAllSelected:f.isAllSelected,isSomeSelected:f.isSomeSelected,selectedCount:m.size,filteredCount:c.length,isLoadingIssues:b,onSelectAll:f.selectAll,onDeselectAll:f.deselectAll,onRefresh:A}),s.jsx(zte,{issues:c,selectedIssueIds:m,isLoadingIssues:b,selectedTeamId:d,searchQuery:g,filterState:x,onToggleIssue:f.toggleIssue})]}),s.jsxs(Ts,{className:"shrink-0",children:[s.jsx(te,{variant:"outline",onClick:()=>B(!1),children:S?.success?"Done":"Cancel"}),!S?.success&&s.jsx(te,{onClick:P,disabled:m.size===0||w,children:w?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),"Import ",m.size," Task",m.size!==1?"s":""]})})]})]})})}const Ah=xr((e,t)=>({issues:[],syncStatus:null,isLoading:!1,error:null,selectedIssueNumber:null,filterState:"open",investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null,setIssues:n=>e({issues:n,error:null}),addIssue:n=>e(r=>({issues:[n,...r.issues.filter(i=>i.number!==n.number)]})),updateIssue:(n,r)=>e(i=>({issues:i.issues.map(o=>o.number===n?{...o,...r}:o)})),setSyncStatus:n=>e({syncStatus:n}),setLoading:n=>e({isLoading:n}),setError:n=>e({error:n,isLoading:!1}),selectIssue:n=>e({selectedIssueNumber:n}),setFilterState:n=>e({filterState:n}),setInvestigationStatus:n=>e({investigationStatus:n}),setInvestigationResult:n=>e({lastInvestigationResult:n}),clearIssues:()=>e({issues:[],syncStatus:null,selectedIssueNumber:null,error:null,investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null}),getSelectedIssue:()=>{const{issues:n,selectedIssueNumber:r}=t();return n.find(i=>i.number===r)||null},getFilteredIssues:()=>{const{issues:n,filterState:r}=t();return r==="all"?n:n.filter(i=>i.state===r)},getOpenIssuesCount:()=>{const{issues:n}=t();return n.filter(r=>r.state==="open").length}}));async function Hy(e,t){const n=Ah.getState();n.setLoading(!0),n.setError(null);try{const r=await J.getGitHubIssues(e,t);r.success&&r.data?n.setIssues(r.data):n.setError(r.error||"Failed to load GitHub issues")}catch(r){n.setError(r instanceof Error?r.message:"Unknown error")}finally{n.setLoading(!1)}}async function x0(e){const t=Ah.getState();try{const n=await J.checkGitHubConnection(e);return n.success&&n.data?(t.setSyncStatus(n.data),n.data):(t.setError(n.error||"Failed to check GitHub connection"),null)}catch(n){return t.setError(n instanceof Error?n.message:"Unknown error"),null}}function Hte(e,t,n){const r=Ah.getState();r.setInvestigationStatus({phase:"fetching",issueNumber:t,progress:0,message:"Starting investigation..."}),r.setInvestigationResult(null),J.investigateGitHubIssue(e,t,n)}function Ute(e,t){const[n,r]=y.useState(e.settings),[i,o]=y.useState(!1),[c,l]=y.useState(null),[d,h]=y.useState(null),[m,f]=y.useState(!1),[g,x]=y.useState(!1),[C,_]=y.useState(null),[b,w]=y.useState(!1),[j,S]=y.useState(null),[N,T]=y.useState(!1),[E,D]=y.useState(!1),[A,P]=y.useState(!1),[M,B]=y.useState(!1),[F,U]=y.useState({claude:!0,linear:!1,github:!1,graphiti:!1}),[G,$]=y.useState(!1),[V,Y]=y.useState(null),[K,O]=y.useState(!1),[L,I]=y.useState(!1),[q,z]=y.useState("checking"),[ee,ie]=y.useState(!1),[re,X]=y.useState(null),[W,Q]=y.useState(!1);return y.useEffect(()=>{r(e.settings)},[e]),y.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){f(!0);const Ee=await Sd(e.id);h(Ee),f(!1)}})()},[t,e.id,e.autoBuildPath]),y.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){w(!0),S(null);try{const Ee=await J.getProjectEnv(e.id);Ee.success&&Ee.data?_(Ee.data):S(Ee.error||"Failed to load environment config")}catch(Ee){S(Ee instanceof Error?Ee.message:"Unknown error")}finally{w(!1)}}})()},[t,e.id,e.autoBuildPath]),y.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){I(!0);try{const Ee=await J.checkClaudeAuth(e.id);Ee.success&&Ee.data?z(Ee.data.authenticated?"authenticated":"not_authenticated"):z("error")}catch{z("error")}finally{I(!1)}}})()},[t,e.id,e.autoBuildPath]),y.useEffect(()=>{const ae=async()=>{if(!C?.linearEnabled||!C.linearApiKey){X(null);return}Q(!0);try{const Ee=await J.checkLinearConnection(e.id);Ee.success&&Ee.data&&X(Ee.data)}catch{X({connected:!1,error:"Failed to check connection"})}finally{Q(!1)}};C?.linearEnabled&&C.linearApiKey&&ae()},[C?.linearEnabled,C?.linearApiKey,e.id]),y.useEffect(()=>{const ae=async()=>{if(!C?.githubEnabled||!C.githubToken||!C.githubRepo){Y(null);return}O(!0);try{const Ee=await x0(e.id);Ee&&Y(Ee)}catch{Y({connected:!1,error:"Failed to check connection"})}finally{O(!1)}};C?.githubEnabled&&C.githubToken&&C.githubRepo&&ae()},[C?.githubEnabled,C?.githubToken,C?.githubRepo,e.id]),{settings:n,setSettings:r,isSaving:i,error:c,setError:l,versionInfo:d,isCheckingVersion:m,isUpdating:g,envConfig:C,setEnvConfig:_,isLoadingEnv:b,envError:j,setEnvError:S,isSavingEnv:N,updateEnvConfig:async ae=>{if(C){const Ee={...C,...ae};try{const Be=await J.updateProjectEnv(e.id,Ee);Be.success||console.error("[useProjectSettings] Failed to auto-save env config:",Be.error)}catch(Be){console.error("[useProjectSettings] Error auto-saving env config:",Be)}_(Ee)}},showClaudeToken:E,setShowClaudeToken:D,showLinearKey:A,setShowLinearKey:P,showOpenAIKey:M,setShowOpenAIKey:B,showGitHubToken:G,setShowGitHubToken:$,expandedSections:F,toggleSection:ae=>{U(Ee=>({...Ee,[ae]:!Ee[ae]}))},gitHubConnectionStatus:V,isCheckingGitHub:K,isCheckingClaudeAuth:L,claudeAuthStatus:q,setClaudeAuthStatus:z,showLinearImportModal:ee,setShowLinearImportModal:ie,linearConnectionStatus:re,isCheckingLinear:W,handleInitialize:async()=>{x(!0),l(null);try{const ae=await ng(e.id);if(ae?.success){const Ee=await Sd(e.id);h(Ee);const Be=await J.getProjectEnv(e.id);Be.success&&Be.data&&_(Be.data)}else l(ae?.error||"Failed to initialize")}catch(ae){l(ae instanceof Error?ae.message:"Unknown error")}finally{x(!1)}},handleUpdate:async()=>{x(!0),l(null);try{const ae=await pR(e.id);if(ae?.success){const Ee=await Sd(e.id);h(Ee)}else l(ae?.error||"Failed to update")}catch(ae){l(ae instanceof Error?ae.message:"Unknown error")}finally{x(!1)}},handleSaveEnv:async()=>{if(C){T(!0),S(null);try{const ae=await J.updateProjectEnv(e.id,C);ae.success||S(ae.error||"Failed to save environment config")}catch(ae){S(ae instanceof Error?ae.message:"Unknown error")}finally{T(!1)}}},handleClaudeSetup:async()=>{I(!0);try{const ae=await J.invokeClaudeSetup(e.id);if(ae.success&&ae.data?.authenticated){z("authenticated");const Ee=await J.getProjectEnv(e.id);Ee.success&&Ee.data&&_(Ee.data)}}catch{z("error")}finally{I(!1)}},handleSave:async ae=>{o(!0),l(null);try{if(!await mR(e.id,n)){l("Failed to save settings");return}if(C){const Be=await J.updateProjectEnv(e.id,C);if(!Be.success){l(Be.error||"Failed to save environment config");return}}ae()}catch(Ee){l(Ee instanceof Error?Ee.message:"Unknown error")}finally{o(!1)}}}}function $te(){return s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(fl,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Select a project to view and edit its settings"})]})}function Vte({error:e,envError:t}){const n=e||t;return n?s.jsx("div",{className:"mt-4 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:n}):null}function Gte({project:e,settings:t,setSettings:n,versionInfo:r,isCheckingVersion:i,isUpdating:o,handleInitialize:c,handleUpdate:l}){return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Auto-Build Integration"}),e.autoBuildPath?s.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rt,{className:"h-4 w-4 text-success"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Initialized"})]}),s.jsx("code",{className:"text-xs bg-background px-2 py-1 rounded",children:e.autoBuildPath})]}),i?s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ie,{className:"h-3 w-3 animate-spin"}),"Checking status..."]}):r&&s.jsx("div",{className:"text-xs text-muted-foreground",children:r.isInitialized?"Initialized":"Not initialized"})]}):s.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-warning mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Not Initialized"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Initialize Auto-Build to enable task creation and agent workflows."}),s.jsx(te,{size:"sm",className:"mt-3",onClick:c,disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),"Initialize Auto-Build"]})})]})]})})]}),e.autoBuildPath&&s.jsxs(s.Fragment,{children:[s.jsx(En,{}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Agent Configuration"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"model",className:"text-sm font-medium text-foreground",children:"Model"}),s.jsxs(gt,{value:t.model,onValueChange:d=>n({...t,model:d}),children:[s.jsx(ft,{id:"model",children:s.jsx(xt,{})}),s.jsx(mt,{children:Yr.map(d=>s.jsx(Qe,{value:d.value,children:d.label},d.value))})]})]})]}),s.jsx(En,{}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"font-normal text-foreground",children:"On Task Complete"}),s.jsx(Es,{checked:t.notifications.onTaskComplete,onCheckedChange:d=>n({...t,notifications:{...t.notifications,onTaskComplete:d}})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"font-normal text-foreground",children:"On Task Failed"}),s.jsx(Es,{checked:t.notifications.onTaskFailed,onCheckedChange:d=>n({...t,notifications:{...t.notifications,onTaskFailed:d}})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"font-normal text-foreground",children:"On Review Needed"}),s.jsx(Es,{checked:t.notifications.onReviewNeeded,onCheckedChange:d=>n({...t,notifications:{...t.notifications,onReviewNeeded:d}})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"font-normal text-foreground",children:"Sound"}),s.jsx(Es,{checked:t.notifications.sound,onCheckedChange:d=>n({...t,notifications:{...t.notifications,sound:d}})})]})]})]})]})]})}function qte({envConfig:e,isLoadingEnv:t,envError:n,isCheckingClaudeAuth:r,claudeAuthStatus:i,handleClaudeSetup:o,expanded:c,onToggle:l}){const[d,h]=y.useState([]),[m,f]=y.useState(null),[g,x]=y.useState(!1);y.useEffect(()=>{(async()=>{x(!0);try{const w=await J.getClaudeProfiles();w.success&&w.data&&(h(w.data.profiles),f(w.data.activeProfileId))}catch(w){console.error("Failed to load Claude profiles:",w)}finally{x(!1)}})()},[]);const C=d.find(b=>b.id===m),_=d.some(b=>b.oauthToken);return s.jsxs("section",{className:"space-y-3",children:[s.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between text-sm font-semibold text-foreground hover:text-foreground/80",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4"}),"Claude Authentication",i==="authenticated"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-success/10 text-success rounded-full",children:"Connected"}),i==="not_authenticated"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-warning/10 text-warning rounded-full",children:"Not Connected"})]}),c?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),c&&s.jsx("div",{className:"space-y-4 pl-6 pt-2",children:t||g?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Loading configuration..."]}):e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jr,{className:"h-5 w-5 text-info mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Using Global Authentication"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Claude authentication is managed in"," ",s.jsx("span",{className:"font-medium text-info",children:"Settings  Integrations"}),". All projects share the same Claude accounts."]})]})]})}),_?s.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Active Account"})]})}),s.jsx(te,{size:"sm",variant:"outline",onClick:o,disabled:r,children:r?s.jsx(Ie,{className:"h-4 w-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Re-authenticate"]})})]}),C?s.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[s.jsx("div",{className:le("h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium shrink-0","bg-primary text-primary-foreground"),children:C.name.charAt(0).toUpperCase()}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:C.name}),s.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(el,{className:"h-3 w-3"}),"Active"]}),C.oauthToken||C.isDefault&&C.configDir?s.jsxs("span",{className:"text-xs bg-success/20 text-success px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(ts,{className:"h-3 w-3"}),"Authenticated"]}):s.jsx("span",{className:"text-xs bg-warning/20 text-warning px-1.5 py-0.5 rounded",children:"Needs Auth"})]}),C.email&&s.jsx("span",{className:"text-xs text-muted-foreground",children:C.email})]})]}):d.length>0?s.jsx("p",{className:"text-xs text-warning mt-2",children:"No active account selected. Go to Settings  Integrations to select an account."}):null,d.filter(b=>b.id!==m&&b.oauthToken).length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Other authenticated accounts (used for rate limit fallback):"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.filter(b=>b.id!==m&&b.oauthToken).map(b=>s.jsxs("div",{className:"flex items-center gap-1.5 text-xs bg-muted px-2 py-1 rounded",children:[s.jsx("div",{className:"h-4 w-4 rounded-full bg-muted-foreground/30 flex items-center justify-center text-[10px]",children:b.name.charAt(0).toUpperCase()}),s.jsx("span",{className:"text-muted-foreground",children:b.name})]},b.id))})]})]}):s.jsx("div",{className:"rounded-lg border border-warning/30 bg-warning/5 p-4",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx(wi,{className:"h-8 w-8 text-warning mb-2"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:"No Claude Accounts Configured"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-3",children:"Add a Claude account in the global settings to use Auto-Build."}),s.jsxs(te,{size:"sm",variant:"outline",onClick:()=>{window.dispatchEvent(new CustomEvent("open-app-settings",{detail:"integrations"}))},children:[s.jsx(kp,{className:"h-4 w-4 mr-2"}),"Open Integrations Settings"]})]})})]}):n?s.jsx("p",{className:"text-sm text-destructive",children:n}):null})]})}const oE=[{name:"embeddinggemma",description:"Google's lightweight embedding model (Recommended)",size_estimate:"621 MB",dim:768,installed:!1},{name:"nomic-embed-text",description:"Popular general-purpose embeddings",size_estimate:"274 MB",dim:768,installed:!1},{name:"mxbai-embed-large",description:"MixedBread AI large embeddings",size_estimate:"670 MB",dim:1024,installed:!1}];function cM({selectedModel:e,onModelSelect:t,disabled:n=!1,className:r}){const[i,o]=y.useState(oE),[c,l]=y.useState(!0),[d,h]=y.useState(null),[m,f]=y.useState(null),[g,x]=y.useState(!0),[C,_]=y.useState({}),b=y.useRef({}),w=async N=>{l(!0),f(null),console.log("[checkInstalledModels] About to call api.checkOllamaStatus, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasCheckOllamaStatus:typeof J?.checkOllamaStatus,api:J,windowAPI:window.__claudeAPI});try{const T=await J.checkOllamaStatus();if(N?.aborted)return;if(!T?.success||!T?.data?.running){x(!1),l(!1);return}x(!0);const E=await J.listOllamaEmbeddingModels();if(N?.aborted)return;if(E?.success&&E?.data?.embedding_models){const D=new Set(E.data.embedding_models.map(A=>{const P=A.name;return P.includes(":")?P.split(":")[0]:P}));o(oE.map(A=>{const P=A.name.includes(":")?A.name.split(":")[0]:A.name;return{...A,installed:D.has(P)||D.has(A.name)}}))}}catch(T){N?.aborted||(console.error("Failed to check Ollama models:",T),f("Failed to check Ollama models"))}finally{N?.aborted||l(!1)}};y.useEffect(()=>{const N=new AbortController;return w(N.signal),()=>N.abort()},[]),y.useEffect(()=>{const N=E=>{const D=Date.now();b.current[E.modelName]||(b.current[E.modelName]={lastCompleted:E.completed,lastUpdate:D});const A=b.current[E.modelName],P=D-A.lastUpdate,M=E.completed-A.lastCompleted;let B="",F="";if(P>100&&M>0){const U=M/P*1e3,G=E.total-E.completed,$=U>0?Math.ceil(G/U):0;U>1048576?B=`${(U/1048576).toFixed(1)} MB/s`:U>1024?B=`${(U/1024).toFixed(1)} KB/s`:U>0&&(B=`${Math.round(U)} B/s`),$>3600?F=`${Math.ceil($/3600)}h remaining`:$>60?F=`${Math.ceil($/60)}m remaining`:$>0&&(F=`${Math.ceil($)}s remaining`)}b.current[E.modelName]={lastCompleted:E.completed,lastUpdate:D},_(U=>{const G={...U};return G[E.modelName]={percentage:E.percentage,speed:B,timeRemaining:F},G})};let T;return J?.onDownloadProgress&&(T=J.onDownloadProgress(N)),()=>{T&&T()}},[]);const j=async N=>{h(N),f(null);try{const T=await J.pullOllamaModel(N);T?.success?await w():f(T?.error||`Failed to download ${N}`)}catch(T){f(T instanceof Error?T.message:"Download failed")}finally{h(null)}},S=N=>{!N.installed||n||t(N.name,N.dim)};return c?s.jsxs("div",{className:le("flex items-center justify-center py-8",r),children:[s.jsx(Ie,{className:"h-5 w-5 animate-spin text-muted-foreground"}),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Checking Ollama models..."})]}):g?s.jsxs("div",{className:le("space-y-3",r),children:[m&&s.jsx("div",{className:"rounded-md border border-destructive/30 bg-destructive/10 p-3",children:s.jsx("p",{className:"text-sm text-destructive",children:m})}),s.jsx("div",{className:"space-y-2",children:i.map(N=>{const T=e===N.name,E=d===N.name,D=C[N.name];return s.jsxs("div",{className:le("rounded-lg border transition-colors",N.installed&&!n?"cursor-pointer hover:bg-accent/50":"cursor-default",T&&"border-primary bg-primary/5",!N.installed&&"bg-muted/30"),onClick:()=>S(N),children:[s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:le("flex h-5 w-5 items-center justify-center rounded-full border-2 shrink-0",T?"border-primary bg-primary text-primary-foreground":N.installed?"border-muted-foreground/30":"border-muted-foreground/20 bg-muted/50"),children:T&&s.jsx(ts,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:N.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.dim," dim)"]}),N.installed&&s.jsx("span",{className:"inline-flex items-center rounded-full bg-success/10 px-2 py-0.5 text-xs text-success",children:"Installed"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:N.description})]})]}),!N.installed&&s.jsx(te,{variant:"outline",size:"sm",onClick:A=>{A.stopPropagation(),j(N.name)},disabled:E||n,className:"shrink-0",children:E?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-3.5 w-3.5 animate-spin mr-1.5"}),"Downloading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"h-3.5 w-3.5 mr-1.5"}),"Download",N.size_estimate&&s.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",N.size_estimate,")"]})]})})]}),E&&D&&s.jsxs("div",{className:"px-3 pb-3 space-y-1.5",children:[s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary via-primary to-primary/80 transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,D.percentage))}%`}})}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{className:"font-medium text-foreground",children:[Math.round(D.percentage),"%"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[D.speed&&s.jsx("span",{children:D.speed}),D.timeRemaining&&s.jsx("span",{className:"text-primary",children:D.timeRemaining})]})]})]})]},N.name)})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Select an installed model for semantic search. Memory works with keyword search even without embeddings."})]}):s.jsx("div",{className:le("rounded-lg border border-warning/30 bg-warning/10 p-4",r),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-warning",children:"Ollama not running"}),s.jsx("p",{className:"text-sm text-warning/80 mt-1",children:"Start Ollama to use local embedding models. Memory will still work with keyword search."}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>w(),className:"mt-3",children:[s.jsx(Dt,{className:"h-3.5 w-3.5 mr-1.5"}),"Retry"]})]})]})})}function Wte({envConfig:e,settings:t,setSettings:n,updateEnvConfig:r,showOpenAIKey:i,setShowOpenAIKey:o,expanded:c,onToggle:l}){const[d,h]=y.useState({openai:i,voyage:!1,google:!1,azure:!1});y.useEffect(()=>{h(C=>({...C,openai:i}))},[i]);const m=e?.graphitiProviderConfig?.embeddingProvider||"ollama",f=C=>{const _=!d[C];h(b=>({...b,[C]:_})),C==="openai"&&o(_)},g=(C,_)=>{r({graphitiProviderConfig:{...e?.graphitiProviderConfig,embeddingProvider:"ollama",ollamaEmbeddingModel:C,ollamaEmbeddingDim:_}})};if(!e)return null;const x=()=>m==="openai"?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(we,{className:"text-sm font-medium text-foreground",children:["OpenAI API Key ",e.openaiKeyIsGlobal?"(Override)":""]}),e.openaiKeyIsGlobal&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-info",children:[s.jsx(Jr,{className:"h-3 w-3"}),"Using global key"]})]}),e.openaiKeyIsGlobal?s.jsx("p",{className:"text-xs text-muted-foreground",children:"Using key from App Settings. Enter a project-specific key below to override."}):s.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for OpenAI embeddings"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:d.openai?"text":"password",placeholder:e.openaiKeyIsGlobal?"Enter to override global key...":"sk-xxxxxxxx",value:e.openaiKeyIsGlobal?"":e.openaiApiKey||"",onChange:C=>r({openaiApiKey:C.target.value||void 0}),className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>f("openai"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":d.openai?"Hide OpenAI API key":"Show OpenAI API key",children:d.openai?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"OpenAI"})]})]}):m==="voyage"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Voyage AI API Key"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for Voyage AI embeddings"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:d.voyage?"text":"password",value:e.graphitiProviderConfig?.voyageApiKey||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"voyage",voyageApiKey:C.target.value||void 0}}),placeholder:"pa-xxxxxxxx",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>f("voyage"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":d.voyage?"Hide Voyage AI API key":"Show Voyage AI API key",children:d.voyage?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://dash.voyageai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Voyage AI"})]}),s.jsxs("div",{className:"space-y-1 mt-3",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:"Embedding Model (optional)"}),s.jsx(Je,{placeholder:"voyage-3",value:e.graphitiProviderConfig?.voyageEmbeddingModel||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"voyage",voyageEmbeddingModel:C.target.value||void 0}})})]})]}):m==="google"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Google AI API Key"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for Google AI embeddings"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:d.google?"text":"password",value:e.graphitiProviderConfig?.googleApiKey||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"google",googleApiKey:C.target.value||void 0}}),placeholder:"AIzaSy...",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>f("google"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":d.google?"Hide Google API key":"Show Google API key",children:d.google?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Google AI Studio"})]})]}):m==="azure_openai"?s.jsxs("div",{className:"space-y-3 p-3 rounded-md bg-muted/50",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Azure OpenAI Configuration"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:"API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:d.azure?"text":"password",value:e.graphitiProviderConfig?.azureOpenaiApiKey||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiApiKey:C.target.value||void 0}}),placeholder:"Azure API Key",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>f("azure"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":d.azure?"Hide Azure OpenAI API key":"Show Azure OpenAI API key",children:d.azure?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:"Base URL"}),s.jsx(Je,{placeholder:"https://your-resource.openai.azure.com",value:e.graphitiProviderConfig?.azureOpenaiBaseUrl||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiBaseUrl:C.target.value||void 0}})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(we,{className:"text-xs text-muted-foreground",children:"Embedding Deployment Name"}),s.jsx(Je,{placeholder:"text-embedding-ada-002",value:e.graphitiProviderConfig?.azureOpenaiEmbeddingDeployment||"",onChange:C=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiEmbeddingDeployment:C.target.value||void 0}})})]})]}):m==="ollama"?s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Select Embedding Model"}),s.jsx(cM,{selectedModel:e.graphitiProviderConfig?.ollamaEmbeddingModel||"",onModelSelect:g})]}):null;return s.jsxs("section",{className:"space-y-3",children:[s.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between text-sm font-semibold text-foreground hover:text-foreground/80",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hl,{className:"h-4 w-4"}),"Memory",s.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${e.graphitiEnabled?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:e.graphitiEnabled?"Enabled":"Disabled"})]}),c?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]}),c&&s.jsxs("div",{className:"space-y-4 pl-6 pt-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(we,{className:"font-normal text-foreground",children:"Enable Memory"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Persistent cross-session memory using LadybugDB (embedded database)"})]}),s.jsx(Es,{checked:e.graphitiEnabled,onCheckedChange:C=>{r({graphitiEnabled:C}),n({...t,memoryBackend:C?"graphiti":"file"})}})]}),!e.graphitiEnabled&&s.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"Using file-based memory. Session insights are stored locally in JSON files. Enable Memory for persistent cross-session context with semantic search."})}),e.graphitiEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(we,{className:"font-normal text-foreground",children:"Enable Agent Memory Access"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow agents to search and add to the knowledge graph via MCP"})]}),s.jsx(Es,{checked:t.graphitiMcpEnabled,onCheckedChange:C=>n({...t,graphitiMcpEnabled:C})})]}),t.graphitiMcpEnabled&&s.jsxs("div",{className:"space-y-2 ml-6",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Graphiti MCP Server URL"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"URL of the Graphiti MCP server for agent memory access"}),s.jsx(Je,{placeholder:"http://localhost:8000/mcp/",value:t.graphitiMcpUrl||"",onChange:C=>n({...t,graphitiMcpUrl:C.target.value||void 0})})]}),s.jsx(En,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Embedding Provider"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Provider for semantic search (optional - keyword search works without)"}),s.jsxs(gt,{value:m,onValueChange:C=>{r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:C}})},children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"Select embedding provider"})}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"ollama",children:"Ollama (Local - Free)"}),s.jsx(Qe,{value:"openai",children:"OpenAI"}),s.jsx(Qe,{value:"voyage",children:"Voyage AI"}),s.jsx(Qe,{value:"google",children:"Google AI"}),s.jsx(Qe,{value:"azure_openai",children:"Azure OpenAI"})]})]})]}),x(),s.jsx(En,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Database Name"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Stored in ~/.auto-claude/memories/"}),s.jsx(Je,{placeholder:"auto_claude_memory",value:e.graphitiDatabase||"",onChange:C=>r({graphitiDatabase:C.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Database Path (Optional)"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom storage location. Default: ~/.auto-claude/memories/"}),s.jsx(Je,{placeholder:"~/.auto-claude/memories",value:e.graphitiDbPath||"",onChange:C=>r({graphitiDbPath:C.target.value||void 0})})]})]})]})]})}function Kte({envConfig:e,updateEnvConfig:t,showLinearKey:n,setShowLinearKey:r,linearConnectionStatus:i,isCheckingLinear:o,onOpenLinearImport:c}){return e?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(we,{className:"font-normal text-foreground",children:"Enable Linear Sync"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Create and update Linear issues automatically"})]}),s.jsx(Es,{checked:e.linearEnabled,onCheckedChange:l=>t({linearEnabled:l})})]}),e.linearEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"API Key"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your API key from"," ",s.jsx("a",{href:"https://linear.app/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"Linear Settings"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:n?"text":"password",placeholder:"lin_api_xxxxxxxx",value:e.linearApiKey||"",onChange:l=>t({linearApiKey:l.target.value}),className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]})]}),e.linearApiKey&&s.jsx(Yte,{isChecking:o,connectionStatus:i}),i?.connected&&s.jsx(Xte,{onOpenLinearImport:c}),s.jsx(En,{}),s.jsx(Zte,{enabled:e.linearRealtimeSync||!1,onToggle:l=>t({linearRealtimeSync:l})}),e.linearRealtimeSync&&s.jsx(Qte,{}),s.jsx(En,{}),s.jsx(Jte,{teamId:e.linearTeamId||"",projectId:e.linearProjectId||"",onTeamIdChange:l=>t({linearTeamId:l}),onProjectIdChange:l=>t({linearProjectId:l})})]})]}):null}function Yte({isChecking:e,connectionStatus:t}){return s.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Connection Status"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e?"Checking...":t?.connected?`Connected${t.teamName?` to ${t.teamName}`:""}`:t?.error||"Not connected"}),t?.connected&&t.issueCount!==void 0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.issueCount,"+ tasks available to import"]})]}),e?s.jsx(Ie,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t?.connected?s.jsx(rt,{className:"h-4 w-4 text-success"}):s.jsx(ct,{className:"h-4 w-4 text-warning"})]})})}function Xte({onOpenLinearImport:e}){return s.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(CN,{className:"h-5 w-5 text-info mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Import Existing Tasks"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select which Linear issues to import into AutoBuild as tasks."}),s.jsxs(te,{size:"sm",variant:"outline",className:"mt-2",onClick:e,children:[s.jsx(CN,{className:"h-4 w-4 mr-2"}),"Import Tasks from Linear"]})]})]})})}function Zte({enabled:e,onToggle:t}){return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(RH,{className:"h-4 w-4 text-info"}),s.jsx(we,{className:"font-normal text-foreground",children:"Real-time Sync"})]}),s.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Automatically import new tasks created in Linear"})]}),s.jsx(Es,{checked:e,onCheckedChange:t})]})}function Qte(){return s.jsx("div",{className:"rounded-lg border border-warning/30 bg-warning/5 p-3 ml-6",children:s.jsx("p",{className:"text-xs text-warning",children:"When enabled, new Linear issues will be automatically imported into AutoBuild. Make sure to configure your team/project filters below to control which issues are imported."})})}function Jte({teamId:e,projectId:t,onTeamIdChange:n,onProjectIdChange:r}){return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Team ID (Optional)"}),s.jsx(Je,{placeholder:"Auto-detected",value:e,onChange:i=>n(i.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Project ID (Optional)"}),s.jsx(Je,{placeholder:"Auto-created",value:t,onChange:i=>r(i.target.value)})]})]})}var ese={};const tse=ese.DEBUG==="true";function Rt(e,t){tse&&(t!==void 0?console.warn(`[GitHubOAuth] ${e}`,t):console.warn(`[GitHubOAuth] ${e}`))}const lE=300*1e3;function uM({onSuccess:e,onCancel:t}){const[n,r]=y.useState("checking"),[i,o]=y.useState(null),[c,l]=y.useState(!1),[d,h]=y.useState(),[m,f]=y.useState(),[g,x]=y.useState(null),[C,_]=y.useState(null),[b,w]=y.useState(!1),[j,S]=y.useState(!1),[N,T]=y.useState(!1),[E,D]=y.useState(!1),A=y.useRef(null),P=y.useRef(null),M=y.useRef(null),B=y.useRef(!1),F=y.useCallback(()=>{A.current&&(Rt("Clearing auth timeout"),clearTimeout(A.current),A.current=null)},[]);y.useEffect(()=>()=>{P.current&&clearTimeout(P.current),M.current&&clearTimeout(M.current)},[]);const U=y.useCallback(()=>{Rt("Authentication timeout triggered after 5 minutes"),D(!0),o("Authentication timed out. The authentication window was open for too long. Please try again."),r("error"),A.current=null},[]);y.useEffect(()=>{if(B.current){Rt("Skipping duplicate check (Strict Mode)");return}return B.current=!0,Rt("Component mounted, checking GitHub status..."),G(),()=>{F()}},[F]);const G=async()=>{Rt("checkGitHubStatus() called"),r("checking"),o(null);try{Rt("Calling checkGitHubCli...");const I=await J.checkGitHubCli();if(Rt("checkGitHubCli result:",I),!I.success){Rt("checkGitHubCli failed:",I.error),o(I.error||"Failed to check GitHub CLI"),r("error");return}if(!I.data?.installed){Rt("GitHub CLI not installed"),r("need-install"),l(!1);return}l(!0),h(I.data.version),Rt("GitHub CLI installed, version:",I.data.version),Rt("Calling checkGitHubAuth...");const q=await J.checkGitHubAuth();Rt("checkGitHubAuth result:",q),q.success&&q.data?.authenticated?(Rt("Already authenticated as:",q.data.username),f(q.data.username),await $()):(Rt("Not authenticated, showing auth prompt"),r("need-auth"))}catch(I){Rt("Error in checkGitHubStatus:",I),o(I instanceof Error?I.message:"Unknown error"),r("error")}},$=async()=>{Rt("fetchAndNotifyToken() called");try{Rt("Calling getGitHubToken...");const I=await J.getGitHubToken();Rt("getGitHubToken result:",{success:I.success,hasToken:!!I.data?.token,tokenLength:I.data?.token?.length,error:I.error}),I.success&&I.data?.token?(Rt("Token retrieved successfully, calling onSuccess with username:",m),r("success"),e(I.data.token,m)):(Rt("Failed to get token:",I.error),o(I.error||"Failed to get token"),r("error"))}catch(I){Rt("Error in fetchAndNotifyToken:",I),o(I instanceof Error?I.message:"Failed to get token"),r("error")}},V=async()=>{Rt("handleStartAuth() called"),r("authenticating"),o(null),x(null),_(null),w(!1),S(!1),T(!1),D(!1),F(),Rt(`Starting auth timeout (${lE/1e3/60} minutes)`),A.current=setTimeout(U,lE);try{Rt("Calling startGitHubAuth...");const I=await J.startGitHubAuth();if(Rt("startGitHubAuth result:",I),F(),I.data?.deviceCode&&(Rt("Device code received:",I.data.deviceCode),x(I.data.deviceCode)),I.data?.authUrl&&(Rt("Auth URL received:",I.data.authUrl),_(I.data.authUrl)),I.data?.browserOpened!==void 0&&(Rt("Browser opened status:",I.data.browserOpened),w(I.data.browserOpened)),I.success&&I.data?.success)Rt("Auth successful, fetching token..."),await $();else{Rt("Auth failed:",I.error);const q=I.error||"Authentication failed";o(q),I.data?.fallbackUrl&&_(I.data.fallbackUrl),r("error")}}catch(I){F(),Rt("Error in handleStartAuth:",I),o(I instanceof Error?I.message:"Authentication failed"),r("error")}},Y=()=>{Rt("Opening gh CLI install page"),window.open("https://cli.github.com/","_blank")},K=()=>{Rt("Retry clicked"),G()},O=async()=>{if(g){Rt("Copying device code to clipboard");try{await navigator.clipboard.writeText(g),S(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>S(!1),2e3)}catch(I){Rt("Failed to copy device code:",I)}}},L=()=>{C&&(Rt("Opening auth URL manually:",C),window.open(C,"_blank"))};return Rt("Rendering with status:",n),s.jsxs("div",{className:"space-y-4",children:[n==="checking"&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),n==="need-install"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:"border border-warning/30 bg-warning/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(tl,{className:"h-6 w-6 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"GitHub CLI Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The GitHub CLI (gh) is required for OAuth authentication. This provides a secure way to authenticate without manually creating tokens."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(te,{onClick:Y,className:"gap-2",children:[s.jsx(Fs,{className:"h-4 w-4"}),"Install GitHub CLI"]}),s.jsx(te,{variant:"outline",onClick:K,children:"I've Installed It"})]})]})]})})}),s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(sa,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-2",children:"Installation instructions:"}),s.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:["macOS: ",s.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded font-mono text-xs",children:"brew install gh"})]}),s.jsxs("li",{children:["Windows: ",s.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded font-mono text-xs",children:"winget install GitHub.cli"})]}),s.jsxs("li",{children:["Linux: Visit ",s.jsx("a",{href:"https://cli.github.com/",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"cli.github.com"})]})]})]})]})})})]}),n==="need-auth"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Yn,{className:"h-6 w-6 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Connect to GitHub"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the button below to authenticate with GitHub. This will open your browser where you can authorize the application."}),d&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Using GitHub CLI ",d]})]})]})})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(te,{onClick:V,size:"lg",className:"gap-2",children:[s.jsx(Yn,{className:"h-5 w-5"}),"Authenticate with GitHub"]})})]}),n==="authenticating"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ie,{className:"h-6 w-6 animate-spin text-info shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticating..."}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b?"Please complete the authentication in your browser. This window will update automatically.":"Waiting for authentication flow to start..."})]})]})})}),g&&s.jsx(He,{className:"border border-primary/30 bg-primary/5",children:s.jsx(pt,{className:"p-6",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Your one-time code"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("code",{className:"text-3xl font-mono font-bold tracking-widest text-primary px-4 py-2 bg-primary/10 rounded-lg",children:g}),s.jsx(te,{variant:"outline",size:"sm",onClick:O,className:"shrink-0",children:j?s.jsxs(s.Fragment,{children:[s.jsx(ts,{className:"h-4 w-4 mr-1 text-success"}),"Copied"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ac,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:b?"Enter this code in your browser to complete authentication.":"Copy this code, then open the link below to authenticate."}),!b&&C&&s.jsxs(te,{variant:"link",onClick:L,className:"text-info hover:text-info/80 p-0 h-auto gap-1",children:[s.jsx(Fs,{className:"h-4 w-4"}),"Open ",C]})]})]})})})]}),n==="success"&&s.jsx(He,{className:"border border-success/30 bg-success/10",children:s.jsx(pt,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(rt,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-success",children:"Successfully Connected"}),s.jsx("p",{className:"text-sm text-success/80 mt-1",children:m?`Connected as ${m}`:"Your GitHub account is now connected"})]})]})})}),n==="error"&&i&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:`border ${E?"border-warning/30 bg-warning/10":"border-destructive/30 bg-destructive/10"}`,children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-3",children:[E?s.jsx(Ci,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}):s.jsx(ct,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`text-lg font-medium ${E?"text-warning":"text-destructive"}`,children:E?"Authentication Timed Out":"Authentication Failed"}),s.jsx("p",{className:`text-sm mt-1 ${E?"text-warning/80":"text-destructive/80"}`,children:i})]})]})})}),C&&s.jsx(He,{className:"border border-warning/30 bg-warning/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(sa,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-base font-medium text-foreground",children:"Complete Authentication Manually"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"The browser couldn't be opened automatically. Please visit the URL below to complete authentication:"})]})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[s.jsx("code",{className:"text-sm font-mono text-foreground flex-1 break-all",children:C}),s.jsx(te,{variant:"outline",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(C),T(!0),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>T(!1),2e3)}catch(I){Rt("Failed to copy URL:",I)}},className:"shrink-0",children:N?s.jsxs(s.Fragment,{children:[s.jsx(ts,{className:"h-4 w-4 mr-1 text-success"}),"Copied"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ac,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),s.jsxs(te,{variant:"secondary",onClick:L,className:"gap-2",children:[s.jsx(Fs,{className:"h-4 w-4"}),"Open URL in Browser"]})]}),g&&s.jsx("div",{className:"pt-2 border-t border-warning/20",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["When prompted, enter this code:"," ",s.jsx("code",{className:"font-mono font-bold text-primary px-2 py-0.5 bg-primary/10 rounded",children:g})]})})]})})}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx(te,{onClick:V,variant:"outline",children:"Retry"}),t&&s.jsx(te,{onClick:t,variant:"ghost",children:"Cancel"})]})]}),n!=="error"&&n!=="success"&&t&&s.jsx("div",{className:"flex justify-center pt-2",children:s.jsx(te,{onClick:t,variant:"ghost",children:"Cancel"})})]})}function sse({value:e,onChange:t,placeholder:n,className:r}){const[i,o]=y.useState(!1);return s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:i?"text":"password",placeholder:n,value:e,onChange:c=>t(c.target.value),className:r||"pr-10"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]})}var nse={};const rse=nse.DEBUG==="true";function Cs(e,t){rse&&(t!==void 0?console.warn(`[GitHubIntegration] ${e}`,t):console.warn(`[GitHubIntegration] ${e}`))}function ise({envConfig:e,updateEnvConfig:t,showGitHubToken:n,setShowGitHubToken:r,gitHubConnectionStatus:i,isCheckingGitHub:o,projectPath:c}){const[l,d]=y.useState("manual"),[h,m]=y.useState(null),[f,g]=y.useState([]),[x,C]=y.useState(!1),[_,b]=y.useState(null),[w,j]=y.useState([]),[S,N]=y.useState(!1),[T,E]=y.useState(null);Cs("Render - authMode:",l),Cs("Render - projectPath:",c),Cs("Render - envConfig:",e?{githubEnabled:e.githubEnabled,hasToken:!!e.githubToken,defaultBranch:e.defaultBranch}:null),y.useEffect(()=>{l==="oauth-success"&&A()},[l]),y.useEffect(()=>{Cs(`useEffect[branches] - githubEnabled: ${e?.githubEnabled}, projectPath: ${c}`),e?.githubEnabled&&c?(Cs("useEffect[branches] - Triggering fetchBranches"),D()):Cs("useEffect[branches] - Skipping fetchBranches (conditions not met)")},[e?.githubEnabled,c]);const D=async()=>{if(!c){Cs("fetchBranches: No projectPath, skipping");return}Cs("fetchBranches: Starting with projectPath:",c),N(!0),E(null);try{Cs("fetchBranches: Calling getGitBranches...");const U=await J.getGitBranches(c);if(Cs("fetchBranches: getGitBranches result:",{success:U.success,dataType:typeof U.data,dataLength:Array.isArray(U.data)?U.data.length:"N/A",error:U.error}),U.success&&U.data){if(j(U.data),Cs("fetchBranches: Loaded branches:",U.data.length),!e?.defaultBranch){Cs("fetchBranches: No defaultBranch set, auto-detecting...");const G=await J.detectMainBranch(c);Cs("fetchBranches: detectMainBranch result:",G),G.success&&G.data&&(Cs("fetchBranches: Auto-detected default branch:",G.data),t({defaultBranch:G.data}))}}else Cs("fetchBranches: Failed -",U.error||"No data returned"),E(U.error||"Failed to load branches")}catch(U){Cs("fetchBranches: Exception:",U),E(U instanceof Error?U.message:"Failed to load branches")}finally{N(!1)}},A=async()=>{Cs("Fetching user repositories..."),C(!0),b(null);try{const U=await J.listGitHubUserRepos();Cs("listGitHubUserRepos result:",U),U.success&&U.data?.repos?(g(U.data.repos),Cs("Loaded repos:",U.data.repos.length)):b(U.error||"Failed to load repositories")}catch(U){Cs("Error fetching repos:",U),b(U instanceof Error?U.message:"Failed to load repositories")}finally{C(!1)}};if(!e)return Cs("No envConfig, returning null"),null;const P=(U,G)=>{Cs("handleOAuthSuccess called with token length:",U.length),Cs("OAuth username:",G),t({githubToken:U}),m(G||null),d("oauth-success")},M=()=>{d("manual"),m(null)},B=()=>{d("oauth")},F=U=>{Cs("Selected repo:",U),t({githubRepo:U})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(we,{className:"font-normal text-foreground",children:"Enable GitHub Issues"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync issues from GitHub and create tasks automatically"})]}),s.jsx(Es,{checked:e.githubEnabled,onCheckedChange:U=>t({githubEnabled:U})})]}),e.githubEnabled&&s.jsxs(s.Fragment,{children:[l==="oauth-success"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-lg border border-success/30 bg-success/10 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-success"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-success",children:"Connected via GitHub CLI"}),h&&s.jsxs("p",{className:"text-xs text-success/80 flex items-center gap-1 mt-0.5",children:[s.jsx(Ja,{className:"h-3 w-3"}),"Authenticated as ",h]})]})]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:M,className:"text-xs",children:"Use Different Token"})]})}),s.jsx(ase,{repos:f,selectedRepo:e.githubRepo||"",isLoading:x,error:_,onSelect:F,onRefresh:A,onManualEntry:()=>d("manual")})]}),l==="oauth"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"GitHub Authentication"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:M,children:"Use Manual Token"})]}),s.jsx(uM,{onSuccess:P,onCancel:M})]}),l==="manual"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Personal Access Token"}),s.jsxs(te,{variant:"outline",size:"sm",onClick:B,className:"gap-2",children:[s.jsx(Q8,{className:"h-3 w-3"}),"Use OAuth Instead"]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Create a token with ",s.jsx("code",{className:"px-1 bg-muted rounded",children:"repo"})," scope from"," ",s.jsx("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=Auto-Build-UI",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"GitHub Settings"})]}),s.jsx(sse,{value:e.githubToken||"",onChange:U=>t({githubToken:U}),placeholder:"ghp_xxxxxxxx or github_pat_xxxxxxxx"})]}),s.jsx(ose,{value:e.githubRepo||"",onChange:U=>t({githubRepo:U})})]}),e.githubToken&&e.githubRepo&&s.jsx(lse,{isChecking:o,connectionStatus:i}),i?.connected&&s.jsx(cse,{}),s.jsx(En,{}),c&&s.jsx(dse,{branches:w,selectedBranch:e.defaultBranch||"",isLoading:S,error:T,onSelect:U=>t({defaultBranch:U}),onRefresh:D}),s.jsx(En,{}),s.jsx(use,{enabled:e.githubAutoSync||!1,onToggle:U=>t({githubAutoSync:U})})]})]})}function ase({repos:e,selectedRepo:t,isLoading:n,error:r,onSelect:i,onRefresh:o,onManualEntry:c}){const[l,d]=y.useState(!1),[h,m]=y.useState(""),f=e.filter(x=>x.fullName.toLowerCase().includes(h.toLowerCase())||x.description?.toLowerCase().includes(h.toLowerCase())),g=e.find(x=>x.fullName===t);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Repository"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:o,disabled:n,className:"h-7 px-2",children:s.jsx(Dt,{className:`h-3 w-3 ${n?"animate-spin":""}`})}),s.jsx(te,{variant:"ghost",size:"sm",onClick:c,className:"h-7 text-xs",children:"Enter Manually"})]})]}),r&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[s.jsx(ct,{className:"h-3 w-3"}),r]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>d(!l),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[n?s.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Loading repositories..."]}):t?s.jsxs("span",{className:"flex items-center gap-2",children:[g?.isPrivate?s.jsx(zm,{className:"h-3 w-3 text-muted-foreground"}):s.jsx(Jr,{className:"h-3 w-3 text-muted-foreground"}),t]}):s.jsx("span",{className:"text-muted-foreground",children:"Select a repository..."}),s.jsx(Gt,{className:`h-4 w-4 text-muted-foreground transition-transform ${l?"rotate-180":""}`})]}),l&&!n&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-border",children:s.jsx(Je,{placeholder:"Search repositories...",value:h,onChange:x=>m(x.target.value),className:"h-8 text-sm",autoFocus:!0})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:f.length===0?s.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:h?"No matching repositories":"No repositories found"}):f.map(x=>s.jsxs("button",{type:"button",onClick:()=>{i(x.fullName),d(!1),m("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-start gap-2 ${x.fullName===t?"bg-accent":""}`,children:[x.isPrivate?s.jsx(zm,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}):s.jsx(Jr,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:x.fullName}),x.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:x.description})]})]},x.fullName))})]})]}),t&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",s.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}function ose({value:e,onChange:t}){return s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Repository"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Format: ",s.jsx("code",{className:"px-1 bg-muted rounded",children:"owner/repo"})," (e.g., facebook/react)"]}),s.jsx(Je,{placeholder:"owner/repository",value:e,onChange:n=>t(n.target.value)})]})}function lse({isChecking:e,connectionStatus:t}){return s.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Connection Status"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e?"Checking...":t?.connected?`Connected to ${t.repoFullName}`:t?.error||"Not connected"}),t?.connected&&t.repoDescription&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:t.repoDescription})]}),e?s.jsx(Ie,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t?.connected?s.jsx(rt,{className:"h-4 w-4 text-success"}):s.jsx(ct,{className:"h-4 w-4 text-warning"})]})})}function cse(){return s.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Yn,{className:"h-5 w-5 text-info mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Issues Available"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Access GitHub Issues from the sidebar to view, investigate, and create tasks from issues."})]})]})})}function use({enabled:e,onToggle:t}){return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dt,{className:"h-4 w-4 text-info"}),s.jsx(we,{className:"font-normal text-foreground",children:"Auto-Sync on Load"})]}),s.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Automatically fetch issues when the project loads"})]}),s.jsx(Es,{checked:e,onCheckedChange:t})]})}function dse({branches:e,selectedBranch:t,isLoading:n,error:r,onSelect:i,onRefresh:o}){const[c,l]=y.useState(!1),[d,h]=y.useState(""),m=e.filter(f=>f.toLowerCase().includes(d.toLowerCase()));return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 text-info"}),s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Default Branch"})]}),s.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Base branch for creating task worktrees"})]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:o,disabled:n,className:"h-7 px-2",children:s.jsx(Dt,{className:`h-3 w-3 ${n?"animate-spin":""}`})})]}),r&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive pl-6",children:[s.jsx(ct,{className:"h-3 w-3"}),r]}),s.jsxs("div",{className:"relative pl-6",children:[s.jsxs("button",{type:"button",onClick:()=>l(!c),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[n?s.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Loading branches..."]}):t?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-3 w-3 text-muted-foreground"}),t]}):s.jsx("span",{className:"text-muted-foreground",children:"Auto-detect (main/master)"}),s.jsx(Gt,{className:`h-4 w-4 text-muted-foreground transition-transform ${c?"rotate-180":""}`})]}),c&&!n&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-border",children:s.jsx(Je,{placeholder:"Search branches...",value:d,onChange:f=>h(f.target.value),className:"h-8 text-sm",autoFocus:!0})}),s.jsx("button",{type:"button",onClick:()=>{i(""),l(!1),h("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${t?"":"bg-accent"}`,children:s.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Auto-detect (main/master)"})}),s.jsx("div",{className:"max-h-40 overflow-y-auto border-t border-border",children:m.length===0?s.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:d?"No matching branches":"No branches found"}):m.map(f=>s.jsxs("button",{type:"button",onClick:()=>{i(f),l(!1),h("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${f===t?"bg-accent":""}`,children:[s.jsx(bn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:f})]},f))})]})]}),t&&s.jsxs("p",{className:"text-xs text-muted-foreground pl-6",children:["All new tasks will branch from ",s.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}function fm({initialized:e,title:t,description:n,children:r}){return e?s.jsx(s.Fragment,{children:r}):s.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-4 text-center text-sm text-muted-foreground",children:["Initialize Auto-Build first to configure ",t.toLowerCase()]})}function hse({activeSection:e,project:t,settings:n,setSettings:r,versionInfo:i,isCheckingVersion:o,isUpdating:c,envConfig:l,isLoadingEnv:d,envError:h,updateEnvConfig:m,showClaudeToken:f,setShowClaudeToken:g,showLinearKey:x,setShowLinearKey:C,showOpenAIKey:_,setShowOpenAIKey:b,showGitHubToken:w,setShowGitHubToken:j,gitHubConnectionStatus:S,isCheckingGitHub:N,isCheckingClaudeAuth:T,claudeAuthStatus:E,linearConnectionStatus:D,isCheckingLinear:A,handleInitialize:P,handleUpdate:M,handleClaudeSetup:B,onOpenLinearImport:F}){switch(e){case"general":return s.jsx(Rn,{title:"General",description:`Configure Auto-Build, agent model, and notifications for ${t.name}`,children:s.jsx(Gte,{project:t,settings:n,setSettings:r,versionInfo:i,isCheckingVersion:o,isUpdating:c,handleInitialize:P,handleUpdate:M})});case"claude":return s.jsx(Rn,{title:"Claude Authentication",description:"Configure Claude CLI authentication for this project",children:s.jsx(fm,{initialized:!!t.autoBuildPath,title:"Claude Authentication",description:"Configure Claude CLI authentication",children:s.jsx(qte,{envConfig:l,isLoadingEnv:d,envError:h,updateEnvConfig:m,isCheckingClaudeAuth:T,claudeAuthStatus:E,handleClaudeSetup:B,showClaudeToken:f,setShowClaudeToken:g,expanded:!0,onToggle:()=>{}})})});case"linear":return s.jsx(Rn,{title:"Linear Integration",description:"Connect to Linear for issue tracking and task import",children:s.jsx(fm,{initialized:!!t.autoBuildPath,title:"Linear Integration",description:"Sync with Linear for issue tracking",children:s.jsx(Kte,{envConfig:l,updateEnvConfig:m,showLinearKey:x,setShowLinearKey:C,linearConnectionStatus:D,isCheckingLinear:A,onOpenLinearImport:F})})});case"github":return s.jsx(Rn,{title:"GitHub Integration",description:"Connect to GitHub for issue tracking",children:s.jsx(fm,{initialized:!!t.autoBuildPath,title:"GitHub Integration",description:"Sync with GitHub Issues",children:s.jsx(ise,{envConfig:l,updateEnvConfig:m,showGitHubToken:w,setShowGitHubToken:j,gitHubConnectionStatus:S,isCheckingGitHub:N,projectPath:t.path})})});case"memory":return s.jsx(Rn,{title:"Memory",description:"Configure persistent cross-session memory for agents",children:s.jsx(fm,{initialized:!!t.autoBuildPath,title:"Memory",description:"Configure persistent memory",children:s.jsx(Wte,{envConfig:l,settings:n,setSettings:r,updateEnvConfig:m,showOpenAIKey:_,setShowOpenAIKey:b,expanded:!0,onToggle:()=>{}})})});default:return null}}function fse(e){return{get settings(){return e.current.settings},get setSettings(){return e.current.setSettings},get isSaving(){return e.current.isSaving},get error(){return e.current.error},get setError(){return e.current.setError},get versionInfo(){return e.current.versionInfo},get isCheckingVersion(){return e.current.isCheckingVersion},get isUpdating(){return e.current.isUpdating},get envConfig(){return e.current.envConfig},get setEnvConfig(){return e.current.setEnvConfig},get isLoadingEnv(){return e.current.isLoadingEnv},get envError(){return e.current.envError},get setEnvError(){return e.current.setEnvError},get isSavingEnv(){return e.current.isSavingEnv},get updateEnvConfig(){return e.current.updateEnvConfig},get showClaudeToken(){return e.current.showClaudeToken},get setShowClaudeToken(){return e.current.setShowClaudeToken},get showLinearKey(){return e.current.showLinearKey},get setShowLinearKey(){return e.current.setShowLinearKey},get showOpenAIKey(){return e.current.showOpenAIKey},get setShowOpenAIKey(){return e.current.setShowOpenAIKey},get showGitHubToken(){return e.current.showGitHubToken},get setShowGitHubToken(){return e.current.setShowGitHubToken},get expandedSections(){return e.current.expandedSections},get toggleSection(){return e.current.toggleSection},get gitHubConnectionStatus(){return e.current.gitHubConnectionStatus},get isCheckingGitHub(){return e.current.isCheckingGitHub},get isCheckingClaudeAuth(){return e.current.isCheckingClaudeAuth},get claudeAuthStatus(){return e.current.claudeAuthStatus},get setClaudeAuthStatus(){return e.current.setClaudeAuthStatus},get showLinearImportModal(){return e.current.showLinearImportModal},get setShowLinearImportModal(){return e.current.setShowLinearImportModal},get linearConnectionStatus(){return e.current.linearConnectionStatus},get isCheckingLinear(){return e.current.isCheckingLinear},get handleInitialize(){return e.current.handleInitialize},get handleUpdate(){return e.current.handleUpdate},get handleSaveEnv(){return e.current.handleSaveEnv},get handleClaudeSetup(){return e.current.handleClaudeSetup},get handleSave(){return e.current.handleSave}}}function mse({project:e,activeSection:t,isOpen:n,onHookReady:r}){return e?s.jsx(pse,{project:e,activeSection:t,isOpen:n,onHookReady:r}):s.jsx(Rn,{title:"No Project Selected",description:"Select a project from the dropdown above to configure its settings",children:s.jsx($te,{})})}function pse({project:e,activeSection:t,isOpen:n,onHookReady:r}){const i=Ute(e,n),o=y.useRef(i);o.current=i;const{settings:c,setSettings:l,versionInfo:d,isCheckingVersion:h,isUpdating:m,envConfig:f,isLoadingEnv:g,envError:x,updateEnvConfig:C,showClaudeToken:_,setShowClaudeToken:b,showLinearKey:w,setShowLinearKey:j,showOpenAIKey:S,setShowOpenAIKey:N,showGitHubToken:T,setShowGitHubToken:E,expandedSections:D,toggleSection:A,gitHubConnectionStatus:P,isCheckingGitHub:M,isCheckingClaudeAuth:B,claudeAuthStatus:F,showLinearImportModal:U,setShowLinearImportModal:G,linearConnectionStatus:$,isCheckingLinear:V,handleInitialize:Y,handleUpdate:K,handleClaudeSetup:O,error:L}=i;return y.useEffect(()=>{if(n){const I=fse(o);r(I)}return()=>{r(null)}},[n,r]),s.jsxs(s.Fragment,{children:[s.jsx(hse,{activeSection:t,project:e,settings:c,setSettings:l,versionInfo:d,isCheckingVersion:h,isUpdating:m,envConfig:f,isLoadingEnv:g,envError:x,updateEnvConfig:C,showClaudeToken:_,setShowClaudeToken:b,showLinearKey:w,setShowLinearKey:j,showOpenAIKey:S,setShowOpenAIKey:N,showGitHubToken:T,setShowGitHubToken:E,gitHubConnectionStatus:P,isCheckingGitHub:M,isCheckingClaudeAuth:B,claudeAuthStatus:F,linearConnectionStatus:$,isCheckingLinear:V,handleInitialize:Y,handleUpdate:K,handleClaudeSetup:O,onOpenLinearImport:()=>G(!0)}),s.jsx(Vte,{error:L,envError:x}),s.jsx(Fte,{projectId:e.id,open:U,onOpenChange:G,onImportComplete:async I=>{I.imported>0&&await mo(e.id)}})]})}console.log("[AppSettings MODULE LOAD] api imported:",{type:typeof J,isUndefined:J===void 0,hasGetAppVersion:typeof J?.getAppVersion,moduleId:J?.__moduleId,stackTrace:new Error().stack});const gse=[{id:"appearance",icon:ah},{id:"display",icon:$0},{id:"language",icon:Jr},{id:"agent",icon:Bm},{id:"paths",icon:fl},{id:"integrations",icon:Xr},{id:"updates",icon:Np},{id:"notifications",icon:AF}],xse=[{id:"general",icon:oh},{id:"claude",icon:Xr},{id:"linear",icon:ai},{id:"github",icon:Yn},{id:"memory",icon:hl}];function vse({open:e,onOpenChange:t,initialSection:n,initialProjectSection:r,onRerunWizard:i}){const{t:o}=rs("settings"),{settings:c,setSettings:l,isSaving:d,error:h,saveSettings:m,revertTheme:f,commitTheme:g}=ote(),[x,C]=y.useState(""),[_,b]=y.useState("app"),[w,j]=y.useState(n||"appearance"),[S,N]=y.useState("general");y.useEffect(()=>{e&&(r?(b("project"),N(r)):n&&(b("app"),j(n)))},[e,n,r]);const T=Et(L=>L.projects),E=Et(L=>L.selectedProjectId),D=Et(L=>L.selectProject),A=T.find(L=>L.id===E),[P,M]=y.useState(null),[B,F]=y.useState(null);y.useEffect(()=>{if(console.log("[AppSettings] useEffect running, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasGetAppVersion:typeof J?.getAppVersion,moduleId:J?.__moduleId,windowAPI:window.__claudeAPI,windowModuleId:window.__claudeAPIModuleId}),!J){console.error("[AppSettings] API is falsy!",J);return}if(!J.getAppVersion){console.error("[AppSettings] API has no getAppVersion method!",Object.keys(J).slice(0,20));return}J.getAppVersion().then(C)},[]);const U=y.useCallback(L=>{M(L),F(L&&(L.error||L.envError)||null)},[]),G=async()=>{const L=await m();if(_==="project"&&A&&P&&(await P.handleSave(()=>{}),P.error||P.envError)){F(P.error||P.envError);return}L&&(g(),t(!1))},$=()=>{t(!1)},V=L=>{D(L)},Y=()=>{switch(w){case"appearance":return s.jsx(cte,{settings:c,onSettingsChange:l});case"display":return s.jsx(dte,{settings:c,onSettingsChange:l});case"language":return s.jsx(fte,{settings:c,onSettingsChange:l});case"agent":return s.jsx(rE,{settings:c,onSettingsChange:l,section:"agent"});case"paths":return s.jsx(rE,{settings:c,onSettingsChange:l,section:"paths"});case"integrations":return s.jsx(Ste,{settings:c,onSettingsChange:l,isOpen:e});case"updates":return s.jsx(aE,{settings:c,onSettingsChange:l,section:"updates",version:x});case"notifications":return s.jsx(aE,{settings:c,onSettingsChange:l,section:"notifications",version:x});default:return null}},K=()=>_==="app"?Y():s.jsx(mse,{project:A,activeSection:S,isOpen:e,onHookReady:U}),O=!E;return s.jsx(eM,{open:e,onOpenChange:L=>{L||f(),t(L)},children:s.jsxs(NS,{children:[s.jsxs(kS,{children:[s.jsxs(AS,{className:"flex items-center gap-3",children:[s.jsx(kp,{className:"h-6 w-6"}),o("title")]}),s.jsxs(TS,{children:[o("tabs.app")," & ",o("tabs.project")]})]}),s.jsx(ES,{children:s.jsxs("div",{className:"flex h-full",children:[s.jsx("nav",{className:"w-80 border-r border-border bg-muted/30 p-4",children:s.jsxs(cs,{className:"h-full",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:o("tabs.app")}),s.jsxs("div",{className:"space-y-1",children:[gse.map(L=>{const I=L.icon,q=_==="app"&&w===L.id;return s.jsxs("button",{onClick:()=>{b("app"),j(L.id)},className:le("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all",q?"bg-accent text-accent-foreground":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[s.jsx(I,{className:"h-5 w-5 mt-0.5 shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium text-sm",children:o(`sections.${L.id}.title`)}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:o(`sections.${L.id}.description`)})]})]},L.id)}),i&&s.jsxs("button",{onClick:()=>{t(!1),i()},className:le("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all mt-2","border border-dashed border-muted-foreground/30","hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[s.jsx(us,{className:"h-5 w-5 mt-0.5 shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium text-sm",children:o("actions.rerunWizard")}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:o("actions.rerunWizardDescription")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:o("tabs.project")}),s.jsx("div",{className:"px-1 mb-3",children:s.jsx(jte,{selectedProjectId:E,onProjectChange:V})}),s.jsx("div",{className:"space-y-1",children:xse.map(L=>{const I=L.icon,q=_==="project"&&S===L.id;return s.jsxs("button",{onClick:()=>{b("project"),N(L.id)},disabled:O,className:le("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all",q?"bg-accent text-accent-foreground":O?"opacity-50 cursor-not-allowed text-muted-foreground":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[s.jsx(I,{className:"h-5 w-5 mt-0.5 shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium text-sm",children:o(`projectSections.${L.id}.title`)}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:o(`projectSections.${L.id}.description`)})]})]},L.id)})})]})]}),x&&s.jsx("div",{className:"mt-8 pt-4 border-t border-border",children:s.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[o("updates.version")," ",x]})})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(cs,{className:"h-full",children:s.jsx("div",{className:"p-8 max-w-2xl",children:K()})})})]})}),s.jsxs(sM,{children:[(h||B)&&s.jsx("div",{className:"flex-1 rounded-lg bg-destructive/10 border border-destructive/30 px-4 py-2 text-sm text-destructive",children:h||B}),s.jsx(te,{variant:"outline",onClick:$,children:o("common:buttons.cancel","Cancel")}),s.jsx(te,{onClick:G,disabled:d||_==="project"&&P?.isSaving,children:d||_==="project"&&P?.isSaving?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),o("common:buttons.saving","Saving...")]}):s.jsxs(s.Fragment,{children:[s.jsx(WA,{className:"mr-2 h-4 w-4"}),o("actions.save")]})})]})]})})}const wg=y.createContext(null);wg.displayName="PanelGroupContext";const Ls={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},DS=10,Zo=y.useLayoutEffect,cE=jp.useId,yse=typeof cE=="function"?cE:()=>null;let bse=0;function RS(e=null){const t=yse(),n=y.useRef(e||t||null);return n.current===null&&(n.current=""+bse++),e??n.current}function dM({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:o,id:c,maxSize:l,minSize:d,onCollapse:h,onExpand:m,onResize:f,order:g,style:x,tagName:C="div",..._}){const b=y.useContext(wg);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:w,expandPanel:j,getPanelSize:S,getPanelStyle:N,groupId:T,isPanelCollapsed:E,reevaluatePanelConstraints:D,registerPanel:A,resizePanel:P,unregisterPanel:M}=b,B=RS(c),F=y.useRef({callbacks:{onCollapse:h,onExpand:m,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:l,minSize:d},id:B,idIsFromProps:c!==void 0,order:g});y.useRef({didLogMissingDefaultSizeWarning:!1}),Zo(()=>{const{callbacks:G,constraints:$}=F.current,V={...$};F.current.id=B,F.current.idIsFromProps=c!==void 0,F.current.order=g,G.onCollapse=h,G.onExpand=m,G.onResize=f,$.collapsedSize=n,$.collapsible=r,$.defaultSize=i,$.maxSize=l,$.minSize=d,(V.collapsedSize!==$.collapsedSize||V.collapsible!==$.collapsible||V.maxSize!==$.maxSize||V.minSize!==$.minSize)&&D(F.current,V)}),Zo(()=>{const G=F.current;return A(G),()=>{M(G)}},[g,B,A,M]),y.useImperativeHandle(o,()=>({collapse:()=>{w(F.current)},expand:G=>{j(F.current,G)},getId(){return B},getSize(){return S(F.current)},isCollapsed(){return E(F.current)},isExpanded(){return!E(F.current)},resize:G=>{P(F.current,G)}}),[w,j,S,E,B,P]);const U=N(F.current,i);return y.createElement(C,{..._,children:e,className:t,id:B,style:{...U,...x},[Ls.groupId]:T,[Ls.panel]:"",[Ls.panelCollapsible]:r||void 0,[Ls.panelId]:B,[Ls.panelSize]:parseFloat(""+U.flexGrow).toFixed(1)})}const v0=y.forwardRef((e,t)=>y.createElement(dM,{...e,forwardedRef:t}));dM.displayName="Panel";v0.displayName="forwardRef(Panel)";let y0=null,Rm=-1,Wa=null;function wse(e,t,n){const r=(t&gM)!==0,i=(t&xM)!==0,o=(t&vM)!==0,c=(t&yM)!==0;if(t){if(r)return o?"se-resize":c?"ne-resize":"e-resize";if(i)return o?"sw-resize":c?"nw-resize":"w-resize";if(o)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Sse(){Wa!==null&&(document.head.removeChild(Wa),y0=null,Wa=null,Rm=-1)}function Uy(e,t,n){var r,i;const o=wse(e,t);if(y0!==o){if(y0=o,Wa===null&&(Wa=document.createElement("style"),document.head.appendChild(Wa)),Rm>=0){var c;(c=Wa.sheet)===null||c===void 0||c.removeRule(Rm)}Rm=(r=(i=Wa.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function hM(e){return e.type==="keydown"}function fM(e){return e.type.startsWith("pointer")}function mM(e){return e.type.startsWith("mouse")}function Sg(e){if(fM(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(mM(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function jse(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function _se(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Cse(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:hE(e),b:hE(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;St(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:dE(uE(n.a)),b:dE(uE(n.b))};if(i.a===i.b){const o=r.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let l=o.length;for(;l--;){const d=o[l];if(d===c.a)return 1;if(d===c.b)return-1}}return Math.sign(i.a-i.b)}const Nse=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function kse(e){var t;const n=getComputedStyle((t=pM(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Ese(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||kse(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Nse.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function uE(e){let t=e.length;for(;t--;){const n=e[t];if(St(n,"Missing node"),Ese(n))return n}return null}function dE(e){return e&&Number(getComputedStyle(e).zIndex)||0}function hE(e){const t=[];for(;e;)t.push(e),e=pM(e);return t}function pM(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const gM=1,xM=2,vM=4,yM=8,Ase=jse()==="coarse";let Zr=[],kc=!1,Ka=new Map,jg=new Map;const Xd=new Set;function Tse(e,t,n,r,i){var o;const{ownerDocument:c}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},d=(o=Ka.get(c))!==null&&o!==void 0?o:0;return Ka.set(c,d+1),Xd.add(l),hp(),function(){var m;jg.delete(e),Xd.delete(l);const f=(m=Ka.get(c))!==null&&m!==void 0?m:1;if(Ka.set(c,f-1),hp(),f===1&&Ka.delete(c),Zr.includes(l)){const g=Zr.indexOf(l);g>=0&&Zr.splice(g,1),_g(),i("up",!0,null)}}}function Dse(e){const{target:t}=e,{x:n,y:r}=Sg(e);kc=!0,PS({target:t,x:n,y:r}),hp(),Zr.length>0&&(fp("down",e),_g(),e.preventDefault(),bM(t)||e.stopImmediatePropagation())}function $y(e){const{x:t,y:n}=Sg(e);if(kc&&e.type!=="pointerleave"&&e.buttons===0&&(kc=!1,fp("up",e)),!kc){const{target:r}=e;PS({target:r,x:t,y:n})}fp("move",e),_g(),Zr.length>0&&e.preventDefault()}function Vy(e){const{target:t}=e,{x:n,y:r}=Sg(e);jg.clear(),kc=!1,Zr.length>0&&(e.preventDefault(),bM(t)||e.stopImmediatePropagation()),fp("up",e),PS({target:t,x:n,y:r}),_g(),hp()}function bM(e){let t=e;for(;t;){if(t.hasAttribute(Ls.resizeHandle))return!0;t=t.parentElement}return!1}function PS({target:e,x:t,y:n}){Zr.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Xd.forEach(i=>{const{element:o,hitAreaMargins:c}=i,l=o.getBoundingClientRect(),{bottom:d,left:h,right:m,top:f}=l,g=Ase?c.coarse:c.fine;if(t>=h-g&&t<=m+g&&n>=f-g&&n<=d+g){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&Cse(r,o)>0){let C=r,_=!1;for(;C&&!C.contains(o);){if(_se(C.getBoundingClientRect(),l)){_=!0;break}C=C.parentElement}if(_)return}Zr.push(i)}})}function Gy(e,t){jg.set(e,t)}function _g(){let e=!1,t=!1;Zr.forEach(r=>{const{direction:i}=r;i==="horizontal"?e=!0:t=!0});let n=0;jg.forEach(r=>{n|=r}),e&&t?Uy("intersection",n):e?Uy("horizontal",n):t?Uy("vertical",n):Sse()}let qy;function hp(){var e;(e=qy)===null||e===void 0||e.abort(),qy=new AbortController;const t={capture:!0,signal:qy.signal};Xd.size&&(kc?(Zr.length>0&&Ka.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("contextmenu",Vy,t),i.addEventListener("pointerleave",$y,t),i.addEventListener("pointermove",$y,t))}),Ka.forEach((n,r)=>{const{body:i}=r;i.addEventListener("pointerup",Vy,t),i.addEventListener("pointercancel",Vy,t)})):Ka.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("pointerdown",Dse,t),i.addEventListener("pointermove",$y,t))}))}function fp(e,t){Xd.forEach(n=>{const{setResizeHandlerState:r}=n,i=Zr.includes(n);r(e,i,t)})}function Rse(){const[e,t]=y.useState(0);return y.useCallback(()=>t(n=>n+1),[])}function St(e,t){if(!e)throw console.error(t),Error(t)}function ol(e,t,n=DS){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Qi(e,t,n=DS){return ol(e,t,n)===0}function lr(e,t,n){return ol(e,t,n)===0}function Pse(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],o=t[r];if(!lr(i,o,n))return!1}return!0}function yc({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];St(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:i=0,collapsible:o,maxSize:c=100,minSize:l=0}=r;if(ol(n,l)<0)if(o){const d=(i+l)/2;ol(n,d)<0?n=i:n=l}else n=l;return n=Math.min(c,n),n=parseFloat(n.toFixed(DS)),n}function md({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:o}){if(lr(e,0))return t;const c=[...t],[l,d]=r;St(l!=null,"Invalid first pivot index"),St(d!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const f=e<0?d:l,g=n[f];St(g,`Panel constraints not found for index ${f}`);const{collapsedSize:x=0,collapsible:C,minSize:_=0}=g;if(C){const b=t[f];if(St(b!=null,`Previous layout not found for panel index ${f}`),lr(b,x)){const w=_-b;ol(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}{const f=e<0?l:d,g=n[f];St(g,`No panel constraints found for index ${f}`);const{collapsedSize:x=0,collapsible:C,minSize:_=0}=g;if(C){const b=t[f];if(St(b!=null,`Previous layout not found for panel index ${f}`),lr(b,_)){const w=b-x;ol(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}}{const f=e<0?1:-1;let g=e<0?d:l,x=0;for(;;){const _=t[g];St(_!=null,`Previous layout not found for panel index ${g}`);const w=yc({panelConstraints:n,panelIndex:g,size:100})-_;if(x+=w,g+=f,g<0||g>=n.length)break}const C=Math.min(Math.abs(e),Math.abs(x));e=e<0?0-C:C}{let g=e<0?l:d;for(;g>=0&&g<n.length;){const x=Math.abs(e)-Math.abs(h),C=t[g];St(C!=null,`Previous layout not found for panel index ${g}`);const _=C-x,b=yc({panelConstraints:n,panelIndex:g,size:_});if(!lr(C,b)&&(h+=C-b,c[g]=b,h.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?g--:g++}}if(Pse(i,c))return i;{const f=e<0?d:l,g=t[f];St(g!=null,`Previous layout not found for panel index ${f}`);const x=g+h,C=yc({panelConstraints:n,panelIndex:f,size:x});if(c[f]=C,!lr(C,x)){let _=x-C,w=e<0?d:l;for(;w>=0&&w<n.length;){const j=c[w];St(j!=null,`Previous layout not found for panel index ${w}`);const S=j+_,N=yc({panelConstraints:n,panelIndex:w,size:S});if(lr(j,N)||(_-=N-j,c[w]=N),lr(_,0))break;e>0?w--:w++}}}const m=c.reduce((f,g)=>g+f,0);return lr(m,100)?c:i}function Mse({layout:e,panelsArray:t,pivotIndices:n}){let r=0,i=100,o=0,c=0;const l=n[0];St(l!=null,"No pivot index found"),t.forEach((f,g)=>{const{constraints:x}=f,{maxSize:C=100,minSize:_=0}=x;g===l?(r=_,i=C):(o+=_,c+=C)});const d=Math.min(i,100-o),h=Math.max(r,100-c),m=e[l];return{valueMax:d,valueMin:h,valueNow:m}}function Zd(e,t=document){return Array.from(t.querySelectorAll(`[${Ls.resizeHandleId}][data-panel-group-id="${e}"]`))}function wM(e,t,n=document){const i=Zd(e,n).findIndex(o=>o.getAttribute(Ls.resizeHandleId)===t);return i??null}function SM(e,t,n){const r=wM(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function Lse(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function jM(e,t=document){if(Lse(t)&&t.dataset.panelGroupId==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function Cg(e,t=document){const n=t.querySelector(`[${Ls.resizeHandleId}="${e}"]`);return n||null}function Ise(e,t,n,r=document){var i,o,c,l;const d=Cg(t,r),h=Zd(e,r),m=d?h.indexOf(d):-1,f=(i=(o=n[m])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null,g=(c=(l=n[m+1])===null||l===void 0?void 0:l.id)!==null&&c!==void 0?c:null;return[f,g]}function Ose({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:i,panelGroupElement:o,setLayout:c}){y.useRef({didWarnAboutMissingResizeHandle:!1}),Zo(()=>{if(!o)return;const l=Zd(n,o);for(let d=0;d<i.length-1;d++){const{valueMax:h,valueMin:m,valueNow:f}=Mse({layout:r,panelsArray:i,pivotIndices:[d,d+1]}),g=l[d];if(g!=null){const x=i[d];St(x,`No panel data found for index "${d}"`),g.setAttribute("aria-controls",x.id),g.setAttribute("aria-valuemax",""+Math.round(h)),g.setAttribute("aria-valuemin",""+Math.round(m)),g.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((d,h)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[n,r,i,o]),y.useEffect(()=>{if(!o)return;const l=t.current;St(l,"Eager values not found");const{panelDataArray:d}=l,h=jM(n,o);St(h!=null,`No group found for id "${n}"`);const m=Zd(n,o);St(m,`No resize handles found for group id "${n}"`);const f=m.map(g=>{const x=g.getAttribute(Ls.resizeHandleId);St(x,"Resize handle element has no handle id attribute");const[C,_]=Ise(n,x,d,o);if(C==null||_==null)return()=>{};const b=w=>{if(!w.defaultPrevented)switch(w.key){case"Enter":{w.preventDefault();const j=d.findIndex(S=>S.id===C);if(j>=0){const S=d[j];St(S,`No panel data found for index ${j}`);const N=r[j],{collapsedSize:T=0,collapsible:E,minSize:D=0}=S.constraints;if(N!=null&&E){const A=md({delta:lr(N,T)?D-T:T-N,initialLayout:r,panelConstraints:d.map(P=>P.constraints),pivotIndices:SM(n,x,o),prevLayout:r,trigger:"keyboard"});r!==A&&c(A)}}break}}};return g.addEventListener("keydown",b),()=>{g.removeEventListener("keydown",b)}});return()=>{f.forEach(g=>g())}},[o,e,t,n,r,i,c])}function fE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _M(e,t){const n=e==="horizontal",{x:r,y:i}=Sg(t);return n?r:i}function Bse(e,t,n,r,i){const o=n==="horizontal",c=Cg(t,i);St(c,`No resize handle element found for id "${t}"`);const l=c.getAttribute(Ls.groupId);St(l,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const h=_M(n,e),m=jM(l,i);St(m,`No group element found for id "${l}"`);const f=m.getBoundingClientRect(),g=o?f.width:f.height;return(h-d)/g*100}function zse(e,t,n,r,i,o){if(hM(e)){const c=n==="horizontal";let l=0;e.shiftKey?l=100:i!=null?l=i:l=10;let d=0;switch(e.key){case"ArrowDown":d=c?0:l;break;case"ArrowLeft":d=c?-l:0;break;case"ArrowRight":d=c?l:0;break;case"ArrowUp":d=c?0:-l;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:Bse(e,t,n,r,o)}function Fse({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,i=100;for(let o=0;o<e.length;o++){const c=n[o];St(c,`Panel constraints not found for index ${o}`);const{defaultSize:l}=c;l!=null&&(r++,t[o]=l,i-=l)}for(let o=0;o<e.length;o++){const c=n[o];St(c,`Panel constraints not found for index ${o}`);const{defaultSize:l}=c;if(l!=null)continue;const d=e.length-r,h=i/d;r++,t[o]=h,i-=h}return t}function cc(e,t,n){t.forEach((r,i)=>{const o=e[i];St(o,`Panel data not found for index ${i}`);const{callbacks:c,constraints:l,id:d}=o,{collapsedSize:h=0,collapsible:m}=l,f=n[d];if(f==null||r!==f){n[d]=r;const{onCollapse:g,onExpand:x,onResize:C}=c;C&&C(r,f),m&&(g||x)&&(x&&(f==null||Qi(f,h))&&!Qi(r,h)&&x(),g&&(f==null||!Qi(f,h))&&Qi(r,h)&&g())}})}function mm(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Hse({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:i,precision:o=3}){const c=n[i];let l;return c==null?l=e!=null?e.toFixed(o):"1":r.length===1?l="1":l=c.toFixed(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Use(e,t=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}function mE(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function CM(e){return`react-resizable-panels:${e}`}function NM(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:i,order:o}=t;return i?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function kM(e,t){try{const n=CM(e),r=t.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function $se(e,t,n){var r,i;const o=(r=kM(e,n))!==null&&r!==void 0?r:{},c=NM(t);return(i=o[c])!==null&&i!==void 0?i:null}function Vse(e,t,n,r,i){var o;const c=CM(e),l=NM(t),d=(o=kM(e,i))!==null&&o!==void 0?o:{};d[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(c,JSON.stringify(d))}catch(h){console.error(h)}}function pE({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,c)=>o+c,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!lr(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const c=n[o];St(c!=null,`No layout data found for index ${o}`);const l=100/r*c;n[o]=l}let i=0;for(let o=0;o<t.length;o++){const c=n[o];St(c!=null,`No layout data found for index ${o}`);const l=yc({panelConstraints:t,panelIndex:o,size:c});c!=l&&(i+=c-l,n[o]=l)}if(!lr(i,0))for(let o=0;o<t.length;o++){const c=n[o];St(c!=null,`No layout data found for index ${o}`);const l=c+i,d=yc({panelConstraints:t,panelIndex:o,size:l});if(c!==d&&(i-=d-c,n[o]=d,lr(i,0)))break}return n}const Gse=100,pd={getItem:e=>(mE(pd),pd.getItem(e)),setItem:(e,t)=>{mE(pd),pd.setItem(e,t)}},gE={};function EM({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:i,id:o=null,onLayout:c=null,keyboardResizeBy:l=null,storage:d=pd,style:h,tagName:m="div",...f}){const g=RS(o),x=y.useRef(null),[C,_]=y.useState(null),[b,w]=y.useState([]),j=Rse(),S=y.useRef({}),N=y.useRef(new Map),T=y.useRef(0),E=y.useRef({autoSaveId:e,direction:r,dragState:C,id:g,keyboardResizeBy:l,onLayout:c,storage:d}),D=y.useRef({layout:b,panelDataArray:[],panelDataArrayChanged:!1});y.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),y.useImperativeHandle(i,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:z}=D.current;return z},setLayout:z=>{const{onLayout:ee}=E.current,{layout:ie,panelDataArray:re}=D.current,X=pE({layout:z,panelConstraints:re.map(W=>W.constraints)});fE(ie,X)||(w(X),D.current.layout=X,ee&&ee(X),cc(re,X,S.current))}}),[]),Zo(()=>{E.current.autoSaveId=e,E.current.direction=r,E.current.dragState=C,E.current.id=g,E.current.onLayout=c,E.current.storage=d}),Ose({committedValuesRef:E,eagerValuesRef:D,groupId:g,layout:b,panelDataArray:D.current.panelDataArray,setLayout:w,panelGroupElement:x.current}),y.useEffect(()=>{const{panelDataArray:z}=D.current;if(e){if(b.length===0||b.length!==z.length)return;let ee=gE[e];ee==null&&(ee=Use(Vse,Gse),gE[e]=ee);const ie=[...z],re=new Map(N.current);ee(e,ie,re,b,d)}},[e,b,d]),y.useEffect(()=>{});const A=y.useCallback(z=>{const{onLayout:ee}=E.current,{layout:ie,panelDataArray:re}=D.current;if(z.constraints.collapsible){const X=re.map(he=>he.constraints),{collapsedSize:W=0,panelSize:Q,pivotIndices:se}=Uo(re,z,ie);if(St(Q!=null,`Panel size not found for panel "${z.id}"`),!Qi(Q,W)){N.current.set(z.id,Q);const de=hc(re,z)===re.length-1?Q-W:W-Q,Ne=md({delta:de,initialLayout:ie,panelConstraints:X,pivotIndices:se,prevLayout:ie,trigger:"imperative-api"});mm(ie,Ne)||(w(Ne),D.current.layout=Ne,ee&&ee(Ne),cc(re,Ne,S.current))}}},[]),P=y.useCallback((z,ee)=>{const{onLayout:ie}=E.current,{layout:re,panelDataArray:X}=D.current;if(z.constraints.collapsible){const W=X.map(Re=>Re.constraints),{collapsedSize:Q=0,panelSize:se=0,minSize:he=0,pivotIndices:de}=Uo(X,z,re),Ne=ee??he;if(Qi(se,Q)){const Re=N.current.get(z.id),ce=Re!=null&&Re>=Ne?Re:Ne,ae=hc(X,z)===X.length-1?se-ce:ce-se,Ee=md({delta:ae,initialLayout:re,panelConstraints:W,pivotIndices:de,prevLayout:re,trigger:"imperative-api"});mm(re,Ee)||(w(Ee),D.current.layout=Ee,ie&&ie(Ee),cc(X,Ee,S.current))}}},[]),M=y.useCallback(z=>{const{layout:ee,panelDataArray:ie}=D.current,{panelSize:re}=Uo(ie,z,ee);return St(re!=null,`Panel size not found for panel "${z.id}"`),re},[]),B=y.useCallback((z,ee)=>{const{panelDataArray:ie}=D.current,re=hc(ie,z);return Hse({defaultSize:ee,dragState:C,layout:b,panelData:ie,panelIndex:re})},[C,b]),F=y.useCallback(z=>{const{layout:ee,panelDataArray:ie}=D.current,{collapsedSize:re=0,collapsible:X,panelSize:W}=Uo(ie,z,ee);return St(W!=null,`Panel size not found for panel "${z.id}"`),X===!0&&Qi(W,re)},[]),U=y.useCallback(z=>{const{layout:ee,panelDataArray:ie}=D.current,{collapsedSize:re=0,collapsible:X,panelSize:W}=Uo(ie,z,ee);return St(W!=null,`Panel size not found for panel "${z.id}"`),!X||ol(W,re)>0},[]),G=y.useCallback(z=>{const{panelDataArray:ee}=D.current;ee.push(z),ee.sort((ie,re)=>{const X=ie.order,W=re.order;return X==null&&W==null?0:X==null?-1:W==null?1:X-W}),D.current.panelDataArrayChanged=!0,j()},[j]);Zo(()=>{if(D.current.panelDataArrayChanged){D.current.panelDataArrayChanged=!1;const{autoSaveId:z,onLayout:ee,storage:ie}=E.current,{layout:re,panelDataArray:X}=D.current;let W=null;if(z){const se=$se(z,X,ie);se&&(N.current=new Map(Object.entries(se.expandToSizes)),W=se.layout)}W==null&&(W=Fse({panelDataArray:X}));const Q=pE({layout:W,panelConstraints:X.map(se=>se.constraints)});fE(re,Q)||(w(Q),D.current.layout=Q,ee&&ee(Q),cc(X,Q,S.current))}}),Zo(()=>{const z=D.current;return()=>{z.layout=[]}},[]);const $=y.useCallback(z=>{let ee=!1;const ie=x.current;return ie&&window.getComputedStyle(ie,null).getPropertyValue("direction")==="rtl"&&(ee=!0),function(X){X.preventDefault();const W=x.current;if(!W)return()=>null;const{direction:Q,dragState:se,id:he,keyboardResizeBy:de,onLayout:Ne}=E.current,{layout:Re,panelDataArray:ce}=D.current,{initialLayout:ge}=se??{},ae=SM(he,z,W);let Ee=zse(X,z,Q,se,de,W);const Be=Q==="horizontal";Be&&ee&&(Ee=-Ee);const et=ce.map(qe=>qe.constraints),De=md({delta:Ee,initialLayout:ge??Re,panelConstraints:et,pivotIndices:ae,prevLayout:Re,trigger:hM(X)?"keyboard":"mouse-or-touch"}),Me=!mm(Re,De);(fM(X)||mM(X))&&T.current!=Ee&&(T.current=Ee,!Me&&Ee!==0?Be?Gy(z,Ee<0?gM:xM):Gy(z,Ee<0?vM:yM):Gy(z,0)),Me&&(w(De),D.current.layout=De,Ne&&Ne(De),cc(ce,De,S.current))}},[]),V=y.useCallback((z,ee)=>{const{onLayout:ie}=E.current,{layout:re,panelDataArray:X}=D.current,W=X.map(Re=>Re.constraints),{panelSize:Q,pivotIndices:se}=Uo(X,z,re);St(Q!=null,`Panel size not found for panel "${z.id}"`);const de=hc(X,z)===X.length-1?Q-ee:ee-Q,Ne=md({delta:de,initialLayout:re,panelConstraints:W,pivotIndices:se,prevLayout:re,trigger:"imperative-api"});mm(re,Ne)||(w(Ne),D.current.layout=Ne,ie&&ie(Ne),cc(X,Ne,S.current))},[]),Y=y.useCallback((z,ee)=>{const{layout:ie,panelDataArray:re}=D.current,{collapsedSize:X=0,collapsible:W}=ee,{collapsedSize:Q=0,collapsible:se,maxSize:he=100,minSize:de=0}=z.constraints,{panelSize:Ne}=Uo(re,z,ie);Ne!=null&&(W&&se&&Qi(Ne,X)?Qi(X,Q)||V(z,Q):Ne<de?V(z,de):Ne>he&&V(z,he))},[V]),K=y.useCallback((z,ee)=>{const{direction:ie}=E.current,{layout:re}=D.current;if(!x.current)return;const X=Cg(z,x.current);St(X,`Drag handle element not found for id "${z}"`);const W=_M(ie,ee);_({dragHandleId:z,dragHandleRect:X.getBoundingClientRect(),initialCursorPosition:W,initialLayout:re})},[]),O=y.useCallback(()=>{_(null)},[]),L=y.useCallback(z=>{const{panelDataArray:ee}=D.current,ie=hc(ee,z);ie>=0&&(ee.splice(ie,1),delete S.current[z.id],D.current.panelDataArrayChanged=!0,j())},[j]),I=y.useMemo(()=>({collapsePanel:A,direction:r,dragState:C,expandPanel:P,getPanelSize:M,getPanelStyle:B,groupId:g,isPanelCollapsed:F,isPanelExpanded:U,reevaluatePanelConstraints:Y,registerPanel:G,registerResizeHandle:$,resizePanel:V,startDragging:K,stopDragging:O,unregisterPanel:L,panelGroupElement:x.current}),[A,C,r,P,M,B,g,F,U,Y,G,$,V,K,O,L]),q={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return y.createElement(wg.Provider,{value:I},y.createElement(m,{...f,children:t,className:n,id:o,ref:x,style:{...q,...h},[Ls.group]:"",[Ls.groupDirection]:r,[Ls.groupId]:g}))}const b0=y.forwardRef((e,t)=>y.createElement(EM,{...e,forwardedRef:t}));EM.displayName="PanelGroup";b0.displayName="forwardRef(PanelGroup)";function hc(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Uo(e,t,n){const r=hc(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],c=n[r];return{...t.constraints,panelSize:c,pivotIndices:o}}function qse({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){y.useEffect(()=>{if(e||n==null||r==null)return;const i=Cg(t,r);if(i==null)return;const o=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const l=i.getAttribute(Ls.groupId);St(l,`No group element found for id "${l}"`);const d=Zd(l,r),h=wM(l,t,r);St(h!==null,`No resize element found for id "${t}"`);const m=c.shiftKey?h>0?h-1:d.length-1:h+1<d.length?h+1:0;d[m].focus();break}}};return i.addEventListener("keydown",o),()=>{i.removeEventListener("keydown",o)}},[r,e,t,n])}function w0({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:o,onClick:c,onDragging:l,onFocus:d,onPointerDown:h,onPointerUp:m,style:f={},tabIndex:g=0,tagName:x="div",...C}){var _,b;const w=y.useRef(null),j=y.useRef({onClick:c,onDragging:l,onPointerDown:h,onPointerUp:m});y.useEffect(()=>{j.current.onClick=c,j.current.onDragging=l,j.current.onPointerDown=h,j.current.onPointerUp=m});const S=y.useContext(wg);if(S===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:N,groupId:T,registerResizeHandle:E,startDragging:D,stopDragging:A,panelGroupElement:P}=S,M=RS(i),[B,F]=y.useState("inactive"),[U,G]=y.useState(!1),[$,V]=y.useState(null),Y=y.useRef({state:B});Zo(()=>{Y.current.state=B}),y.useEffect(()=>{if(n)V(null);else{const I=E(M);V(()=>I)}},[n,M,E]);const K=(_=r?.coarse)!==null&&_!==void 0?_:15,O=(b=r?.fine)!==null&&b!==void 0?b:5;y.useEffect(()=>{if(n||$==null)return;const I=w.current;St(I,"Element ref not attached");let q=!1;return Tse(M,I,N,{coarse:K,fine:O},(ee,ie,re)=>{if(!ie){F("inactive");return}switch(ee){case"down":{F("drag"),q=!1,St(re,'Expected event to be defined for "down" action'),D(M,re);const{onDragging:X,onPointerDown:W}=j.current;X?.(!0),W?.();break}case"move":{const{state:X}=Y.current;q=!0,X!=="drag"&&F("hover"),St(re,'Expected event to be defined for "move" action'),$(re);break}case"up":{F("hover"),A();const{onClick:X,onDragging:W,onPointerUp:Q}=j.current;W?.(!1),Q?.(),q||X?.();break}}})},[K,N,n,O,E,M,$,D,A]),qse({disabled:n,handleId:M,resizeHandler:$,panelGroupElement:P});const L={touchAction:"none",userSelect:"none"};return y.createElement(x,{...C,children:e,className:t,id:i,onBlur:()=>{G(!1),o?.()},onFocus:()=>{G(!0),d?.()},ref:w,role:"separator",style:{...L,...f},tabIndex:g,[Ls.groupDirection]:N,[Ls.groupId]:T,[Ls.resizeHandle]:"",[Ls.resizeHandleActive]:B==="drag"?"pointer":U?"keyboard":void 0,[Ls.resizeHandleEnabled]:!n,[Ls.resizeHandleId]:M,[Ls.resizeHandleState]:B})}w0.displayName="PanelResizeHandle";const xn=[];for(let e=0;e<256;++e)xn.push((e+256).toString(16).slice(1));function Wse(e,t=0){return(xn[e[t+0]]+xn[e[t+1]]+xn[e[t+2]]+xn[e[t+3]]+"-"+xn[e[t+4]]+xn[e[t+5]]+"-"+xn[e[t+6]]+xn[e[t+7]]+"-"+xn[e[t+8]]+xn[e[t+9]]+"-"+xn[e[t+10]]+xn[e[t+11]]+xn[e[t+12]]+xn[e[t+13]]+xn[e[t+14]]+xn[e[t+15]]).toLowerCase()}let Wy;const Kse=new Uint8Array(16);function Yse(){if(!Wy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wy=crypto.getRandomValues.bind(crypto)}return Wy(Kse)}const Xse=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xE={randomUUID:Xse};function Zse(e,t,n){e=e||{};const r=e.random??e.rng?.()??Yse();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wse(r)}function Qse(e,t,n){return xE.randomUUID&&!e?xE.randomUUID():Zse(e)}class bc{static instance;buffers=new Map;disposables=new Map;MAX_BUFFER_SIZE=1e5;constructor(){}static getInstance(){return bc.instance||(bc.instance=new bc),bc.instance}append(t,n){const i=(this.buffers.get(t)||"")+n,o=i.length>this.MAX_BUFFER_SIZE?i.slice(-this.MAX_BUFFER_SIZE):i;this.buffers.set(t,o)}get(t){return this.buffers.get(t)||""}set(t,n){this.buffers.set(t,n.slice(-this.MAX_BUFFER_SIZE))}clear(t){this.buffers.delete(t)}has(t){return this.buffers.has(t)}getSize(t){return this.buffers.get(t)?.length||0}registerDisposable(t,...n){const r=this.disposables.get(t)||[];this.disposables.set(t,[...r,...n])}dispose(t){const n=this.disposables.get(t);if(n){for(const r of n)try{r.dispose()}catch(i){console.warn(`[TerminalBufferManager] Error disposing resource for ${t}:`,i)}this.disposables.delete(t)}this.buffers.delete(t)}getAll(){return new Map(this.buffers)}getAllIds(){return Array.from(this.buffers.keys())}getTotalSize(){let t=0;for(const n of this.buffers.values())t+=n.length;return t}getStats(){const t=Array.from(this.buffers.entries()).map(([n,r])=>({id:n,sizeBytes:r.length}));return{terminalCount:this.buffers.size,totalSizeBytes:this.getTotalSize(),maxBufferSize:this.MAX_BUFFER_SIZE,buffers:t}}}const Wo=bc.getInstance();typeof window<"u"&&(window.__terminalBufferManager=Wo);var vE={};const AM=()=>typeof process<"u"&&vE?vE.DEBUG==="true":!1,Jse=(...e)=>{AM()&&console.warn(...e)},ene=(...e)=>{AM()&&console.error(...e)};var tne={};const Ns=xr((e,t)=>({terminals:[],layouts:[],activeTerminalId:null,maxTerminals:12,hasRestoredSessions:!1,addTerminal:n=>{const r=t();if(r.terminals.length>=r.maxTerminals)return null;const i={id:Qse(),title:`Terminal ${r.terminals.length+1}`,status:"idle",cwd:n||tne.HOME||"~",createdAt:new Date,isClaudeMode:!1};return e(o=>({terminals:[...o.terminals,i],activeTerminalId:i.id})),i},addRestoredTerminal:n=>{const i=t().terminals.find(c=>c.id===n.id);if(i)return i;const o={id:n.id,title:n.title,status:"idle",cwd:n.cwd,createdAt:new Date(n.createdAt),isClaudeMode:n.isClaudeMode,claudeSessionId:n.claudeSessionId,isRestored:!0};return n.outputBuffer&&Wo.set(n.id,n.outputBuffer),e(c=>({terminals:[...c.terminals,o],activeTerminalId:c.activeTerminalId||o.id})),o},removeTerminal:n=>{Wo.dispose(n),e(r=>{const i=r.terminals.filter(c=>c.id!==n),o=r.activeTerminalId===n?i.length>0?i[i.length-1].id:null:r.activeTerminalId;return{terminals:i,activeTerminalId:o}})},updateTerminal:(n,r)=>{e(i=>({terminals:i.terminals.map(o=>o.id===n?{...o,...r}:o)}))},setActiveTerminal:n=>{e({activeTerminalId:n})},setTerminalStatus:(n,r)=>{e(i=>({terminals:i.terminals.map(o=>o.id===n?{...o,status:r}:o)}))},setClaudeMode:(n,r)=>{e(i=>({terminals:i.terminals.map(o=>o.id===n?{...o,isClaudeMode:r,status:r?"claude-active":"running"}:o)}))},setClaudeSessionId:(n,r)=>{e(i=>({terminals:i.terminals.map(o=>o.id===n?{...o,claudeSessionId:r}:o)}))},setAssociatedTask:(n,r)=>{e(i=>({terminals:i.terminals.map(o=>o.id===n?{...o,associatedTaskId:r}:o)}))},appendOutput:(n,r)=>{Wo.append(n,r)},clearOutputBuffer:n=>{Wo.clear(n)},clearAllTerminals:()=>{e({terminals:[],activeTerminalId:null,hasRestoredSessions:!1})},setHasRestoredSessions:n=>{e({hasRestoredSessions:n})},getTerminal:n=>t().terminals.find(r=>r.id===n),getActiveTerminal:()=>{const n=t();return n.terminals.find(r=>r.id===n.activeTerminalId)},canAddTerminal:()=>{const n=t();return n.terminals.length<n.maxTerminals}}));async function sne(e){const t=Ns.getState();if(t.terminals.length>0){Jse("[TerminalStore] Terminals already exist, skipping session restore");return}try{const n=await J.getTerminalSessions?.(e)??{success:!1};if(!n.success||!n.data||n.data.length===0)return;for(const r of n.data)t.addRestoredTerminal(r);t.setHasRestoredSessions(!0)}catch(n){ene("[TerminalStore] Error restoring sessions:",n)}}const nne={idle:"bg-warning",running:"bg-success","claude-active":"bg-primary",exited:"bg-destructive"},rne={idle:{label:"Ready",color:"bg-muted text-muted-foreground",icon:dl},planning:{label:"Planning",color:"bg-info/20 text-info",icon:bi},coding:{label:"Coding",color:"bg-primary/20 text-primary",icon:_p},qa_review:{label:"QA Review",color:"bg-warning/20 text-warning",icon:bi},qa_fixing:{label:"Fixing",color:"bg-warning/20 text-warning",icon:eo},complete:{label:"Complete",color:"bg-success/20 text-success",icon:rt},failed:{label:"Failed",color:"bg-destructive/20 text-destructive",icon:ct}};function ine({title:e,associatedTask:t,onTitleChange:n}){const[r,i]=y.useState(!1),[o,c]=y.useState(""),l=y.useRef(null),d=y.useCallback(()=>{c(e),i(!0),setTimeout(()=>{l.current?.focus(),l.current?.select()},0)},[e]),h=y.useCallback(()=>{const g=o.trim();g&&g!==e&&n(g),i(!1)},[o,e,n]),m=y.useCallback(()=>{i(!1),c("")},[]),f=y.useCallback(g=>{g.key==="Enter"?(g.preventDefault(),h()):g.key==="Escape"&&(g.preventDefault(),m())},[h,m]);return r?s.jsx("input",{ref:l,type:"text",value:o,onChange:g=>c(g.target.value),onKeyDown:f,onBlur:h,onClick:g=>g.stopPropagation(),className:"text-xs font-medium text-foreground bg-transparent border border-primary/50 rounded px-1 py-0.5 outline-none focus:border-primary max-w-32",style:{width:`${Math.max(o.length*6+16,60)}px`}}):t?s.jsx(Mc,{children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx("span",{className:"text-xs font-medium text-foreground truncate max-w-32 cursor-text hover:text-primary/80 transition-colors",onDoubleClick:g=>{g.stopPropagation(),d()},children:e})}),s.jsxs(jt,{side:"bottom",className:"max-w-xs",children:[s.jsx("p",{className:"text-sm",children:t.description}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Double-click to rename"})]})]})}):s.jsx(Mc,{children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx("span",{className:"text-xs font-medium text-foreground truncate max-w-32 cursor-text hover:text-primary/80 transition-colors",onDoubleClick:g=>{g.stopPropagation(),d()},children:e})}),s.jsx(jt,{side:"bottom",children:s.jsx("p",{className:"text-xs",children:"Double-click to rename"})})]})})}function ane(e){const t=one(e),n=y.forwardRef((r,i)=>{const{children:o,...c}=r,l=y.Children.toArray(o),d=l.find(cne);if(d){const h=d.props.children,m=l.map(f=>f===d?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:f);return s.jsx(t,{...c,ref:i,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return s.jsx(t,{...c,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function one(e){const t=y.forwardRef((n,r)=>{const{children:i,...o}=n;if(y.isValidElement(i)){const c=dne(i),l=une(o,i.props);return i.type!==y.Fragment&&(l.ref=r?la(r,c):c),y.cloneElement(i,l)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lne=Symbol("radix.slottable");function cne(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lne}function une(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{const d=o(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function dne(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var S0=["Enter"," "],hne=["ArrowDown","PageUp","Home"],TM=["ArrowUp","PageDown","End"],fne=[...hne,...TM],mne={ltr:[...S0,"ArrowRight"],rtl:[...S0,"ArrowLeft"]},pne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Th="Menu",[Qd,gne,xne]=gS(Th),[gl,DM]=An(Th,[xne,Xc,ru]),Ng=Xc(),RM=ru(),[vne,xl]=gl(Th),[yne,Dh]=gl(Th),PM=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:c=!0}=e,l=Ng(t),[d,h]=y.useState(null),m=y.useRef(!1),f=yn(o),g=Jc(i);return y.useEffect(()=>{const x=()=>{m.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>m.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),s.jsx(lw,{...l,children:s.jsx(vne,{scope:t,open:n,onOpenChange:f,content:d,onContentChange:h,children:s.jsx(yne,{scope:t,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:g,modal:c,children:r})})})};PM.displayName=Th;var bne="MenuAnchor",MS=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Ng(n);return s.jsx(cw,{...i,...r,ref:t})});MS.displayName=bne;var LS="MenuPortal",[wne,MM]=gl(LS,{forceMount:void 0}),LM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=xl(LS,t);return s.jsx(wne,{scope:t,forceMount:n,children:s.jsx(wn,{present:n||o.open,children:s.jsx(Gp,{asChild:!0,container:i,children:r})})})};LM.displayName=LS;var Ir="MenuContent",[Sne,IS]=gl(Ir),IM=y.forwardRef((e,t)=>{const n=MM(Ir,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=xl(Ir,e.__scopeMenu),c=Dh(Ir,e.__scopeMenu);return s.jsx(Qd.Provider,{scope:e.__scopeMenu,children:s.jsx(wn,{present:r||o.open,children:s.jsx(Qd.Slot,{scope:e.__scopeMenu,children:c.modal?s.jsx(jne,{...i,ref:t}):s.jsx(_ne,{...i,ref:t})})})})}),jne=y.forwardRef((e,t)=>{const n=xl(Ir,e.__scopeMenu),r=y.useRef(null),i=dt(t,r);return y.useEffect(()=>{const o=r.current;if(o)return vw(o)},[]),s.jsx(OS,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Oe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),_ne=y.forwardRef((e,t)=>{const n=xl(Ir,e.__scopeMenu);return s.jsx(OS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Cne=ane("MenuContent.ScrollLock"),OS=y.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:g,onDismiss:x,disableOutsideScroll:C,..._}=e,b=xl(Ir,n),w=Dh(Ir,n),j=Ng(n),S=RM(n),N=gne(n),[T,E]=y.useState(null),D=y.useRef(null),A=dt(t,D,b.onContentChange),P=y.useRef(0),M=y.useRef(""),B=y.useRef(0),F=y.useRef(null),U=y.useRef("right"),G=y.useRef(0),$=C?Zp:y.Fragment,V=C?{as:Cne,allowPinchZoom:!0}:void 0,Y=O=>{const L=M.current+O,I=N().filter(X=>!X.disabled),q=document.activeElement,z=I.find(X=>X.ref.current===q)?.textValue,ee=I.map(X=>X.textValue),ie=One(ee,L,z),re=I.find(X=>X.textValue===ie)?.ref.current;(function X(W){M.current=W,window.clearTimeout(P.current),W!==""&&(P.current=window.setTimeout(()=>X(""),1e3))})(L),re&&setTimeout(()=>re.focus())};y.useEffect(()=>()=>window.clearTimeout(P.current),[]),xw();const K=y.useCallback(O=>U.current===F.current?.side&&zne(O,F.current?.area),[]);return s.jsx(Sne,{scope:n,searchRef:M,onItemEnter:y.useCallback(O=>{K(O)&&O.preventDefault()},[K]),onItemLeave:y.useCallback(O=>{K(O)||(D.current?.focus(),E(null))},[K]),onTriggerLeave:y.useCallback(O=>{K(O)&&O.preventDefault()},[K]),pointerGraceTimerRef:B,onPointerGraceIntentChange:y.useCallback(O=>{F.current=O},[]),children:s.jsx($,{...V,children:s.jsx(Yp,{asChild:!0,trapped:i,onMountAutoFocus:Oe(o,O=>{O.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:s.jsx(hh,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:g,onDismiss:x,children:s.jsx(xS,{asChild:!0,...S,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:E,onEntryFocus:Oe(d,O=>{w.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(uw,{role:"menu","aria-orientation":"vertical","data-state":QM(b.open),"data-radix-menu-content":"",dir:w.dir,...j,..._,ref:A,style:{outline:"none",..._.style},onKeyDown:Oe(_.onKeyDown,O=>{const I=O.target.closest("[data-radix-menu-content]")===O.currentTarget,q=O.ctrlKey||O.altKey||O.metaKey,z=O.key.length===1;I&&(O.key==="Tab"&&O.preventDefault(),!q&&z&&Y(O.key));const ee=D.current;if(O.target!==ee||!fne.includes(O.key))return;O.preventDefault();const re=N().filter(X=>!X.disabled).map(X=>X.ref.current);TM.includes(O.key)&&re.reverse(),Lne(re)}),onBlur:Oe(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(P.current),M.current="")}),onPointerMove:Oe(e.onPointerMove,Jd(O=>{const L=O.target,I=G.current!==O.clientX;if(O.currentTarget.contains(L)&&I){const q=O.clientX>G.current?"right":"left";U.current=q,G.current=O.clientX}}))})})})})})})});IM.displayName=Ir;var Nne="MenuGroup",BS=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(tt.div,{role:"group",...r,ref:t})});BS.displayName=Nne;var kne="MenuLabel",OM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(tt.div,{...r,ref:t})});OM.displayName=kne;var mp="MenuItem",yE="menu.itemSelect",kg=y.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=y.useRef(null),c=Dh(mp,e.__scopeMenu),l=IS(mp,e.__scopeMenu),d=dt(t,o),h=y.useRef(!1),m=()=>{const f=o.current;if(!n&&f){const g=new CustomEvent(yE,{bubbles:!0,cancelable:!0});f.addEventListener(yE,x=>r?.(x),{once:!0}),CT(f,g),g.defaultPrevented?h.current=!1:c.onClose()}};return s.jsx(BM,{...i,ref:d,disabled:n,onClick:Oe(e.onClick,m),onPointerDown:f=>{e.onPointerDown?.(f),h.current=!0},onPointerUp:Oe(e.onPointerUp,f=>{h.current||f.currentTarget?.click()}),onKeyDown:Oe(e.onKeyDown,f=>{const g=l.searchRef.current!=="";n||g&&f.key===" "||S0.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});kg.displayName=mp;var BM=y.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,c=IS(mp,n),l=RM(n),d=y.useRef(null),h=dt(t,d),[m,f]=y.useState(!1),[g,x]=y.useState("");return y.useEffect(()=>{const C=d.current;C&&x((C.textContent??"").trim())},[o.children]),s.jsx(Qd.ItemSlot,{scope:n,disabled:r,textValue:i??g,children:s.jsx(vS,{asChild:!0,...l,focusable:!r,children:s.jsx(tt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:h,onPointerMove:Oe(e.onPointerMove,Jd(C=>{r?c.onItemLeave(C):(c.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Oe(e.onPointerLeave,Jd(C=>c.onItemLeave(C))),onFocus:Oe(e.onFocus,()=>f(!0)),onBlur:Oe(e.onBlur,()=>f(!1))})})})}),Ene="MenuCheckboxItem",zM=y.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return s.jsx(VM,{scope:e.__scopeMenu,checked:n,children:s.jsx(kg,{role:"menuitemcheckbox","aria-checked":pp(n)?"mixed":n,...i,ref:t,"data-state":FS(n),onSelect:Oe(i.onSelect,()=>r?.(pp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});zM.displayName=Ene;var FM="MenuRadioGroup",[Ane,Tne]=gl(FM,{value:void 0,onValueChange:()=>{}}),HM=y.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,o=yn(r);return s.jsx(Ane,{scope:e.__scopeMenu,value:n,onValueChange:o,children:s.jsx(BS,{...i,ref:t})})});HM.displayName=FM;var UM="MenuRadioItem",$M=y.forwardRef((e,t)=>{const{value:n,...r}=e,i=Tne(UM,e.__scopeMenu),o=n===i.value;return s.jsx(VM,{scope:e.__scopeMenu,checked:o,children:s.jsx(kg,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":FS(o),onSelect:Oe(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});$M.displayName=UM;var zS="MenuItemIndicator",[VM,Dne]=gl(zS,{checked:!1}),GM=y.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=Dne(zS,n);return s.jsx(wn,{present:r||pp(o.checked)||o.checked===!0,children:s.jsx(tt.span,{...i,ref:t,"data-state":FS(o.checked)})})});GM.displayName=zS;var Rne="MenuSeparator",qM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(tt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});qM.displayName=Rne;var Pne="MenuArrow",WM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Ng(n);return s.jsx(dw,{...i,...r,ref:t})});WM.displayName=Pne;var Mne="MenuSub",[pme,KM]=gl(Mne),gd="MenuSubTrigger",YM=y.forwardRef((e,t)=>{const n=xl(gd,e.__scopeMenu),r=Dh(gd,e.__scopeMenu),i=KM(gd,e.__scopeMenu),o=IS(gd,e.__scopeMenu),c=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=o,h={__scopeMenu:e.__scopeMenu},m=y.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return y.useEffect(()=>m,[m]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),d(null)}},[l,d]),s.jsx(MS,{asChild:!0,...h,children:s.jsx(BM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":QM(n.open),...e,ref:la(t,i.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Oe(e.onPointerMove,Jd(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!c.current&&(o.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Oe(e.onPointerLeave,Jd(f=>{m();const g=n.content?.getBoundingClientRect();if(g){const x=n.content?.dataset.side,C=x==="right",_=C?-5:5,b=g[C?"left":"right"],w=g[C?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:b,y:g.top},{x:w,y:g.top},{x:w,y:g.bottom},{x:b,y:g.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Oe(e.onKeyDown,f=>{const g=o.searchRef.current!=="";e.disabled||g&&f.key===" "||mne[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});YM.displayName=gd;var XM="MenuSubContent",ZM=y.forwardRef((e,t)=>{const n=MM(Ir,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=xl(Ir,e.__scopeMenu),c=Dh(Ir,e.__scopeMenu),l=KM(XM,e.__scopeMenu),d=y.useRef(null),h=dt(t,d);return s.jsx(Qd.Provider,{scope:e.__scopeMenu,children:s.jsx(wn,{present:r||o.open,children:s.jsx(Qd.Slot,{scope:e.__scopeMenu,children:s.jsx(OS,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:h,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{c.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Oe(e.onFocusOutside,m=>{m.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Oe(e.onEscapeKeyDown,m=>{c.onClose(),m.preventDefault()}),onKeyDown:Oe(e.onKeyDown,m=>{const f=m.currentTarget.contains(m.target),g=pne[c.dir].includes(m.key);f&&g&&(o.onOpenChange(!1),l.trigger?.focus(),m.preventDefault())})})})})})});ZM.displayName=XM;function QM(e){return e?"open":"closed"}function pp(e){return e==="indeterminate"}function FS(e){return pp(e)?"indeterminate":e?"checked":"unchecked"}function Lne(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ine(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function One(e,t,n){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let c=Ine(e,Math.max(o,0));i.length===1&&(c=c.filter(h=>h!==n));const d=c.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function Bne(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const l=t[o],d=t[c],h=l.x,m=l.y,f=d.x,g=d.y;m>r!=g>r&&n<(f-h)*(r-m)/(g-m)+h&&(i=!i)}return i}function zne(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Bne(n,t)}function Jd(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Fne=PM,Hne=MS,Une=LM,$ne=IM,Vne=BS,Gne=OM,qne=kg,Wne=zM,Kne=HM,Yne=$M,Xne=GM,Zne=qM,Qne=WM,Jne=YM,ere=ZM,Eg="DropdownMenu",[tre]=An(Eg,[DM]),Hn=DM(),[sre,JM]=tre(Eg),e5=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:c,modal:l=!0}=e,d=Hn(t),h=y.useRef(null),[m,f]=ii({prop:i,defaultProp:o??!1,onChange:c,caller:Eg});return s.jsx(sre,{scope:t,triggerId:Mr(),triggerRef:h,contentId:Mr(),open:m,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(g=>!g),[f]),modal:l,children:s.jsx(Fne,{...d,open:m,onOpenChange:f,dir:r,modal:l,children:n})})};e5.displayName=Eg;var t5="DropdownMenuTrigger",s5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,o=JM(t5,n),c=Hn(n);return s.jsx(Hne,{asChild:!0,...c,children:s.jsx(tt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:la(t,o.triggerRef),onPointerDown:Oe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Oe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});s5.displayName=t5;var nre="DropdownMenuPortal",n5=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Hn(t);return s.jsx(Une,{...r,...n})};n5.displayName=nre;var r5="DropdownMenuContent",i5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=JM(r5,n),o=Hn(n),c=y.useRef(!1);return s.jsx($ne,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:t,onCloseAutoFocus:Oe(e.onCloseAutoFocus,l=>{c.current||i.triggerRef.current?.focus(),c.current=!1,l.preventDefault()}),onInteractOutside:Oe(e.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,m=d.button===2||h;(!i.modal||m)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i5.displayName=r5;var rre="DropdownMenuGroup",ire=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Vne,{...i,...r,ref:t})});ire.displayName=rre;var are="DropdownMenuLabel",a5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Gne,{...i,...r,ref:t})});a5.displayName=are;var ore="DropdownMenuItem",o5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(qne,{...i,...r,ref:t})});o5.displayName=ore;var lre="DropdownMenuCheckboxItem",l5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Wne,{...i,...r,ref:t})});l5.displayName=lre;var cre="DropdownMenuRadioGroup",ure=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Kne,{...i,...r,ref:t})});ure.displayName=cre;var dre="DropdownMenuRadioItem",c5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Yne,{...i,...r,ref:t})});c5.displayName=dre;var hre="DropdownMenuItemIndicator",u5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Xne,{...i,...r,ref:t})});u5.displayName=hre;var fre="DropdownMenuSeparator",d5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Zne,{...i,...r,ref:t})});d5.displayName=fre;var mre="DropdownMenuArrow",pre=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Qne,{...i,...r,ref:t})});pre.displayName=mre;var gre="DropdownMenuSubTrigger",h5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(Jne,{...i,...r,ref:t})});h5.displayName=gre;var xre="DropdownMenuSubContent",f5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Hn(n);return s.jsx(ere,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f5.displayName=xre;var vre=e5,yre=s5,bre=n5,m5=i5,p5=a5,g5=o5,x5=l5,v5=c5,y5=u5,b5=d5,w5=h5,S5=f5;const ll=vre,cl=yre,wre=y.forwardRef(({className:e,inset:t,children:n,...r},i)=>s.jsxs(w5,{ref:i,className:le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(vs,{className:"ml-auto h-4 w-4"})]}));wre.displayName=w5.displayName;const Sre=y.forwardRef(({className:e,...t},n)=>s.jsx(S5,{ref:n,className:le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Sre.displayName=S5.displayName;const lo=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(bre,{children:s.jsx(m5,{ref:r,sideOffset:t,className:le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));lo.displayName=m5.displayName;const Pn=y.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(g5,{ref:r,className:le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Pn.displayName=g5.displayName;const jre=y.forwardRef(({className:e,children:t,checked:n,...r},i)=>s.jsxs(x5,{ref:i,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(y5,{children:s.jsx(ts,{className:"h-4 w-4"})})}),t]}));jre.displayName=x5.displayName;const _re=y.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(v5,{ref:r,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(y5,{children:s.jsx(dl,{className:"h-2 w-2 fill-current"})})}),t]}));_re.displayName=v5.displayName;const j5=y.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(p5,{ref:r,className:le("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));j5.displayName=p5.displayName;const Za=y.forwardRef(({className:e,...t},n)=>s.jsx(b5,{ref:n,className:le("-mx-1 my-1 h-px bg-muted",e),...t}));Za.displayName=b5.displayName;function Cre({terminalId:e,backlogTasks:t,associatedTask:n,onTaskSelect:r,onClearTask:i,onNewTaskClick:o}){const c=n?.executionProgress?.phase||"idle",l=rne[c],d=l.icon;return n?s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs("button",{className:le("flex items-center gap-1.5 h-6 px-2 rounded text-[10px] font-medium transition-colors",l.color,"hover:opacity-80 cursor-pointer"),onClick:h=>h.stopPropagation(),children:[c==="planning"||c==="coding"||c==="qa_review"||c==="qa_fixing"?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(d,{className:"h-3 w-3"}),s.jsx("span",{children:l.label}),s.jsx(Gt,{className:"h-2.5 w-2.5 opacity-60"})]})}),s.jsxs(lo,{align:"start",className:"w-56",children:[s.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Current task"}),s.jsx("div",{className:"px-2 py-1 text-sm font-medium truncate",children:n.title}),n.executionProgress?.message&&s.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground truncate",children:n.executionProgress.message}),s.jsx(Za,{}),t.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Switch to..."}),t.filter(h=>h.id!==n.id).slice(0,5).map(h=>s.jsxs(Pn,{onClick:()=>r(h.id),className:"text-xs",children:[s.jsx(ym,{className:"h-3 w-3 mr-2 text-muted-foreground"}),s.jsx("span",{className:"truncate",children:h.title})]},h.id)),s.jsx(Za,{})]}),s.jsxs(Pn,{onClick:i,className:"text-xs text-muted-foreground",children:[s.jsx(Ys,{className:"h-3 w-3 mr-2"}),"Clear task"]})]})]}):s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs("button",{className:"flex items-center gap-1.5 h-6 px-2 rounded text-[10px] font-medium transition-colors border border-border/50 bg-card/50 hover:bg-card hover:border-border text-muted-foreground hover:text-foreground",onClick:h=>h.stopPropagation(),children:[s.jsx(ym,{className:"h-3 w-3"}),s.jsx("span",{children:"Select task..."}),s.jsx(Gt,{className:"h-2.5 w-2.5 opacity-60"})]})}),s.jsx(lo,{align:"start",className:"w-56",children:t.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Available tasks"}),t.slice(0,8).map(h=>s.jsxs(Pn,{onClick:()=>r(h.id),className:"text-xs",children:[s.jsx(ym,{className:"h-3 w-3 mr-2 text-muted-foreground"}),s.jsx("span",{className:"truncate",children:h.title})]},h.id)),o&&s.jsxs(s.Fragment,{children:[s.jsx(Za,{}),s.jsxs(Pn,{onClick:h=>{h.stopPropagation(),o()},className:"text-xs text-primary",children:[s.jsx(ys,{className:"h-3 w-3 mr-2"}),"Add new task"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"No tasks available"}),o?s.jsxs(Pn,{onClick:h=>{h.stopPropagation(),o()},className:"text-xs text-primary",children:[s.jsx(ys,{className:"h-3 w-3 mr-2"}),"Add new task"]}):s.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground italic",children:"Create tasks in the Kanban board"})]})})]})}function Nre({terminalId:e,title:t,status:n,isClaudeMode:r,tasks:i,associatedTask:o,onClose:c,onInvokeClaude:l,onTitleChange:d,onTaskSelect:h,onClearTask:m,onNewTaskClick:f}){const g=i.filter(x=>x.status==="backlog");return s.jsxs("div",{className:"electron-no-drag flex h-9 items-center justify-between border-b border-border/50 bg-card/30 px-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:le("h-2 w-2 rounded-full",nne[n])}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ZH,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx(ine,{title:t,associatedTask:o,onTitleChange:d})]}),r&&s.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-primary bg-primary/10 px-1.5 py-0.5 rounded",children:[s.jsx(us,{className:"h-2.5 w-2.5"}),"Claude"]}),r&&s.jsx(Cre,{terminalId:e,backlogTasks:g,associatedTask:o,onTaskSelect:h,onClearTask:m,onNewTaskClick:f})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[!r&&n!=="exited"&&s.jsxs(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs gap-1 hover:bg-primary/10 hover:text-primary",onClick:x=>{x.stopPropagation(),l()},children:[s.jsx(us,{className:"h-3 w-3"}),"Claude"]}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive/10 hover:text-destructive",onClick:x=>{x.stopPropagation(),c()},children:s.jsx(Ys,{className:"h-3.5 w-3.5"})})]})]})}var Ky={exports:{}},bE;function kre(){return bE||(bE=1,(function(e,t){(function(n,r){e.exports=r()})(globalThis,(()=>(()=>{var n={4567:function(c,l,d){var h=this&&this.__decorate||function(j,S,N,T){var E,D=arguments.length,A=D<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,N):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(j,S,N,T);else for(var P=j.length-1;P>=0;P--)(E=j[P])&&(A=(D<3?E(A):D>3?E(S,N,A):E(S,N))||A);return D>3&&A&&Object.defineProperty(S,N,A),A},m=this&&this.__param||function(j,S){return function(N,T){S(N,T,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const f=d(9042),g=d(9924),x=d(844),C=d(4725),_=d(2585),b=d(3656);let w=l.AccessibilityManager=class extends x.Disposable{constructor(j,S,N,T){super(),this._terminal=j,this._coreBrowserService=N,this._renderService=T,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((E=>this._handleResize(E.rows)))),this.register(this._terminal.onRender((E=>this._refreshRows(E.start,E.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((E=>this._handleChar(E)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((E=>this._handleTab(E)))),this.register(this._terminal.onKey((E=>this._handleKey(E.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,b.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,x.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(j){for(let S=0;S<j;S++)this._handleChar(" ")}_handleChar(j){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==j&&(this._charsToAnnounce+=j):this._charsToAnnounce+=j,j===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(j){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(j)||this._charsToConsume.push(j)}_refreshRows(j,S){this._liveRegionDebouncer.refresh(j,S,this._terminal.rows)}_renderRows(j,S){const N=this._terminal.buffer,T=N.lines.length.toString();for(let E=j;E<=S;E++){const D=N.lines.get(N.ydisp+E),A=[],P=D?.translateToString(!0,void 0,void 0,A)||"",M=(N.ydisp+E+1).toString(),B=this._rowElements[E];B&&(P.length===0?(B.innerText="",this._rowColumns.set(B,[0,1])):(B.textContent=P,this._rowColumns.set(B,A)),B.setAttribute("aria-posinset",M),B.setAttribute("aria-setsize",T))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(j,S){const N=j.target,T=this._rowElements[S===0?1:this._rowElements.length-2];if(N.getAttribute("aria-posinset")===(S===0?"1":`${this._terminal.buffer.lines.length}`)||j.relatedTarget!==T)return;let E,D;if(S===0?(E=N,D=this._rowElements.pop(),this._rowContainer.removeChild(D)):(E=this._rowElements.shift(),D=N,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),D.removeEventListener("focus",this._bottomBoundaryFocusListener),S===0){const A=this._createAccessibilityTreeNode();this._rowElements.unshift(A),this._rowContainer.insertAdjacentElement("afterbegin",A)}else{const A=this._createAccessibilityTreeNode();this._rowElements.push(A),this._rowContainer.appendChild(A)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(S===0?-1:1),this._rowElements[S===0?1:this._rowElements.length-2].focus(),j.preventDefault(),j.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const j=document.getSelection();if(!j)return;if(j.isCollapsed)return void(this._rowContainer.contains(j.anchorNode)&&this._terminal.clearSelection());if(!j.anchorNode||!j.focusNode)return void console.error("anchorNode and/or focusNode are null");let S={node:j.anchorNode,offset:j.anchorOffset},N={node:j.focusNode,offset:j.focusOffset};if((S.node.compareDocumentPosition(N.node)&Node.DOCUMENT_POSITION_PRECEDING||S.node===N.node&&S.offset>N.offset)&&([S,N]=[N,S]),S.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(S={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(S.node))return;const T=this._rowElements.slice(-1)[0];if(N.node.compareDocumentPosition(T)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(N={node:T,offset:T.textContent?.length??0}),!this._rowContainer.contains(N.node))return;const E=({node:P,offset:M})=>{const B=P instanceof Text?P.parentNode:P;let F=parseInt(B?.getAttribute("aria-posinset"),10)-1;if(isNaN(F))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(B);if(!U)return console.warn("columns is null. Race condition?"),null;let G=M<U.length?U[M]:U.slice(-1)[0]+1;return G>=this._terminal.cols&&(++F,G=0),{row:F,column:G}},D=E(S),A=E(N);if(D&&A){if(D.row>A.row||D.row===A.row&&D.column>=A.column)throw new Error("invalid range");this._terminal.select(D.column,D.row,(A.row-D.row)*this._terminal.cols-D.column+A.column)}}_handleResize(j){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let S=this._rowContainer.children.length;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const j=this._coreBrowserService.mainDocument.createElement("div");return j.setAttribute("role","listitem"),j.tabIndex=-1,this._refreshRowDimensions(j),j}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let j=0;j<this._terminal.rows;j++)this._refreshRowDimensions(this._rowElements[j])}}_refreshRowDimensions(j){j.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=w=h([m(1,_.IInstantiationService),m(2,C.ICoreBrowserService),m(3,C.IRenderService)],w)},3614:(c,l)=>{function d(g){return g.replace(/\r?\n/g,"\r")}function h(g,x){return x?"\x1B[200~"+g+"\x1B[201~":g}function m(g,x,C,_){g=h(g=d(g),C.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(g,!0),x.value=""}function f(g,x,C){const _=C.getBoundingClientRect(),b=g.clientX-_.left-10,w=g.clientY-_.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${b}px`,x.style.top=`${w}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=d,l.bracketTextForPaste=h,l.copyHandler=function(g,x){g.clipboardData&&g.clipboardData.setData("text/plain",x.selectionText),g.preventDefault()},l.handlePasteEvent=function(g,x,C,_){g.stopPropagation(),g.clipboardData&&m(g.clipboardData.getData("text/plain"),x,C,_)},l.paste=m,l.moveTextAreaUnderMouseCursor=f,l.rightClickHandler=function(g,x,C,_,b){f(g,x,C),b&&_.rightClickSelect(g),x.value=_.selectionText,x.select()}},7239:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const h=d(1505);l.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(m,f,g){this._css.set(m,f,g)}getCss(m,f){return this._css.get(m,f)}setColor(m,f,g){this._color.set(m,f,g)}getColor(m,f){return this._color.get(m,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(d,h,m,f){d.addEventListener(h,m,f);let g=!1;return{dispose:()=>{g||(g=!0,d.removeEventListener(h,m,f))}}}},3551:function(c,l,d){var h=this&&this.__decorate||function(w,j,S,N){var T,E=arguments.length,D=E<3?j:N===null?N=Object.getOwnPropertyDescriptor(j,S):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,j,S,N);else for(var A=w.length-1;A>=0;A--)(T=w[A])&&(D=(E<3?T(D):E>3?T(j,S,D):T(j,S))||D);return E>3&&D&&Object.defineProperty(j,S,D),D},m=this&&this.__param||function(w,j){return function(S,N){j(S,N,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const f=d(3656),g=d(8460),x=d(844),C=d(2585),_=d(4725);let b=l.Linkifier=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(w,j,S,N,T){super(),this._element=w,this._mouseService=j,this._renderService=S,this._bufferService=N,this._linkProviderService=T,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(w){this._lastMouseEvent=w;const j=this._positionFromMouseEvent(w,this._element,this._mouseService);if(!j)return;this._isMouseOut=!1;const S=w.composedPath();for(let N=0;N<S.length;N++){const T=S[N];if(T.classList.contains("xterm"))break;if(T.classList.contains("xterm-hover"))return}this._lastBufferCell&&j.x===this._lastBufferCell.x&&j.y===this._lastBufferCell.y||(this._handleHover(j),this._lastBufferCell=j)}_handleHover(w){if(this._activeLine!==w.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(w,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,w)||(this._clearCurrentLink(),this._askForLink(w,!0))}_askForLink(w,j){this._activeProviderReplies&&j||(this._activeProviderReplies?.forEach((N=>{N?.forEach((T=>{T.link.dispose&&T.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=w.y);let S=!1;for(const[N,T]of this._linkProviderService.linkProviders.entries())j?this._activeProviderReplies?.get(N)&&(S=this._checkLinkProviderResult(N,w,S)):T.provideLinks(w.y,(E=>{if(this._isMouseOut)return;const D=E?.map((A=>({link:A})));this._activeProviderReplies?.set(N,D),S=this._checkLinkProviderResult(N,w,S),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(w.y,this._activeProviderReplies)}))}_removeIntersectingLinks(w,j){const S=new Set;for(let N=0;N<j.size;N++){const T=j.get(N);if(T)for(let E=0;E<T.length;E++){const D=T[E],A=D.link.range.start.y<w?0:D.link.range.start.x,P=D.link.range.end.y>w?this._bufferService.cols:D.link.range.end.x;for(let M=A;M<=P;M++){if(S.has(M)){T.splice(E--,1);break}S.add(M)}}}}_checkLinkProviderResult(w,j,S){if(!this._activeProviderReplies)return S;const N=this._activeProviderReplies.get(w);let T=!1;for(let E=0;E<w;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(T=!0);if(!T&&N){const E=N.find((D=>this._linkAtPosition(D.link,j)));E&&(S=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!S)for(let E=0;E<this._activeProviderReplies.size;E++){const D=this._activeProviderReplies.get(E)?.find((A=>this._linkAtPosition(A.link,j)));if(D){S=!0,this._handleNewLink(D);break}}return S}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(w){if(!this._currentLink)return;const j=this._positionFromMouseEvent(w,this._element,this._mouseService);j&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,j)&&this._currentLink.link.activate(w,this._currentLink.link.text)}_clearCurrentLink(w,j){this._currentLink&&this._lastMouseEvent&&(!w||!j||this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=j)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(w){if(!this._lastMouseEvent)return;const j=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);j&&this._linkAtPosition(w.link,j)&&(this._currentLink=w,this._currentLink.state={decorations:{underline:w.link.decorations===void 0||w.link.decorations.underline,pointerCursor:w.link.decorations===void 0||w.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,w.link,this._lastMouseEvent),w.link.decorations={},Object.defineProperties(w.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:S=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==S&&(this._currentLink.state.decorations.pointerCursor=S,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",S))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:S=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==S&&(this._currentLink.state.decorations.underline=S,this._currentLink.state.isHovered&&this._fireUnderlineEvent(w.link,S))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((S=>{if(!this._currentLink)return;const N=S.start===0?0:S.start+1+this._bufferService.buffer.ydisp,T=this._bufferService.buffer.ydisp+1+S.end;if(this._currentLink.link.range.start.y>=N&&this._currentLink.link.range.end.y<=T&&(this._clearCurrentLink(N,T),this._lastMouseEvent)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}}))))}_linkHover(w,j,S){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(j,!0),this._currentLink.state.decorations.pointerCursor&&w.classList.add("xterm-cursor-pointer")),j.hover&&j.hover(S,j.text)}_fireUnderlineEvent(w,j){const S=w.range,N=this._bufferService.buffer.ydisp,T=this._createLinkUnderlineEvent(S.start.x-1,S.start.y-N-1,S.end.x,S.end.y-N-1,void 0);(j?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(T)}_linkLeave(w,j,S){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(j,!1),this._currentLink.state.decorations.pointerCursor&&w.classList.remove("xterm-cursor-pointer")),j.leave&&j.leave(S,j.text)}_linkAtPosition(w,j){const S=w.range.start.y*this._bufferService.cols+w.range.start.x,N=w.range.end.y*this._bufferService.cols+w.range.end.x,T=j.y*this._bufferService.cols+j.x;return S<=T&&T<=N}_positionFromMouseEvent(w,j,S){const N=S.getCoords(w,j,this._bufferService.cols,this._bufferService.rows);if(N)return{x:N[0],y:N[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(w,j,S,N,T){return{x1:w,y1:j,x2:S,y2:N,cols:this._bufferService.cols,fg:T}}};l.Linkifier=b=h([m(1,_.IMouseService),m(2,_.IRenderService),m(3,C.IBufferService),m(4,_.ILinkProviderService)],b)},9042:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(c,l,d){var h=this&&this.__decorate||function(_,b,w,j){var S,N=arguments.length,T=N<3?b:j===null?j=Object.getOwnPropertyDescriptor(b,w):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(_,b,w,j);else for(var E=_.length-1;E>=0;E--)(S=_[E])&&(T=(N<3?S(T):N>3?S(b,w,T):S(b,w))||T);return N>3&&T&&Object.defineProperty(b,w,T),T},m=this&&this.__param||function(_,b){return function(w,j){b(w,j,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const f=d(511),g=d(2585);let x=l.OscLinkProvider=class{constructor(_,b,w){this._bufferService=_,this._optionsService=b,this._oscLinkService=w}provideLinks(_,b){const w=this._bufferService.buffer.lines.get(_-1);if(!w)return void b(void 0);const j=[],S=this._optionsService.rawOptions.linkHandler,N=new f.CellData,T=w.getTrimmedLength();let E=-1,D=-1,A=!1;for(let P=0;P<T;P++)if(D!==-1||w.hasContent(P)){if(w.loadCell(P,N),N.hasExtendedAttrs()&&N.extended.urlId){if(D===-1){D=P,E=N.extended.urlId;continue}A=N.extended.urlId!==E}else D!==-1&&(A=!0);if(A||D!==-1&&P===T-1){const M=this._oscLinkService.getLinkData(E)?.uri;if(M){const B={start:{x:D+1,y:_},end:{x:P+(A||P!==T-1?0:1),y:_}};let F=!1;if(!S?.allowNonHttpProtocols)try{const U=new URL(M);["http:","https:"].includes(U.protocol)||(F=!0)}catch{F=!0}F||j.push({text:M,range:B,activate:(U,G)=>S?S.activate(U,G,B):C(0,G),hover:(U,G)=>S?.hover?.(U,G,B),leave:(U,G)=>S?.leave?.(U,G,B)})}A=!1,N.hasExtendedAttrs()&&N.extended.urlId?(D=P,E=N.extended.urlId):(D=-1,E=-1)}}b(j)}};function C(_,b){if(confirm(`Do you want to navigate to ${b}?

WARNING: This link could potentially be dangerous`)){const w=window.open();if(w){try{w.opener=null}catch{}w.location.href=b}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=x=h([m(0,g.IBufferService),m(1,g.IOptionsService),m(2,g.IOscLinkService)],x)},6193:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(d,h){this._renderCallback=d,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(d,h,m){this._rowCount=m,d=d!==void 0?d:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},3236:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const h=d(3614),m=d(3656),f=d(3551),g=d(9042),x=d(3730),C=d(1680),_=d(3107),b=d(5744),w=d(2950),j=d(1296),S=d(428),N=d(4269),T=d(5114),E=d(8934),D=d(3230),A=d(9312),P=d(4725),M=d(6731),B=d(8055),F=d(8969),U=d(8460),G=d(844),$=d(6114),V=d(8437),Y=d(2584),K=d(7399),O=d(5941),L=d(9074),I=d(2585),q=d(5435),z=d(4567),ee=d(779);class ie extends F.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(X={}){super(X),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new G.MutableDisposable),this._onCursorMove=this.register(new U.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new U.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new U.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new U.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new U.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new U.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new U.EventEmitter),this._onBlur=this.register(new U.EventEmitter),this._onA11yCharEmitter=this.register(new U.EventEmitter),this._onA11yTabEmitter=this.register(new U.EventEmitter),this._onWillOpen=this.register(new U.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(L.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ee.LinkProviderService),this._instantiationService.setService(P.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((W,Q)=>this.refresh(W,Q)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((W=>this._reportWindowsOptions(W)))),this.register(this._inputHandler.onColor((W=>this._handleColorEvent(W)))),this.register((0,U.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,U.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,U.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((W=>this._afterResize(W.cols,W.rows)))),this.register((0,G.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(X){if(this._themeService)for(const W of X){let Q,se="";switch(W.index){case 256:Q="foreground",se="10";break;case 257:Q="background",se="11";break;case 258:Q="cursor",se="12";break;default:Q="ansi",se="4;"+W.index}switch(W.type){case 0:const he=B.color.toColorRGB(Q==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[Q]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${se};${(0,O.toRgbString)(he)}${Y.C1_ESCAPED.ST}`);break;case 1:if(Q==="ansi")this._themeService.modifyColors((de=>de.ansi[W.index]=B.channels.toColor(...W.color)));else{const de=Q;this._themeService.modifyColors((Ne=>Ne[de]=B.channels.toColor(...W.color)))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(X){X?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(X){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const X=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(X);if(!W)return;const Q=Math.min(this.buffer.x,this.cols-1),se=this._renderService.dimensions.css.cell.height,he=W.getWidth(Q),de=this._renderService.dimensions.css.cell.width*he,Ne=this.buffer.y*this._renderService.dimensions.css.cell.height,Re=Q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Re+"px",this.textarea.style.top=Ne+"px",this.textarea.style.width=de+"px",this.textarea.style.height=se+"px",this.textarea.style.lineHeight=se+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",(W=>{this.hasSelection()&&(0,h.copyHandler)(W,this._selectionService)})));const X=W=>(0,h.handlePasteEvent)(W,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",X)),this.register((0,m.addDisposableDomListener)(this.element,"paste",X)),$.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",(W=>{W.button===2&&(0,h.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",(W=>{(0,h.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),$.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",(W=>{W.button===1&&(0,h.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",(X=>this._keyUp(X)),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",(X=>this._keyDown(X)),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",(X=>this._keyPress(X)),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",(X=>this._compositionHelper.compositionupdate(X)))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,m.addDisposableDomListener)(this.textarea,"input",(X=>this._inputEvent(X)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(X){if(!X)throw new Error("Terminal requires a parent element.");if(X.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=X.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),X.appendChild(this.element);const W=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,m.addDisposableDomListener)(this.screenElement,"mousemove",(Q=>this.updateCursorStyle(Q)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,X.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(P.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",(Q=>this._handleTextAreaFocus(Q)))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(S.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(P.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(P.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(N.CharacterJoinerService),this._instantiationService.setService(P.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(P.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((Q=>this._onRender.fire(Q)))),this.onResize((Q=>this._renderService.resize(Q.cols,Q.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(w.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(P.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(f.Linkifier,this.screenElement)),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((Q=>this.scrollLines(Q.amount,Q.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(A.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(P.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((Q=>this.scrollLines(Q.amount,Q.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((Q=>this._renderService.handleSelectionChanged(Q.start,Q.end,Q.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((Q=>{this.textarea.value=Q,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((Q=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",(Q=>this._selectionService.handleMouseDown(Q)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(Q=>this._handleScreenReaderModeOptionChange(Q)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(b.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(Q=>{!this._overviewRulerRenderer&&Q&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(b.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(j.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const X=this,W=this.element;function Q(de){const Ne=X._mouseService.getMouseReportCoords(de,X.screenElement);if(!Ne)return!1;let Re,ce;switch(de.overrideType||de.type){case"mousemove":ce=32,de.buttons===void 0?(Re=3,de.button!==void 0&&(Re=de.button<3?de.button:3)):Re=1&de.buttons?0:4&de.buttons?1:2&de.buttons?2:3;break;case"mouseup":ce=0,Re=de.button<3?de.button:3;break;case"mousedown":ce=1,Re=de.button<3?de.button:3;break;case"wheel":if(X._customWheelEventHandler&&X._customWheelEventHandler(de)===!1||X.viewport.getLinesScrolled(de)===0)return!1;ce=de.deltaY<0?0:1,Re=4;break;default:return!1}return!(ce===void 0||Re===void 0||Re>4)&&X.coreMouseService.triggerMouseEvent({col:Ne.col,row:Ne.row,x:Ne.x,y:Ne.y,button:Re,action:ce,ctrl:de.ctrlKey,alt:de.altKey,shift:de.shiftKey})}const se={mouseup:null,wheel:null,mousedrag:null,mousemove:null},he={mouseup:de=>(Q(de),de.buttons||(this._document.removeEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.removeEventListener("mousemove",se.mousedrag)),this.cancel(de)),wheel:de=>(Q(de),this.cancel(de,!0)),mousedrag:de=>{de.buttons&&Q(de)},mousemove:de=>{de.buttons||Q(de)}};this.register(this.coreMouseService.onProtocolChange((de=>{de?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(de)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&de?se.mousemove||(W.addEventListener("mousemove",he.mousemove),se.mousemove=he.mousemove):(W.removeEventListener("mousemove",se.mousemove),se.mousemove=null),16&de?se.wheel||(W.addEventListener("wheel",he.wheel,{passive:!1}),se.wheel=he.wheel):(W.removeEventListener("wheel",se.wheel),se.wheel=null),2&de?se.mouseup||(se.mouseup=he.mouseup):(this._document.removeEventListener("mouseup",se.mouseup),se.mouseup=null),4&de?se.mousedrag||(se.mousedrag=he.mousedrag):(this._document.removeEventListener("mousemove",se.mousedrag),se.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(W,"mousedown",(de=>{if(de.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(de))return Q(de),se.mouseup&&this._document.addEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.addEventListener("mousemove",se.mousedrag),this.cancel(de)}))),this.register((0,m.addDisposableDomListener)(W,"wheel",(de=>{if(!se.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(de)===!1)return!1;if(!this.buffer.hasScrollback){const Ne=this.viewport.getLinesScrolled(de);if(Ne===0)return;const Re=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(de.deltaY<0?"A":"B");let ce="";for(let ge=0;ge<Math.abs(Ne);ge++)ce+=Re;return this.coreService.triggerDataEvent(ce,!0),this.cancel(de,!0)}return this.viewport.handleWheel(de)?this.cancel(de):void 0}}),{passive:!1})),this.register((0,m.addDisposableDomListener)(W,"touchstart",(de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(de),this.cancel(de)}),{passive:!0})),this.register((0,m.addDisposableDomListener)(W,"touchmove",(de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(de)?void 0:this.cancel(de)}),{passive:!1}))}refresh(X,W){this._renderService?.refreshRows(X,W)}updateCursorStyle(X){this._selectionService?.shouldColumnSelect(X)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(X,W,Q=0){Q===1?(super.scrollLines(X,W,Q),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(X)}paste(X){(0,h.paste)(X,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(X){this._customKeyEventHandler=X}attachCustomWheelEventHandler(X){this._customWheelEventHandler=X}registerLinkProvider(X){return this._linkProviderService.registerLinkProvider(X)}registerCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const W=this._characterJoinerService.register(X);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(X)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(X){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+X)}registerDecoration(X){return this._decorationService.registerDecoration(X)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(X,W,Q){this._selectionService.setSelection(X,W,Q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(X,W){this._selectionService?.selectLines(X,W)}_keyDown(X){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;const W=this.browser.isMac&&this.options.macOptionIsMeta&&X.altKey;if(!W&&!this._compositionHelper.keydown(X))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;W||X.key!=="Dead"&&X.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Q=(0,K.evaluateKeyboardEvent)(X,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(X),Q.type===3||Q.type===2){const se=this.rows-1;return this.scrollLines(Q.type===2?-se:se),this.cancel(X,!0)}return Q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,X)||(Q.cancel&&this.cancel(X,!0),!Q.key||!!(X.key&&!X.ctrlKey&&!X.altKey&&!X.metaKey&&X.key.length===1&&X.key.charCodeAt(0)>=65&&X.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Q.key!==Y.C0.ETX&&Q.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Q.key,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(Q.key,!0),!this.optionsService.rawOptions.screenReaderMode||X.altKey||X.ctrlKey?this.cancel(X,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(X,W){const Q=X.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||X.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||X.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?Q:Q&&(!W.keyCode||W.keyCode>47)}_keyUp(X){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1||((function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18})(X)||this.focus(),this.updateCursorStyle(X),this._keyPressHandled=!1)}_keyPress(X){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;if(this.cancel(X),X.charCode)W=X.charCode;else if(X.which===null||X.which===void 0)W=X.keyCode;else{if(X.which===0||X.charCode===0)return!1;W=X.which}return!(!W||(X.altKey||X.ctrlKey||X.metaKey)&&!this._isThirdLevelShift(this.browser,X)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(X){if(X.data&&X.inputType==="insertText"&&(!X.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const W=X.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(X),!0}return!1}resize(X,W){X!==this.cols||W!==this.rows?super.resize(X,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(X,W){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let X=1;X<this.rows;X++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const X=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(X){if(this._renderService)switch(X){case q.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const W=this._renderService.dimensions.css.canvas.width.toFixed(0),Q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${Q};${W}t`);break;case q.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const se=this._renderService.dimensions.css.cell.width.toFixed(0),he=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${he};${se}t`)}}cancel(X,W){if(this.options.cancelEvents||W)return X.preventDefault(),X.stopPropagation(),!1}}l.Terminal=ie},9924:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(d,h=1e3){this._renderCallback=d,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,h,m){this._rowCount=m,d=d!==void 0?d:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=f-this._lastRefreshMs,x=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,h)}}},1680:function(c,l,d){var h=this&&this.__decorate||function(w,j,S,N){var T,E=arguments.length,D=E<3?j:N===null?N=Object.getOwnPropertyDescriptor(j,S):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,j,S,N);else for(var A=w.length-1;A>=0;A--)(T=w[A])&&(D=(E<3?T(D):E>3?T(j,S,D):T(j,S))||D);return E>3&&D&&Object.defineProperty(j,S,D),D},m=this&&this.__param||function(w,j){return function(S,N){j(S,N,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const f=d(3656),g=d(4725),x=d(8460),C=d(844),_=d(2585);let b=l.Viewport=class extends C.Disposable{constructor(w,j,S,N,T,E,D,A){super(),this._viewportElement=w,this._scrollArea=j,this._bufferService=S,this._optionsService=N,this._charSizeService=T,this._renderService=E,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((P=>this._activeBuffer=P.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((P=>this._renderDimensions=P))),this._handleThemeChange(A.colors),this.register(A.onChangeColors((P=>this._handleThemeChange(P)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(w){this._viewportElement.style.backgroundColor=w.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(w){if(w)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const j=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==j&&(this._lastRecordedBufferHeight=j,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const w=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==w&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=w),this._refreshAnimationFrame=null}syncScrollArea(w=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(w);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(w)}_handleScroll(w){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const j=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:j,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const w=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(w*(this._smoothScrollState.target-this._smoothScrollState.origin)),w<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(w,j){const S=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(j<0&&this._viewportElement.scrollTop!==0||j>0&&S<this._lastRecordedBufferHeight)||(w.cancelable&&w.preventDefault(),!1)}handleWheel(w){const j=this._getPixelsScrolled(w);return j!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+j:this._smoothScrollState.target+=j,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=j,this._bubbleScroll(w,j))}scrollLines(w){if(w!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const j=w*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+j,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:w,suppressScrollEvent:!1})}_getPixelsScrolled(w){if(w.deltaY===0||w.shiftKey)return 0;let j=this._applyScrollModifier(w.deltaY,w);return w.deltaMode===WheelEvent.DOM_DELTA_LINE?j*=this._currentRowHeight:w.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(j*=this._currentRowHeight*this._bufferService.rows),j}getBufferElements(w,j){let S,N="";const T=[],E=j??this._bufferService.buffer.lines.length,D=this._bufferService.buffer.lines;for(let A=w;A<E;A++){const P=D.get(A);if(!P)continue;const M=D.get(A+1)?.isWrapped;if(N+=P.translateToString(!M),!M||A===D.length-1){const B=document.createElement("div");B.textContent=N,T.push(B),N.length>0&&(S=B),N=""}}return{bufferElements:T,cursorElement:S}}getLinesScrolled(w){if(w.deltaY===0||w.shiftKey)return 0;let j=this._applyScrollModifier(w.deltaY,w);return w.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(j/=this._currentRowHeight+0,this._wheelPartialScroll+=j,j=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):w.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(j*=this._bufferService.rows),j}_applyScrollModifier(w,j){const S=this._optionsService.rawOptions.fastScrollModifier;return S==="alt"&&j.altKey||S==="ctrl"&&j.ctrlKey||S==="shift"&&j.shiftKey?w*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:w*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(w){this._lastTouchY=w.touches[0].pageY}handleTouchMove(w){const j=this._lastTouchY-w.touches[0].pageY;return this._lastTouchY=w.touches[0].pageY,j!==0&&(this._viewportElement.scrollTop+=j,this._bubbleScroll(w,j))}};l.Viewport=b=h([m(2,_.IBufferService),m(3,_.IOptionsService),m(4,g.ICharSizeService),m(5,g.IRenderService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],b)},3107:function(c,l,d){var h=this&&this.__decorate||function(_,b,w,j){var S,N=arguments.length,T=N<3?b:j===null?j=Object.getOwnPropertyDescriptor(b,w):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(_,b,w,j);else for(var E=_.length-1;E>=0;E--)(S=_[E])&&(T=(N<3?S(T):N>3?S(b,w,T):S(b,w))||T);return N>3&&T&&Object.defineProperty(b,w,T),T},m=this&&this.__param||function(_,b){return function(w,j){b(w,j,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const f=d(4725),g=d(844),x=d(2585);let C=l.BufferDecorationRenderer=class extends g.Disposable{constructor(_,b,w,j,S){super(),this._screenElement=_,this._bufferService=b,this._coreBrowserService=w,this._decorationService=j,this._renderService=S,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((N=>this._removeDecoration(N)))),this.register((0,g.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){const b=this._coreBrowserService.mainDocument.createElement("div");b.classList.add("xterm-decoration"),b.classList.toggle("xterm-decoration-top-layer",_?.options?.layer==="top"),b.style.width=`${Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,b.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",b.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",b.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const w=_.options.x??0;return w&&w>this._bufferService.cols&&(b.style.display="none"),this._refreshXPosition(_,b),b}_refreshStyle(_){const b=_.marker.line-this._bufferService.buffers.active.ydisp;if(b<0||b>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let w=this._decorationElements.get(_);w||(w=this._createElement(_),_.element=w,this._decorationElements.set(_,w),this._container.appendChild(w),_.onDispose((()=>{this._decorationElements.delete(_),w.remove()}))),w.style.top=b*this._renderService.dimensions.css.cell.height+"px",w.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(w)}}_refreshXPosition(_,b=_.element){if(!b)return;const w=_.options.x??0;(_.options.anchor||"left")==="right"?b.style.right=w?w*this._renderService.dimensions.css.cell.width+"px":"":b.style.left=w?w*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){this._decorationElements.get(_)?.remove(),this._decorationElements.delete(_),_.dispose()}};l.BufferDecorationRenderer=C=h([m(1,x.IBufferService),m(2,f.ICoreBrowserService),m(3,x.IDecorationService),m(4,f.IRenderService)],C)},5871:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const h of this._zones)if(h.color===d.options.overviewRulerOptions.color&&h.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,d.marker.line))return;if(this._lineAdjacentToZone(h,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(h,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,h){return h>=d.startBufferLine&&h<=d.endBufferLine}_lineAdjacentToZone(d,h,m){return h>=d.startBufferLine-this._linePadding[m||"full"]&&h<=d.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(d,h){d.startBufferLine=Math.min(d.startBufferLine,h),d.endBufferLine=Math.max(d.endBufferLine,h)}}},5744:function(c,l,d){var h=this&&this.__decorate||function(S,N,T,E){var D,A=arguments.length,P=A<3?N:E===null?E=Object.getOwnPropertyDescriptor(N,T):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(S,N,T,E);else for(var M=S.length-1;M>=0;M--)(D=S[M])&&(P=(A<3?D(P):A>3?D(N,T,P):D(N,T))||P);return A>3&&P&&Object.defineProperty(N,T,P),P},m=this&&this.__param||function(S,N){return function(T,E){N(T,E,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const f=d(5871),g=d(4725),x=d(844),C=d(2585),_={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0},w={full:0,left:0,center:0,right:0};let j=l.OverviewRulerRenderer=class extends x.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(S,N,T,E,D,A,P){super(),this._viewportElement=S,this._screenElement=N,this._bufferService=T,this._decorationService=E,this._renderService=D,this._optionsService=A,this._coreBrowserService=P,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,x.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const S=Math.floor(this._canvas.width/3),N=Math.ceil(this._canvas.width/3);b.full=this._canvas.width,b.left=S,b.center=N,b.right=S,this._refreshDrawHeightConstants(),w.full=0,w.left=0,w.center=b.left,w.right=b.left+b.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const S=this._canvas.height/this._bufferService.buffer.lines.length,N=Math.round(Math.max(Math.min(S,12),6)*this._coreBrowserService.dpr);_.left=N,_.center=N,_.right=N}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const N of this._decorationService.decorations)this._colorZoneStore.addDecoration(N);this._ctx.lineWidth=1;const S=this._colorZoneStore.zones;for(const N of S)N.position!=="full"&&this._renderColorZone(N);for(const N of S)N.position==="full"&&this._renderColorZone(N);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(w[S.position||"full"],Math.round((this._canvas.height-1)*(S.startBufferLine/this._bufferService.buffers.active.lines.length)-_[S.position||"full"]/2),b[S.position||"full"],Math.round((this._canvas.height-1)*((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[S.position||"full"]))}_queueRefresh(S,N){this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=N||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=j=h([m(2,C.IBufferService),m(3,C.IDecorationService),m(4,g.IRenderService),m(5,C.IOptionsService),m(6,g.ICoreBrowserService)],j)},2950:function(c,l,d){var h=this&&this.__decorate||function(_,b,w,j){var S,N=arguments.length,T=N<3?b:j===null?j=Object.getOwnPropertyDescriptor(b,w):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(_,b,w,j);else for(var E=_.length-1;E>=0;E--)(S=_[E])&&(T=(N<3?S(T):N>3?S(b,w,T):S(b,w))||T);return N>3&&T&&Object.defineProperty(b,w,T),T},m=this&&this.__param||function(_,b){return function(w,j){b(w,j,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const f=d(4725),g=d(2585),x=d(2584);let C=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,b,w,j,S,N){this._textarea=_,this._compositionView=b,this._bufferService=w,this._optionsService=j,this._coreService=S,this._renderService=N,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const b={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let w;this._isSendingComposition=!1,b.start+=this._dataAlreadySent.length,w=this._isComposing?this._textarea.value.substring(b.start,b.end):this._textarea.value.substring(b.start),w.length>0&&this._coreService.triggerDataEvent(w,!0)}}),0)}else{this._isSendingComposition=!1;const b=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(b,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const b=this._textarea.value,w=b.replace(_,"");this._dataAlreadySent=w,b.length>_.length?this._coreService.triggerDataEvent(w,!0):b.length<_.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):b.length===_.length&&b!==_&&this._coreService.triggerDataEvent(b,!0)}}),0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const b=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),w=this._renderService.dimensions.css.cell.height,j=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,S=b*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=S+"px",this._compositionView.style.top=j+"px",this._compositionView.style.height=w+"px",this._compositionView.style.lineHeight=w+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const N=this._compositionView.getBoundingClientRect();this._textarea.style.left=S+"px",this._textarea.style.top=j+"px",this._textarea.style.width=Math.max(N.width,1)+"px",this._textarea.style.height=Math.max(N.height,1)+"px",this._textarea.style.lineHeight=N.height+"px"}_||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=C=h([m(2,g.IBufferService),m(3,g.IOptionsService),m(4,g.ICoreService),m(5,f.IRenderService)],C)},9806:(c,l)=>{function d(h,m,f){const g=f.getBoundingClientRect(),x=h.getComputedStyle(f),C=parseInt(x.getPropertyValue("padding-left")),_=parseInt(x.getPropertyValue("padding-top"));return[m.clientX-g.left-C,m.clientY-g.top-_]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=d,l.getCoords=function(h,m,f,g,x,C,_,b,w){if(!C)return;const j=d(h,m,f);return j?(j[0]=Math.ceil((j[0]+(w?_/2:0))/_),j[1]=Math.ceil(j[1]/b),j[0]=Math.min(Math.max(j[0],1),g+(w?1:0)),j[1]=Math.min(Math.max(j[1],1),x),j):void 0}},9504:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const h=d(2584);function m(b,w,j,S){const N=b-f(b,j),T=w-f(w,j),E=Math.abs(N-T)-(function(D,A,P){let M=0;const B=D-f(D,P),F=A-f(A,P);for(let U=0;U<Math.abs(B-F);U++){const G=g(D,A)==="A"?-1:1;P.buffer.lines.get(B+G*U)?.isWrapped&&M++}return M})(b,w,j);return _(E,C(g(b,w),S))}function f(b,w){let j=0,S=w.buffer.lines.get(b),N=S?.isWrapped;for(;N&&b>=0&&b<w.rows;)j++,S=w.buffer.lines.get(--b),N=S?.isWrapped;return j}function g(b,w){return b>w?"A":"B"}function x(b,w,j,S,N,T){let E=b,D=w,A="";for(;E!==j||D!==S;)E+=N?1:-1,N&&E>T.cols-1?(A+=T.buffer.translateBufferLineToString(D,!1,b,E),E=0,b=0,D++):!N&&E<0&&(A+=T.buffer.translateBufferLineToString(D,!1,0,b+1),E=T.cols-1,b=E,D--);return A+T.buffer.translateBufferLineToString(D,!1,b,E)}function C(b,w){const j=w?"O":"[";return h.C0.ESC+j+b}function _(b,w){b=Math.floor(b);let j="";for(let S=0;S<b;S++)j+=w;return j}l.moveToCellSequence=function(b,w,j,S){const N=j.buffer.x,T=j.buffer.y;if(!j.buffer.hasScrollback)return(function(A,P,M,B,F,U){return m(P,B,F,U).length===0?"":_(x(A,P,A,P-f(P,F),!1,F).length,C("D",U))})(N,T,0,w,j,S)+m(T,w,j,S)+(function(A,P,M,B,F,U){let G;G=m(P,B,F,U).length>0?B-f(B,F):P;const $=B,V=(function(Y,K,O,L,I,q){let z;return z=m(O,L,I,q).length>0?L-f(L,I):K,Y<O&&z<=L||Y>=O&&z<L?"C":"D"})(A,P,M,B,F,U);return _(x(A,G,M,$,V==="C",F).length,C(V,U))})(N,T,b,w,j,S);let E;if(T===w)return E=N>b?"D":"C",_(Math.abs(N-b),C(E,S));E=T>w?"D":"C";const D=Math.abs(T-w);return _((function(A,P){return P.cols-A})(T>w?b:N,j)+(D-1)*j.cols+1+((T>w?N:b)-1),C(E,S))}},1296:function(c,l,d){var h=this&&this.__decorate||function(U,G,$,V){var Y,K=arguments.length,O=K<3?G:V===null?V=Object.getOwnPropertyDescriptor(G,$):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(U,G,$,V);else for(var L=U.length-1;L>=0;L--)(Y=U[L])&&(O=(K<3?Y(O):K>3?Y(G,$,O):Y(G,$))||O);return K>3&&O&&Object.defineProperty(G,$,O),O},m=this&&this.__param||function(U,G){return function($,V){G($,V,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const f=d(3787),g=d(2550),x=d(2223),C=d(6171),_=d(6052),b=d(4725),w=d(8055),j=d(8460),S=d(844),N=d(2585),T="xterm-dom-renderer-owner-",E="xterm-rows",D="xterm-fg-",A="xterm-bg-",P="xterm-focus",M="xterm-selection";let B=1,F=l.DomRenderer=class extends S.Disposable{constructor(U,G,$,V,Y,K,O,L,I,q,z,ee,ie){super(),this._terminal=U,this._document=G,this._element=$,this._screenElement=V,this._viewportElement=Y,this._helperContainer=K,this._linkifier2=O,this._charSizeService=I,this._optionsService=q,this._bufferService=z,this._coreBrowserService=ee,this._themeService=ie,this._terminalClass=B++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new j.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((re=>this._injectCss(re)))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(T+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((re=>this._handleLinkHover(re)))),this.register(this._linkifier2.onHideLinkUnderline((re=>this._handleLinkLeave(re)))),this.register((0,S.toDisposable)((()=>{this._element.classList.remove(T+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const G=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=G,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let G=`${this._terminalSelector} .${E} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;G+=`${this._terminalSelector} .${E} .xterm-dim { color: ${w.color.multiplyOpacity(U.foreground,.5).css};}`,G+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const $=`blink_underline_${this._terminalClass}`,V=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;G+=`@keyframes ${$} { 50% {  border-bottom-style: hidden; }}`,G+=`@keyframes ${V} { 50% {  box-shadow: none; }}`,G+=`@keyframes ${Y} { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,G+=`${this._terminalSelector} .${E}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${E}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${E}.${P} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${U.cursor.css} !important; color: ${U.cursorAccent.css} !important;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,G+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[K,O]of U.ansi.entries())G+=`${this._terminalSelector} .${D}${K} { color: ${O.css}; }${this._terminalSelector} .${D}${K}.xterm-dim { color: ${w.color.multiplyOpacity(O,.5).css}; }${this._terminalSelector} .${A}${K} { background-color: ${O.css}; }`;G+=`${this._terminalSelector} .${D}${x.INVERTED_DEFAULT_COLOR} { color: ${w.color.opaque(U.background).css}; }${this._terminalSelector} .${D}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${w.color.multiplyOpacity(w.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${A}${x.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=G}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,G){for(let $=this._rowElements.length;$<=G;$++){const V=this._document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>G;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,G){this._refreshRowElements(U,G),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(P),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(P),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,G,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,G,$),this.renderRows(0,this._bufferService.rows-1),!U||!G)return;this._selectionRenderModel.update(this._terminal,U,G,$);const V=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,K=this._selectionRenderModel.viewportCappedStartRow,O=this._selectionRenderModel.viewportCappedEndRow;if(K>=this._bufferService.rows||O<0)return;const L=this._document.createDocumentFragment();if($){const I=U[0]>G[0];L.appendChild(this._createSelectionElement(K,I?G[0]:U[0],I?U[0]:G[0],O-K+1))}else{const I=V===K?U[0]:0,q=K===Y?G[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(K,I,q));const z=O-K-1;if(L.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,z)),K!==O){const ee=Y===O?G[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(O,0,ee))}}this._selectionContainer.appendChild(L)}_createSelectionElement(U,G,$,V=1){const Y=this._document.createElement("div"),K=G*this.dimensions.css.cell.width;let O=this.dimensions.css.cell.width*($-G);return K+O>this.dimensions.css.canvas.width&&(O=this.dimensions.css.canvas.width-K),Y.style.height=V*this.dimensions.css.cell.height+"px",Y.style.top=U*this.dimensions.css.cell.height+"px",Y.style.left=`${K}px`,Y.style.width=`${O}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,G){const $=this._bufferService.buffer,V=$.ybase+$.y,Y=Math.min($.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,O=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;for(let I=U;I<=G;I++){const q=I+$.ydisp,z=this._rowElements[I],ee=$.lines.get(q);if(!z||!ee)break;z.replaceChildren(...this._rowFactory.createRow(ee,q,q===V,O,L,Y,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${T}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,G,$,V,Y,K){$<0&&(U=0),V<0&&(G=0);const O=this._bufferService.rows-1;$=Math.max(Math.min($,O),0),V=Math.max(Math.min(V,O),0),Y=Math.min(Y,this._bufferService.cols);const L=this._bufferService.buffer,I=L.ybase+L.y,q=Math.min(L.x,Y-1),z=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,ie=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=$;re<=V;++re){const X=re+L.ydisp,W=this._rowElements[re],Q=L.lines.get(X);if(!W||!Q)break;W.replaceChildren(...this._rowFactory.createRow(Q,X,X===I,ee,ie,q,z,this.dimensions.css.cell.width,this._widthCache,K?re===$?U:0:-1,K?(re===V?G:Y)-1:-1))}}};l.DomRenderer=F=h([m(7,N.IInstantiationService),m(8,b.ICharSizeService),m(9,N.IOptionsService),m(10,N.IBufferService),m(11,b.ICoreBrowserService),m(12,b.IThemeService)],F)},3787:function(c,l,d){var h=this&&this.__decorate||function(E,D,A,P){var M,B=arguments.length,F=B<3?D:P===null?P=Object.getOwnPropertyDescriptor(D,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(E,D,A,P);else for(var U=E.length-1;U>=0;U--)(M=E[U])&&(F=(B<3?M(F):B>3?M(D,A,F):M(D,A))||F);return B>3&&F&&Object.defineProperty(D,A,F),F},m=this&&this.__param||function(E,D){return function(A,P){D(A,P,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const f=d(2223),g=d(643),x=d(511),C=d(2585),_=d(8055),b=d(4725),w=d(4269),j=d(6171),S=d(3734);let N=l.DomRendererRowFactory=class{constructor(E,D,A,P,M,B,F){this._document=E,this._characterJoinerService=D,this._optionsService=A,this._coreBrowserService=P,this._coreService=M,this._decorationService=B,this._themeService=F,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,D,A){this._selectionStart=E,this._selectionEnd=D,this._columnSelectMode=A}createRow(E,D,A,P,M,B,F,U,G,$,V){const Y=[],K=this._characterJoinerService.getJoinedCharacters(D),O=this._themeService.colors;let L,I=E.getNoBgTrimmedLength();A&&I<B+1&&(I=B+1);let q=0,z="",ee=0,ie=0,re=0,X=!1,W=0,Q=!1,se=0;const he=[],de=$!==-1&&V!==-1;for(let Ne=0;Ne<I;Ne++){E.loadCell(Ne,this._workCell);let Re=this._workCell.getWidth();if(Re===0)continue;let ce=!1,ge=Ne,ae=this._workCell;if(K.length>0&&Ne===K[0][0]){ce=!0;const Ue=K.shift();ae=new w.JoinedCellData(this._workCell,E.translateToString(!0,Ue[0],Ue[1]),Ue[1]-Ue[0]),ge=Ue[1]-1,Re=ae.getWidth()}const Ee=this._isCellInSelection(Ne,D),Be=A&&Ne===B,et=de&&Ne>=$&&Ne<=V;let De=!1;this._decorationService.forEachDecorationAtCell(Ne,D,void 0,(Ue=>{De=!0}));let Me=ae.getChars()||g.WHITESPACE_CELL_CHAR;if(Me===" "&&(ae.isUnderline()||ae.isOverline())&&(Me=""),se=Re*U-G.get(Me,ae.isBold(),ae.isItalic()),L){if(q&&(Ee&&Q||!Ee&&!Q&&ae.bg===ee)&&(Ee&&Q&&O.selectionForeground||ae.fg===ie)&&ae.extended.ext===re&&et===X&&se===W&&!Be&&!ce&&!De){ae.isInvisible()?z+=g.WHITESPACE_CELL_CHAR:z+=Me,q++;continue}q&&(L.textContent=z),L=this._document.createElement("span"),q=0,z=""}else L=this._document.createElement("span");if(ee=ae.bg,ie=ae.fg,re=ae.extended.ext,X=et,W=se,Q=Ee,ce&&B>=Ne&&B<=ge&&(B=Ne),!this._coreService.isCursorHidden&&Be&&this._coreService.isCursorInitialized){if(he.push("xterm-cursor"),this._coreBrowserService.isFocused)F&&he.push("xterm-cursor-blink"),he.push(P==="bar"?"xterm-cursor-bar":P==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":he.push("xterm-cursor-outline");break;case"block":he.push("xterm-cursor-block");break;case"bar":he.push("xterm-cursor-bar");break;case"underline":he.push("xterm-cursor-underline")}}if(ae.isBold()&&he.push("xterm-bold"),ae.isItalic()&&he.push("xterm-italic"),ae.isDim()&&he.push("xterm-dim"),z=ae.isInvisible()?g.WHITESPACE_CELL_CHAR:ae.getChars()||g.WHITESPACE_CELL_CHAR,ae.isUnderline()&&(he.push(`xterm-underline-${ae.extended.underlineStyle}`),z===" "&&(z=""),!ae.isUnderlineColorDefault()))if(ae.isUnderlineColorRGB())L.style.textDecorationColor=`rgb(${S.AttributeData.toColorRGB(ae.getUnderlineColor()).join(",")})`;else{let Ue=ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ae.isBold()&&Ue<8&&(Ue+=8),L.style.textDecorationColor=O.ansi[Ue].css}ae.isOverline()&&(he.push("xterm-overline"),z===" "&&(z="")),ae.isStrikethrough()&&he.push("xterm-strikethrough"),et&&(L.style.textDecoration="underline");let qe=ae.getFgColor(),st=ae.getFgColorMode(),_t=ae.getBgColor(),fe=ae.getBgColorMode();const Ae=!!ae.isInverse();if(Ae){const Ue=qe;qe=_t,_t=Ue;const Ct=st;st=fe,fe=Ct}let Le,We,ve,Fe=!1;switch(this._decorationService.forEachDecorationAtCell(Ne,D,void 0,(Ue=>{Ue.options.layer!=="top"&&Fe||(Ue.backgroundColorRGB&&(fe=50331648,_t=Ue.backgroundColorRGB.rgba>>8&16777215,Le=Ue.backgroundColorRGB),Ue.foregroundColorRGB&&(st=50331648,qe=Ue.foregroundColorRGB.rgba>>8&16777215,We=Ue.foregroundColorRGB),Fe=Ue.options.layer==="top")})),!Fe&&Ee&&(Le=this._coreBrowserService.isFocused?O.selectionBackgroundOpaque:O.selectionInactiveBackgroundOpaque,_t=Le.rgba>>8&16777215,fe=50331648,Fe=!0,O.selectionForeground&&(st=50331648,qe=O.selectionForeground.rgba>>8&16777215,We=O.selectionForeground)),Fe&&he.push("xterm-decoration-top"),fe){case 16777216:case 33554432:ve=O.ansi[_t],he.push(`xterm-bg-${_t}`);break;case 50331648:ve=_.channels.toColor(_t>>16,_t>>8&255,255&_t),this._addStyle(L,`background-color:#${T((_t>>>0).toString(16),"0",6)}`);break;default:Ae?(ve=O.foreground,he.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):ve=O.background}switch(Le||ae.isDim()&&(Le=_.color.multiplyOpacity(ve,.5)),st){case 16777216:case 33554432:ae.isBold()&&qe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(qe+=8),this._applyMinimumContrast(L,ve,O.ansi[qe],ae,Le,void 0)||he.push(`xterm-fg-${qe}`);break;case 50331648:const Ue=_.channels.toColor(qe>>16&255,qe>>8&255,255&qe);this._applyMinimumContrast(L,ve,Ue,ae,Le,We)||this._addStyle(L,`color:#${T(qe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(L,ve,O.foreground,ae,Le,We)||Ae&&he.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}he.length&&(L.className=he.join(" "),he.length=0),Be||ce||De?L.textContent=z:q++,se!==this.defaultSpacing&&(L.style.letterSpacing=`${se}px`),Y.push(L),Ne=ge}return L&&q&&(L.textContent=z),Y}_applyMinimumContrast(E,D,A,P,M,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,j.treatGlyphAsBackgroundColor)(P.getCode()))return!1;const F=this._getContrastCache(P);let U;if(M||B||(U=F.getColor(D.rgba,A.rgba)),U===void 0){const G=this._optionsService.rawOptions.minimumContrastRatio/(P.isDim()?2:1);U=_.color.ensureContrastRatio(M||D,B||A,G),F.setColor((M||D).rgba,(B||A).rgba,U??null)}return!!U&&(this._addStyle(E,`color:${U.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,D){E.setAttribute("style",`${E.getAttribute("style")||""}${D};`)}_isCellInSelection(E,D){const A=this._selectionStart,P=this._selectionEnd;return!(!A||!P)&&(this._columnSelectMode?A[0]<=P[0]?E>=A[0]&&D>=A[1]&&E<P[0]&&D<=P[1]:E<A[0]&&D>=A[1]&&E>=P[0]&&D<=P[1]:D>A[1]&&D<P[1]||A[1]===P[1]&&D===A[1]&&E>=A[0]&&E<P[0]||A[1]<P[1]&&D===P[1]&&E<P[0]||A[1]<P[1]&&D===A[1]&&E>=A[0])}};function T(E,D,A){for(;E.length<A;)E=D+E;return E}l.DomRendererRowFactory=N=h([m(1,b.ICharacterJoinerService),m(2,C.IOptionsService),m(3,b.ICoreBrowserService),m(4,C.ICoreService),m(5,C.IDecorationService),m(6,b.IThemeService)],N)},2550:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(d,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=d.createElement("span");m.classList.add("xterm-char-measure-element");const f=d.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold";const g=d.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const x=d.createElement("span");x.classList.add("xterm-char-measure-element"),x.style.fontWeight="bold",x.style.fontStyle="italic",this._measureElements=[m,f,g,x],this._container.appendChild(m),this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(x),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,h,m,f){d===this._font&&h===this._fontSize&&m===this._weight&&f===this._weightBold||(this._font=d,this._fontSize=h,this._weight=m,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(d,h,m){let f=0;if(!h&&!m&&d.length===1&&(f=d.charCodeAt(0))<256){if(this._flat[f]!==-9999)return this._flat[f];const C=this._measure(d,0);return C>0&&(this._flat[f]=C),C}let g=d;h&&(g+="B"),m&&(g+="I");let x=this._holey.get(g);if(x===void 0){let C=0;h&&(C|=1),m&&(C|=2),x=this._measure(d,C),x>0&&this._holey.set(g,x)}return x}_measure(d,h){const m=this._measureElements[h];return m.textContent=d.repeat(32),m.offsetWidth/32}}},2223:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const h=d(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(c,l)=>{function d(m){return 57508<=m&&m<=57558}function h(m){return m>=128512&&m<=128591||m>=127744&&m<=128511||m>=128640&&m<=128767||m>=9728&&m<=9983||m>=9984&&m<=10175||m>=65024&&m<=65039||m>=129280&&m<=129535||m>=127462&&m<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},l.isPowerlineGlyph=d,l.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},l.isEmoji=h,l.allowRescaling=function(m,f,g,x){return f===1&&g>Math.ceil(1.5*x)&&m!==void 0&&m>255&&!h(m)&&!d(m)&&!(function(C){return 57344<=C&&C<=63743})(m)},l.treatGlyphAsBackgroundColor=function(m){return d(m)||(function(f){return 9472<=f&&f<=9631})(m)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(m,f,g=0){return(m-(2*Math.round(f)-g))%(2*Math.round(f))}},6052:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class d{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(m,f,g,x=!1){if(this.selectionStart=f,this.selectionEnd=g,!f||!g||f[0]===g[0]&&f[1]===g[1])return void this.clear();const C=m.buffers.active.ydisp,_=f[1]-C,b=g[1]-C,w=Math.max(_,0),j=Math.min(b,m.rows-1);w>=m.rows||j<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=x,this.viewportStartRow=_,this.viewportEndRow=b,this.viewportCappedStartRow=w,this.viewportCappedEndRow=j,this.startCol=f[0],this.endCol=g[0])}isCellSelected(m,f,g){return!!this.hasSelection&&(g-=m.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?f>=this.startCol&&g>=this.viewportCappedStartRow&&f<this.endCol&&g<=this.viewportCappedEndRow:f<this.startCol&&g>=this.viewportCappedStartRow&&f>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&f>=this.startCol&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&f>=this.startCol)}}l.createSelectionRenderModel=function(){return new d}},456:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,h=this.selectionEnd;return!(!d||!h)&&(d[1]>h[1]||d[1]===h[1]&&d[0]>h[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(c,l,d){var h=this&&this.__decorate||function(j,S,N,T){var E,D=arguments.length,A=D<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,N):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(j,S,N,T);else for(var P=j.length-1;P>=0;P--)(E=j[P])&&(A=(D<3?E(A):D>3?E(S,N,A):E(S,N))||A);return D>3&&A&&Object.defineProperty(S,N,A),A},m=this&&this.__param||function(j,S){return function(N,T){S(N,T,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const f=d(2585),g=d(8460),x=d(844);let C=l.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(j,S,N){super(),this._optionsService=N,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new w(this._optionsService))}catch{this._measureStrategy=this.register(new b(j,S,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const j=this._measureStrategy.measure();j.width===this.width&&j.height===this.height||(this.width=j.width,this.height=j.height,this._onCharSizeChange.fire())}};l.CharSizeService=C=h([m(2,f.IOptionsService)],C);class _ extends x.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(S,N){S!==void 0&&S>0&&N!==void 0&&N>0&&(this._result.width=S,this._result.height=N)}}class b extends _{constructor(S,N,T){super(),this._document=S,this._parentElement=N,this._optionsService=T,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class w extends _{constructor(S){super(),this._optionsService=S,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const N=this._ctx.measureText("W");if(!("width"in N&&"fontBoundingBoxAscent"in N&&"fontBoundingBoxDescent"in N))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const S=this._ctx.measureText("W");return this._validateAndSet(S.width,S.fontBoundingBoxAscent+S.fontBoundingBoxDescent),this._result}}},4269:function(c,l,d){var h=this&&this.__decorate||function(w,j,S,N){var T,E=arguments.length,D=E<3?j:N===null?N=Object.getOwnPropertyDescriptor(j,S):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,j,S,N);else for(var A=w.length-1;A>=0;A--)(T=w[A])&&(D=(E<3?T(D):E>3?T(j,S,D):T(j,S))||D);return E>3&&D&&Object.defineProperty(j,S,D),D},m=this&&this.__param||function(w,j){return function(S,N){j(S,N,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const f=d(3734),g=d(643),x=d(511),C=d(2585);class _ extends f.AttributeData{constructor(j,S,N){super(),this.content=0,this.combinedData="",this.fg=j.fg,this.bg=j.bg,this.combinedData=S,this._width=N}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(j){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=_;let b=l.CharacterJoinerService=class _5{constructor(j){this._bufferService=j,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(j){const S={id:this._nextCharacterJoinerId++,handler:j};return this._characterJoiners.push(S),S.id}deregister(j){for(let S=0;S<this._characterJoiners.length;S++)if(this._characterJoiners[S].id===j)return this._characterJoiners.splice(S,1),!0;return!1}getJoinedCharacters(j){if(this._characterJoiners.length===0)return[];const S=this._bufferService.buffer.lines.get(j);if(!S||S.length===0)return[];const N=[],T=S.translateToString(!0);let E=0,D=0,A=0,P=S.getFg(0),M=S.getBg(0);for(let B=0;B<S.getTrimmedLength();B++)if(S.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==P||this._workCell.bg!==M){if(B-E>1){const F=this._getJoinedRanges(T,A,D,S,E);for(let U=0;U<F.length;U++)N.push(F[U])}E=B,A=D,P=this._workCell.fg,M=this._workCell.bg}D+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const B=this._getJoinedRanges(T,A,D,S,E);for(let F=0;F<B.length;F++)N.push(B[F])}return N}_getJoinedRanges(j,S,N,T,E){const D=j.substring(S,N);let A=[];try{A=this._characterJoiners[0].handler(D)}catch(P){console.error(P)}for(let P=1;P<this._characterJoiners.length;P++)try{const M=this._characterJoiners[P].handler(D);for(let B=0;B<M.length;B++)_5._mergeRanges(A,M[B])}catch(M){console.error(M)}return this._stringRangesToCellRanges(A,T,E),A}_stringRangesToCellRanges(j,S,N){let T=0,E=!1,D=0,A=j[T];if(A){for(let P=N;P<this._bufferService.cols;P++){const M=S.getWidth(P),B=S.getString(P).length||g.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!E&&A[0]<=D&&(A[0]=P,E=!0),A[1]<=D){if(A[1]=P,A=j[++T],!A)break;A[0]<=D?(A[0]=P,E=!0):E=!1}D+=B}}A&&(A[1]=this._bufferService.cols)}}static _mergeRanges(j,S){let N=!1;for(let T=0;T<j.length;T++){const E=j[T];if(N){if(S[1]<=E[0])return j[T-1][1]=S[1],j;if(S[1]<=E[1])return j[T-1][1]=Math.max(S[1],E[1]),j.splice(T,1),j;j.splice(T,1),T--}else{if(S[1]<=E[0])return j.splice(T,0,S),j;if(S[1]<=E[1])return E[0]=Math.min(S[0],E[0]),j;S[0]<E[1]&&(E[0]=Math.min(S[0],E[0]),N=!0)}}return N?j[j.length-1][1]=S[1]:j.push(S),j}};l.CharacterJoinerService=b=h([m(0,C.IBufferService)],b)},5114:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const h=d(844),m=d(8460),f=d(3656);class g extends h.Disposable{constructor(_,b,w){super(),this._textarea=_,this._window=b,this.mainDocument=w,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new x(this._window),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new m.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((j=>this._screenDprMonitor.setWindow(j)))),this.register((0,m.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}l.CoreBrowserService=g;class x extends h.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)((()=>this.clearListener())))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,f.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const h=d(844);class m extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const x=this.linkProviders.indexOf(g);x!==-1&&this.linkProviders.splice(x,1)}}}}l.LinkProviderService=m},8934:function(c,l,d){var h=this&&this.__decorate||function(C,_,b,w){var j,S=arguments.length,N=S<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,b):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(C,_,b,w);else for(var T=C.length-1;T>=0;T--)(j=C[T])&&(N=(S<3?j(N):S>3?j(_,b,N):j(_,b))||N);return S>3&&N&&Object.defineProperty(_,b,N),N},m=this&&this.__param||function(C,_){return function(b,w){_(b,w,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const f=d(4725),g=d(9806);let x=l.MouseService=class{constructor(C,_){this._renderService=C,this._charSizeService=_}getCoords(C,_,b,w,j){return(0,g.getCoords)(window,C,_,b,w,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,j)}getMouseReportCoords(C,_){const b=(0,g.getCoordsRelativeToElement)(window,C,_);if(this._charSizeService.hasValidSize)return b[0]=Math.min(Math.max(b[0],0),this._renderService.dimensions.css.canvas.width-1),b[1]=Math.min(Math.max(b[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(b[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(b[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(b[0]),y:Math.floor(b[1])}}};l.MouseService=x=h([m(0,f.IRenderService),m(1,f.ICharSizeService)],x)},3230:function(c,l,d){var h=this&&this.__decorate||function(j,S,N,T){var E,D=arguments.length,A=D<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,N):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(j,S,N,T);else for(var P=j.length-1;P>=0;P--)(E=j[P])&&(A=(D<3?E(A):D>3?E(S,N,A):E(S,N))||A);return D>3&&A&&Object.defineProperty(S,N,A),A},m=this&&this.__param||function(j,S){return function(N,T){S(N,T,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const f=d(6193),g=d(4725),x=d(8460),C=d(844),_=d(7226),b=d(2585);let w=l.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(j,S,N,T,E,D,A,P){super(),this._rowCount=j,this._charSizeService=T,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new x.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new x.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new x.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new f.RenderDebouncer(((M,B)=>this._renderRows(M,B)),A),this.register(this._renderDebouncer),this.register(A.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(D.onResize((()=>this._fullRefresh()))),this.register(D.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(N.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(E.onDecorationRegistered((()=>this._fullRefresh()))),this.register(E.onDecorationRemoved((()=>this._fullRefresh()))),this.register(N.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(D.cols,D.rows),this._fullRefresh()}))),this.register(N.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(D.buffer.y,D.buffer.y,!0)))),this.register(P.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(A.window,S),this.register(A.onWindowChange((M=>this._registerIntersectionObserver(M,S))))}_registerIntersectionObserver(j,S){if("IntersectionObserver"in j){const N=new j.IntersectionObserver((T=>this._handleIntersectionChange(T[T.length-1])),{threshold:0});N.observe(S),this._observerDisposable.value=(0,C.toDisposable)((()=>N.disconnect()))}}_handleIntersectionChange(j){this._isPaused=j.isIntersecting===void 0?j.intersectionRatio===0:!j.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(j,S,N=!1){this._isPaused?this._needsFullRefresh=!0:(N||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(j,S,this._rowCount))}_renderRows(j,S){this._renderer.value&&(j=Math.min(j,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(j,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:j,end:S}),this._onRender.fire({start:j,end:S}),this._isNextRenderRedrawOnly=!0)}resize(j,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(j){this._renderer.value=j,this._renderer.value&&(this._renderer.value.onRequestRedraw((S=>this.refreshRows(S.start,S.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(j){return this._renderDebouncer.addRefreshCallback(j)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(j,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(j,S))):this._renderer.value.handleResize(j,S),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(j,S,N){this._selectionState.start=j,this._selectionState.end=S,this._selectionState.columnSelectMode=N,this._renderer.value?.handleSelectionChanged(j,S,N)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};l.RenderService=w=h([m(2,b.IOptionsService),m(3,g.ICharSizeService),m(4,b.IDecorationService),m(5,b.IBufferService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],w)},9312:function(c,l,d){var h=this&&this.__decorate||function(A,P,M,B){var F,U=arguments.length,G=U<3?P:B===null?B=Object.getOwnPropertyDescriptor(P,M):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(A,P,M,B);else for(var $=A.length-1;$>=0;$--)(F=A[$])&&(G=(U<3?F(G):U>3?F(P,M,G):F(P,M))||G);return U>3&&G&&Object.defineProperty(P,M,G),G},m=this&&this.__param||function(A,P){return function(M,B){P(M,B,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const f=d(9806),g=d(9504),x=d(456),C=d(4725),_=d(8460),b=d(844),w=d(6114),j=d(4841),S=d(511),N=d(2585),T="",E=new RegExp(T,"g");let D=l.SelectionService=class extends b.Disposable{constructor(A,P,M,B,F,U,G,$,V){super(),this._element=A,this._screenElement=P,this._linkifier=M,this._bufferService=B,this._coreService=F,this._mouseService=U,this._optionsService=G,this._renderService=$,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new S.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((Y=>this._handleTrim(Y))),this.register(this._bufferService.buffers.onBufferActivate((Y=>this._handleBufferActivate(Y)))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,b.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const A=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!A||!P||A[0]===P[0]&&A[1]===P[1])}get selectionText(){const A=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;if(!A||!P)return"";const M=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(A[0]===P[0])return"";const F=A[0]<P[0]?A[0]:P[0],U=A[0]<P[0]?P[0]:A[0];for(let G=A[1];G<=P[1];G++){const $=M.translateBufferLineToString(G,!0,F,U);B.push($)}}else{const F=A[1]===P[1]?P[0]:void 0;B.push(M.translateBufferLineToString(A[1],!0,A[0],F));for(let U=A[1]+1;U<=P[1]-1;U++){const G=M.lines.get(U),$=M.translateBufferLineToString(U,!0);G?.isWrapped?B[B.length-1]+=$:B.push($)}if(A[1]!==P[1]){const U=M.lines.get(P[1]),G=M.translateBufferLineToString(P[1],!0,0,P[0]);U&&U.isWrapped?B[B.length-1]+=G:B.push(G)}}return B.map((F=>F.replace(E," "))).join(w.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(A){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),w.isLinux&&A&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(A){const P=this._getMouseBufferCoords(A),M=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(M&&B&&P)&&this._areCoordsInSelection(P,M,B)}isCellInSelection(A,P){const M=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!M||!B)&&this._areCoordsInSelection([A,P],M,B)}_areCoordsInSelection(A,P,M){return A[1]>P[1]&&A[1]<M[1]||P[1]===M[1]&&A[1]===P[1]&&A[0]>=P[0]&&A[0]<M[0]||P[1]<M[1]&&A[1]===M[1]&&A[0]<M[0]||P[1]<M[1]&&A[1]===P[1]&&A[0]>=P[0]}_selectWordAtCursor(A,P){const M=this._linkifier.currentLink?.link?.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,j.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(A);return!!B&&(this._selectWordAt(B,P),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(A,P){this._model.clearSelection(),A=Math.max(A,0),P=Math.min(P,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,A],this._model.selectionEnd=[this._bufferService.cols,P],this.refresh(),this._onSelectionChange.fire()}_handleTrim(A){this._model.handleTrim(A)&&this.refresh()}_getMouseBufferCoords(A){const P=this._mouseService.getCoords(A,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(P)return P[0]--,P[1]--,P[1]+=this._bufferService.buffer.ydisp,P}_getMouseEventScrollAmount(A){let P=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,A,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return P>=0&&P<=M?0:(P>M&&(P-=M),P=Math.min(Math.max(P,-50),50),P/=50,P/Math.abs(P)+Math.round(14*P))}shouldForceSelection(A){return w.isMac?A.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:A.shiftKey}handleMouseDown(A){if(this._mouseDownTimeStamp=A.timeStamp,(A.button!==2||!this.hasSelection)&&A.button===0){if(!this._enabled){if(!this.shouldForceSelection(A))return;A.stopPropagation()}A.preventDefault(),this._dragScrollAmount=0,this._enabled&&A.shiftKey?this._handleIncrementalClick(A):A.detail===1?this._handleSingleClick(A):A.detail===2?this._handleDoubleClick(A):A.detail===3&&this._handleTripleClick(A),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(A){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(A))}_handleSingleClick(A){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(A)?3:0,this._model.selectionStart=this._getMouseBufferCoords(A),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const P=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);P&&P.length!==this._model.selectionStart[0]&&P.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(A){this._selectWordAtCursor(A,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(A){const P=this._getMouseBufferCoords(A);P&&(this._activeSelectionMode=2,this._selectLineAt(P[1]))}shouldColumnSelect(A){return A.altKey&&!(w.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(A){if(A.stopImmediatePropagation(),!this._model.selectionStart)return;const P=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(A),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(A),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const B=M.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}P&&P[0]===this._model.selectionEnd[0]&&P[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const A=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(A.ydisp+this._bufferService.rows,A.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=A.ydisp),this.refresh()}}_handleMouseUp(A){const P=A.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&P<500&&A.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(A,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const B=(0,g.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const A=this._model.finalSelectionStart,P=this._model.finalSelectionEnd,M=!(!A||!P||A[0]===P[0]&&A[1]===P[1]);M?A&&P&&(this._oldSelectionStart&&this._oldSelectionEnd&&A[0]===this._oldSelectionStart[0]&&A[1]===this._oldSelectionStart[1]&&P[0]===this._oldSelectionEnd[0]&&P[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(A,P,M)):this._oldHasSelection&&this._fireOnSelectionChange(A,P,M)}_fireOnSelectionChange(A,P,M){this._oldSelectionStart=A,this._oldSelectionEnd=P,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(A){this.clearSelection(),this._trimListener.dispose(),this._trimListener=A.activeBuffer.lines.onTrim((P=>this._handleTrim(P)))}_convertViewportColToCharacterIndex(A,P){let M=P;for(let B=0;P>=B;B++){const F=A.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:F>1&&P!==B&&(M+=F-1)}return M}setSelection(A,P,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[A,P],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(A){this._isClickInSelection(A)||(this._selectWordAtCursor(A,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(A,P,M=!0,B=!0){if(A[0]>=this._bufferService.cols)return;const F=this._bufferService.buffer,U=F.lines.get(A[1]);if(!U)return;const G=F.translateBufferLineToString(A[1],!1);let $=this._convertViewportColToCharacterIndex(U,A[0]),V=$;const Y=A[0]-$;let K=0,O=0,L=0,I=0;if(G.charAt($)===" "){for(;$>0&&G.charAt($-1)===" ";)$--;for(;V<G.length&&G.charAt(V+1)===" ";)V++}else{let ee=A[0],ie=A[0];U.getWidth(ee)===0&&(K++,ee--),U.getWidth(ie)===2&&(O++,ie++);const re=U.getString(ie).length;for(re>1&&(I+=re-1,V+=re-1);ee>0&&$>0&&!this._isCharWordSeparator(U.loadCell(ee-1,this._workCell));){U.loadCell(ee-1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===0?(K++,ee--):X>1&&(L+=X-1,$-=X-1),$--,ee--}for(;ie<U.length&&V+1<G.length&&!this._isCharWordSeparator(U.loadCell(ie+1,this._workCell));){U.loadCell(ie+1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===2?(O++,ie++):X>1&&(I+=X-1,V+=X-1),V++,ie++}}V++;let q=$+Y-K+L,z=Math.min(this._bufferService.cols,V-$+K+O-L-I);if(P||G.slice($,V).trim()!==""){if(M&&q===0&&U.getCodePoint(0)!==32){const ee=F.lines.get(A[1]-1);if(ee&&U.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){const ie=this._getWordAt([this._bufferService.cols-1,A[1]-1],!1,!0,!1);if(ie){const re=this._bufferService.cols-ie.start;q-=re,z+=re}}}if(B&&q+z===this._bufferService.cols&&U.getCodePoint(this._bufferService.cols-1)!==32){const ee=F.lines.get(A[1]+1);if(ee?.isWrapped&&ee.getCodePoint(0)!==32){const ie=this._getWordAt([0,A[1]+1],!1,!1,!0);ie&&(z+=ie.length)}}return{start:q,length:z}}}_selectWordAt(A,P){const M=this._getWordAt(A,P);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,A[1]--;this._model.selectionStart=[M.start,A[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(A){const P=this._getWordAt(A,!0);if(P){let M=A[1];for(;P.start<0;)P.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;P.start+P.length>this._bufferService.cols;)P.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?P.start:P.start+P.length,M]}}_isCharWordSeparator(A){return A.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(A.getChars())>=0}_selectLineAt(A){const P=this._bufferService.buffer.getWrappedRangeForLine(A),M={start:{x:0,y:P.first},end:{x:this._bufferService.cols-1,y:P.last}};this._model.selectionStart=[0,P.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,j.getRangeLength)(M,this._bufferService.cols)}};l.SelectionService=D=h([m(3,N.IBufferService),m(4,N.ICoreService),m(5,C.IMouseService),m(6,N.IOptionsService),m(7,C.IRenderService),m(8,C.ICoreBrowserService)],D)},4725:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const h=d(8343);l.ICharSizeService=(0,h.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),l.IMouseService=(0,h.createDecorator)("MouseService"),l.IRenderService=(0,h.createDecorator)("RenderService"),l.ISelectionService=(0,h.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,h.createDecorator)("ThemeService"),l.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(c,l,d){var h=this&&this.__decorate||function(D,A,P,M){var B,F=arguments.length,U=F<3?A:M===null?M=Object.getOwnPropertyDescriptor(A,P):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(D,A,P,M);else for(var G=D.length-1;G>=0;G--)(B=D[G])&&(U=(F<3?B(U):F>3?B(A,P,U):B(A,P))||U);return F>3&&U&&Object.defineProperty(A,P,U),U},m=this&&this.__param||function(D,A){return function(P,M){A(P,M,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const f=d(7239),g=d(8055),x=d(8460),C=d(844),_=d(2585),b=g.css.toColor("#ffffff"),w=g.css.toColor("#000000"),j=g.css.toColor("#ffffff"),S=g.css.toColor("#000000"),N={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const D=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],A=[0,95,135,175,215,255];for(let P=0;P<216;P++){const M=A[P/36%6|0],B=A[P/6%6|0],F=A[P%6];D.push({css:g.channels.toCss(M,B,F),rgba:g.channels.toRgba(M,B,F)})}for(let P=0;P<24;P++){const M=8+10*P;D.push({css:g.channels.toCss(M,M,M),rgba:g.channels.toRgba(M,M,M)})}return D})());let T=l.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:b,background:w,cursor:j,cursorAccent:S,selectionForeground:void 0,selectionBackgroundTransparent:N,selectionBackgroundOpaque:g.color.blend(w,N),selectionInactiveBackgroundTransparent:N,selectionInactiveBackgroundOpaque:g.color.blend(w,N),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(D={}){const A=this._colors;if(A.foreground=E(D.foreground,b),A.background=E(D.background,w),A.cursor=E(D.cursor,j),A.cursorAccent=E(D.cursorAccent,S),A.selectionBackgroundTransparent=E(D.selectionBackground,N),A.selectionBackgroundOpaque=g.color.blend(A.background,A.selectionBackgroundTransparent),A.selectionInactiveBackgroundTransparent=E(D.selectionInactiveBackground,A.selectionBackgroundTransparent),A.selectionInactiveBackgroundOpaque=g.color.blend(A.background,A.selectionInactiveBackgroundTransparent),A.selectionForeground=D.selectionForeground?E(D.selectionForeground,g.NULL_COLOR):void 0,A.selectionForeground===g.NULL_COLOR&&(A.selectionForeground=void 0),g.color.isOpaque(A.selectionBackgroundTransparent)&&(A.selectionBackgroundTransparent=g.color.opacity(A.selectionBackgroundTransparent,.3)),g.color.isOpaque(A.selectionInactiveBackgroundTransparent)&&(A.selectionInactiveBackgroundTransparent=g.color.opacity(A.selectionInactiveBackgroundTransparent,.3)),A.ansi=l.DEFAULT_ANSI_COLORS.slice(),A.ansi[0]=E(D.black,l.DEFAULT_ANSI_COLORS[0]),A.ansi[1]=E(D.red,l.DEFAULT_ANSI_COLORS[1]),A.ansi[2]=E(D.green,l.DEFAULT_ANSI_COLORS[2]),A.ansi[3]=E(D.yellow,l.DEFAULT_ANSI_COLORS[3]),A.ansi[4]=E(D.blue,l.DEFAULT_ANSI_COLORS[4]),A.ansi[5]=E(D.magenta,l.DEFAULT_ANSI_COLORS[5]),A.ansi[6]=E(D.cyan,l.DEFAULT_ANSI_COLORS[6]),A.ansi[7]=E(D.white,l.DEFAULT_ANSI_COLORS[7]),A.ansi[8]=E(D.brightBlack,l.DEFAULT_ANSI_COLORS[8]),A.ansi[9]=E(D.brightRed,l.DEFAULT_ANSI_COLORS[9]),A.ansi[10]=E(D.brightGreen,l.DEFAULT_ANSI_COLORS[10]),A.ansi[11]=E(D.brightYellow,l.DEFAULT_ANSI_COLORS[11]),A.ansi[12]=E(D.brightBlue,l.DEFAULT_ANSI_COLORS[12]),A.ansi[13]=E(D.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),A.ansi[14]=E(D.brightCyan,l.DEFAULT_ANSI_COLORS[14]),A.ansi[15]=E(D.brightWhite,l.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){const P=Math.min(A.ansi.length-16,D.extendedAnsi.length);for(let M=0;M<P;M++)A.ansi[M+16]=E(D.extendedAnsi[M],l.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let A=0;A<this._restoreColors.ansi.length;++A)this._colors.ansi[A]=this._restoreColors.ansi[A]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(D,A){if(D!==void 0)try{return g.css.toColor(D)}catch{}return A}l.ThemeService=T=h([m(0,_.IOptionsService)],T)},6349:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const h=d(8460),m=d(844);class f extends m.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const C=new Array(x);for(let _=0;_<Math.min(x,this.length);_++)C[_]=this._array[this._getCyclicIndex(_)];this._array=C,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let C=this._length;C<x;C++)this._array[C]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,C){this._array[this._getCyclicIndex(x)]=C}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,C,..._){if(C){for(let b=x;b<this._length-C;b++)this._array[this._getCyclicIndex(b)]=this._array[this._getCyclicIndex(b+C)];this._length-=C,this.onDeleteEmitter.fire({index:x,amount:C})}for(let b=this._length-1;b>=x;b--)this._array[this._getCyclicIndex(b+_.length)]=this._array[this._getCyclicIndex(b)];for(let b=0;b<_.length;b++)this._array[this._getCyclicIndex(x+b)]=_[b];if(_.length&&this.onInsertEmitter.fire({index:x,amount:_.length}),this._length+_.length>this._maxLength){const b=this._length+_.length-this._maxLength;this._startIndex+=b,this._length=this._maxLength,this.onTrimEmitter.fire(b)}else this._length+=_.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,C,_){if(!(C<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let w=C-1;w>=0;w--)this.set(x+w+_,this.get(x+w));const b=x+C+_-this._length;if(b>0)for(this._length+=b;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let b=0;b<C;b++)this.set(x+b+_,this.get(x+b))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}l.CircularList=f},1439:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function d(h,m=5){if(typeof h!="object")return h;const f=Array.isArray(h)?[]:{};for(const g in h)f[g]=m<=1?h[g]:h[g]&&d(h[g],m-1);return f}},8055:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let d=0,h=0,m=0,f=0;var g,x,C,_,b;function w(S){const N=S.toString(16);return N.length<2?"0"+N:N}function j(S,N){return S<N?(N+.05)/(S+.05):(S+.05)/(N+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(S){S.toCss=function(N,T,E,D){return D!==void 0?`#${w(N)}${w(T)}${w(E)}${w(D)}`:`#${w(N)}${w(T)}${w(E)}`},S.toRgba=function(N,T,E,D=255){return(N<<24|T<<16|E<<8|D)>>>0},S.toColor=function(N,T,E,D){return{css:S.toCss(N,T,E,D),rgba:S.toRgba(N,T,E,D)}}})(g||(l.channels=g={})),(function(S){function N(T,E){return f=Math.round(255*E),[d,h,m]=b.toChannels(T.rgba),{css:g.toCss(d,h,m,f),rgba:g.toRgba(d,h,m,f)}}S.blend=function(T,E){if(f=(255&E.rgba)/255,f===1)return{css:E.css,rgba:E.rgba};const D=E.rgba>>24&255,A=E.rgba>>16&255,P=E.rgba>>8&255,M=T.rgba>>24&255,B=T.rgba>>16&255,F=T.rgba>>8&255;return d=M+Math.round((D-M)*f),h=B+Math.round((A-B)*f),m=F+Math.round((P-F)*f),{css:g.toCss(d,h,m),rgba:g.toRgba(d,h,m)}},S.isOpaque=function(T){return(255&T.rgba)==255},S.ensureContrastRatio=function(T,E,D){const A=b.ensureContrastRatio(T.rgba,E.rgba,D);if(A)return g.toColor(A>>24&255,A>>16&255,A>>8&255)},S.opaque=function(T){const E=(255|T.rgba)>>>0;return[d,h,m]=b.toChannels(E),{css:g.toCss(d,h,m),rgba:E}},S.opacity=N,S.multiplyOpacity=function(T,E){return f=255&T.rgba,N(T,f*E/255)},S.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}})(x||(l.color=x={})),(function(S){let N,T;try{const E=document.createElement("canvas");E.width=1,E.height=1;const D=E.getContext("2d",{willReadFrequently:!0});D&&(N=D,N.globalCompositeOperation="copy",T=N.createLinearGradient(0,0,1,1))}catch{}S.toColor=function(E){if(E.match(/#[\da-f]{3,8}/i))switch(E.length){case 4:return d=parseInt(E.slice(1,2).repeat(2),16),h=parseInt(E.slice(2,3).repeat(2),16),m=parseInt(E.slice(3,4).repeat(2),16),g.toColor(d,h,m);case 5:return d=parseInt(E.slice(1,2).repeat(2),16),h=parseInt(E.slice(2,3).repeat(2),16),m=parseInt(E.slice(3,4).repeat(2),16),f=parseInt(E.slice(4,5).repeat(2),16),g.toColor(d,h,m,f);case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}const D=E.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(D)return d=parseInt(D[1]),h=parseInt(D[2]),m=parseInt(D[3]),f=Math.round(255*(D[5]===void 0?1:parseFloat(D[5]))),g.toColor(d,h,m,f);if(!N||!T)throw new Error("css.toColor: Unsupported css format");if(N.fillStyle=T,N.fillStyle=E,typeof N.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(N.fillRect(0,0,1,1),[d,h,m,f]=N.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(d,h,m,f),css:E}}})(C||(l.css=C={})),(function(S){function N(T,E,D){const A=T/255,P=E/255,M=D/255;return .2126*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.7152*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}S.relativeLuminance=function(T){return N(T>>16&255,T>>8&255,255&T)},S.relativeLuminance2=N})(_||(l.rgb=_={})),(function(S){function N(E,D,A){const P=E>>24&255,M=E>>16&255,B=E>>8&255;let F=D>>24&255,U=D>>16&255,G=D>>8&255,$=j(_.relativeLuminance2(F,U,G),_.relativeLuminance2(P,M,B));for(;$<A&&(F>0||U>0||G>0);)F-=Math.max(0,Math.ceil(.1*F)),U-=Math.max(0,Math.ceil(.1*U)),G-=Math.max(0,Math.ceil(.1*G)),$=j(_.relativeLuminance2(F,U,G),_.relativeLuminance2(P,M,B));return(F<<24|U<<16|G<<8|255)>>>0}function T(E,D,A){const P=E>>24&255,M=E>>16&255,B=E>>8&255;let F=D>>24&255,U=D>>16&255,G=D>>8&255,$=j(_.relativeLuminance2(F,U,G),_.relativeLuminance2(P,M,B));for(;$<A&&(F<255||U<255||G<255);)F=Math.min(255,F+Math.ceil(.1*(255-F))),U=Math.min(255,U+Math.ceil(.1*(255-U))),G=Math.min(255,G+Math.ceil(.1*(255-G))),$=j(_.relativeLuminance2(F,U,G),_.relativeLuminance2(P,M,B));return(F<<24|U<<16|G<<8|255)>>>0}S.blend=function(E,D){if(f=(255&D)/255,f===1)return D;const A=D>>24&255,P=D>>16&255,M=D>>8&255,B=E>>24&255,F=E>>16&255,U=E>>8&255;return d=B+Math.round((A-B)*f),h=F+Math.round((P-F)*f),m=U+Math.round((M-U)*f),g.toRgba(d,h,m)},S.ensureContrastRatio=function(E,D,A){const P=_.relativeLuminance(E>>8),M=_.relativeLuminance(D>>8);if(j(P,M)<A){if(M<P){const U=N(E,D,A),G=j(P,_.relativeLuminance(U>>8));if(G<A){const $=T(E,D,A);return G>j(P,_.relativeLuminance($>>8))?U:$}return U}const B=T(E,D,A),F=j(P,_.relativeLuminance(B>>8));if(F<A){const U=N(E,D,A);return F>j(P,_.relativeLuminance(U>>8))?B:U}return B}},S.reduceLuminance=N,S.increaseLuminance=T,S.toChannels=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]}})(b||(l.rgba=b={})),l.toPaddedHex=w,l.contrastRatio=j},8969:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const h=d(844),m=d(2585),f=d(4348),g=d(7866),x=d(744),C=d(7302),_=d(6975),b=d(8460),w=d(1753),j=d(1480),S=d(7994),N=d(9282),T=d(5435),E=d(5981),D=d(2660);let A=!1;class P extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new b.EventEmitter),this._onScroll.event((B=>{this._onScrollApi?.fire(B.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const F in B)this.optionsService.options[F]=B[F]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new b.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new b.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new b.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new b.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new b.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new C.OptionsService(B)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(w.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(j.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(S.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new T.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,b.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,b.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,b.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,b.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new E.WriteBuffer(((F,U)=>this._inputHandler.parse(F,U)))),this.register((0,b.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,F){this._writeBuffer.write(B,F)}writeSync(B,F){this._logService.logLevel<=m.LogLevelEnum.WARN&&!A&&(this._logService.warn("writeSync is unreliable and will be removed soon."),A=!0),this._writeBuffer.writeSync(B,F)}input(B,F=!0){this.coreService.triggerDataEvent(B,F)}resize(B,F){isNaN(B)||isNaN(F)||(B=Math.max(B,x.MINIMUM_COLS),F=Math.max(F,x.MINIMUM_ROWS),this._bufferService.resize(B,F))}scroll(B,F=!1){this._bufferService.scroll(B,F)}scrollLines(B,F,U){this._bufferService.scrollLines(B,F,U)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const F=B-this._bufferService.buffer.ydisp;F!==0&&this.scrollLines(F)}registerEscHandler(B,F){return this._inputHandler.registerEscHandler(B,F)}registerDcsHandler(B,F){return this._inputHandler.registerDcsHandler(B,F)}registerCsiHandler(B,F){return this._inputHandler.registerCsiHandler(B,F)}registerOscHandler(B,F){return this._inputHandler.registerOscHandler(B,F)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const F=this.optionsService.rawOptions.windowsPty;F&&F.buildNumber!==void 0&&F.buildNumber!==void 0?B=F.backend==="conpty"&&F.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(N.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},(()=>((0,N.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)((()=>{for(const F of B)F.dispose()}))}}}l.CoreTerminal=P},8460:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===d)return void this._listeners.splice(h,1)}}})),this._event}fire(d,h){const m=[];for(let f=0;f<this._listeners.length;f++)m.push(this._listeners[f]);for(let f=0;f<m.length;f++)m[f].call(void 0,d,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(d,h){return d((m=>h.fire(m)))},l.runAndSubscribe=function(d,h){return h(void 0),d((m=>h(m)))}},5435:function(c,l,d){var h=this&&this.__decorate||function(K,O,L,I){var q,z=arguments.length,ee=z<3?O:I===null?I=Object.getOwnPropertyDescriptor(O,L):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(K,O,L,I);else for(var ie=K.length-1;ie>=0;ie--)(q=K[ie])&&(ee=(z<3?q(ee):z>3?q(O,L,ee):q(O,L))||ee);return z>3&&ee&&Object.defineProperty(O,L,ee),ee},m=this&&this.__param||function(K,O){return function(L,I){O(L,I,K)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const f=d(2584),g=d(7116),x=d(2015),C=d(844),_=d(482),b=d(8437),w=d(8460),j=d(643),S=d(511),N=d(3734),T=d(2585),E=d(1480),D=d(6242),A=d(6351),P=d(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function F(K,O){if(K>24)return O.setWinLines||!1;switch(K){case 1:return!!O.restoreWin;case 2:return!!O.minimizeWin;case 3:return!!O.setWinPosition;case 4:return!!O.setWinSizePixels;case 5:return!!O.raiseWin;case 6:return!!O.lowerWin;case 7:return!!O.refreshWin;case 8:return!!O.setWinSizeChars;case 9:return!!O.maximizeWin;case 10:return!!O.fullscreenWin;case 11:return!!O.getWinState;case 13:return!!O.getWinPosition;case 14:return!!O.getWinSizePixels;case 15:return!!O.getScreenSizePixels;case 16:return!!O.getCellSizePixels;case 18:return!!O.getWinSizeChars;case 19:return!!O.getScreenSizeChars;case 20:return!!O.getIconTitle;case 21:return!!O.getWinTitle;case 22:return!!O.pushTitle;case 23:return!!O.popTitle;case 24:return!!O.setWinLines}return!1}var U;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let G=0;class $ extends C.Disposable{getAttrData(){return this._curAttrData}constructor(O,L,I,q,z,ee,ie,re,X=new x.EscapeSequenceParser){super(),this._bufferService=O,this._charsetService=L,this._coreService=I,this._logService=q,this._optionsService=z,this._oscLinkService=ee,this._coreMouseService=ie,this._unicodeService=re,this._parser=X,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new S.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=b.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new w.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new w.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new w.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new w.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new w.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new w.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new w.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new w.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new w.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new w.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new w.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new w.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new w.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new V(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((W=>this._activeBuffer=W.activeBuffer))),this._parser.setCsiHandlerFallback(((W,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(W),params:Q.toArray()})})),this._parser.setEscHandlerFallback((W=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(W)})})),this._parser.setExecuteHandlerFallback((W=>{this._logService.debug("Unknown EXECUTE code: ",{code:W})})),this._parser.setOscHandlerFallback(((W,Q,se)=>{this._logService.debug("Unknown OSC code: ",{identifier:W,action:Q,data:se})})),this._parser.setDcsHandlerFallback(((W,Q,se)=>{Q==="HOOK"&&(se=se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(W),action:Q,payload:se})})),this._parser.setPrintHandler(((W,Q,se)=>this.print(W,Q,se))),this._parser.registerCsiHandler({final:"@"},(W=>this.insertChars(W))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(W=>this.scrollLeft(W))),this._parser.registerCsiHandler({final:"A"},(W=>this.cursorUp(W))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(W=>this.scrollRight(W))),this._parser.registerCsiHandler({final:"B"},(W=>this.cursorDown(W))),this._parser.registerCsiHandler({final:"C"},(W=>this.cursorForward(W))),this._parser.registerCsiHandler({final:"D"},(W=>this.cursorBackward(W))),this._parser.registerCsiHandler({final:"E"},(W=>this.cursorNextLine(W))),this._parser.registerCsiHandler({final:"F"},(W=>this.cursorPrecedingLine(W))),this._parser.registerCsiHandler({final:"G"},(W=>this.cursorCharAbsolute(W))),this._parser.registerCsiHandler({final:"H"},(W=>this.cursorPosition(W))),this._parser.registerCsiHandler({final:"I"},(W=>this.cursorForwardTab(W))),this._parser.registerCsiHandler({final:"J"},(W=>this.eraseInDisplay(W,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(W=>this.eraseInDisplay(W,!0))),this._parser.registerCsiHandler({final:"K"},(W=>this.eraseInLine(W,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(W=>this.eraseInLine(W,!0))),this._parser.registerCsiHandler({final:"L"},(W=>this.insertLines(W))),this._parser.registerCsiHandler({final:"M"},(W=>this.deleteLines(W))),this._parser.registerCsiHandler({final:"P"},(W=>this.deleteChars(W))),this._parser.registerCsiHandler({final:"S"},(W=>this.scrollUp(W))),this._parser.registerCsiHandler({final:"T"},(W=>this.scrollDown(W))),this._parser.registerCsiHandler({final:"X"},(W=>this.eraseChars(W))),this._parser.registerCsiHandler({final:"Z"},(W=>this.cursorBackwardTab(W))),this._parser.registerCsiHandler({final:"`"},(W=>this.charPosAbsolute(W))),this._parser.registerCsiHandler({final:"a"},(W=>this.hPositionRelative(W))),this._parser.registerCsiHandler({final:"b"},(W=>this.repeatPrecedingCharacter(W))),this._parser.registerCsiHandler({final:"c"},(W=>this.sendDeviceAttributesPrimary(W))),this._parser.registerCsiHandler({prefix:">",final:"c"},(W=>this.sendDeviceAttributesSecondary(W))),this._parser.registerCsiHandler({final:"d"},(W=>this.linePosAbsolute(W))),this._parser.registerCsiHandler({final:"e"},(W=>this.vPositionRelative(W))),this._parser.registerCsiHandler({final:"f"},(W=>this.hVPosition(W))),this._parser.registerCsiHandler({final:"g"},(W=>this.tabClear(W))),this._parser.registerCsiHandler({final:"h"},(W=>this.setMode(W))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(W=>this.setModePrivate(W))),this._parser.registerCsiHandler({final:"l"},(W=>this.resetMode(W))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(W=>this.resetModePrivate(W))),this._parser.registerCsiHandler({final:"m"},(W=>this.charAttributes(W))),this._parser.registerCsiHandler({final:"n"},(W=>this.deviceStatus(W))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(W=>this.deviceStatusPrivate(W))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(W=>this.softReset(W))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(W=>this.setCursorStyle(W))),this._parser.registerCsiHandler({final:"r"},(W=>this.setScrollRegion(W))),this._parser.registerCsiHandler({final:"s"},(W=>this.saveCursor(W))),this._parser.registerCsiHandler({final:"t"},(W=>this.windowOptions(W))),this._parser.registerCsiHandler({final:"u"},(W=>this.restoreCursor(W))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(W=>this.insertColumns(W))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(W=>this.deleteColumns(W))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(W=>this.selectProtected(W))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(W=>this.requestMode(W,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(W=>this.requestMode(W,!1))),this._parser.setExecuteHandler(f.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(f.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(f.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(f.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(f.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(f.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(f.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(f.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(f.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new D.OscHandler((W=>(this.setTitle(W),this.setIconName(W),!0)))),this._parser.registerOscHandler(1,new D.OscHandler((W=>this.setIconName(W)))),this._parser.registerOscHandler(2,new D.OscHandler((W=>this.setTitle(W)))),this._parser.registerOscHandler(4,new D.OscHandler((W=>this.setOrReportIndexedColor(W)))),this._parser.registerOscHandler(8,new D.OscHandler((W=>this.setHyperlink(W)))),this._parser.registerOscHandler(10,new D.OscHandler((W=>this.setOrReportFgColor(W)))),this._parser.registerOscHandler(11,new D.OscHandler((W=>this.setOrReportBgColor(W)))),this._parser.registerOscHandler(12,new D.OscHandler((W=>this.setOrReportCursorColor(W)))),this._parser.registerOscHandler(104,new D.OscHandler((W=>this.restoreIndexedColor(W)))),this._parser.registerOscHandler(110,new D.OscHandler((W=>this.restoreFgColor(W)))),this._parser.registerOscHandler(111,new D.OscHandler((W=>this.restoreBgColor(W)))),this._parser.registerOscHandler(112,new D.OscHandler((W=>this.restoreCursorColor(W)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const W in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:W},(()=>this.selectCharset("("+W))),this._parser.registerEscHandler({intermediates:")",final:W},(()=>this.selectCharset(")"+W))),this._parser.registerEscHandler({intermediates:"*",final:W},(()=>this.selectCharset("*"+W))),this._parser.registerEscHandler({intermediates:"+",final:W},(()=>this.selectCharset("+"+W))),this._parser.registerEscHandler({intermediates:"-",final:W},(()=>this.selectCharset("-"+W))),this._parser.registerEscHandler({intermediates:".",final:W},(()=>this.selectCharset("."+W))),this._parser.registerEscHandler({intermediates:"/",final:W},(()=>this.selectCharset("/"+W)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((W=>(this._logService.error("Parsing error: ",W),W))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new A.DcsHandler(((W,Q)=>this.requestStatusString(W,Q))))}_preserveStack(O,L,I,q){this._parseStack.paused=!0,this._parseStack.cursorStartX=O,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=I,this._parseStack.position=q}_logSlowResolvingAsync(O){this._logService.logLevel<=T.LogLevelEnum.WARN&&Promise.race([O,new Promise(((L,I)=>setTimeout((()=>I("#SLOW_TIMEOUT")),5e3)))]).catch((L=>{if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(O,L){let I,q=this._activeBuffer.x,z=this._activeBuffer.y,ee=0;const ie=this._parseStack.paused;if(ie){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(I),I;q=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,O.length>B&&(ee=this._parseStack.position+B)}if(this._logService.logLevel<=T.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof O=="string"?` "${O}"`:` "${Array.prototype.map.call(O,(W=>String.fromCharCode(W))).join("")}"`),typeof O=="string"?O.split("").map((W=>W.charCodeAt(0))):O),this._parseBuffer.length<O.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(O.length,B))),ie||this._dirtyRowTracker.clearRange(),O.length>B)for(let W=ee;W<O.length;W+=B){const Q=W+B<O.length?W+B:O.length,se=typeof O=="string"?this._stringDecoder.decode(O.substring(W,Q),this._parseBuffer):this._utf8Decoder.decode(O.subarray(W,Q),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,se))return this._preserveStack(q,z,se,W),this._logSlowResolvingAsync(I),I}else if(!ie){const W=typeof O=="string"?this._stringDecoder.decode(O,this._parseBuffer):this._utf8Decoder.decode(O,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,W))return this._preserveStack(q,z,W,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===q&&this._activeBuffer.y===z||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),X=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);X<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(X,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(O,L,I){let q,z;const ee=this._charsetService.charset,ie=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,W=this._coreService.modes.insertMode,Q=this._curAttrData;let se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-L>0&&se.getWidth(this._activeBuffer.x-1)===2&&se.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Q);let he=this._parser.precedingJoinState;for(let de=L;de<I;++de){if(q=O[de],q<127&&ee){const ge=ee[String.fromCharCode(q)];ge&&(q=ge.charCodeAt(0))}const Ne=this._unicodeService.charProperties(q,he);z=E.UnicodeService.extractWidth(Ne);const Re=E.UnicodeService.extractShouldJoin(Ne),ce=Re?E.UnicodeService.extractWidth(he):0;if(he=Ne,ie&&this._onA11yChar.fire((0,_.stringFromCodePoint)(q)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-ce>re){if(X){const ge=se;let ae=this._activeBuffer.x-ce;for(this._activeBuffer.x=ce,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ce>0&&se instanceof b.BufferLine&&se.copyCellsFrom(ge,ae,0,ce,!1);ae<re;)ge.setCellFromCodepoint(ae++,0,1,Q)}else if(this._activeBuffer.x=re-1,z===2)continue}if(Re&&this._activeBuffer.x){const ge=se.getWidth(this._activeBuffer.x-1)?1:2;se.addCodepointToCell(this._activeBuffer.x-ge,q,z);for(let ae=z-ce;--ae>=0;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}else if(W&&(se.insertCells(this._activeBuffer.x,z-ce,this._activeBuffer.getNullCell(Q)),se.getWidth(re-1)===2&&se.setCellFromCodepoint(re-1,j.NULL_CELL_CODE,j.NULL_CELL_WIDTH,Q)),se.setCellFromCodepoint(this._activeBuffer.x++,q,z,Q),z>0)for(;--z;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}this._parser.precedingJoinState=he,this._activeBuffer.x<re&&I-L>0&&se.getWidth(this._activeBuffer.x)===0&&!se.hasContent(this._activeBuffer.x)&&se.setCellFromCodepoint(this._activeBuffer.x,0,1,Q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(O,L){return O.final!=="t"||O.prefix||O.intermediates?this._parser.registerCsiHandler(O,L):this._parser.registerCsiHandler(O,(I=>!F(I.params[0],this._optionsService.rawOptions.windowOptions)||L(I)))}registerDcsHandler(O,L){return this._parser.registerDcsHandler(O,new A.DcsHandler(L))}registerEscHandler(O,L){return this._parser.registerEscHandler(O,L)}registerOscHandler(O,L){return this._parser.registerOscHandler(O,new D.OscHandler(L))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const O=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-O),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(O=this._bufferService.cols-1){this._activeBuffer.x=Math.min(O,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(O,L){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=O,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=O,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(O,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+O,this._activeBuffer.y+L)}cursorUp(O){const L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,O.params[0]||1)):this._moveCursor(0,-(O.params[0]||1)),!0}cursorDown(O){const L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,O.params[0]||1)):this._moveCursor(0,O.params[0]||1),!0}cursorForward(O){return this._moveCursor(O.params[0]||1,0),!0}cursorBackward(O){return this._moveCursor(-(O.params[0]||1),0),!0}cursorNextLine(O){return this.cursorDown(O),this._activeBuffer.x=0,!0}cursorPrecedingLine(O){return this.cursorUp(O),this._activeBuffer.x=0,!0}cursorCharAbsolute(O){return this._setCursor((O.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(O){return this._setCursor(O.length>=2?(O.params[1]||1)-1:0,(O.params[0]||1)-1),!0}charPosAbsolute(O){return this._setCursor((O.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(O){return this._moveCursor(O.params[0]||1,0),!0}linePosAbsolute(O){return this._setCursor(this._activeBuffer.x,(O.params[0]||1)-1),!0}vPositionRelative(O){return this._moveCursor(0,O.params[0]||1),!0}hVPosition(O){return this.cursorPosition(O),!0}tabClear(O){const L=O.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(O){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=O.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(O){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=O.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(O){const L=O.params[0];return L===1&&(this._curAttrData.bg|=536870912),L!==2&&L!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(O,L,I,q=!1,z=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);ee.replaceCells(L,I,this._activeBuffer.getNullCell(this._eraseAttrData()),z),q&&(ee.isWrapped=!1)}_resetBufferLine(O,L=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I&&(I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),L),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+O),I.isWrapped=!1)}eraseInDisplay(O,L=!1){let I;switch(this._restrictCursor(this._bufferService.cols),O.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);I<this._bufferService.rows;I++)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,L),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(0);break;case 3:const q=this._activeBuffer.lines.length-this._bufferService.rows;q>0&&(this._activeBuffer.lines.trimStart(q),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-q,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-q,0),this._onScroll.fire(0))}return!0}eraseInLine(O,L=!1){switch(this._restrictCursor(this._bufferService.cols),O.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,L);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,L)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(O){this._restrictCursor();let L=O.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-q+1;for(;L--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(O){this._restrictCursor();let L=O.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let q;for(q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-q;L--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(O){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,O.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(O){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,O.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(O){let L=O.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(O){let L=O.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(b.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=O.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);q.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=O.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);q.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=O.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);q.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=O.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);q.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(O){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(O.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(O){const L=this._parser.precedingJoinState;if(!L)return!0;const I=O.params[0]||1,q=E.UnicodeService.extractWidth(L),z=this._activeBuffer.x-q,ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),ie=new Uint32Array(ee.length*I);let re=0;for(let W=0;W<ee.length;){const Q=ee.codePointAt(W)||0;ie[re++]=Q,W+=Q>65535?2:1}let X=re;for(let W=1;W<I;++W)ie.copyWithin(X,0,re),X+=re;return this.print(ie,0,X),!0}sendDeviceAttributesPrimary(O){return O.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(O){return O.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(O.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(O){return(this._optionsService.rawOptions.termName+"").indexOf(O)===0}setMode(O){for(let L=0;L<O.length;L++)switch(O.params[L]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(O){for(let L=0;L<O.length;L++)switch(O.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(O){for(let L=0;L<O.length;L++)switch(O.params[L]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(O){for(let L=0;L<O.length;L++)switch(O.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),O.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(O,L){const I=this._coreService.decPrivateModes,{activeProtocol:q,activeEncoding:z}=this._coreMouseService,ee=this._coreService,{buffers:ie,cols:re}=this._bufferService,{active:X,alt:W}=ie,Q=this._optionsService.rawOptions,se=Re=>Re?1:2,he=O.params[0];return de=he,Ne=L?he===2?4:he===4?se(ee.modes.insertMode):he===12?3:he===20?se(Q.convertEol):0:he===1?se(I.applicationCursorKeys):he===3?Q.windowOptions.setWinLines?re===80?2:re===132?1:0:0:he===6?se(I.origin):he===7?se(I.wraparound):he===8?3:he===9?se(q==="X10"):he===12?se(Q.cursorBlink):he===25?se(!ee.isCursorHidden):he===45?se(I.reverseWraparound):he===66?se(I.applicationKeypad):he===67?4:he===1e3?se(q==="VT200"):he===1002?se(q==="DRAG"):he===1003?se(q==="ANY"):he===1004?se(I.sendFocus):he===1005?4:he===1006?se(z==="SGR"):he===1015?4:he===1016?se(z==="SGR_PIXELS"):he===1048?1:he===47||he===1047||he===1049?se(X===W):he===2004?se(I.bracketedPasteMode):0,ee.triggerDataEvent(`${f.C0.ESC}[${L?"":"?"}${de};${Ne}$y`),!0;var de,Ne}_updateAttrColor(O,L,I,q,z){return L===2?(O|=50331648,O&=-16777216,O|=N.AttributeData.fromColorRGB([I,q,z])):L===5&&(O&=-50331904,O|=33554432|255&I),O}_extractColor(O,L,I){const q=[0,0,-1,0,0,0];let z=0,ee=0;do{if(q[ee+z]=O.params[L+ee],O.hasSubParams(L+ee)){const ie=O.getSubParams(L+ee);let re=0;do q[1]===5&&(z=1),q[ee+re+1+z]=ie[re];while(++re<ie.length&&re+ee+1+z<q.length);break}if(q[1]===5&&ee+z>=2||q[1]===2&&ee+z>=5)break;q[1]&&(z=1)}while(++ee+L<O.length&&ee+z<q.length);for(let ie=2;ie<q.length;++ie)q[ie]===-1&&(q[ie]=0);switch(q[0]){case 38:I.fg=this._updateAttrColor(I.fg,q[1],q[3],q[4],q[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,q[1],q[3],q[4],q[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,q[1],q[3],q[4],q[5])}return ee}_processUnderline(O,L){L.extended=L.extended.clone(),(!~O||O>5)&&(O=1),L.extended.underlineStyle=O,L.fg|=268435456,O===0&&(L.fg&=-268435457),L.updateExtended()}_processSGR0(O){O.fg=b.DEFAULT_ATTR_DATA.fg,O.bg=b.DEFAULT_ATTR_DATA.bg,O.extended=O.extended.clone(),O.extended.underlineStyle=0,O.extended.underlineColor&=-67108864,O.updateExtended()}charAttributes(O){if(O.length===1&&O.params[0]===0)return this._processSGR0(this._curAttrData),!0;const L=O.length;let I;const q=this._curAttrData;for(let z=0;z<L;z++)I=O.params[z],I>=30&&I<=37?(q.fg&=-50331904,q.fg|=16777216|I-30):I>=40&&I<=47?(q.bg&=-50331904,q.bg|=16777216|I-40):I>=90&&I<=97?(q.fg&=-50331904,q.fg|=16777224|I-90):I>=100&&I<=107?(q.bg&=-50331904,q.bg|=16777224|I-100):I===0?this._processSGR0(q):I===1?q.fg|=134217728:I===3?q.bg|=67108864:I===4?(q.fg|=268435456,this._processUnderline(O.hasSubParams(z)?O.getSubParams(z)[0]:1,q)):I===5?q.fg|=536870912:I===7?q.fg|=67108864:I===8?q.fg|=1073741824:I===9?q.fg|=2147483648:I===2?q.bg|=134217728:I===21?this._processUnderline(2,q):I===22?(q.fg&=-134217729,q.bg&=-134217729):I===23?q.bg&=-67108865:I===24?(q.fg&=-268435457,this._processUnderline(0,q)):I===25?q.fg&=-536870913:I===27?q.fg&=-67108865:I===28?q.fg&=-1073741825:I===29?q.fg&=2147483647:I===39?(q.fg&=-67108864,q.fg|=16777215&b.DEFAULT_ATTR_DATA.fg):I===49?(q.bg&=-67108864,q.bg|=16777215&b.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?z+=this._extractColor(O,z,q):I===53?q.bg|=1073741824:I===55?q.bg&=-1073741825:I===59?(q.extended=q.extended.clone(),q.extended.underlineColor=-1,q.updateExtended()):I===100?(q.fg&=-67108864,q.fg|=16777215&b.DEFAULT_ATTR_DATA.fg,q.bg&=-67108864,q.bg|=16777215&b.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(O){switch(O.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const L=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${L};${I}R`)}return!0}deviceStatusPrivate(O){if(O.params[0]===6){const L=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${L};${I}R`)}return!0}softReset(O){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(O){const L=O.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=L%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(O){const L=O.params[0]||1;let I;return(O.length<2||(I=O.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>L&&(this._activeBuffer.scrollTop=L-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(O){if(!F(O.params[0],this._optionsService.rawOptions.windowOptions))return!0;const L=O.length>1?O.params[1]:0;switch(O.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(O){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(O){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(O){return this._windowTitle=O,this._onTitleChange.fire(O),!0}setIconName(O){return this._iconName=O,!0}setOrReportIndexedColor(O){const L=[],I=O.split(";");for(;I.length>1;){const q=I.shift(),z=I.shift();if(/^\d+$/.exec(q)){const ee=parseInt(q);if(Y(ee))if(z==="?")L.push({type:0,index:ee});else{const ie=(0,P.parseColor)(z);ie&&L.push({type:1,index:ee,color:ie})}}}return L.length&&this._onColor.fire(L),!0}setHyperlink(O){const L=O.split(";");return!(L.length<2)&&(L[1]?this._createHyperlink(L[0],L[1]):!L[0]&&this._finishHyperlink())}_createHyperlink(O,L){this._getCurrentLinkId()&&this._finishHyperlink();const I=O.split(":");let q;const z=I.findIndex((ee=>ee.startsWith("id=")));return z!==-1&&(q=I[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:q,uri:L}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(O,L){const I=O.split(";");for(let q=0;q<I.length&&!(L>=this._specialColors.length);++q,++L)if(I[q]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{const z=(0,P.parseColor)(I[q]);z&&this._onColor.fire([{type:1,index:this._specialColors[L],color:z}])}return!0}setOrReportFgColor(O){return this._setOrReportSpecialColor(O,0)}setOrReportBgColor(O){return this._setOrReportSpecialColor(O,1)}setOrReportCursorColor(O){return this._setOrReportSpecialColor(O,2)}restoreIndexedColor(O){if(!O)return this._onColor.fire([{type:2}]),!0;const L=[],I=O.split(";");for(let q=0;q<I.length;++q)if(/^\d+$/.exec(I[q])){const z=parseInt(I[q]);Y(z)&&L.push({type:2,index:z})}return L.length&&this._onColor.fire(L),!0}restoreFgColor(O){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(O){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(O){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(O){return O.length!==2?(this.selectDefaultCharset(),!0):(O[0]==="/"||this._charsetService.setgCharset(M[O[0]],g.CHARSETS[O[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const O=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,O,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=b.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(O){return this._charsetService.setgLevel(O),!0}screenAlignmentPattern(){const O=new S.CellData;O.content=4194373,O.fg=this._curAttrData.fg,O.bg=this._curAttrData.bg,this._setCursor(0,0);for(let L=0;L<this._bufferService.rows;++L){const I=this._activeBuffer.ybase+this._activeBuffer.y+L,q=this._activeBuffer.lines.get(I);q&&(q.fill(O),q.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(O,L){const I=this._bufferService.buffer,q=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${z}${f.C0.ESC}\\`),!0))(O==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:O==='"p'?'P1$r61;1"p':O==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:O==="m"?"P1$r0m":O===" q"?`P1$r${{block:2,underline:4,bar:6}[q.cursorStyle]-(q.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(O,L){this._dirtyRowTracker.markRangeDirty(O,L)}}l.InputHandler=$;let V=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,O){K>O&&(G=K,K=O,O=G),K<this.start&&(this.start=K),O>this.end&&(this.end=O)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(K){return 0<=K&&K<256}V=h([m(0,T.IBufferService)],V)},844:(c,l)=>{function d(h){for(const m of h)m.dispose();h.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const m=this._disposables.indexOf(h);m!==-1&&this._disposables.splice(m,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){this._isDisposed||h===this._value||(this._value?.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},l.toDisposable=function(h){return{dispose:h}},l.disposeArray=d,l.getDisposeArrayDisposable=function(h){return{dispose:()=>d(h)}}},1505:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(m,f,g){this._data[m]||(this._data[m]={}),this._data[m][f]=g}get(m,f){return this._data[m]?this._data[m][f]:void 0}clear(){this._data={}}}l.TwoKeyMap=d,l.FourKeyMap=class{constructor(){this._data=new d}set(h,m,f,g,x){this._data.get(h,m)||this._data.set(h,m,new d),this._data.get(h,m).set(f,g,x)}get(h,m,f,g){return this._data.get(h,m)?.get(f,g)}clear(){this._data.clear()}}},6114:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const d=l.isNode?"node":navigator.userAgent,h=l.isNode?"node":navigator.platform;l.isFirefox=d.includes("Firefox"),l.isLegacyEdge=d.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(d),l.getSafariVersion=function(){if(!l.isSafari)return 0;const m=d.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),l.isIpad=h==="iPad",l.isIphone=h==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),l.isLinux=h.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(d)},6106:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let d=0;l.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(d=this._search(this._getKey(h)),this._array.splice(d,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const m=this._getKey(h);if(m===void 0||(d=this._search(m),d===-1)||this._getKey(this._array[d])!==m)return!1;do if(this._array[d]===h)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===m);return!1}*getKeyIterator(h){if(this._array.length!==0&&(d=this._search(h),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===h))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===h)}forEachByKey(h,m){if(this._array.length!==0&&(d=this._search(h),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===h))do m(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===h)}values(){return[...this._array].values()}_search(h){let m=0,f=this._array.length-1;for(;f>=m;){let g=m+f>>1;const x=this._getKey(this._array[g]);if(x>h)f=g-1;else{if(!(x<h)){for(;g>0&&this._getKey(this._array[g-1])===h;)g--;return g}m=g+1}}return m}}},7226:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const h=d(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let C=0,_=0,b=x.timeRemaining(),w=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),_=Math.max(C,_),w=x.timeRemaining(),1.5*_>w)return b-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(b-C))}ms`),void this._start();b=w}this.clear()}}class f extends m{_requestCallback(x){return setTimeout((()=>x(this._createDeadline(16))))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const C=Date.now()+x;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}l.PriorityTaskQueue=f,l.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:f,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const h=d(643);l.updateWindowsModeWrappedState=function(m){const f=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),g=f?.get(m.cols-1),x=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);x&&g&&(x.isWrapped=g[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&g[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new d;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=d;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}get underlineVariantOffset(){const f=(3758096384&this._ext)>>29;return f<0?4294967288^f:f}set underlineVariantOffset(f){this._ext&=536870911,this._ext|=f<<29&3758096384}constructor(f=0,g=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=g}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=h},9092:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const h=d(6349),m=d(7226),f=d(3734),g=d(8437),x=d(4634),C=d(511),_=d(643),b=d(4863),w=d(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(j,S,N){this._hasScrollback=j,this._optionsService=S,this._bufferService=N,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=w.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(j){return j?(this._nullCell.fg=j.fg,this._nullCell.bg=j.bg,this._nullCell.extended=j.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(j){return j?(this._whitespaceCell.fg=j.fg,this._whitespaceCell.bg=j.bg,this._whitespaceCell.extended=j.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(j,S){return new g.BufferLine(this._bufferService.cols,this.getNullCell(j),S)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const j=this.ybase+this.y-this.ydisp;return j>=0&&j<this._rows}_getCorrectBufferLength(j){if(!this._hasScrollback)return j;const S=j+this._optionsService.rawOptions.scrollback;return S>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:S}fillViewportRows(j){if(this.lines.length===0){j===void 0&&(j=g.DEFAULT_ATTR_DATA);let S=this._rows;for(;S--;)this.lines.push(this.getBlankLine(j))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(j,S){const N=this.getNullCell(g.DEFAULT_ATTR_DATA);let T=0;const E=this._getCorrectBufferLength(S);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<j)for(let A=0;A<this.lines.length;A++)T+=+this.lines.get(A).resize(j,N);let D=0;if(this._rows<S)for(let A=this._rows;A<S;A++)this.lines.length<S+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(j,N)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(j,N)));else for(let A=this._rows;A>S;A--)this.lines.length>S+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const A=this.lines.length-E;A>0&&(this.lines.trimStart(A),this.ybase=Math.max(this.ybase-A,0),this.ydisp=Math.max(this.ydisp-A,0),this.savedY=Math.max(this.savedY-A,0)),this.lines.maxLength=E}this.x=Math.min(this.x,j-1),this.y=Math.min(this.y,S-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,j-1),this.scrollTop=0}if(this.scrollBottom=S-1,this._isReflowEnabled&&(this._reflow(j,S),this._cols>j))for(let D=0;D<this.lines.length;D++)T+=+this.lines.get(D).resize(j,N);this._cols=j,this._rows=S,this._memoryCleanupQueue.clear(),T>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let j=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,j=!1);let S=0;for(;this._memoryCleanupPosition<this.lines.length;)if(S+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),S>100)return!0;return j}get _isReflowEnabled(){const j=this._optionsService.rawOptions.windowsPty;return j&&j.buildNumber?this._hasScrollback&&j.backend==="conpty"&&j.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(j,S){this._cols!==j&&(j>this._cols?this._reflowLarger(j,S):this._reflowSmaller(j,S))}_reflowLarger(j,S){const N=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,j,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(N.length>0){const T=(0,x.reflowLargerCreateNewLayout)(this.lines,N);(0,x.reflowLargerApplyNewLayout)(this.lines,T.layout),this._reflowLargerAdjustViewport(j,S,T.countRemoved)}}_reflowLargerAdjustViewport(j,S,N){const T=this.getNullCell(g.DEFAULT_ATTR_DATA);let E=N;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<S&&this.lines.push(new g.BufferLine(j,T))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-N,0)}_reflowSmaller(j,S){const N=this.getNullCell(g.DEFAULT_ATTR_DATA),T=[];let E=0;for(let D=this.lines.length-1;D>=0;D--){let A=this.lines.get(D);if(!A||!A.isWrapped&&A.getTrimmedLength()<=j)continue;const P=[A];for(;A.isWrapped&&D>0;)A=this.lines.get(--D),P.unshift(A);const M=this.ybase+this.y;if(M>=D&&M<D+P.length)continue;const B=P[P.length-1].getTrimmedLength(),F=(0,x.reflowSmallerGetNewLineLengths)(P,this._cols,j),U=F.length-P.length;let G;G=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);const $=[];for(let I=0;I<U;I++){const q=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);$.push(q)}$.length>0&&(T.push({start:D+P.length+E,newLines:$}),E+=$.length),P.push(...$);let V=F.length-1,Y=F[V];Y===0&&(V--,Y=F[V]);let K=P.length-U-1,O=B;for(;K>=0;){const I=Math.min(O,Y);if(P[V]===void 0)break;if(P[V].copyCellsFrom(P[K],O-I,Y-I,I,!0),Y-=I,Y===0&&(V--,Y=F[V]),O-=I,O===0){K--;const q=Math.max(K,0);O=(0,x.getWrappedLineTrimmedLength)(P,q,this._cols)}}for(let I=0;I<P.length;I++)F[I]<j&&P[I].setCell(F[I],N);let L=U-G;for(;L-- >0;)this.ybase===0?this.y<S-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-S&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+S-1)}if(T.length>0){const D=[],A=[];for(let V=0;V<this.lines.length;V++)A.push(this.lines.get(V));const P=this.lines.length;let M=P-1,B=0,F=T[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let U=0;for(let V=Math.min(this.lines.maxLength-1,P+E-1);V>=0;V--)if(F&&F.start>M+U){for(let Y=F.newLines.length-1;Y>=0;Y--)this.lines.set(V--,F.newLines[Y]);V++,D.push({index:M+1,amount:F.newLines.length}),U+=F.newLines.length,F=T[++B]}else this.lines.set(V,A[M--]);let G=0;for(let V=D.length-1;V>=0;V--)D[V].index+=G,this.lines.onInsertEmitter.fire(D[V]),G+=D[V].amount;const $=Math.max(0,P+E-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(j,S,N=0,T){const E=this.lines.get(j);return E?E.translateToString(S,N,T):""}getWrappedRangeForLine(j){let S=j,N=j;for(;S>0&&this.lines.get(S).isWrapped;)S--;for(;N+1<this.lines.length&&this.lines.get(N+1).isWrapped;)N++;return{first:S,last:N}}setupTabStops(j){for(j!=null?this.tabs[j]||(j=this.prevStop(j)):(this.tabs={},j=0);j<this._cols;j+=this._optionsService.rawOptions.tabStopWidth)this.tabs[j]=!0}prevStop(j){for(j==null&&(j=this.x);!this.tabs[--j]&&j>0;);return j>=this._cols?this._cols-1:j<0?0:j}nextStop(j){for(j==null&&(j=this.x);!this.tabs[++j]&&j<this._cols;);return j>=this._cols?this._cols-1:j<0?0:j}clearMarkers(j){this._isClearing=!0;for(let S=0;S<this.markers.length;S++)this.markers[S].line===j&&(this.markers[S].dispose(),this.markers.splice(S--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let j=0;j<this.markers.length;j++)this.markers[j].dispose(),this.markers.splice(j--,1);this._isClearing=!1}addMarker(j){const S=new b.Marker(j);return this.markers.push(S),S.register(this.lines.onTrim((N=>{S.line-=N,S.line<0&&S.dispose()}))),S.register(this.lines.onInsert((N=>{S.line>=N.index&&(S.line+=N.amount)}))),S.register(this.lines.onDelete((N=>{S.line>=N.index&&S.line<N.index+N.amount&&S.dispose(),S.line>N.index&&(S.line-=N.amount)}))),S.register(S.onDispose((()=>this._removeMarker(S)))),S}_removeMarker(j){this._isClearing||this.markers.splice(this.markers.indexOf(j),1)}}},8437:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const h=d(3734),m=d(511),f=d(643),g=d(482);l.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let x=0;class C{constructor(b,w,j=!1){this.isWrapped=j,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*b);const S=w||m.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let N=0;N<b;++N)this.setCell(N,S);this.length=b}get(b){const w=this._data[3*b+0],j=2097151&w;return[this._data[3*b+1],2097152&w?this._combined[b]:j?(0,g.stringFromCodePoint)(j):"",w>>22,2097152&w?this._combined[b].charCodeAt(this._combined[b].length-1):j]}set(b,w){this._data[3*b+1]=w[f.CHAR_DATA_ATTR_INDEX],w[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[b]=w[1],this._data[3*b+0]=2097152|b|w[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*b+0]=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(b){return this._data[3*b+0]>>22}hasWidth(b){return 12582912&this._data[3*b+0]}getFg(b){return this._data[3*b+1]}getBg(b){return this._data[3*b+2]}hasContent(b){return 4194303&this._data[3*b+0]}getCodePoint(b){const w=this._data[3*b+0];return 2097152&w?this._combined[b].charCodeAt(this._combined[b].length-1):2097151&w}isCombined(b){return 2097152&this._data[3*b+0]}getString(b){const w=this._data[3*b+0];return 2097152&w?this._combined[b]:2097151&w?(0,g.stringFromCodePoint)(2097151&w):""}isProtected(b){return 536870912&this._data[3*b+2]}loadCell(b,w){return x=3*b,w.content=this._data[x+0],w.fg=this._data[x+1],w.bg=this._data[x+2],2097152&w.content&&(w.combinedData=this._combined[b]),268435456&w.bg&&(w.extended=this._extendedAttrs[b]),w}setCell(b,w){2097152&w.content&&(this._combined[b]=w.combinedData),268435456&w.bg&&(this._extendedAttrs[b]=w.extended),this._data[3*b+0]=w.content,this._data[3*b+1]=w.fg,this._data[3*b+2]=w.bg}setCellFromCodepoint(b,w,j,S){268435456&S.bg&&(this._extendedAttrs[b]=S.extended),this._data[3*b+0]=w|j<<22,this._data[3*b+1]=S.fg,this._data[3*b+2]=S.bg}addCodepointToCell(b,w,j){let S=this._data[3*b+0];2097152&S?this._combined[b]+=(0,g.stringFromCodePoint)(w):2097151&S?(this._combined[b]=(0,g.stringFromCodePoint)(2097151&S)+(0,g.stringFromCodePoint)(w),S&=-2097152,S|=2097152):S=w|4194304,j&&(S&=-12582913,S|=j<<22),this._data[3*b+0]=S}insertCells(b,w,j){if((b%=this.length)&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,j),w<this.length-b){const S=new m.CellData;for(let N=this.length-b-w-1;N>=0;--N)this.setCell(b+w+N,this.loadCell(b+N,S));for(let N=0;N<w;++N)this.setCell(b+N,j)}else for(let S=b;S<this.length;++S)this.setCell(S,j);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,j)}deleteCells(b,w,j){if(b%=this.length,w<this.length-b){const S=new m.CellData;for(let N=0;N<this.length-b-w;++N)this.setCell(b+N,this.loadCell(b+w+N,S));for(let N=this.length-w;N<this.length;++N)this.setCell(N,j)}else for(let S=b;S<this.length;++S)this.setCell(S,j);b&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,j),this.getWidth(b)!==0||this.hasContent(b)||this.setCellFromCodepoint(b,0,1,j)}replaceCells(b,w,j,S=!1){if(S)for(b&&this.getWidth(b-1)===2&&!this.isProtected(b-1)&&this.setCellFromCodepoint(b-1,0,1,j),w<this.length&&this.getWidth(w-1)===2&&!this.isProtected(w)&&this.setCellFromCodepoint(w,0,1,j);b<w&&b<this.length;)this.isProtected(b)||this.setCell(b,j),b++;else for(b&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,j),w<this.length&&this.getWidth(w-1)===2&&this.setCellFromCodepoint(w,0,1,j);b<w&&b<this.length;)this.setCell(b++,j)}resize(b,w){if(b===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const j=3*b;if(b>this.length){if(this._data.buffer.byteLength>=4*j)this._data=new Uint32Array(this._data.buffer,0,j);else{const S=new Uint32Array(j);S.set(this._data),this._data=S}for(let S=this.length;S<b;++S)this.setCell(S,w)}else{this._data=this._data.subarray(0,j);const S=Object.keys(this._combined);for(let T=0;T<S.length;T++){const E=parseInt(S[T],10);E>=b&&delete this._combined[E]}const N=Object.keys(this._extendedAttrs);for(let T=0;T<N.length;T++){const E=parseInt(N[T],10);E>=b&&delete this._extendedAttrs[E]}}return this.length=b,4*j*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const b=new Uint32Array(this._data.length);return b.set(this._data),this._data=b,1}return 0}fill(b,w=!1){if(w)for(let j=0;j<this.length;++j)this.isProtected(j)||this.setCell(j,b);else{this._combined={},this._extendedAttrs={};for(let j=0;j<this.length;++j)this.setCell(j,b)}}copyFrom(b){this.length!==b.length?this._data=new Uint32Array(b._data):this._data.set(b._data),this.length=b.length,this._combined={};for(const w in b._combined)this._combined[w]=b._combined[w];this._extendedAttrs={};for(const w in b._extendedAttrs)this._extendedAttrs[w]=b._extendedAttrs[w];this.isWrapped=b.isWrapped}clone(){const b=new C(0);b._data=new Uint32Array(this._data),b.length=this.length;for(const w in this._combined)b._combined[w]=this._combined[w];for(const w in this._extendedAttrs)b._extendedAttrs[w]=this._extendedAttrs[w];return b.isWrapped=this.isWrapped,b}getTrimmedLength(){for(let b=this.length-1;b>=0;--b)if(4194303&this._data[3*b+0])return b+(this._data[3*b+0]>>22);return 0}getNoBgTrimmedLength(){for(let b=this.length-1;b>=0;--b)if(4194303&this._data[3*b+0]||50331648&this._data[3*b+2])return b+(this._data[3*b+0]>>22);return 0}copyCellsFrom(b,w,j,S,N){const T=b._data;if(N)for(let D=S-1;D>=0;D--){for(let A=0;A<3;A++)this._data[3*(j+D)+A]=T[3*(w+D)+A];268435456&T[3*(w+D)+2]&&(this._extendedAttrs[j+D]=b._extendedAttrs[w+D])}else for(let D=0;D<S;D++){for(let A=0;A<3;A++)this._data[3*(j+D)+A]=T[3*(w+D)+A];268435456&T[3*(w+D)+2]&&(this._extendedAttrs[j+D]=b._extendedAttrs[w+D])}const E=Object.keys(b._combined);for(let D=0;D<E.length;D++){const A=parseInt(E[D],10);A>=w&&(this._combined[A-w+j]=b._combined[A])}}translateToString(b,w,j,S){w=w??0,j=j??this.length,b&&(j=Math.min(j,this.getTrimmedLength())),S&&(S.length=0);let N="";for(;w<j;){const T=this._data[3*w+0],E=2097151&T,D=2097152&T?this._combined[w]:E?(0,g.stringFromCodePoint)(E):f.WHITESPACE_CELL_CHAR;if(N+=D,S)for(let A=0;A<D.length;++A)S.push(w);w+=T>>22||1}return S&&S.push(w),N}}l.BufferLine=C},4841:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(d,h){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return h*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(c,l)=>{function d(h,m,f){if(m===h.length-1)return h[m].getTrimmedLength();const g=!h[m].hasContent(f-1)&&h[m].getWidth(f-1)===1,x=h[m+1].getWidth(0)===2;return g&&x?f-1:f}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(h,m,f,g,x){const C=[];for(let _=0;_<h.length-1;_++){let b=_,w=h.get(++b);if(!w.isWrapped)continue;const j=[h.get(_)];for(;b<h.length&&w.isWrapped;)j.push(w),w=h.get(++b);if(g>=_&&g<b){_+=j.length-1;continue}let S=0,N=d(j,S,m),T=1,E=0;for(;T<j.length;){const A=d(j,T,m),P=A-E,M=f-N,B=Math.min(P,M);j[S].copyCellsFrom(j[T],E,N,B,!1),N+=B,N===f&&(S++,N=0),E+=B,E===A&&(T++,E=0),N===0&&S!==0&&j[S-1].getWidth(f-1)===2&&(j[S].copyCellsFrom(j[S-1],f-1,N++,1,!1),j[S-1].setCell(f-1,x))}j[S].replaceCells(N,f,x);let D=0;for(let A=j.length-1;A>0&&(A>S||j[A].getTrimmedLength()===0);A--)D++;D>0&&(C.push(_+j.length-D),C.push(D)),_+=j.length-1}return C},l.reflowLargerCreateNewLayout=function(h,m){const f=[];let g=0,x=m[g],C=0;for(let _=0;_<h.length;_++)if(x===_){const b=m[++g];h.onDeleteEmitter.fire({index:_-C,amount:b}),_+=b-1,C+=b,x=m[++g]}else f.push(_);return{layout:f,countRemoved:C}},l.reflowLargerApplyNewLayout=function(h,m){const f=[];for(let g=0;g<m.length;g++)f.push(h.get(m[g]));for(let g=0;g<f.length;g++)h.set(g,f[g]);h.length=m.length},l.reflowSmallerGetNewLineLengths=function(h,m,f){const g=[],x=h.map(((w,j)=>d(h,j,m))).reduce(((w,j)=>w+j));let C=0,_=0,b=0;for(;b<x;){if(x-b<f){g.push(x-b);break}C+=f;const w=d(h,_,m);C>w&&(C-=w,_++);const j=h[_].getWidth(C-1)===2;j&&C--;const S=j?f-1:f;g.push(S),b+=S}return g},l.getWrappedLineTrimmedLength=d},5295:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const h=d(8460),m=d(844),f=d(9092);class g extends m.Disposable{constructor(C,_){super(),this._optionsService=C,this._bufferService=_,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,_){this._normal.resize(C,_),this._alt.resize(C,_),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}l.BufferSet=g},511:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const h=d(482),m=d(643),f=d(3734);class g extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const _=new g;return _.setFromCharData(C),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(C[m.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(C[m.CHAR_DATA_CHAR_INDEX].length===2){const b=C[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=b&&b<=56319){const w=C[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=w&&w<=57343?this.content=1024*(b-55296)+w-56320+65536|C[m.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=C[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[m.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=C[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=g},643:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const h=d(8460),m=d(844);class f{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}l.Marker=f,f._nextId=1},7116:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(c,l)=>{var d,h,m;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""})(d||(l.C0=d={})),(function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""})(h||(l.C1=h={})),(function(f){f.ST=`${d.ESC}\\`})(m||(l.C1_ESCAPED=m={}))},7399:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const h=d(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(f,g,x,C){const _={type:0,cancel:!1,key:void 0},b=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?_.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?_.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?_.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(_.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:_.key=f.ctrlKey?"\b":h.C0.DEL,f.altKey&&(_.key=h.C0.ESC+_.key);break;case 9:if(f.shiftKey){_.key=h.C0.ESC+"[Z";break}_.key=h.C0.HT,_.cancel=!0;break;case 13:_.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,_.cancel=!0;break;case 27:_.key=h.C0.ESC,f.altKey&&(_.key=h.C0.ESC+h.C0.ESC),_.cancel=!0;break;case 37:if(f.metaKey)break;b?(_.key=h.C0.ESC+"[1;"+(b+1)+"D",_.key===h.C0.ESC+"[1;3D"&&(_.key=h.C0.ESC+(x?"b":"[1;5D"))):_.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;b?(_.key=h.C0.ESC+"[1;"+(b+1)+"C",_.key===h.C0.ESC+"[1;3C"&&(_.key=h.C0.ESC+(x?"f":"[1;5C"))):_.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;b?(_.key=h.C0.ESC+"[1;"+(b+1)+"A",x||_.key!==h.C0.ESC+"[1;3A"||(_.key=h.C0.ESC+"[1;5A")):_.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;b?(_.key=h.C0.ESC+"[1;"+(b+1)+"B",x||_.key!==h.C0.ESC+"[1;3B"||(_.key=h.C0.ESC+"[1;5B")):_.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(_.key=h.C0.ESC+"[2~");break;case 46:_.key=b?h.C0.ESC+"[3;"+(b+1)+"~":h.C0.ESC+"[3~";break;case 36:_.key=b?h.C0.ESC+"[1;"+(b+1)+"H":g?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:_.key=b?h.C0.ESC+"[1;"+(b+1)+"F":g?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?_.type=2:f.ctrlKey?_.key=h.C0.ESC+"[5;"+(b+1)+"~":_.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?_.type=3:f.ctrlKey?_.key=h.C0.ESC+"[6;"+(b+1)+"~":_.key=h.C0.ESC+"[6~";break;case 112:_.key=b?h.C0.ESC+"[1;"+(b+1)+"P":h.C0.ESC+"OP";break;case 113:_.key=b?h.C0.ESC+"[1;"+(b+1)+"Q":h.C0.ESC+"OQ";break;case 114:_.key=b?h.C0.ESC+"[1;"+(b+1)+"R":h.C0.ESC+"OR";break;case 115:_.key=b?h.C0.ESC+"[1;"+(b+1)+"S":h.C0.ESC+"OS";break;case 116:_.key=b?h.C0.ESC+"[15;"+(b+1)+"~":h.C0.ESC+"[15~";break;case 117:_.key=b?h.C0.ESC+"[17;"+(b+1)+"~":h.C0.ESC+"[17~";break;case 118:_.key=b?h.C0.ESC+"[18;"+(b+1)+"~":h.C0.ESC+"[18~";break;case 119:_.key=b?h.C0.ESC+"[19;"+(b+1)+"~":h.C0.ESC+"[19~";break;case 120:_.key=b?h.C0.ESC+"[20;"+(b+1)+"~":h.C0.ESC+"[20~";break;case 121:_.key=b?h.C0.ESC+"[21;"+(b+1)+"~":h.C0.ESC+"[21~";break;case 122:_.key=b?h.C0.ESC+"[23;"+(b+1)+"~":h.C0.ESC+"[23~";break;case 123:_.key=b?h.C0.ESC+"[24;"+(b+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(x&&!C||!f.altKey||f.metaKey)!x||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?_.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(_.key=h.C0.US),f.key==="@"&&(_.key=h.C0.NUL)):f.keyCode===65&&(_.type=1);else{const w=m[f.keyCode],j=w?.[f.shiftKey?1:0];if(j)_.key=h.C0.ESC+j;else if(f.keyCode>=65&&f.keyCode<=90){const S=f.ctrlKey?f.keyCode-64:f.keyCode+32;let N=String.fromCharCode(S);f.shiftKey&&(N=N.toUpperCase()),_.key=h.C0.ESC+N}else if(f.keyCode===32)_.key=h.C0.ESC+(f.ctrlKey?h.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let S=f.code.slice(3,4);f.shiftKey||(S=S.toLowerCase()),_.key=h.C0.ESC+S,_.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?_.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?_.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?_.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?_.key=h.C0.DEL:f.keyCode===219?_.key=h.C0.ESC:f.keyCode===220?_.key=h.C0.FS:f.keyCode===221&&(_.key=h.C0.GS)}return _}},482:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},l.utf32ToString=function(d,h=0,m=d.length){let f="";for(let g=h;g<m;++g){let x=d[g];x>65535?(x-=65536,f+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):f+=String.fromCharCode(x)}return f},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,h){const m=d.length;if(!m)return 0;let f=0,g=0;if(this._interim){const x=d.charCodeAt(g++);56320<=x&&x<=57343?h[f++]=1024*(this._interim-55296)+x-56320+65536:(h[f++]=this._interim,h[f++]=x),this._interim=0}for(let x=g;x<m;++x){const C=d.charCodeAt(x);if(55296<=C&&C<=56319){if(++x>=m)return this._interim=C,f;const _=d.charCodeAt(x);56320<=_&&_<=57343?h[f++]=1024*(C-55296)+_-56320+65536:(h[f++]=C,h[f++]=_)}else C!==65279&&(h[f++]=C)}return f}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,h){const m=d.length;if(!m)return 0;let f,g,x,C,_=0,b=0,w=0;if(this.interim[0]){let N=!1,T=this.interim[0];T&=(224&T)==192?31:(240&T)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)T<<=6,T|=E;const A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,P=A-D;for(;w<P;){if(w>=m)return 0;if(E=d[w++],(192&E)!=128){w--,N=!0;break}this.interim[D++]=E,T<<=6,T|=63&E}N||(A===2?T<128?w--:h[_++]=T:A===3?T<2048||T>=55296&&T<=57343||T===65279||(h[_++]=T):T<65536||T>1114111||(h[_++]=T)),this.interim.fill(0)}const j=m-4;let S=w;for(;S<m;){for(;!(!(S<j)||128&(f=d[S])||128&(g=d[S+1])||128&(x=d[S+2])||128&(C=d[S+3]));)h[_++]=f,h[_++]=g,h[_++]=x,h[_++]=C,S+=4;if(f=d[S++],f<128)h[_++]=f;else if((224&f)==192){if(S>=m)return this.interim[0]=f,_;if(g=d[S++],(192&g)!=128){S--;continue}if(b=(31&f)<<6|63&g,b<128){S--;continue}h[_++]=b}else if((240&f)==224){if(S>=m)return this.interim[0]=f,_;if(g=d[S++],(192&g)!=128){S--;continue}if(S>=m)return this.interim[0]=f,this.interim[1]=g,_;if(x=d[S++],(192&x)!=128){S--;continue}if(b=(15&f)<<12|(63&g)<<6|63&x,b<2048||b>=55296&&b<=57343||b===65279)continue;h[_++]=b}else if((248&f)==240){if(S>=m)return this.interim[0]=f,_;if(g=d[S++],(192&g)!=128){S--;continue}if(S>=m)return this.interim[0]=f,this.interim[1]=g,_;if(x=d[S++],(192&x)!=128){S--;continue}if(S>=m)return this.interim[0]=f,this.interim[1]=g,this.interim[2]=x,_;if(C=d[S++],(192&C)!=128){S--;continue}if(b=(7&f)<<18|(63&g)<<12|(63&x)<<6|63&C,b<65536||b>1114111)continue;h[_++]=b}}return _}}},225:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const h=d(1480),m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;l.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let x=0;x<m.length;++x)g.fill(0,m[x][0],m[x][1]+1)}}wcwidth(x){return x<32?0:x<127?1:x<65536?g[x]:(function(C,_){let b,w=0,j=_.length-1;if(C<_[0][0]||C>_[j][1])return!1;for(;j>=w;)if(b=w+j>>1,C>_[b][1])w=b+1;else{if(!(C<_[b][0]))return!0;j=b-1}return!1})(x,f)?0:x>=131072&&x<=196605||x>=196608&&x<=262141?2:1}charProperties(x,C){let _=this.wcwidth(x),b=_===0&&C!==0;if(b){const w=h.UnicodeService.extractWidth(C);w===0?b=!1:w>_&&(_=w)}return h.UnicodeService.createPropertyValue(0,_,b)}}},5981:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const h=d(8460),m=d(844);class f extends m.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const b=this._callbacks.shift();b&&b()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(C),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(C)}_innerWrite(x=0,C=!0){const _=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const b=this._writeBuffer[this._bufferOffset],w=this._action(b,C);if(w){const S=N=>Date.now()-_>=12?setTimeout((()=>this._innerWrite(0,N))):this._innerWrite(_,N);return void w.catch((N=>(queueMicrotask((()=>{throw N})),Promise.resolve(!1)))).then(S)}const j=this._callbacks[this._bufferOffset];if(j&&j(),this._bufferOffset++,this._pendingData-=b.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=f},5941:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function m(f,g){const x=f.toString(16),C=x.length<2?"0"+x:x;switch(g){case 4:return x[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}l.parseColor=function(f){if(!f)return;let g=f.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const x=d.exec(g);if(x){const C=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/C*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/C*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/C*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),h.exec(g)&&[3,6,9,12].includes(g.length))){const x=g.length/3,C=[0,0,0];for(let _=0;_<3;++_){const b=parseInt(g.slice(x*_,x*_+x),16);C[_]=x===1?b<<4:x===2?b:x===3?b>>4:b>>8}return C}},l.toRgbString=function(f,g=16){const[x,C,_]=f;return`rgb:${m(x,g)}/${m(C,g)}/${m(_,g)}`}},5770:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const h=d(482),m=d(8742),f=d(5770),g=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(C,_){this._handlers[C]===void 0&&(this._handlers[C]=[]);const b=this._handlers[C];return b.push(_),{dispose:()=>{const w=b.indexOf(_);w!==-1&&b.splice(w,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(C,_){if(this.reset(),this._ident=C,this._active=this._handlers[C]||g,this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(C,_,b){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(C,_,b);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(C,_,b))}unhook(C,_=!0){if(this._active.length){let b=!1,w=this._active.length-1,j=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,b=_,j=this._stack.fallThrough,this._stack.paused=!1),!j&&b===!1){for(;w>=0&&(b=this._active[w].unhook(C),b!==!0);w--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,b;w--}for(;w>=0;w--)if(b=this._active[w].unhook(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,b}else this._handlerFb(this._ident,"UNHOOK",C);this._active=g,this._ident=0}};const x=new m.Params;x.addParam(0),l.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=x,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():x,this._data="",this._hitLimit=!1}put(C,_,b){this._hitLimit||(this._data+=(0,h.utf32ToString)(C,_,b),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let _=!1;if(this._hitLimit)_=!1;else if(C&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then((b=>(this._params=x,this._data="",this._hitLimit=!1,b)));return this._params=x,this._data="",this._hitLimit=!1,_}}},2015:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const h=d(844),m=d(8742),f=d(6242),g=d(6351);class x{constructor(w){this.table=new Uint8Array(w)}setDefault(w,j){this.table.fill(w<<4|j)}add(w,j,S,N){this.table[j<<8|w]=S<<4|N}addMany(w,j,S,N){for(let T=0;T<w.length;T++)this.table[j<<8|w[T]]=S<<4|N}}l.TransitionTable=x;const C=160;l.VT500_TRANSITION_TABLE=(function(){const b=new x(4095),w=Array.apply(null,Array(256)).map(((D,A)=>A)),j=(D,A)=>w.slice(D,A),S=j(32,127),N=j(0,24);N.push(25),N.push.apply(N,j(28,32));const T=j(0,14);let E;for(E in b.setDefault(1,0),b.addMany(S,0,2,0),T)b.addMany([24,26,153,154],E,3,0),b.addMany(j(128,144),E,3,0),b.addMany(j(144,152),E,3,0),b.add(156,E,0,0),b.add(27,E,11,1),b.add(157,E,4,8),b.addMany([152,158,159],E,0,7),b.add(155,E,11,3),b.add(144,E,11,9);return b.addMany(N,0,3,0),b.addMany(N,1,3,1),b.add(127,1,0,1),b.addMany(N,8,0,8),b.addMany(N,3,3,3),b.add(127,3,0,3),b.addMany(N,4,3,4),b.add(127,4,0,4),b.addMany(N,6,3,6),b.addMany(N,5,3,5),b.add(127,5,0,5),b.addMany(N,2,3,2),b.add(127,2,0,2),b.add(93,1,4,8),b.addMany(S,8,5,8),b.add(127,8,5,8),b.addMany([156,27,24,26,7],8,6,0),b.addMany(j(28,32),8,0,8),b.addMany([88,94,95],1,0,7),b.addMany(S,7,0,7),b.addMany(N,7,0,7),b.add(156,7,0,0),b.add(127,7,0,7),b.add(91,1,11,3),b.addMany(j(64,127),3,7,0),b.addMany(j(48,60),3,8,4),b.addMany([60,61,62,63],3,9,4),b.addMany(j(48,60),4,8,4),b.addMany(j(64,127),4,7,0),b.addMany([60,61,62,63],4,0,6),b.addMany(j(32,64),6,0,6),b.add(127,6,0,6),b.addMany(j(64,127),6,0,0),b.addMany(j(32,48),3,9,5),b.addMany(j(32,48),5,9,5),b.addMany(j(48,64),5,0,6),b.addMany(j(64,127),5,7,0),b.addMany(j(32,48),4,9,5),b.addMany(j(32,48),1,9,2),b.addMany(j(32,48),2,9,2),b.addMany(j(48,127),2,10,0),b.addMany(j(48,80),1,10,0),b.addMany(j(81,88),1,10,0),b.addMany([89,90,92],1,10,0),b.addMany(j(96,127),1,10,0),b.add(80,1,11,9),b.addMany(N,9,0,9),b.add(127,9,0,9),b.addMany(j(28,32),9,0,9),b.addMany(j(32,48),9,9,12),b.addMany(j(48,60),9,8,10),b.addMany([60,61,62,63],9,9,10),b.addMany(N,11,0,11),b.addMany(j(32,128),11,0,11),b.addMany(j(28,32),11,0,11),b.addMany(N,10,0,10),b.add(127,10,0,10),b.addMany(j(28,32),10,0,10),b.addMany(j(48,60),10,8,10),b.addMany([60,61,62,63],10,0,11),b.addMany(j(32,48),10,9,12),b.addMany(N,12,0,12),b.add(127,12,0,12),b.addMany(j(28,32),12,0,12),b.addMany(j(32,48),12,9,12),b.addMany(j(48,64),12,0,11),b.addMany(j(64,127),12,12,13),b.addMany(j(64,127),10,12,13),b.addMany(j(64,127),9,12,13),b.addMany(N,13,13,13),b.addMany(S,13,13,13),b.add(127,13,0,13),b.addMany([27,156,24,26],13,14,0),b.add(C,0,2,0),b.add(C,8,5,8),b.add(C,6,0,6),b.add(C,11,0,11),b.add(C,13,13,13),b})();class _ extends h.Disposable{constructor(w=l.VT500_TRANSITION_TABLE){super(),this._transitions=w,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(j,S,N)=>{},this._executeHandlerFb=j=>{},this._csiHandlerFb=(j,S)=>{},this._escHandlerFb=j=>{},this._errorHandlerFb=j=>j,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(w,j=[64,126]){let S=0;if(w.prefix){if(w.prefix.length>1)throw new Error("only one byte as prefix supported");if(S=w.prefix.charCodeAt(0),S&&60>S||S>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(w.intermediates){if(w.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let T=0;T<w.intermediates.length;++T){const E=w.intermediates.charCodeAt(T);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");S<<=8,S|=E}}if(w.final.length!==1)throw new Error("final must be a single byte");const N=w.final.charCodeAt(0);if(j[0]>N||N>j[1])throw new Error(`final must be in range ${j[0]} .. ${j[1]}`);return S<<=8,S|=N,S}identToString(w){const j=[];for(;w;)j.push(String.fromCharCode(255&w)),w>>=8;return j.reverse().join("")}setPrintHandler(w){this._printHandler=w}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(w,j){const S=this._identifier(w,[48,126]);this._escHandlers[S]===void 0&&(this._escHandlers[S]=[]);const N=this._escHandlers[S];return N.push(j),{dispose:()=>{const T=N.indexOf(j);T!==-1&&N.splice(T,1)}}}clearEscHandler(w){this._escHandlers[this._identifier(w,[48,126])]&&delete this._escHandlers[this._identifier(w,[48,126])]}setEscHandlerFallback(w){this._escHandlerFb=w}setExecuteHandler(w,j){this._executeHandlers[w.charCodeAt(0)]=j}clearExecuteHandler(w){this._executeHandlers[w.charCodeAt(0)]&&delete this._executeHandlers[w.charCodeAt(0)]}setExecuteHandlerFallback(w){this._executeHandlerFb=w}registerCsiHandler(w,j){const S=this._identifier(w);this._csiHandlers[S]===void 0&&(this._csiHandlers[S]=[]);const N=this._csiHandlers[S];return N.push(j),{dispose:()=>{const T=N.indexOf(j);T!==-1&&N.splice(T,1)}}}clearCsiHandler(w){this._csiHandlers[this._identifier(w)]&&delete this._csiHandlers[this._identifier(w)]}setCsiHandlerFallback(w){this._csiHandlerFb=w}registerDcsHandler(w,j){return this._dcsParser.registerHandler(this._identifier(w),j)}clearDcsHandler(w){this._dcsParser.clearHandler(this._identifier(w))}setDcsHandlerFallback(w){this._dcsParser.setHandlerFallback(w)}registerOscHandler(w,j){return this._oscParser.registerHandler(w,j)}clearOscHandler(w){this._oscParser.clearHandler(w)}setOscHandlerFallback(w){this._oscParser.setHandlerFallback(w)}setErrorHandler(w){this._errorHandler=w}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(w,j,S,N,T){this._parseStack.state=w,this._parseStack.handlers=j,this._parseStack.handlerPos=S,this._parseStack.transition=N,this._parseStack.chunkPos=T}parse(w,j,S){let N,T=0,E=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(S===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const A=this._parseStack.handlers;let P=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(S===!1&&P>-1){for(;P>=0&&(N=A[P](this._params),N!==!0);P--)if(N instanceof Promise)return this._parseStack.handlerPos=P,N}this._parseStack.handlers=[];break;case 4:if(S===!1&&P>-1){for(;P>=0&&(N=A[P](),N!==!0);P--)if(N instanceof Promise)return this._parseStack.handlerPos=P,N}this._parseStack.handlers=[];break;case 6:if(T=w[this._parseStack.chunkPos],N=this._dcsParser.unhook(T!==24&&T!==26,S),N)return N;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(T=w[this._parseStack.chunkPos],N=this._oscParser.end(T!==24&&T!==26,S),N)return N;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let A=D;A<j;++A){switch(T=w[A],E=this._transitions.table[this.currentState<<8|(T<160?T:C)],E>>4){case 2:for(let U=A+1;;++U){if(U>=j||(T=w[U])<32||T>126&&T<C){this._printHandler(w,A,U),A=U-1;break}if(++U>=j||(T=w[U])<32||T>126&&T<C){this._printHandler(w,A,U),A=U-1;break}if(++U>=j||(T=w[U])<32||T>126&&T<C){this._printHandler(w,A,U),A=U-1;break}if(++U>=j||(T=w[U])<32||T>126&&T<C){this._printHandler(w,A,U),A=U-1;break}}break;case 3:this._executeHandlers[T]?this._executeHandlers[T]():this._executeHandlerFb(T),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:A,code:T,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const P=this._csiHandlers[this._collect<<8|T];let M=P?P.length-1:-1;for(;M>=0&&(N=P[M](this._params),N!==!0);M--)if(N instanceof Promise)return this._preserveStack(3,P,M,E,A),N;M<0&&this._csiHandlerFb(this._collect<<8|T,this._params),this.precedingJoinState=0;break;case 8:do switch(T){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(T-48)}while(++A<j&&(T=w[A])>47&&T<60);A--;break;case 9:this._collect<<=8,this._collect|=T;break;case 10:const B=this._escHandlers[this._collect<<8|T];let F=B?B.length-1:-1;for(;F>=0&&(N=B[F](),N!==!0);F--)if(N instanceof Promise)return this._preserveStack(4,B,F,E,A),N;F<0&&this._escHandlerFb(this._collect<<8|T),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|T,this._params);break;case 13:for(let U=A+1;;++U)if(U>=j||(T=w[U])===24||T===26||T===27||T>127&&T<C){this._dcsParser.put(w,A,U),A=U-1;break}break;case 14:if(N=this._dcsParser.unhook(T!==24&&T!==26),N)return this._preserveStack(6,[],0,E,A),N;T===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let U=A+1;;U++)if(U>=j||(T=w[U])<32||T>127&&T<C){this._oscParser.put(w,A,U),A=U-1;break}break;case 6:if(N=this._oscParser.end(T!==24&&T!==26),N)return this._preserveStack(5,[],0,E,A),N;T===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&E}}}l.EscapeSequenceParser=_},6242:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const h=d(5770),m=d(482),f=[];l.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,x){this._handlers[g]===void 0&&(this._handlers[g]=[]);const C=this._handlers[g];return C.push(x),{dispose:()=>{const _=C.indexOf(x);_!==-1&&C.splice(_,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,x,C){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(g,x,C);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(g,x,C))}start(){this.reset(),this._state=1}put(g,x,C){if(this._state!==3){if(this._state===1)for(;x<C;){const _=g[x++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&C-x>0&&this._put(g,x,C)}}end(g,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,_=this._active.length-1,b=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,C=x,b=this._stack.fallThrough,this._stack.paused=!1),!b&&C===!1){for(;_>=0&&(C=this._active[_].end(g),C!==!0);_--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,C;_--}for(;_>=0;_--)if(C=this._active[_].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",g);this._active=f,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,x,C){this._hitLimit||(this._data+=(0,m.utf32ToString)(g,x,C),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let x=!1;if(this._hitLimit)x=!1;else if(g&&(x=this._handler(this._data),x instanceof Promise))return x.then((C=>(this._data="",this._hitLimit=!1,C)));return this._data="",this._hitLimit=!1,x}}},8742:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const d=2147483647;class h{static fromArray(f){const g=new h;if(!f.length)return g;for(let x=Array.isArray(f[0])?1:0;x<f.length;++x){const C=f[x];if(Array.isArray(C))for(let _=0;_<C.length;++_)g.addSubParam(C[_]);else g.addParam(C)}return g}constructor(f=32,g=32){if(this.maxLength=f,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new h(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let g=0;g<this.length;++g){f.push(this.params[g]);const x=this._subParamsIdx[g]>>8,C=255&this._subParamsIdx[g];C-x>0&&f.push(Array.prototype.slice.call(this._subParams,x,C))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>d?d:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>d?d:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const g=this._subParamsIdx[f]>>8,x=255&this._subParamsIdx[f];return x-g>0?this._subParams.subarray(g,x):null}getSubParamsAll(){const f={};for(let g=0;g<this.length;++g){const x=this._subParamsIdx[g]>>8,C=255&this._subParamsIdx[g];C-x>0&&(f[g]=this._subParams.slice(x,C))}return f}addDigit(f){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,C=x[g-1];x[g-1]=~C?Math.min(10*C+f,d):f}}l.Params=h},5741:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,h){const m={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(m),h.dispose=()=>this._wrappedAddonDispose(m),h.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let h=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===d){h=m;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(h,1)}}},8771:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const h=d(3785),m=d(511);l.BufferApiView=class{constructor(f,g){this._buffer=f,this.type=g}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const g=this._buffer.lines.get(f);if(g)return new h.BufferLineApiView(g)}getNullCell(){return new m.CellData}}},3785:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const h=d(511);l.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,f){if(!(m<0||m>=this._line.length))return f?(this._line.loadCell(m,f),f):this._line.loadCell(m,new h.CellData)}translateToString(m,f,g){return this._line.translateToString(m,f,g)}}},8285:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const h=d(8771),m=d(8460),f=d(844);class g extends f.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=g},7975:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,h){return this._core.registerCsiHandler(d,(m=>h(m.toArray())))}addCsiHandler(d,h){return this.registerCsiHandler(d,h)}registerDcsHandler(d,h){return this._core.registerDcsHandler(d,((m,f)=>h(m,f.toArray())))}addDcsHandler(d,h){return this.registerDcsHandler(d,h)}registerEscHandler(d,h){return this._core.registerEscHandler(d,h)}addEscHandler(d,h){return this.registerEscHandler(d,h)}registerOscHandler(d,h){return this._core.registerOscHandler(d,h)}addOscHandler(d,h){return this.registerOscHandler(d,h)}}},7090:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(c,l,d){var h=this&&this.__decorate||function(b,w,j,S){var N,T=arguments.length,E=T<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,j):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,w,j,S);else for(var D=b.length-1;D>=0;D--)(N=b[D])&&(E=(T<3?N(E):T>3?N(w,j,E):N(w,j))||E);return T>3&&E&&Object.defineProperty(w,j,E),E},m=this&&this.__param||function(b,w){return function(j,S){w(j,S,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const f=d(8460),g=d(844),x=d(5295),C=d(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let _=l.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(b){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(b.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(b.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(b,this))}resize(b,w){this.cols=b,this.rows=w,this.buffers.resize(b,w),this._onResize.fire({cols:b,rows:w})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(b,w=!1){const j=this.buffer;let S;S=this._cachedBlankLine,S&&S.length===this.cols&&S.getFg(0)===b.fg&&S.getBg(0)===b.bg||(S=j.getBlankLine(b,w),this._cachedBlankLine=S),S.isWrapped=w;const N=j.ybase+j.scrollTop,T=j.ybase+j.scrollBottom;if(j.scrollTop===0){const E=j.lines.isFull;T===j.lines.length-1?E?j.lines.recycle().copyFrom(S):j.lines.push(S.clone()):j.lines.splice(T+1,0,S.clone()),E?this.isUserScrolling&&(j.ydisp=Math.max(j.ydisp-1,0)):(j.ybase++,this.isUserScrolling||j.ydisp++)}else{const E=T-N+1;j.lines.shiftElements(N+1,E-1,-1),j.lines.set(T,S.clone())}this.isUserScrolling||(j.ydisp=j.ybase),this._onScroll.fire(j.ydisp)}scrollLines(b,w,j){const S=this.buffer;if(b<0){if(S.ydisp===0)return;this.isUserScrolling=!0}else b+S.ydisp>=S.ybase&&(this.isUserScrolling=!1);const N=S.ydisp;S.ydisp=Math.max(Math.min(S.ydisp+b,S.ybase),0),N!==S.ydisp&&(w||this._onScroll.fire(S.ydisp))}};l.BufferService=_=h([m(0,C.IOptionsService)],_)},7994:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,h){this._charsets[d]=h,this.glevel===d&&(this.charset=h)}}},1753:function(c,l,d){var h=this&&this.__decorate||function(S,N,T,E){var D,A=arguments.length,P=A<3?N:E===null?E=Object.getOwnPropertyDescriptor(N,T):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(S,N,T,E);else for(var M=S.length-1;M>=0;M--)(D=S[M])&&(P=(A<3?D(P):A>3?D(N,T,P):D(N,T))||P);return A>3&&P&&Object.defineProperty(N,T,P),P},m=this&&this.__param||function(S,N){return function(T,E){N(T,E,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const f=d(2585),g=d(8460),x=d(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:S=>S.button!==4&&S.action===1&&(S.ctrl=!1,S.alt=!1,S.shift=!1,!0)},VT200:{events:19,restrict:S=>S.action!==32},DRAG:{events:23,restrict:S=>S.action!==32||S.button!==3},ANY:{events:31,restrict:S=>!0}};function _(S,N){let T=(S.ctrl?16:0)|(S.shift?4:0)|(S.alt?8:0);return S.button===4?(T|=64,T|=S.action):(T|=3&S.button,4&S.button&&(T|=64),8&S.button&&(T|=128),S.action===32?T|=32:S.action!==0||N||(T|=3)),T}const b=String.fromCharCode,w={DEFAULT:S=>{const N=[_(S,!1)+32,S.col+32,S.row+32];return N[0]>255||N[1]>255||N[2]>255?"":`\x1B[M${b(N[0])}${b(N[1])}${b(N[2])}`},SGR:S=>{const N=S.action===0&&S.button!==4?"m":"M";return`\x1B[<${_(S,!0)};${S.col};${S.row}${N}`},SGR_PIXELS:S=>{const N=S.action===0&&S.button!==4?"m":"M";return`\x1B[<${_(S,!0)};${S.x};${S.y}${N}`}};let j=l.CoreMouseService=class extends x.Disposable{constructor(S,N){super(),this._bufferService=S,this._coreService=N,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const T of Object.keys(C))this.addProtocol(T,C[T]);for(const T of Object.keys(w))this.addEncoding(T,w[T]);this.reset()}addProtocol(S,N){this._protocols[S]=N}addEncoding(S,N){this._encodings[S]=N}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(S){if(!this._protocols[S])throw new Error(`unknown protocol "${S}"`);this._activeProtocol=S,this._onProtocolChange.fire(this._protocols[S].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(S){if(!this._encodings[S])throw new Error(`unknown encoding "${S}"`);this._activeEncoding=S}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(S){if(S.col<0||S.col>=this._bufferService.cols||S.row<0||S.row>=this._bufferService.rows||S.button===4&&S.action===32||S.button===3&&S.action!==32||S.button!==4&&(S.action===2||S.action===3)||(S.col++,S.row++,S.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,S,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(S))return!1;const N=this._encodings[this._activeEncoding](S);return N&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(N):this._coreService.triggerDataEvent(N,!0)),this._lastEvent=S,!0}explainEvents(S){return{down:!!(1&S),up:!!(2&S),drag:!!(4&S),move:!!(8&S),wheel:!!(16&S)}}_equalEvents(S,N,T){if(T){if(S.x!==N.x||S.y!==N.y)return!1}else if(S.col!==N.col||S.row!==N.row)return!1;return S.button===N.button&&S.action===N.action&&S.ctrl===N.ctrl&&S.alt===N.alt&&S.shift===N.shift}};l.CoreMouseService=j=h([m(0,f.IBufferService),m(1,f.ICoreService)],j)},6975:function(c,l,d){var h=this&&this.__decorate||function(j,S,N,T){var E,D=arguments.length,A=D<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,N):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(j,S,N,T);else for(var P=j.length-1;P>=0;P--)(E=j[P])&&(A=(D<3?E(A):D>3?E(S,N,A):E(S,N))||A);return D>3&&A&&Object.defineProperty(S,N,A),A},m=this&&this.__param||function(j,S){return function(N,T){S(N,T,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const f=d(1439),g=d(8460),x=d(844),C=d(2585),_=Object.freeze({insertMode:!1}),b=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let w=l.CoreService=class extends x.Disposable{constructor(j,S,N){super(),this._bufferService=j,this._logService=S,this._optionsService=N,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(_),this.decPrivateModes=(0,f.clone)(b)}reset(){this.modes=(0,f.clone)(_),this.decPrivateModes=(0,f.clone)(b)}triggerDataEvent(j,S=!1){if(this._optionsService.rawOptions.disableStdin)return;const N=this._bufferService.buffer;S&&this._optionsService.rawOptions.scrollOnUserInput&&N.ybase!==N.ydisp&&this._onRequestScrollToBottom.fire(),S&&this._onUserInput.fire(),this._logService.debug(`sending data "${j}"`,(()=>j.split("").map((T=>T.charCodeAt(0))))),this._onData.fire(j)}triggerBinaryEvent(j){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${j}"`,(()=>j.split("").map((S=>S.charCodeAt(0))))),this._onBinary.fire(j))}};l.CoreService=w=h([m(0,C.IBufferService),m(1,C.ILogService),m(2,C.IOptionsService)],w)},9074:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const h=d(8055),m=d(8460),f=d(844),g=d(6106);let x=0,C=0;class _ extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList((j=>j?.marker.line)),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)((()=>this.reset())))}registerDecoration(j){if(j.marker.isDisposed)return;const S=new b(j);if(S){const N=S.marker.onDispose((()=>S.dispose()));S.onDispose((()=>{S&&(this._decorations.delete(S)&&this._onDecorationRemoved.fire(S),N.dispose())})),this._decorations.insert(S),this._onDecorationRegistered.fire(S)}return S}reset(){for(const j of this._decorations.values())j.dispose();this._decorations.clear()}*getDecorationsAtCell(j,S,N){let T=0,E=0;for(const D of this._decorations.getKeyIterator(S))T=D.options.x??0,E=T+(D.options.width??1),j>=T&&j<E&&(!N||(D.options.layer??"bottom")===N)&&(yield D)}forEachDecorationAtCell(j,S,N,T){this._decorations.forEachByKey(S,(E=>{x=E.options.x??0,C=x+(E.options.width??1),j>=x&&j<C&&(!N||(E.options.layer??"bottom")===N)&&T(E)}))}}l.DecorationService=_;class b extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(j){super(),this.options=j,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=j.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const h=d(2585),m=d(8343);class f{constructor(...x){this._entries=new Map;for(const[C,_]of x)this.set(C,_)}set(x,C){const _=this._entries.get(x);return this._entries.set(x,C),_}forEach(x){for(const[C,_]of this._entries.entries())x(C,_)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}l.ServiceCollection=f,l.InstantiationService=class{constructor(){this._services=new f,this._services.set(h.IInstantiationService,this)}setService(g,x){this._services.set(g,x)}getService(g){return this._services.get(g)}createInstance(g,...x){const C=(0,m.getServiceDependencies)(g).sort(((w,j)=>w.index-j.index)),_=[];for(const w of C){const j=this._services.get(w.id);if(!j)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${w.id}.`);_.push(j)}const b=C.length>0?C[0].index:x.length;if(x.length!==b)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${b+1} conflicts with ${x.length} static arguments`);return new g(...x,..._)}}},7866:function(c,l,d){var h=this&&this.__decorate||function(b,w,j,S){var N,T=arguments.length,E=T<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,j):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,w,j,S);else for(var D=b.length-1;D>=0;D--)(N=b[D])&&(E=(T<3?N(E):T>3?N(w,j,E):N(w,j))||E);return T>3&&E&&Object.defineProperty(w,j,E),E},m=this&&this.__param||function(b,w){return function(j,S){w(j,S,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const f=d(844),g=d(2585),x={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let C,_=l.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(b){super(),this._optionsService=b,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),C=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(b){for(let w=0;w<b.length;w++)typeof b[w]=="function"&&(b[w]=b[w]())}_log(b,w,j){this._evalLazyOptionalParams(j),b.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+w,...j)}trace(b,...w){this._logLevel<=g.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,b,w)}debug(b,...w){this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,b,w)}info(b,...w){this._logLevel<=g.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,b,w)}warn(b,...w){this._logLevel<=g.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,b,w)}error(b,...w){this._logLevel<=g.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,b,w)}};l.LogService=_=h([m(0,g.IOptionsService)],_),l.setTraceLogger=function(b){C=b},l.traceCall=function(b,w,j){if(typeof j.value!="function")throw new Error("not supported");const S=j.value;j.value=function(...N){if(C.logLevel!==g.LogLevelEnum.TRACE)return S.apply(this,N);C.trace(`GlyphRenderer#${S.name}(${N.map((E=>JSON.stringify(E))).join(", ")})`);const T=S.apply(this,N);return C.trace(`GlyphRenderer#${S.name} return`,T),T}}},7302:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const h=d(8460),m=d(844),f=d(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends m.Disposable{constructor(_){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const b={...l.DEFAULT_OPTIONS};for(const w in _)if(w in b)try{const j=_[w];b[w]=this._sanitizeAndValidateOption(w,j)}catch(j){console.error(j)}this.rawOptions=b,this.options={...b},this._setupOptions(),this.register((0,m.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(_,b){return this.onOptionChange((w=>{w===_&&b(this.rawOptions[_])}))}onMultipleOptionChange(_,b){return this.onOptionChange((w=>{_.indexOf(w)!==-1&&b()}))}_setupOptions(){const _=w=>{if(!(w in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${w}"`);return this.rawOptions[w]},b=(w,j)=>{if(!(w in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${w}"`);j=this._sanitizeAndValidateOption(w,j),this.rawOptions[w]!==j&&(this.rawOptions[w]=j,this._onOptionChange.fire(w))};for(const w in this.rawOptions){const j={get:_.bind(this,w),set:b.bind(this,w)};Object.defineProperty(this.options,w,j)}}_sanitizeAndValidateOption(_,b){switch(_){case"cursorStyle":if(b||(b=l.DEFAULT_OPTIONS[_]),!(function(w){return w==="block"||w==="underline"||w==="bar"})(b))throw new Error(`"${b}" is not a valid value for ${_}`);break;case"wordSeparator":b||(b=l.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof b=="number"&&1<=b&&b<=1e3)break;b=g.includes(b)?b:l.DEFAULT_OPTIONS[_];break;case"cursorWidth":b=Math.floor(b);case"lineHeight":case"tabStopWidth":if(b<1)throw new Error(`${_} cannot be less than 1, value: ${b}`);break;case"minimumContrastRatio":b=Math.max(1,Math.min(21,Math.round(10*b)/10));break;case"scrollback":if((b=Math.min(b,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${b}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(b<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${b}`);break;case"rows":case"cols":if(!b&&b!==0)throw new Error(`${_} must be numeric, value: ${b}`);break;case"windowsPty":b=b??{}}return b}}l.OptionsService=x},2660:function(c,l,d){var h=this&&this.__decorate||function(x,C,_,b){var w,j=arguments.length,S=j<3?C:b===null?b=Object.getOwnPropertyDescriptor(C,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(x,C,_,b);else for(var N=x.length-1;N>=0;N--)(w=x[N])&&(S=(j<3?w(S):j>3?w(C,_,S):w(C,_))||S);return j>3&&S&&Object.defineProperty(C,_,S),S},m=this&&this.__param||function(x,C){return function(_,b){C(_,b,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const f=d(2585);let g=l.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const C=this._bufferService.buffer;if(x.id===void 0){const N=C.addMarker(C.ybase+C.y),T={data:x,id:this._nextId++,lines:[N]};return N.onDispose((()=>this._removeMarkerFromLink(T,N))),this._dataByLinkId.set(T.id,T),T.id}const _=x,b=this._getEntryIdKey(_),w=this._entriesWithId.get(b);if(w)return this.addLineToLink(w.id,C.ybase+C.y),w.id;const j=C.addMarker(C.ybase+C.y),S={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[j]};return j.onDispose((()=>this._removeMarkerFromLink(S,j))),this._entriesWithId.set(S.key,S),this._dataByLinkId.set(S.id,S),S.id}addLineToLink(x,C){const _=this._dataByLinkId.get(x);if(_&&_.lines.every((b=>b.line!==C))){const b=this._bufferService.buffer.addMarker(C);_.lines.push(b),b.onDispose((()=>this._removeMarkerFromLink(_,b)))}}getLinkData(x){return this._dataByLinkId.get(x)?.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,C){const _=x.lines.indexOf(C);_!==-1&&(x.lines.splice(_,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};l.OscLinkService=g=h([m(0,f.IBufferService)],g)},8343:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const d="di$target",h="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(m){return m[h]||[]},l.createDecorator=function(m){if(l.serviceRegistry.has(m))return l.serviceRegistry.get(m);const f=function(g,x,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,b,w){b[d]===b?b[h].push({id:_,index:w}):(b[h]=[{id:_,index:w}],b[d]=b)})(f,g,C)};return f.toString=()=>m,l.serviceRegistry.set(m,f),f}},2585:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const h=d(8343);var m;l.IBufferService=(0,h.createDecorator)("BufferService"),l.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),l.ICoreService=(0,h.createDecorator)("CoreService"),l.ICharsetService=(0,h.createDecorator)("CharsetService"),l.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"})(m||(l.LogLevelEnum=m={})),l.ILogService=(0,h.createDecorator)("LogService"),l.IOptionsService=(0,h.createDecorator)("OptionsService"),l.IOscLinkService=(0,h.createDecorator)("OscLinkService"),l.IUnicodeService=(0,h.createDecorator)("UnicodeService"),l.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(c,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const h=d(8460),m=d(225);class f{static extractShouldJoin(x){return(1&x)!=0}static extractWidth(x){return x>>1&3}static extractCharKind(x){return x>>3}static createPropertyValue(x,C,_=!1){return(16777215&x)<<3|(3&C)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const x=new m.UnicodeV6;this.register(x),this._active=x.version,this._activeProvider=x}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(x){if(!this._providers[x])throw new Error(`unknown Unicode version "${x}"`);this._active=x,this._activeProvider=this._providers[x],this._onChange.fire(x)}register(x){this._providers[x.version]=x}wcwidth(x){return this._activeProvider.wcwidth(x)}getStringCellWidth(x){let C=0,_=0;const b=x.length;for(let w=0;w<b;++w){let j=x.charCodeAt(w);if(55296<=j&&j<=56319){if(++w>=b)return C+this.wcwidth(j);const T=x.charCodeAt(w);56320<=T&&T<=57343?j=1024*(j-55296)+T-56320+65536:C+=this.wcwidth(T)}const S=this.charProperties(j,_);let N=f.extractWidth(S);f.extractShouldJoin(S)&&(N-=f.extractWidth(_)),C+=N,_=S}return C}charProperties(x,C){return this._activeProvider.charProperties(x,C)}}l.UnicodeService=f}},r={};function i(c){var l=r[c];if(l!==void 0)return l.exports;var d=r[c]={exports:{}};return n[c].call(d.exports,d,d.exports,i),d.exports}var o={};return(()=>{var c=o;Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const l=i(9042),d=i(3236),h=i(844),m=i(5741),f=i(8285),g=i(7975),x=i(7090),C=["cols","rows"];class _ extends h.Disposable{constructor(w){super(),this._core=this.register(new d.Terminal(w)),this._addonManager=this.register(new m.AddonManager),this._publicOptions={...this._core.options};const j=N=>this._core.options[N],S=(N,T)=>{this._checkReadonlyOptions(N),this._core.options[N]=T};for(const N in this._core.options){const T={get:j.bind(this,N),set:S.bind(this,N)};Object.defineProperty(this._publicOptions,N,T)}}_checkReadonlyOptions(w){if(C.includes(w))throw new Error(`Option "${w}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const w=this._core.coreService.decPrivateModes;let j="none";switch(this._core.coreMouseService.activeProtocol){case"X10":j="x10";break;case"VT200":j="vt200";break;case"DRAG":j="drag";break;case"ANY":j="any"}return{applicationCursorKeysMode:w.applicationCursorKeys,applicationKeypadMode:w.applicationKeypad,bracketedPasteMode:w.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:j,originMode:w.origin,reverseWraparoundMode:w.reverseWraparound,sendFocusMode:w.sendFocus,wraparoundMode:w.wraparound}}get options(){return this._publicOptions}set options(w){for(const j in w)this._publicOptions[j]=w[j]}blur(){this._core.blur()}focus(){this._core.focus()}input(w,j=!0){this._core.input(w,j)}resize(w,j){this._verifyIntegers(w,j),this._core.resize(w,j)}open(w){this._core.open(w)}attachCustomKeyEventHandler(w){this._core.attachCustomKeyEventHandler(w)}attachCustomWheelEventHandler(w){this._core.attachCustomWheelEventHandler(w)}registerLinkProvider(w){return this._core.registerLinkProvider(w)}registerCharacterJoiner(w){return this._checkProposedApi(),this._core.registerCharacterJoiner(w)}deregisterCharacterJoiner(w){this._checkProposedApi(),this._core.deregisterCharacterJoiner(w)}registerMarker(w=0){return this._verifyIntegers(w),this._core.registerMarker(w)}registerDecoration(w){return this._checkProposedApi(),this._verifyPositiveIntegers(w.x??0,w.width??0,w.height??0),this._core.registerDecoration(w)}hasSelection(){return this._core.hasSelection()}select(w,j,S){this._verifyIntegers(w,j,S),this._core.select(w,j,S)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(w,j){this._verifyIntegers(w,j),this._core.selectLines(w,j)}dispose(){super.dispose()}scrollLines(w){this._verifyIntegers(w),this._core.scrollLines(w)}scrollPages(w){this._verifyIntegers(w),this._core.scrollPages(w)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(w){this._verifyIntegers(w),this._core.scrollToLine(w)}clear(){this._core.clear()}write(w,j){this._core.write(w,j)}writeln(w,j){this._core.write(w),this._core.write(`\r
`,j)}paste(w){this._core.paste(w)}refresh(w,j){this._verifyIntegers(w,j),this._core.refresh(w,j)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(w){this._addonManager.loadAddon(this,w)}static get strings(){return l}_verifyIntegers(...w){for(const j of w)if(j===1/0||isNaN(j)||j%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...w){for(const j of w)if(j&&(j===1/0||isNaN(j)||j%1!=0||j<0))throw new Error("This API only accepts positive integers")}}c.Terminal=_})(),o})()))})(Ky)),Ky.exports}var Ere=kre(),Yy={exports:{}},wE;function Are(){return wE||(wE=1,(function(e,t){(function(n,r){e.exports=r()})(self,(()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const o=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(o._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,o=i._renderService.dimensions;if(o.css.cell.width===0||o.css.cell.height===0)return;const c=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(l.getPropertyValue("height")),h=Math.max(0,parseInt(l.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),f=d-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),g=h-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-c;return{cols:Math.max(2,Math.floor(g/o.css.cell.width)),rows:Math.max(1,Math.floor(f/o.css.cell.height))}}}})(),n})()))})(Yy)),Yy.exports}var Tre=Are(),Xy={exports:{}},SE;function Dre(){return SE||(SE=1,(function(e,t){(function(n,r){e.exports=r()})(self,(()=>(()=>{var n={6:(c,l)=>{function d(m){try{const f=new URL(m),g=f.password&&f.username?`${f.protocol}//${f.username}:${f.password}@${f.host}`:f.username?`${f.protocol}//${f.username}@${f.host}`:`${f.protocol}//${f.host}`;return m.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(m,f,g,x={}){this._terminal=m,this._regex=f,this._handler=g,this._options=x}provideLinks(m,f){const g=h.computeLink(m,this._regex,this._terminal,this._handler);f(this._addCallbacks(g))}_addCallbacks(m){return m.map((f=>(f.leave=this._options.leave,f.hover=(g,x)=>{if(this._options.hover){const{range:C}=f;this._options.hover(g,x,C)}},f)))}};class h{static computeLink(f,g,x,C){const _=new RegExp(g.source,(g.flags||"")+"g"),[b,w]=h._getWindowedLineStrings(f-1,x),j=b.join("");let S;const N=[];for(;S=_.exec(j);){const T=S[0];if(!d(T))continue;const[E,D]=h._mapStrIdx(x,w,0,S.index),[A,P]=h._mapStrIdx(x,E,D,T.length);if(E===-1||D===-1||A===-1||P===-1)continue;const M={start:{x:D+1,y:E+1},end:{x:P,y:A+1}};N.push({range:M,text:T,activate:C})}return N}static _getWindowedLineStrings(f,g){let x,C=f,_=f,b=0,w="";const j=[];if(x=g.buffer.active.getLine(f)){const S=x.translateToString(!0);if(x.isWrapped&&S[0]!==" "){for(b=0;(x=g.buffer.active.getLine(--C))&&b<2048&&(w=x.translateToString(!0),b+=w.length,j.push(w),x.isWrapped&&w.indexOf(" ")===-1););j.reverse()}for(j.push(S),b=0;(x=g.buffer.active.getLine(++_))&&x.isWrapped&&b<2048&&(w=x.translateToString(!0),b+=w.length,j.push(w),w.indexOf(" ")===-1););}return[j,C]}static _mapStrIdx(f,g,x,C){const _=f.buffer.active,b=_.getNullCell();let w=x;for(;C;){const j=_.getLine(g);if(!j)return[-1,-1];for(let S=w;S<j.length;++S){j.getCell(S,b);const N=b.getChars();if(b.getWidth()&&(C-=N.length||1,S===j.length-1&&N==="")){const T=_.getLine(g+1);T&&T.isWrapped&&(T.getCell(0,b),b.getWidth()===2&&(C+=1))}if(C<0)return[g,S]}g++,w=0}return[g,w]}}l.LinkComputer=h}},r={};function i(c){var l=r[c];if(l!==void 0)return l.exports;var d=r[c]={exports:{}};return n[c](d,d.exports,i),d.exports}var o={};return(()=>{var c=o;Object.defineProperty(c,"__esModule",{value:!0}),c.WebLinksAddon=void 0;const l=i(6),d=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(m,f){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}c.WebLinksAddon=class{constructor(m=h,f={}){this._handler=m,this._options=f}activate(m){this._terminal=m;const f=this._options,g=f.urlRegex||d;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,g,this._handler,f))}dispose(){this._linkProvider?.dispose()}}})(),o})()))})(Xy)),Xy.exports}var Rre=Dre();function Pre({terminalId:e,onCommandEnter:t,onResize:n}){const r=y.useRef(null),i=y.useRef(null),o=y.useRef(null),c=y.useRef("");y.useEffect(()=>{if(!r.current||i.current)return;const g=new Ere.Terminal({cursorBlink:!0,cursorStyle:"block",fontSize:13,fontFamily:'var(--font-mono), "JetBrains Mono", Menlo, Monaco, "Courier New", monospace',lineHeight:1.2,letterSpacing:0,theme:{background:"#0B0B0F",foreground:"#E8E6E3",cursor:"#D6D876",cursorAccent:"#0B0B0F",selectionBackground:"#D6D87640",selectionForeground:"#E8E6E3",black:"#1A1A1F",red:"#FF6B6B",green:"#87D687",yellow:"#D6D876",blue:"#6BB3FF",magenta:"#C792EA",cyan:"#89DDFF",white:"#E8E6E3",brightBlack:"#4A4A50",brightRed:"#FF8A8A",brightGreen:"#A5E6A5",brightYellow:"#E8E87A",brightBlue:"#8AC4FF",brightMagenta:"#DEB3FF",brightCyan:"#A6E8FF",brightWhite:"#FFFFFF"},allowProposedApi:!0,scrollback:1e4}),x=new Tre.FitAddon,C=new Rre.WebLinksAddon;g.loadAddon(x),g.loadAddon(C),g.open(r.current),setTimeout(()=>{x.fit()},50),i.current=g,o.current=x;const _=Wo.get(e);return _&&_.length>0&&(g.write(_),Wo.clear(e)),g.onData(b=>{if(J.sendTerminalInput(e,b),b==="\r"||b===`
`){const w=c.current;c.current="",t&&t(w)}else b===""||b==="\b"?c.current=c.current.slice(0,-1):b===""?c.current="":b.charCodeAt(0)>=32&&b.charCodeAt(0)<127&&(c.current+=b)}),g.onResize(({cols:b,rows:w})=>{n&&n(b,w)}),()=>{}},[e,t,n]),y.useEffect(()=>{const g=()=>{o.current&&i.current&&o.current.fit()},x=r.current?.parentElement;if(x){const C=new ResizeObserver(g);return C.observe(x),()=>C.disconnect()}},[]);const l=y.useCallback(()=>{o.current&&i.current&&o.current.fit()},[]),d=y.useCallback(g=>{i.current&&i.current.write(g)},[]),h=y.useCallback(g=>{i.current&&i.current.writeln(g)},[]),m=y.useCallback(()=>{i.current&&i.current.focus()},[]),f=y.useCallback(()=>{i.current&&(i.current.dispose(),i.current=null)},[]);return{terminalRef:r,xtermRef:i,fitAddonRef:o,fit:l,write:d,writeln:h,focus:m,dispose:f,cols:i.current?.cols||80,rows:i.current?.rows||24}}function Mre({terminalId:e,cwd:t,projectPath:n,cols:r,rows:i,onCreated:o,onError:c}){const l=y.useRef(!1),d=y.useRef(!1),h=Ns(f=>f.setTerminalStatus),m=Ns(f=>f.updateTerminal);return y.useEffect(()=>{if(l.current||d.current)return;const f=Ns.getState().terminals.find(C=>C.id===e),g=f?.status==="running"||f?.status==="claude-active",x=f?.isRestored;l.current=!0,x&&f?J.restoreTerminalSession({id:f.id,title:f.title,cwd:f.cwd,projectPath:n||"",isClaudeMode:f.isClaudeMode,claudeSessionId:f.claudeSessionId,outputBuffer:"",createdAt:f.createdAt.toISOString(),lastActiveAt:new Date().toISOString()},r,i).then(C=>{if(C.success&&C.data?.success)d.current=!0,h(e,f.isClaudeMode?"claude-active":"running"),m(e,{isRestored:!1}),o?.();else{const _=`Error restoring session: ${C.data?.error||C.error}`;c?.(_)}l.current=!1}).catch(C=>{c?.(C.message),l.current=!1}):J.createTerminal({id:e,cwd:t,cols:r,rows:i,projectPath:n}).then(C=>{C.success?(d.current=!0,g||h(e,"running"),o?.()):c?.(C.error||"Unknown error"),l.current=!1}).catch(C=>{c?.(C.message),l.current=!1})},[e,t,n,r,i,h,m,o,c]),{isCreated:d.current}}function Lre({terminalId:e,onOutput:t,onExit:n,onTitleChange:r,onClaudeSession:i}){y.useEffect(()=>J.onTerminalOutput((c,l)=>{c===e&&(Ns.getState().appendOutput(e,l),t?.(l))}),[e,t]),y.useEffect(()=>J.onTerminalExit((c,l)=>{c===e&&(Ns.getState().setTerminalStatus(e,"exited"),n?.(l))}),[e,n]),y.useEffect(()=>J.onTerminalTitleChange((c,l)=>{c===e&&(Ns.getState().updateTerminal(e,{title:l}),r?.(l))}),[e,r]),y.useEffect(()=>J.onTerminalClaudeSession((c,l)=>{c===e&&(Ns.getState().setClaudeSessionId(e,l),console.warn("[Terminal] Captured Claude session ID:",l),i?.(l))}),[e,i])}function Ire({terminalId:e,cwd:t}){const n=y.useRef(""),r=y.useRef(null),i=dn(m=>m.settings.autoNameTerminals),o=Ns(m=>m.terminals.find(f=>f.id===e)),c=Ns(m=>m.updateTerminal),l=y.useCallback(async()=>{if(!i||o?.isClaudeMode||!n.current.trim())return;const m=n.current.trim();if(!(m.length<2||["ls","cd","ll","pwd","exit","clear"].includes(m)))try{const f=await J.generateTerminalName(m,o?.cwd||t);f.success&&f.data&&c(e,{title:f.data})}catch(f){console.warn("[Terminal] Auto-naming failed:",f)}},[i,o?.isClaudeMode,o?.cwd,t,e,c]),d=y.useCallback(m=>{n.current=m,r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l()},1500)},[l]),h=y.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]);return{handleCommandEnter:d,cleanup:h}}function Ore({id:e,cwd:t,projectPath:n,isActive:r,onClose:i,onActivate:o,tasks:c=[],onNewTaskClick:l}){const d=y.useRef(!0),h=y.useRef(!1),m=Ns($=>$.terminals.find(V=>V.id===e)),f=Ns($=>$.setClaudeMode),g=Ns($=>$.updateTerminal),x=Ns($=>$.setAssociatedTask),C=m?.associatedTaskId?c.find($=>$.id===m.associatedTaskId):void 0,{setNodeRef:_,isOver:b}=Bp({id:`terminal-${e}`,data:{type:"terminal",terminalId:e}}),{handleCommandEnter:w,cleanup:j}=Ire({terminalId:e,cwd:t}),{terminalRef:S,write:N,writeln:T,focus:E,dispose:D,cols:A,rows:P}=Pre({terminalId:e,onCommandEnter:w,onResize:($,V)=>{h.current&&J.resizeTerminal(e,$,V)}});Mre({terminalId:e,cwd:t,projectPath:n,cols:A,rows:P,onCreated:()=>{h.current=!0},onError:$=>{T(`\r
\x1B[31mError: ${$}\x1B[0m`)}}),Lre({terminalId:e,onOutput:$=>{N($)},onExit:$=>{h.current=!1,T(`\r
\x1B[90mProcess exited with code ${$}\x1B[0m`)}}),y.useEffect(()=>{r&&E()},[r,E]),y.useEffect(()=>(d.current=!0,()=>{d.current=!1,j(),setTimeout(()=>{d.current||(D(),h.current=!1)},100)}),[e,D,j]);const M=y.useCallback(()=>{f(e,!0),J.invokeClaudeInTerminal(e,t)},[e,t,f]),B=y.useCallback(()=>{o(),E()},[o,E]),F=y.useCallback($=>{g(e,{title:$})},[e,g]),U=y.useCallback($=>{const V=c.find(K=>K.id===$);if(!V)return;x(e,$),g(e,{title:V.title});const Y=`I'm working on: ${V.title}

Description:
${V.description}

Please confirm you're ready by saying: I'm ready to work on ${V.title} - Context is loaded.`;J.sendTerminalInput(e,Y+"\r")},[e,c,x,g]),G=y.useCallback(()=>{x(e,void 0),g(e,{title:"Claude"})},[e,x,g]);return s.jsxs("div",{ref:_,className:le("flex h-full flex-col rounded-lg border bg-[#0B0B0F] overflow-hidden transition-all relative",r?"border-primary ring-1 ring-primary/20":"border-border",b&&"ring-2 ring-info border-info"),onClick:B,children:[b&&s.jsx("div",{className:"absolute inset-0 bg-info/10 z-10 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"flex items-center gap-2 bg-info/90 text-info-foreground px-3 py-2 rounded-md",children:[s.jsx(w8,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Drop to insert path"})]})}),s.jsx(Nre,{terminalId:e,title:m?.title||"Terminal",status:m?.status||"idle",isClaudeMode:m?.isClaudeMode||!1,tasks:c,associatedTask:C,onClose:i,onInvokeClaude:M,onTitleChange:F,onTaskSelect:U,onClearTask:G,onNewTaskClick:l}),s.jsx("div",{ref:S,className:"flex-1 p-1",style:{minHeight:0}})]})}const Bre={hidden:{width:0,opacity:0},visible:{width:288,opacity:1}},zre={hidden:{x:20,opacity:0},visible:{x:0,opacity:1}};function Fre({projectPath:e}){const{isOpen:t,close:n,clearCache:r,loadDirectory:i}=Wr(),o=()=>{r(),i(e)};return s.jsx($d,{mode:"wait",children:t&&s.jsx(cn.div,{variants:Bre,initial:"hidden",animate:"visible",exit:"hidden",transition:{width:{duration:.3,ease:[.4,0,.2,1]},opacity:{duration:.2}},className:"h-full bg-card border-l border-border flex flex-col shadow-xl overflow-hidden",style:{minWidth:0},children:s.jsxs(cn.div,{variants:zre,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25,delay:.1,ease:[.4,0,.2,1]},className:"flex flex-col h-full w-72",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-card/80 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qa,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Project Files"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:o,title:"Refresh",children:s.jsx(Dt,{className:"h-3.5 w-3.5"})}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:n,children:s.jsx(Ys,{className:"h-3.5 w-3.5"})})]})]}),s.jsx("div",{className:"px-3 py-2 bg-muted/30 border-b border-border shrink-0",children:s.jsx("p",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:"Drag files into a terminal to insert the path"})}),s.jsx(cs,{className:"flex-1",children:s.jsx(J4,{rootPath:e})})]})})})}function Hre({projectPath:e,onNewTaskClick:t,isActive:n=!1}){const r=Ns($=>$.terminals),i=Ns($=>$.activeTerminalId),o=Ns($=>$.addTerminal),c=Ns($=>$.removeTerminal),l=Ns($=>$.setActiveTerminal),d=Ns($=>$.canAddTerminal),h=Ns($=>$.setClaudeMode),m=Ks($=>$.tasks),f=Wr($=>$.isOpen),g=Wr($=>$.toggle),[x,C]=y.useState([]),[_,b]=y.useState(!1),[w,j]=y.useState(!1);y.useEffect(()=>{if(!e){C([]);return}(async()=>{b(!0);try{const V=await J.getTerminalSessionDates(e);V.success&&V.data&&C(V.data)}catch(V){console.error("Failed to fetch session dates:",V)}finally{b(!1)}})()},[e]);const S=Ns($=>$.addRestoredTerminal),N=y.useCallback(async $=>{if(!(!e||w)){j(!0);try{const V=await J.getTerminalSessionsForDate($,e),Y=V.success?V.data||[]:[];if(console.warn(`[TerminalGrid] Found ${Y.length} sessions to restore from ${$}`),Y.length===0){console.warn("[TerminalGrid] No sessions found for this date"),j(!1);return}for(const O of r)await J.destroyTerminal(O.id),c(O.id);await new Promise(O=>setTimeout(O,100));const K=await J.restoreTerminalSessionsFromDate($,e,80,24);if(K.success&&K.data){console.warn(`[TerminalGrid] Main process restored ${K.data.restored} sessions from ${$}`);for(const L of K.data.sessions)if(L.success){const I=Y.find(q=>q.id===L.id);I&&(console.warn(`[TerminalGrid] Adding restored terminal to store: ${I.id}`),S(I))}const O=await J.getTerminalSessionDates(e);O.success&&O.data&&C(O.data)}}catch(V){console.error("Failed to restore sessions:",V)}finally{j(!1)}}},[e,r,c,S,w]),T=Rp(Dc(Wc,{activationConstraint:{distance:8}})),[E,D]=Lt.useState(null),A=y.useCallback($=>{J.destroyTerminal($),c($)},[c]);y.useEffect(()=>{if(!n)return;const $=V=>{(V.ctrlKey||V.metaKey)&&V.key==="t"&&(V.preventDefault(),d()&&o(e)),(V.ctrlKey||V.metaKey)&&V.key==="w"&&i&&(V.preventDefault(),A(i))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[n,o,d,e,i,A]);const P=y.useCallback(()=>{d()&&o(e)},[o,d,e]),M=y.useCallback(()=>{r.forEach($=>{$.status==="running"&&!$.isClaudeMode&&(h($.id,!0),J.invokeClaudeInTerminal($.id,e))})},[r,h,e]),B=y.useCallback($=>{const V=$.active.data.current;V?.type==="file"&&D({path:V.path,name:V.name,isDirectory:V.isDirectory})},[]),F=y.useCallback($=>{const{active:V,over:Y}=$;if(D(null),!Y)return;const K=Y.id.toString();if(K.startsWith("terminal-")){const O=K.replace("terminal-",""),L=V.data.current;if(L?.path){const I=L.path.includes(" ")?`"${L.path}"`:L.path;J.sendTerminalInput(O,I+" ")}}},[]),U=y.useMemo(()=>{const $=r.length;return $===0?{rows:0,cols:0}:$===1?{rows:1,cols:1}:$===2?{rows:1,cols:2}:$<=4?{rows:2,cols:2}:$<=6?{rows:2,cols:3}:$<=9?{rows:3,cols:3}:{rows:3,cols:4}},[r.length]),G=y.useMemo(()=>{const $=[],{cols:V}=U;if(V===0)return $;for(let Y=0;Y<r.length;Y+=V)$.push(r.slice(Y,Y+V));return $},[r,U]);return r.length===0?s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 p-8",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[s.jsx("div",{className:"rounded-full bg-card p-4",children:s.jsx(V8,{className:"h-8 w-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Agent Terminals"}),s.jsxs("p",{className:"mt-1 text-sm text-muted-foreground max-w-md",children:["Spawn multiple terminals to run Claude agents in parallel. Use ",s.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-card border border-border rounded",children:"Ctrl+T"})," to create a new terminal."]})]})]}),s.jsxs(te,{onClick:P,className:"gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"New Terminal"]})]}):s.jsx(Op,{sensors:T,onDragStart:B,onDragEnd:F,children:s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsxs("div",{className:"flex h-10 items-center justify-between border-b border-border bg-card/30 px-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[r.length," / 12 terminals"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[e&&x.length>0&&s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",disabled:w||_,children:[w?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(_b,{className:"h-3 w-3"}),"History",s.jsx(Gt,{className:"h-3 w-3"})]})}),s.jsxs(lo,{align:"end",className:"w-56",children:[s.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Restore sessions from..."}),s.jsx(Za,{}),x.map($=>s.jsxs(Pn,{onClick:()=>N($.date),className:"flex items-center justify-between",children:[s.jsx("span",{children:$.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[$.sessionCount," session",$.sessionCount!==1?"s":""]})]},$.date))]})]}),r.some($=>$.status==="running"&&!$.isClaudeMode)&&s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:M,children:[s.jsx(us,{className:"h-3 w-3"}),"Invoke Claude All"]}),s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:P,disabled:!d(),children:[s.jsx(ys,{className:"h-3 w-3"}),"New Terminal",s.jsxs("kbd",{className:"ml-1 text-[10px] text-muted-foreground",children:[navigator.platform.includes("Mac")?"":"Ctrl","+T"]})]}),e&&s.jsxs(te,{variant:f?"default":"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:g,children:[s.jsx(Qa,{className:"h-3 w-3"}),"Files"]})]})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx("div",{className:le("flex-1 overflow-hidden p-2 transition-all duration-300 ease-out",f&&"pr-0"),children:s.jsx(b0,{direction:"vertical",className:"h-full",children:G.map(($,V)=>s.jsxs("div",{className:"contents",children:[s.jsx(v0,{id:`row-${V}`,order:V,defaultSize:100/G.length,minSize:15,children:s.jsx(b0,{direction:"horizontal",className:"h-full",children:$.map((Y,K)=>s.jsxs("div",{className:"contents",children:[s.jsx(v0,{id:Y.id,order:K,defaultSize:100/$.length,minSize:20,children:s.jsx("div",{className:"h-full p-1",children:s.jsx(Ore,{id:Y.id,cwd:Y.cwd||e,projectPath:e,isActive:Y.id===i,onClose:()=>A(Y.id),onActivate:()=>l(Y.id),tasks:m,onNewTaskClick:t})})}),K<$.length-1&&s.jsx(w0,{className:"w-1 hover:bg-primary/30 transition-colors"})]},Y.id))})}),V<G.length-1&&s.jsx(w0,{className:"h-1 hover:bg-primary/30 transition-colors"})]},V))})}),e&&s.jsx(Fre,{projectPath:e})]}),s.jsx(zp,{children:E&&s.jsxs("div",{className:"flex items-center gap-2 bg-card border border-border rounded-md px-3 py-2 shadow-lg",children:[E.isDirectory?s.jsx(Dd,{className:"h-4 w-4 text-warning"}):s.jsx(O0,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:E.name})]})})]})})}function Ure(){const[e,t]=y.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return y.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=i=>{t(i.matches)};return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),e}const $re={analyzing:{label:"Analyzing",description:"Analyzing project structure and codebase...",icon:bi,color:"bg-amber-500",bgColor:"bg-amber-500/20"},discovering:{label:"Discovering",description:"Discovering target audience and user needs...",icon:wi,color:"bg-info",bgColor:"bg-info/20"},generating:{label:"Generating",description:"Generating feature roadmap...",icon:us,color:"bg-primary",bgColor:"bg-primary/20"},complete:{label:"Complete",description:"Roadmap generation complete!",icon:rt,color:"bg-success",bgColor:"bg-success/20"},error:{label:"Error",description:"Generation failed",icon:ct,color:"bg-destructive",bgColor:"bg-destructive/20"}},Zy=[{key:"analyzing",label:"Analyze"},{key:"discovering",label:"Discover"},{key:"generating",label:"Generate"}];function Vre({currentPhase:e,reducedMotion:t}){const n=o=>{const c=["analyzing","discovering","generating","complete"],l=c.indexOf(e),d=c.indexOf(o);return e==="error"?"error":e==="complete"?"complete":o===e?"active":d<l?"complete":"pending"},r=o=>o!=="active"?{opacity:1}:t?{opacity:1}:{opacity:[1,.6,1]},i=o=>{if(!(o!=="active"||t))return{duration:1.5,repeat:1/0,ease:"easeInOut"}};return s.jsx("div",{className:"flex items-center justify-center gap-1 mt-4",children:Zy.map((o,c)=>{const l=n(o.key);return s.jsxs("div",{className:"flex items-center",children:[s.jsxs(cn.div,{className:le("flex items-center gap-1 px-2 py-1 rounded text-xs font-medium",l==="complete"&&"bg-success/10 text-success",l==="active"&&"bg-primary/10 text-primary",l==="error"&&"bg-destructive/10 text-destructive",l==="pending"&&"bg-muted text-muted-foreground"),animate:r(l),transition:i(l),children:[l==="complete"&&s.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),o.label]}),c<Zy.length-1&&s.jsx("div",{className:le("w-4 h-px mx-1",n(Zy[c+1].key)!=="pending"?"bg-success/50":"bg-border")})]},o.key)})})}function Gre({generationStatus:e,className:t,onStop:n}){const{phase:r,progress:i,message:o,error:c}=e,l=Ure(),[d,h]=y.useState(!1),m=async()=>{if(!(!n||d)){h(!0);try{await n()}catch(N){console.error("Failed to stop generation:",N)}finally{h(!1)}}};if(r==="idle")return null;const f=$re[r],g=f.icon,x=r!=="complete"&&r!=="error",C=l?{}:{scale:[1,1.1,1],opacity:[1,.8,1]},_=l?{duration:0}:{duration:1.5,repeat:x?1/0:0,ease:"easeInOut"},b=l?{scale:1,opacity:1}:{scale:[1,1.5,1],opacity:[1,.5,1]},w=l?{duration:0}:{duration:1,repeat:1/0,ease:"easeInOut"},j=l?{x:"150%"}:{x:["-100%","400%"]},S=l?{duration:0}:{duration:1.5,repeat:1/0,ease:"easeInOut"};return s.jsxs("div",{className:le("space-y-4 p-6 rounded-xl bg-card border",t),children:[x&&n&&s.jsx("div",{className:"flex justify-end mb-2",children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"destructive",size:"sm",onClick:m,disabled:d,children:[s.jsx($c,{className:"h-4 w-4 mr-1"}),d?"Stopping...":"Stop"]})}),s.jsx(jt,{children:"Stop generation"})]})}),s.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(cn.div,{className:le("p-4 rounded-full",f.bgColor),animate:x?C:{},transition:_,children:s.jsx(g,{className:le("h-8 w-8",f.color.replace("bg-","text-"))})}),x&&s.jsx(cn.div,{className:le("absolute top-0 right-0 h-3 w-3 rounded-full",f.color),animate:b,transition:w})]}),s.jsx($d,{mode:"wait",children:s.jsxs(cn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:f.label}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),o&&o!==f.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o})]},r)})]}),x&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"text-xs font-medium",children:[i,"%"]})]}),s.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-border",children:i>0?s.jsx(cn.div,{className:le("h-full rounded-full",f.color),initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"}}):s.jsx(cn.div,{className:le("absolute h-full w-1/3 rounded-full",f.color),animate:j,transition:S})})]}),s.jsx(Vre,{currentPhase:r,reducedMotion:l}),s.jsx($d,{mode:"wait",children:c&&s.jsx(cn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"p-3 bg-destructive/10 rounded-md",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:c})]})},"error-display")})]})}function jE({open:e,onOpenChange:t,onAccept:n,onDecline:r}){const i=()=>{n(),t(!1)},o=()=>{r(),t(!1)};return s.jsx(po,{open:e,onOpenChange:t,children:s.jsxs(da,{className:"sm:max-w-[500px]",children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(gr,{className:"h-5 w-5 text-primary"}),"Enable Competitor Analysis?"]}),s.jsx(pa,{className:"text-muted-foreground",children:"Enhance your roadmap with insights from competitor products"})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"What competitor analysis does:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(bi,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),s.jsx("span",{children:"Identifies 3-5 main competitors based on your project type"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Jr,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),s.jsx("span",{children:"Searches app stores, forums, and social media for user feedback and pain points"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(gr,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),s.jsx("span",{children:"Suggests features that address gaps in competitor products"})]})]})]}),s.jsx("div",{className:"rounded-lg bg-warning/10 border border-warning/30 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Is,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Web searches will be performed"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This feature will perform web searches to gather competitor information. Your project name and type will be used in search queries. No code or sensitive data is shared."})]})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You can generate a roadmap without competitor analysis if you prefer. The roadmap will still be based on your project structure and best practices."})]}),s.jsxs(fa,{children:[s.jsx(go,{onClick:o,children:"No, Skip Analysis"}),s.jsx(pl,{onClick:i,children:"Yes, Enable Analysis"})]})]})})}function _E({open:e,onOpenChange:t,onUseExisting:n,onRunNew:r,onSkip:i,analysisDate:o}){const c=()=>{n(),t(!1)},l=()=>{r(),t(!1)},d=()=>{i(),t(!1)},h=m=>m?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(m):"recently";return s.jsx(po,{open:e,onOpenChange:t,children:s.jsxs(da,{className:"sm:max-w-[500px]",children:[s.jsxs(ha,{children:[s.jsxs(ma,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(gr,{className:"h-5 w-5 text-primary"}),"Competitor Analysis Options"]}),s.jsxs(pa,{className:"text-muted-foreground",children:["This project has an existing competitor analysis from ",h(o)]})]}),s.jsxs("div",{className:"py-4 space-y-3",children:[s.jsx("button",{onClick:c,className:"w-full rounded-lg bg-primary/10 border border-primary/30 p-4 text-left hover:bg-primary/20 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ta,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:["Use existing analysis",s.jsx("span",{className:"text-xs text-primary font-normal",children:"(Recommended)"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Reuse the competitor insights you already have. Faster and no additional web searches."})]})]})}),s.jsx("button",{onClick:l,className:"w-full rounded-lg bg-muted/50 border border-border p-4 text-left hover:bg-muted transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Dt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Run new analysis"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Perform fresh web searches to get updated competitor information. Takes longer."})]})]})}),s.jsx("button",{onClick:d,className:"w-full rounded-lg bg-muted/30 border border-border/50 p-4 text-left hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jr,{className:"h-5 w-5 text-muted-foreground/60 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Skip competitor analysis"}),s.jsx("p",{className:"text-xs text-muted-foreground/80 mt-1",children:"Generate roadmap without any competitor insights."})]})]})})]}),s.jsx(fa,{className:"sm:justify-start",children:s.jsx(te,{variant:"ghost",onClick:()=>t(!1),children:"Cancel"})})]})})}function qre({analysis:e,open:t,onOpenChange:n}){return e?s.jsx(sn,{open:t,onOpenChange:n,children:s.jsxs(Xs,{className:"max-w-4xl max-h-[85vh] flex flex-col",children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(gr,{className:"h-5 w-5 text-primary"}),"Competitor Analysis Results"]}),s.jsxs(fs,{children:["Analyzed ",e.competitors.length," competitors to identify market gaps and opportunities"]})]}),s.jsx(cs,{className:"flex-1 overflow-auto pr-4",style:{maxHeight:"calc(85vh - 120px)"},children:s.jsxs("div",{className:"space-y-6 pb-4",children:[e.competitors.map(r=>s.jsxs("div",{className:"rounded-lg border border-border p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:r.name}),r.marketPosition&&s.jsx(je,{variant:"secondary",className:"text-xs",children:r.marketPosition})]}),r.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]}),r.url&&s.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 text-sm ml-4",children:[s.jsx(Fs,{className:"h-3 w-3"}),"Visit"]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-warning"}),"Identified Pain Points (",r.painPoints.length,")"]}),s.jsx("div",{className:"space-y-2",children:r.painPoints.length===0?s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No pain points identified"}):r.painPoints.map(i=>s.jsx("div",{className:"rounded bg-muted/50 p-3 space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(je,{variant:i.severity==="high"?"destructive":i.severity==="medium"?"default":"secondary",className:"mt-0.5",children:i.severity}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:i.description}),i.source&&s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Source: ",s.jsx("span",{className:"italic",children:i.source})]})}),i.frequency&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Frequency: ",i.frequency]})}),i.opportunity&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Opportunity:"," ",s.jsx("span",{className:"font-medium text-foreground",children:i.opportunity})]})})]})]})},i.id))})]})]},r.id)),e.insightsSummary&&s.jsxs("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-4 space-y-3",children:[s.jsx("h4",{className:"text-sm font-semibold",children:"Market Insights Summary"}),e.insightsSummary.topPainPoints.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Top Pain Points:"}),s.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.topPainPoints.map((r,i)=>s.jsxs("li",{className:"text-muted-foreground",children:[" ",r]},i))})]}),e.insightsSummary.differentiatorOpportunities.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Differentiator Opportunities:"}),s.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.differentiatorOpportunities.map((r,i)=>s.jsxs("li",{className:"text-muted-foreground",children:[" ",r]},i))})]}),e.insightsSummary.marketTrends.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Market Trends:"}),s.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.marketTrends.map((r,i)=>s.jsxs("li",{className:"text-muted-foreground",children:[" ",r]},i))})]})]})]})})]})}):null}function Wre(e){let t=!1;const n=e.features.map(r=>{const i={...r};return r.status==="idea"&&(i.status="under_review",t=!0),r.source||(i.source={provider:"internal"},t=!0),i});return t?(console.log("[Roadmap] Migrated roadmap data to latest schema"),{...e,features:n,updatedAt:new Date}):e}const CE={phase:"idle",progress:0,message:""},Ss=xr(e=>({roadmap:null,competitorAnalysis:null,generationStatus:CE,currentProjectId:null,setRoadmap:t=>e({roadmap:t}),setCompetitorAnalysis:t=>e({competitorAnalysis:t}),setGenerationStatus:t=>e({generationStatus:t}),setCurrentProjectId:t=>e({currentProjectId:t}),updateFeatureStatus:(t,n)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(o=>o.id===t?{...o,status:n}:o);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),markFeatureDoneBySpecId:t=>e(n=>{if(!n.roadmap)return n;const r=n.roadmap.features.map(i=>i.linkedSpecId===t?{...i,status:"done"}:i);return{roadmap:{...n.roadmap,features:r,updatedAt:new Date}}}),updateFeatureLinkedSpec:(t,n)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(o=>o.id===t?{...o,linkedSpecId:n,status:"in_progress"}:o);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),deleteFeature:t=>e(n=>{if(!n.roadmap)return n;const r=n.roadmap.features.filter(i=>i.id!==t);return{roadmap:{...n.roadmap,features:r,updatedAt:new Date}}}),clearRoadmap:()=>e({roadmap:null,competitorAnalysis:null,generationStatus:CE,currentProjectId:null}),reorderFeatures:(t,n)=>e(r=>{if(!r.roadmap)return r;const i=n.map(l=>r.roadmap.features.find(d=>d.id===l)).filter(l=>l!==void 0),c=[...r.roadmap.features.filter(l=>l.phaseId!==t),...i];return{roadmap:{...r.roadmap,features:c,updatedAt:new Date}}}),updateFeaturePhase:(t,n)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(o=>o.id===t?{...o,phaseId:n}:o);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),addFeature:t=>{const n=`feature-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r={...t,id:n};return e(i=>i.roadmap?{roadmap:{...i.roadmap,features:[...i.roadmap.features,r],updatedAt:new Date}}:i),n}}));async function Kre(e){const t=Ss.getState();t.setCurrentProjectId(e);const n=await J.getRoadmapStatus(e);n.success&&n.data?.isRunning?t.setGenerationStatus({phase:"analyzing",progress:0,message:"Roadmap generation in progress..."}):t.setGenerationStatus({phase:"idle",progress:0,message:""});const r=await J.getRoadmap(e);if(r.success&&r.data){const i=Wre(r.data);t.setRoadmap(i),i!==r.data&&J.saveRoadmap(e,i).catch(o=>{console.error("[Roadmap] Failed to save migrated roadmap:",o)}),i.competitorAnalysis?t.setCompetitorAnalysis(i.competitorAnalysis):t.setCompetitorAnalysis(null)}else t.setRoadmap(null),t.setCompetitorAnalysis(null)}function rd(e,t,n){window.DEBUG&&console.log("[Roadmap] Starting generation:",{projectId:e,enableCompetitorAnalysis:t,refreshCompetitorAnalysis:n}),Ss.getState().setGenerationStatus({phase:"analyzing",progress:0,message:"Starting roadmap generation..."}),J.generateRoadmap(e,t,n)}function id(e,t,n){window.DEBUG&&console.log("[Roadmap] Starting refresh:",{projectId:e,enableCompetitorAnalysis:t,refreshCompetitorAnalysis:n}),Ss.getState().setGenerationStatus({phase:"analyzing",progress:0,message:"Refreshing roadmap..."}),J.refreshRoadmap(e,t,n)}async function Yre(e){const t=Ss.getState();window.DEBUG&&console.log("[Roadmap] Stop requested:",{projectId:e}),t.setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"});const n=await J.stopRoadmap(e);return window.DEBUG&&console.log("[Roadmap] Stop result:",{projectId:e,success:n.success}),n.success||console.log("[Roadmap] Process already stopped"),n.success}function Xre(e,t){return e?e.features.filter(n=>n.phaseId===t):[]}function Zre(e){if(!e)return{total:0,byPriority:{},byStatus:{},byComplexity:{}};const t={},n={},r={};return e.features.forEach(i=>{t[i.priority]=(t[i.priority]||0)+1,n[i.status]=(n[i.status]||0)+1,r[i.complexity]=(r[i.complexity]||0)+1}),{total:e.features.length,byPriority:t,byStatus:n,byComplexity:r}}const Qre=[{value:"low",labelKey:"addFeature.lowComplexity"},{value:"medium",labelKey:"addFeature.mediumComplexity"},{value:"high",labelKey:"addFeature.highComplexity"}],Jre=[{value:"low",labelKey:"addFeature.lowImpact"},{value:"medium",labelKey:"addFeature.mediumImpact"},{value:"high",labelKey:"addFeature.highImpact"}];function eie({phases:e,open:t,onOpenChange:n,onFeatureAdded:r,defaultPhaseId:i}){const{t:o}=rs("dialogs"),[c,l]=y.useState(""),[d,h]=y.useState(""),[m,f]=y.useState(""),[g,x]=y.useState("should"),[C,_]=y.useState(""),[b,w]=y.useState("medium"),[j,S]=y.useState("medium"),[N,T]=y.useState(!1),[E,D]=y.useState(null),A=Ss(F=>F.addFeature);y.useEffect(()=>{t&&(l(""),h(""),f(""),x("should"),_(i||(e.length>0?e[0].id:"")),w("medium"),S("medium"),D(null))},[t,i,e]);const P=async()=>{if(!c.trim()){D(o("addFeature.titleRequired"));return}if(!d.trim()){D(o("addFeature.descriptionRequired"));return}if(!C){D(o("addFeature.phaseRequired"));return}T(!0),D(null);try{const F=A({title:c.trim(),description:d.trim(),rationale:m.trim()||`User-created feature for ${c.trim()}`,priority:g,complexity:b,impact:j,phaseId:C,dependencies:[],status:"under_review",acceptanceCriteria:[],userStories:[],source:{provider:"internal"}}),U=Ss.getState().roadmap;if(U){const G=await J.saveRoadmap(U.projectId,U);if(!G.success)throw new Error(G.error||"Failed to save roadmap")}n(!1),r?.(F)}catch(F){D(F instanceof Error?F.message:o("addFeature.failedToAdd"))}finally{T(!1)}},M=()=>{N||n(!1)},B=c.trim().length>0&&d.trim().length>0&&C!=="";return s.jsx(sn,{open:t,onOpenChange:M,children:s.jsxs(Xs,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Jt,{children:[s.jsx(es,{className:"text-foreground",children:o("addFeature.title")}),s.jsx(fs,{children:o("addFeature.description")})]}),s.jsxs("div",{className:"space-y-5 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"add-feature-title",className:"text-sm font-medium text-foreground",children:[o("addFeature.featureTitle")," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Je,{id:"add-feature-title",placeholder:o("addFeature.featureTitlePlaceholder"),value:c,onChange:F=>l(F.target.value),disabled:N})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"add-feature-description",className:"text-sm font-medium text-foreground",children:[o("addFeature.featureDescription")," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(_i,{id:"add-feature-description",placeholder:o("addFeature.featureDescriptionPlaceholder"),value:d,onChange:F=>h(F.target.value),rows:3,disabled:N})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"add-feature-rationale",className:"text-sm font-medium text-foreground",children:[o("addFeature.rationale")," ",s.jsxs("span",{className:"text-muted-foreground font-normal",children:["(",o("addFeature.optional"),")"]})]}),s.jsx(_i,{id:"add-feature-rationale",placeholder:o("addFeature.rationalePlaceholder"),value:m,onChange:F=>f(F.target.value),rows:2,disabled:N})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(we,{htmlFor:"add-feature-phase",className:"text-sm font-medium text-foreground",children:[o("addFeature.phase")," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(gt,{value:C,onValueChange:_,disabled:N,children:[s.jsx(ft,{id:"add-feature-phase",children:s.jsx(xt,{placeholder:o("addFeature.selectPhase")})}),s.jsx(mt,{children:e.map(F=>s.jsxs(Qe,{value:F.id,children:[F.order,". ",F.name]},F.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"add-feature-priority",className:"text-sm font-medium text-foreground",children:o("addFeature.priority")}),s.jsxs(gt,{value:g,onValueChange:F=>x(F),disabled:N,children:[s.jsx(ft,{id:"add-feature-priority",children:s.jsx(xt,{placeholder:o("addFeature.selectPriority")})}),s.jsx(mt,{children:Object.entries(wh).map(([F,U])=>s.jsx(Qe,{value:F,children:U},F))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"add-feature-complexity",className:"text-sm font-medium text-foreground",children:o("addFeature.complexity")}),s.jsxs(gt,{value:b,onValueChange:F=>w(F),disabled:N,children:[s.jsx(ft,{id:"add-feature-complexity",children:s.jsx(xt,{placeholder:o("addFeature.selectComplexity")})}),s.jsx(mt,{children:Qre.map(({value:F,labelKey:U})=>s.jsx(Qe,{value:F,children:o(U)},F))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"add-feature-impact",className:"text-sm font-medium text-foreground",children:o("addFeature.impact")}),s.jsxs(gt,{value:j,onValueChange:F=>S(F),disabled:N,children:[s.jsx(ft,{id:"add-feature-impact",children:s.jsx(xt,{placeholder:o("addFeature.selectImpact")})}),s.jsx(mt,{children:Jre.map(({value:F,labelKey:U})=>s.jsx(Qe,{value:F,children:o(U)},F))})]})]})]}),E&&s.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:[s.jsx(Ys,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:E})]})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:M,disabled:N,children:o("addFeature.cancel")}),s.jsx(te,{onClick:P,disabled:N||!B,children:N?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),o("addFeature.adding")]}):o("addFeature.addFeature")})]})]})})}function tie({roadmap:e,competitorAnalysis:t,onAddFeature:n,onRefresh:r,onViewCompetitorAnalysis:i}){const o=Zre(e);return s.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ep,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"text-lg font-semibold",children:e.projectName}),s.jsx(je,{variant:"outline",children:e.status}),t&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(je,{variant:"secondary",className:"gap-1 cursor-pointer hover:bg-secondary/80 transition-colors",onClick:i,children:[s.jsx(gr,{className:"h-3 w-3"}),"Competitor Analysis"]})}),s.jsx(jt,{className:"max-w-md",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-semibold",children:"Click to view detailed analysis"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Analyzed ",t.competitors.length," competitors with "," ",t.competitors.reduce((c,l)=>c+l.painPoints.length,0)," pain points identified"]})]})})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-xl",children:e.vision})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(ys,{className:"h-4 w-4 mr-1"}),"Add Feature"]})}),s.jsx(jt,{children:"Add a new feature to the roadmap"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"outline",size:"icon",onClick:r,children:s.jsx(Dt,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Regenerate Roadmap"})]})]})]}),e.targetAudience&&s.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Target:"}),s.jsx("span",{className:"font-medium",children:e.targetAudience.primary})]}),e.targetAudience.secondary?.length>0&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs("div",{className:"text-muted-foreground cursor-help underline decoration-dotted",children:["+",e.targetAudience.secondary.length," more personas"]})}),s.jsx(jt,{className:"max-w-md",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Secondary Personas:"}),e.targetAudience.secondary.map(c=>s.jsxs("div",{className:"text-sm",children:[" ",c]},c))]})})]})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(FF,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold",children:o.total}),s.jsx("span",{className:"text-muted-foreground",children:" features"})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold",children:e.phases.length}),s.jsx("span",{className:"text-muted-foreground",children:" phases"})]})}),s.jsx("div",{className:"flex items-center gap-1",children:Object.entries(o.byPriority).map(([c,l])=>s.jsxs(je,{variant:"outline",className:`text-xs ${eu[c]}`,children:[l," ",c]},c))})]})]})}function sie({onGenerate:e}){return s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs(He,{className:"w-full max-w-lg p-8 text-center",children:[s.jsx(F0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Roadmap Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate an AI-powered roadmap that understands your project's target audience and creates a strategic feature plan."}),s.jsxs(te,{onClick:e,size:"lg",children:[s.jsx(us,{className:"h-4 w-4 mr-2"}),"Generate Roadmap"]})]})})}function nie({phase:e,features:t,isFirst:n,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:o}){const c=t.filter(d=>d.status==="done").length,l=t.length>0?c/t.length*100:0;return s.jsxs(He,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e.status==="completed"?"bg-success/10 text-success":e.status==="in_progress"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:e.status==="completed"?s.jsx(rt,{className:"h-4 w-4"}):s.jsx("span",{className:"text-sm font-semibold",children:e.order})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:e.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),s.jsx(je,{variant:e.status==="completed"?"default":"outline",children:e.status})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{children:[c,"/",t.length," features"]})]}),s.jsx(ao,{value:l,className:"h-2"})]}),e.milestones.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Milestones"}),s.jsx("div",{className:"space-y-2",children:e.milestones.map(d=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.status==="achieved"?s.jsx(rt,{className:"h-4 w-4 text-success"}):s.jsx(dl,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:d.status==="achieved"?"line-through text-muted-foreground":"",children:d.title})]},d.id))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium mb-2",children:["Features (",t.length,")"]}),s.jsxs("div",{className:"grid gap-2",children:[t.slice(0,5).map(d=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50 hover:bg-muted cursor-pointer transition-colors",onClick:()=>r(d),children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(je,{variant:"outline",className:`text-xs ${eu[d.priority]}`,children:d.priority}),s.jsx("span",{className:"text-sm truncate",children:d.title}),d.competitorInsightIds&&d.competitorInsightIds.length>0&&s.jsx(gr,{className:"h-3 w-3 text-primary flex-shrink-0"})]}),d.status==="done"?s.jsx(rt,{className:"h-4 w-4 text-success flex-shrink-0"}):d.linkedSpecId?s.jsxs(te,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:h=>{h.stopPropagation(),o(d.linkedSpecId)},children:[s.jsx(Fs,{className:"h-3 w-3 mr-1"}),"View Task"]}):s.jsxs(te,{variant:"ghost",size:"sm",className:"h-6 px-2 flex-shrink-0",onClick:h=>{h.stopPropagation(),i(d)},children:[s.jsx(ei,{className:"h-3 w-3 mr-1"}),"Build"]})]},d.id)),t.length>5&&s.jsxs("div",{className:"text-sm text-muted-foreground text-center py-1",children:["+",t.length-5," more features"]})]})]})]})}function rie({feature:e,onClick:t,onConvertToSpec:n,onGoToTask:r,hasCompetitorInsight:i=!1}){return s.jsx(He,{className:"p-4 hover:bg-muted/50 cursor-pointer transition-colors",onClick:t,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx(je,{variant:"outline",className:eu[e.priority],children:wh[e.priority]}),s.jsx(je,{variant:"outline",className:`text-xs ${Bd[e.complexity]}`,children:e.complexity}),s.jsxs(je,{variant:"outline",className:`text-xs ${ag[e.impact]}`,children:[e.impact," impact"]}),i&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(je,{variant:"outline",className:"text-xs text-primary border-primary/50",children:[s.jsx(gr,{className:"h-3 w-3 mr-1"}),"Competitor Insight"]})}),s.jsx(jt,{children:"This feature addresses competitor pain points"})]})]}),s.jsx("h3",{className:"font-medium",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),e.linkedSpecId?s.jsxs(te,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),r(e.linkedSpecId)},children:[s.jsx(Fs,{className:"h-3 w-3 mr-1"}),"Go to Task"]}):e.status!=="done"&&s.jsxs(te,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),n(e)},children:[s.jsx(ei,{className:"h-3 w-3 mr-1"}),"Build"]})]})})}function iie({feature:e,roadmap:t,onClick:n,onConvertToSpec:r,onGoToTask:i}){const{attributes:o,listeners:c,setNodeRef:l,transform:d,transition:h,isDragging:m,isOver:f}=J0({id:e.id}),g={transform:Si.Transform.toString(d),transition:h,zIndex:m?50:void 0},x=!!e.competitorInsightIds&&e.competitorInsightIds.length>0,C=t?.phases.find(b=>b.id===e.phaseId)?.name,_=e.source?.provider&&e.source.provider!=="internal";return s.jsx("div",{ref:l,style:g,className:le("touch-none transition-all duration-200",m&&"dragging-placeholder opacity-40 scale-[0.98]",f&&!m&&"ring-2 ring-primary/30 ring-offset-2 ring-offset-background rounded-xl"),...o,...c,children:s.jsxs(He,{className:"p-3 hover:bg-muted/50 cursor-pointer transition-colors",onClick:n,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",eu[e.priority]),children:wh[e.priority]}),C&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(je,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-muted-foreground border-muted-foreground/30",children:[s.jsx(tH,{className:"h-2.5 w-2.5 mr-0.5"}),C.length>12?`${C.slice(0,12)}...`:C]})}),s.jsxs(jt,{children:["Phase: ",C]})]}),x&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(je,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-primary border-primary/50",children:s.jsx(gr,{className:"h-2.5 w-2.5"})})}),s.jsx(jt,{children:"This feature addresses competitor pain points"})]})]}),s.jsx("h3",{className:"font-medium text-sm leading-snug line-clamp-2",children:e.title})]}),s.jsx("div",{className:"shrink-0",children:e.linkedSpecId?s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:b=>{b.stopPropagation(),i?.(e.linkedSpecId)},children:[s.jsx(Fs,{className:"h-3 w-3 mr-1"}),"Task"]}):e.status!=="done"&&r&&s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:b=>{b.stopPropagation(),r(e)},children:[s.jsx(ei,{className:"h-3 w-3 mr-1"}),"Build"]})})]}),s.jsx("p",{className:"mt-1.5 text-xs text-muted-foreground line-clamp-2",children:e.description}),s.jsxs("div",{className:"mt-2 flex items-center gap-1.5 flex-wrap",children:[s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",Bd[e.complexity]),children:e.complexity}),s.jsx(je,{variant:"outline",className:le("text-[10px] px-1.5 py-0",ag[e.impact]),children:e.impact}),e.votes!==void 0&&e.votes>0&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(je,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-muted-foreground",children:[s.jsx(a7,{className:"h-2.5 w-2.5 mr-0.5"}),e.votes]})}),s.jsxs(jt,{children:[e.votes," votes from user feedback"]})]}),_&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(je,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-orange-500 border-orange-500/30",children:e.source?.provider==="canny"?"Canny":"External"})}),s.jsxs(jt,{children:["Imported from ",e.source?.provider]})]})]})]})})}function aie(e){switch(e){case"Eye":return s.jsx(zs,{className:"h-3.5 w-3.5"});case"Calendar":return s.jsx(HA,{className:"h-3.5 w-3.5"});case"Play":return s.jsx(ei,{className:"h-3.5 w-3.5"});case"Check":return s.jsx(ts,{className:"h-3.5 w-3.5"});default:return null}}function oie({column:e,features:t,roadmap:n,onFeatureClick:r,onConvertToSpec:i,onGoToTask:o,isOver:c}){const{setNodeRef:l}=Bp({id:e.id}),d=t.map(h=>h.id);return s.jsxs("div",{ref:l,className:le("flex min-w-80 w-80 shrink-0 flex-col rounded-xl border border-white/5 bg-linear-to-b from-secondary/30 to-transparent backdrop-blur-sm transition-all duration-200",e.color,"border-t-2",c&&"drop-zone-highlight"),children:[s.jsx("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:le("w-6 h-6 rounded-full flex items-center justify-center",e.id==="done"?"bg-success/10 text-success":e.id==="in_progress"?"bg-primary/10 text-primary":e.id==="planned"?"bg-info/10 text-info":"bg-muted text-muted-foreground"),children:aie(e.icon)}),s.jsx("h2",{className:"font-semibold text-sm text-foreground",children:e.label}),s.jsx("span",{className:"column-count-badge",children:t.length})]})}),s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(cs,{className:"h-full px-3 pb-3 pt-2",children:s.jsx(Q0,{items:d,strategy:yT,children:s.jsx("div",{className:"space-y-3 min-h-[120px]",children:t.length===0?s.jsx("div",{className:le("empty-column-dropzone flex flex-col items-center justify-center py-6",c&&"active"),children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center mb-2",children:s.jsx(ys,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Drop here"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Cb,{className:"h-6 w-6 text-muted-foreground/50"}),s.jsx("span",{className:"mt-2 text-sm font-medium text-muted-foreground/70",children:"No features"}),s.jsx("span",{className:"mt-0.5 text-xs text-muted-foreground/50",children:"Drag features here"})]})}):t.map(h=>s.jsx(iie,{feature:h,roadmap:n,onClick:()=>r(h),onConvertToSpec:i,onGoToTask:o},h.id))})})})})]})}function lie({roadmap:e,onFeatureClick:t,onConvertToSpec:n,onGoToTask:r,onSave:i}){const[o,c]=y.useState(null),[l,d]=y.useState(null),h=Ss(w=>w.updateFeatureStatus),m=Rp(Dc(Wc,{activationConstraint:{distance:8}}),Dc(Mp,{coordinateGetter:jT})),f=y.useMemo(()=>{const w={};return om.forEach(j=>{w[j.id]=e.features.filter(S=>S.status===j.id)}),w},[e.features]),g=y.useMemo(()=>om.map(w=>w.id),[]),x=w=>{const{active:j}=w,S=e.features.find(N=>N.id===j.id);S&&c(S)},C=w=>{const{over:j}=w;if(!j){d(null);return}const S=j.id;if(g.includes(S)){d(S);return}const N=e.features.find(T=>T.id===S);N&&d(N.status)},_=w=>{const{active:j,over:S}=w;if(c(null),d(null),!S)return;const N=j.id,T=S.id,E=e.features.find(P=>P.id===N);if(!E)return;let D;if(g.includes(T))D=T;else{const P=e.features.find(M=>M.id===T);if(!P)return;D=P.status}E.status!==D&&(h(N,D),i?.())},b=w=>om.find(S=>S.id===w.status)?.label||"Unknown Status";return s.jsx("div",{className:"flex h-full flex-col",children:s.jsxs(Op,{sensors:m,collisionDetection:K0,onDragStart:x,onDragOver:C,onDragEnd:_,children:[s.jsx("div",{className:"flex flex-1 gap-4 overflow-x-auto p-6",children:om.map(w=>s.jsx(oie,{column:w,features:f[w.id]||[],roadmap:e,onFeatureClick:t,onConvertToSpec:n,onGoToTask:r,isOver:l===w.id},w.id))}),s.jsx(zp,{children:o?s.jsx("div",{className:"drag-overlay-card",children:s.jsxs(He,{className:"p-4 w-80 shadow-2xl",children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx(je,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:b(o)})}),s.jsx("div",{className:"font-medium",children:o.title}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:o.description})]})}):null})]})})}function cie(e,t){if(!t||!e.competitorInsightIds||e.competitorInsightIds.length===0)return[];const n=[];for(const r of t.competitors)for(const i of r.painPoints)e.competitorInsightIds.includes(i.id)&&n.push(i);return n}function NE(e){return!!e.competitorInsightIds&&e.competitorInsightIds.length>0}function uie({roadmap:e,activeTab:t,onTabChange:n,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:o,onSave:c}){return s.jsxs(mg,{value:t,onValueChange:n,className:"h-full flex flex-col",children:[s.jsxs(Eh,{className:"shrink-0 mx-4 mt-4",children:[s.jsx(Cn,{value:"kanban",children:"Kanban"}),s.jsx(Cn,{value:"phases",children:"Phases"}),s.jsx(Cn,{value:"features",children:"All Features"}),s.jsx(Cn,{value:"priorities",children:"By Priority"})]}),s.jsx(Pr,{value:"kanban",className:"flex-1 overflow-hidden",children:s.jsx(lie,{roadmap:e,onFeatureClick:r,onConvertToSpec:i,onGoToTask:o,onSave:c})}),s.jsx(Pr,{value:"phases",className:"flex-1 overflow-auto p-4",children:s.jsx("div",{className:"space-y-6",children:e.phases.map((l,d)=>s.jsx(nie,{phase:l,features:Xre(e,l.id),isFirst:d===0,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:o},l.id))})}),s.jsx(Pr,{value:"features",className:"flex-1 overflow-auto p-4",children:s.jsx("div",{className:"grid gap-3",children:e.features.map(l=>s.jsx(rie,{feature:l,onClick:()=>r(l),onConvertToSpec:i,onGoToTask:o,hasCompetitorInsight:NE(l)},l.id))})}),s.jsx(Pr,{value:"priorities",className:"flex-1 overflow-auto p-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["must","should","could","wont"].map(l=>{const d=e.features.filter(h=>h.priority===l);return s.jsxs(He,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(je,{variant:"outline",className:eu[l],children:wh[l]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.length," features"]})]}),s.jsx("div",{className:"space-y-2",children:d.map(h=>s.jsxs("div",{className:"p-2 rounded-md bg-muted/50 hover:bg-muted cursor-pointer transition-colors",onClick:()=>r(h),children:[s.jsx("div",{className:"font-medium text-sm",children:h.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx(je,{variant:"outline",className:`text-xs ${Bd[h.complexity]}`,children:h.complexity}),s.jsxs(je,{variant:"outline",className:`text-xs ${ag[h.impact]}`,children:[h.impact," impact"]}),NE(h)&&s.jsxs(je,{variant:"outline",className:"text-xs text-primary border-primary/50",children:[s.jsx(gr,{className:"h-3 w-3 mr-1"}),"Insight"]})]})]},h.id))})]},l)})})})]})}function die({feature:e,onClose:t,onConvertToSpec:n,onGoToTask:r,onDelete:i,competitorInsights:o=[]}){const[c,l]=y.useState(!1),d=()=>{i&&(i(e.id),t())};return s.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-card border-l border-border shadow-lg flex flex-col z-50",children:[s.jsx("div",{className:"shrink-0 p-4 border-b border-border electron-no-drag",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsx(je,{variant:"outline",className:eu[e.priority],children:wh[e.priority]}),s.jsx(je,{variant:"outline",className:`${Bd[e.complexity]}`,children:e.complexity})]}),s.jsx("h2",{className:"font-semibold truncate",children:e.title})]}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0 relative z-10 pointer-events-auto",children:[s.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:h=>{h.stopPropagation(),l(!0)},children:s.jsx(Br,{className:"h-4 w-4"})}),s.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:t,children:s.jsx(vs,{className:"h-4 w-4"})})]})]})}),s.jsx(cs,{className:"flex-1",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Rationale"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.rationale})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Bd[e.complexity]}`,children:e.complexity}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${ag[e.impact]}`,children:e.impact}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Impact"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:e.dependencies.length}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Dependencies"})]})]}),e.userStories.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4"}),"User Stories"]}),s.jsx("div",{className:"space-y-2",children:e.userStories.map((h,m)=>s.jsxs("div",{className:"text-sm p-2 bg-muted/50 rounded-md italic",children:['"',h,'"']},m))})]}),e.acceptanceCriteria.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(rt,{className:"h-4 w-4"}),"Acceptance Criteria"]}),s.jsx("ul",{className:"space-y-1",children:e.acceptanceCriteria.map((h,m)=>s.jsxs("li",{className:"text-sm flex items-start gap-2",children:[s.jsx(dl,{className:"h-3 w-3 mt-1.5 shrink-0"}),s.jsx("span",{children:h})]},m))})]}),e.dependencies.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(L0,{className:"h-4 w-4"}),"Dependencies"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.dependencies.map(h=>s.jsx(je,{variant:"outline",className:"text-xs",children:h},h))})]}),o.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(gr,{className:"h-4 w-4 text-primary"}),"Addresses Competitor Pain Points"]}),s.jsx("div",{className:"space-y-2",children:o.map(h=>s.jsxs("div",{className:"p-2 bg-primary/5 border border-primary/20 rounded-md",children:[s.jsx("p",{className:"text-sm text-foreground",children:h.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(je,{variant:"outline",className:"text-xs",children:h.source}),s.jsxs(je,{variant:"outline",className:`text-xs ${h.severity==="high"?"text-red-500 border-red-500/50":h.severity==="medium"?"text-yellow-500 border-yellow-500/50":"text-green-500 border-green-500/50"}`,children:[h.severity," severity"]})]})]},h.id))})]})]})}),e.linkedSpecId?s.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:s.jsxs(te,{className:"w-full",onClick:()=>r(e.linkedSpecId),children:[s.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Go to Task"]})}):e.status!=="done"&&s.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:s.jsxs(te,{className:"w-full",onClick:()=>n(e),children:[s.jsx(ai,{className:"h-4 w-4 mr-2"}),"Convert to Auto-Build Task"]})}),c&&s.jsx("div",{className:"absolute inset-0 bg-background/95 flex items-center justify-center p-6 z-10",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:s.jsx(Br,{className:"h-6 w-6 text-destructive"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Delete Feature?"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:['This will permanently remove "',e.title,'" from your roadmap.']})]}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx(te,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(te,{variant:"destructive",onClick:d,children:"Delete"})]})]})})]})}function hie(e){const t=Ss(i=>i.roadmap),n=Ss(i=>i.competitorAnalysis),r=Ss(i=>i.generationStatus);return y.useEffect(()=>{Kre(e)},[e]),{roadmap:t,competitorAnalysis:n,generationStatus:r}}function fie(){const e=Ss(r=>r.updateFeatureLinkedSpec),t=Ks(r=>r.addTask);return{convertFeatureToSpec:async(r,i,o,c)=>{const l=await J.convertFeatureToSpec(r,i.id);l.success&&l.data&&(t(l.data),e(i.id,l.data.specId),o?.id===i.id&&c({...i,linkedSpecId:l.data.specId,status:"in_progress"}))}}}function mie(e){return{saveRoadmap:async()=>{const n=Ss.getState().roadmap;if(n)try{await J.saveRoadmap(e,n)}catch(r){console.error("Failed to save roadmap:",r)}}}}function pie(e){const t=Ss(r=>r.deleteFeature);return{deleteFeature:async r=>{t(r);const i=Ss.getState().roadmap;if(i)try{await J.saveRoadmap(e,i)}catch(o){console.error("Failed to save roadmap after delete:",o)}}}}function gie(e){const t=Ss(w=>w.competitorAnalysis),[n,r]=y.useState(null),[i,o]=y.useState(!1),[c,l]=y.useState(!1),d=!!t,h=()=>{r("generate"),d?l(!0):o(!0)},m=()=>{r("refresh"),d?l(!0):o(!0)},f=()=>{n==="generate"?rd(e,!0):n==="refresh"&&id(e,!0),r(null)},g=()=>{n==="generate"?rd(e,!1):n==="refresh"&&id(e,!1),r(null)},x=()=>{n==="generate"?rd(e,!0,!1):n==="refresh"&&id(e,!0,!1),r(null)},C=()=>{n==="generate"?rd(e,!0,!0):n==="refresh"&&id(e,!0,!0),r(null)},_=()=>{n==="generate"?rd(e,!1):n==="refresh"&&id(e,!1),r(null)},b=async()=>{await Yre(e)};return{pendingAction:n,hasExistingAnalysis:d,competitorAnalysisDate:t?.createdAt,showExistingAnalysisDialog:c,setShowExistingAnalysisDialog:l,handleUseExistingAnalysis:x,handleRunNewAnalysis:C,handleSkipAnalysis:_,showCompetitorDialog:i,setShowCompetitorDialog:o,handleGenerate:h,handleRefresh:m,handleCompetitorDialogAccept:f,handleCompetitorDialogDecline:g,handleStop:b}}function xie({projectId:e,onGoToTask:t}){const[n,r]=y.useState(null),[i,o]=y.useState("kanban"),[c,l]=y.useState(!1),[d,h]=y.useState(!1),{roadmap:m,competitorAnalysis:f,generationStatus:g}=hie(e),{convertFeatureToSpec:x}=fie(),{saveRoadmap:C}=mie(e),{deleteFeature:_}=pie(e),{competitorAnalysisDate:b,showExistingAnalysisDialog:w,setShowExistingAnalysisDialog:j,handleUseExistingAnalysis:S,handleRunNewAnalysis:N,handleSkipAnalysis:T,showCompetitorDialog:E,setShowCompetitorDialog:D,handleGenerate:A,handleRefresh:P,handleCompetitorDialogAccept:M,handleCompetitorDialogDecline:B,handleStop:F}=gie(e),U=async $=>{await x(e,$,n,r)},G=$=>{t&&t($)};return g.phase!=="idle"&&g.phase!=="complete"?s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx(Gre,{generationStatus:g,className:"w-full max-w-md",onStop:F})}):m?s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(tie,{roadmap:m,competitorAnalysis:f,onAddFeature:()=>l(!0),onRefresh:P,onViewCompetitorAnalysis:()=>h(!0)}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(uie,{roadmap:m,activeTab:i,onTabChange:o,onFeatureSelect:r,onConvertToSpec:U,onGoToTask:G,onSave:C})}),n&&s.jsx(die,{feature:n,onClose:()=>r(null),onConvertToSpec:U,onGoToTask:G,onDelete:_,competitorInsights:cie(n,f)}),s.jsx(jE,{open:E,onOpenChange:D,onAccept:M,onDecline:B}),s.jsx(_E,{open:w,onOpenChange:j,onUseExisting:S,onRunNew:N,onSkip:T,analysisDate:b}),s.jsx(qre,{analysis:f,open:d,onOpenChange:h}),s.jsx(eie,{phases:m.phases,open:c,onOpenChange:l})]}):s.jsxs(s.Fragment,{children:[s.jsx(sie,{onGenerate:A}),s.jsx(jE,{open:E,onOpenChange:D,onAccept:M,onDecline:B}),s.jsx(_E,{open:w,onOpenChange:j,onUseExisting:S,onRunNew:N,onSkip:T,analysisDate:b})]})}const Ag=xr(e=>({projectIndex:null,indexLoading:!1,indexError:null,memoryStatus:null,memoryState:null,memoryLoading:!1,memoryError:null,recentMemories:[],memoriesLoading:!1,searchResults:[],searchLoading:!1,searchQuery:"",setProjectIndex:t=>e({projectIndex:t}),setIndexLoading:t=>e({indexLoading:t}),setIndexError:t=>e({indexError:t}),setMemoryStatus:t=>e({memoryStatus:t}),setMemoryState:t=>e({memoryState:t}),setMemoryLoading:t=>e({memoryLoading:t}),setMemoryError:t=>e({memoryError:t}),setRecentMemories:t=>e({recentMemories:t}),setMemoriesLoading:t=>e({memoriesLoading:t}),setSearchResults:t=>e({searchResults:t}),setSearchLoading:t=>e({searchLoading:t}),setSearchQuery:t=>e({searchQuery:t}),clearAll:()=>e({projectIndex:null,indexLoading:!1,indexError:null,memoryStatus:null,memoryState:null,memoryLoading:!1,memoryError:null,recentMemories:[],memoriesLoading:!1,searchResults:[],searchLoading:!1,searchQuery:""})}));async function vie(e){const t=Ag.getState();t.setIndexLoading(!0),t.setMemoryLoading(!0),t.setIndexError(null),t.setMemoryError(null);try{const n=await J.getProjectContext(e);n.success&&n.data?(t.setProjectIndex(n.data.projectIndex),t.setMemoryStatus(n.data.memoryStatus),t.setMemoryState(n.data.memoryState),t.setRecentMemories(n.data.recentMemories||[])):t.setIndexError(n.error||"Failed to load project context")}catch(n){t.setIndexError(n instanceof Error?n.message:"Unknown error")}finally{t.setIndexLoading(!1),t.setMemoryLoading(!1)}}async function yie(e){const t=Ag.getState();t.setIndexLoading(!0),t.setIndexError(null);try{const n=await J.refreshProjectIndex(e);n.success&&n.data?t.setProjectIndex(n.data):t.setIndexError(n.error||"Failed to refresh project index")}catch(n){t.setIndexError(n instanceof Error?n.message:"Unknown error")}finally{t.setIndexLoading(!1)}}async function bie(e,t){const n=Ag.getState();if(n.setSearchQuery(t),!t.trim()){n.setSearchResults([]);return}n.setSearchLoading(!0);try{const r=await J.searchMemories(e,t);r.success&&r.data?n.setSearchResults(r.data):n.setSearchResults([])}catch{n.setSearchResults([])}finally{n.setSearchLoading(!1)}}function wie(e){y.useEffect(()=>{e&&vie(e)},[e])}function Sie(e){return async()=>{await yie(e)}}function jie(e){return async t=>{t.trim()&&await bie(e,t)}}const _ie={backend:KA,frontend:Jr,worker:r8,scraper:I0,library:Np,proxy:bn,unknown:ms},Cie={backend:"bg-blue-500/10 text-blue-400 border-blue-500/30",frontend:"bg-purple-500/10 text-purple-400 border-purple-500/30",worker:"bg-amber-500/10 text-amber-400 border-amber-500/30",scraper:"bg-green-500/10 text-green-400 border-green-500/30",library:"bg-gray-500/10 text-gray-400 border-gray-500/30",proxy:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",unknown:"bg-muted text-muted-foreground border-muted"},kE={session_insight:Ni,codebase_discovery:Qa,codebase_map:Qa,pattern:I0,gotcha:Is};function Nie({environment:e}){const[t,n]=y.useState(!1);return!e||e.detected_count===0?null:s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-3 w-3"}),"Environment Variables (",e.detected_count,")"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsx(wo,{className:"mt-2 space-y-1.5",children:Object.entries(e.variables).slice(0,10).map(([r,i])=>s.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[s.jsx(je,{variant:i.sensitive?"destructive":"outline",className:"text-xs shrink-0",children:i.type}),s.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r}),i.required&&s.jsx("span",{className:"text-orange-500 shrink-0",children:"*"})]},r))})]})}function kie({api:e}){const[t,n]=y.useState(!1);return!e||e.total_routes===0?null:s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(OH,{className:"h-3 w-3"}),"API Routes (",e.total_routes,")"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsx(wo,{className:"mt-2 space-y-1.5",children:e.routes.slice(0,10).map((r,i)=>s.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[s.jsx("div",{className:"flex gap-1 shrink-0",children:r.methods.map(o=>s.jsx(je,{variant:"secondary",className:"text-xs",children:o},o))}),s.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r.path}),r.requires_auth&&s.jsx(zm,{className:"h-3 w-3 text-orange-500 shrink-0"})]},i))})]})}function Eie({database:e}){const[t,n]=y.useState(!1);return!e||e.total_models===0?null:s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hl,{className:"h-3 w-3"}),"Database Models (",e.total_models,")"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsx(wo,{className:"mt-2 space-y-1.5",children:e.model_names.slice(0,10).map(r=>{const i=e.models[r];return s.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[s.jsx(je,{variant:"outline",className:"text-xs shrink-0",children:i.orm}),s.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r}),s.jsxs("span",{className:"text-muted-foreground shrink-0 text-xs",children:[Object.keys(i.fields).length," fields"]})]},r)})})]})}function Aie({services:e}){const[t,n]=y.useState(!1);return!e||!Object.values(e).some(r=>r&&r.length>0)?null:s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(KA,{className:"h-3 w-3"}),"External Services"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsxs(wo,{className:"mt-2 space-y-2",children:[e.databases&&e.databases.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Databases"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.databases.map((r,i)=>s.jsxs(je,{variant:"secondary",className:"text-xs",children:[s.jsx(VA,{className:"h-3 w-3 mr-1"}),r.type||r.client]},i))})]}),e.email&&e.email.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Email"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.email.map((r,i)=>s.jsxs(je,{variant:"secondary",className:"text-xs",children:[s.jsx(hH,{className:"h-3 w-3 mr-1"}),r.provider||r.client]},i))})]}),e.payments&&e.payments.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Payments"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.payments.map((r,i)=>s.jsxs(je,{variant:"secondary",className:"text-xs",children:[s.jsx(c8,{className:"h-3 w-3 mr-1"}),r.provider||r.client]},i))})]}),e.cache&&e.cache.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Cache"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.cache.map((r,i)=>s.jsxs(je,{variant:"secondary",className:"text-xs",children:[s.jsx(ai,{className:"h-3 w-3 mr-1"}),r.type||r.client]},i))})]})]})]})}function Tie({monitoring:e}){const[t,n]=y.useState(!1);return e?s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zA,{className:"h-3 w-3"}),"Monitoring"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsxs(wo,{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.metrics_endpoint&&s.jsxs("div",{children:["Metrics: ",s.jsx("code",{className:"text-xs",children:e.metrics_endpoint})," (",e.metrics_type,")"]}),e.health_checks&&e.health_checks.length>0&&s.jsxs("div",{children:["Health: ",e.health_checks.join(", ")]})]})]}):null}function Die({dependencies:e}){const[t,n]=y.useState(!1);return!e||e.length===0?null:s.jsxs(yo,{open:t,onOpenChange:n,className:"border-t border-border pt-3",children:[s.jsxs(bo,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Np,{className:"h-3 w-3"}),"Dependencies (",e.length,")"]}),t?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})]}),s.jsx(wo,{className:"mt-2",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.slice(0,20).map(r=>s.jsx(je,{variant:"outline",className:"text-xs font-mono",children:r},r)),e.length>20&&s.jsxs(je,{variant:"secondary",className:"text-xs",children:["+",e.length-20," more"]})]})})]})}function Rie({name:e,service:t}){const n=_ie[t.type||"unknown"],r=Cie[t.type||"unknown"];return s.jsxs(He,{className:"overflow-hidden",children:[s.jsxs(In,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(On,{className:"text-base flex items-center gap-2",children:[s.jsx(n,{className:"h-4 w-4"}),e]}),s.jsx(je,{variant:"outline",className:le("capitalize text-xs",r),children:t.type||"unknown"})]}),t.path&&s.jsx(Mw,{className:"font-mono text-xs truncate",children:t.path})]}),s.jsxs(pt,{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[t.language&&s.jsx(je,{variant:"secondary",className:"text-xs",children:t.language}),t.framework&&s.jsx(je,{variant:"secondary",className:"text-xs",children:t.framework}),t.package_manager&&s.jsx(je,{variant:"outline",className:"text-xs",children:t.package_manager}),t.build_tool&&s.jsx(je,{variant:"outline",className:"text-xs",children:t.build_tool})]}),s.jsxs("div",{className:"grid gap-2 text-xs",children:[t.entry_point&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ms,{className:"h-3 w-3 shrink-0"}),s.jsx("span",{className:"truncate font-mono",children:t.entry_point})]}),t.testing&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ta,{className:"h-3 w-3 shrink-0"}),s.jsxs("span",{children:["Testing: ",t.testing]})]}),t.orm&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(hl,{className:"h-3 w-3 shrink-0"}),s.jsxs("span",{children:["ORM: ",t.orm]})]}),t.default_port&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Jr,{className:"h-3 w-3 shrink-0"}),s.jsxs("span",{children:["Port: ",t.default_port]})]}),t.styling&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(I0,{className:"h-3 w-3 shrink-0"}),s.jsxs("span",{children:["Styling: ",t.styling]})]}),t.state_management&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Np,{className:"h-3 w-3 shrink-0"}),s.jsxs("span",{children:["State: ",t.state_management]})]})]}),s.jsx(Nie,{environment:t.environment}),s.jsx(kie,{api:t.api}),s.jsx(Eie,{database:t.database}),s.jsx(Aie,{services:t.services}),s.jsx(Tie,{monitoring:t.monitoring}),t.dependencies&&s.jsx(Die,{dependencies:t.dependencies}),t.key_directories&&Object.keys(t.key_directories).length>0&&s.jsxs("div",{className:"pt-2 border-t border-border",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Key Directories"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(t.key_directories).slice(0,6).map(([i,o])=>s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(je,{variant:"outline",className:"text-xs font-mono cursor-help",children:i})}),s.jsx(jt,{children:o.purpose})]},i))})]})]})]})}function qr({label:e,value:t}){return s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:e}),s.jsx("p",{className:"text-sm font-medium",children:t})]})}function Pie({projectIndex:e,indexLoading:t,indexError:n,onRefresh:r}){return s.jsx(cs,{className:"h-full",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Project Structure"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-discovered knowledge about your codebase"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",onClick:r,disabled:t,children:[s.jsx(Dt,{className:le("h-4 w-4 mr-2",t&&"animate-spin")}),"Refresh"]})}),s.jsx(jt,{children:"Re-analyze project structure"})]})]}),n&&s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive",children:[s.jsx(ct,{className:"h-5 w-5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Failed to load project index"}),s.jsx("p",{className:"text-sm opacity-80",children:n})]})]}),t&&!e&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Dt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!t&&!e&&!n&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Qa,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No Project Index Found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-sm",children:"Click the Refresh button to analyze your project structure and create an index."}),s.jsxs(te,{onClick:r,className:"mt-4",children:[s.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Analyze Project"]})]}),e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsx(On,{className:"text-base",children:"Overview"})}),s.jsxs(pt,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(je,{variant:"outline",className:"capitalize",children:e.project_type}),Object.keys(e.services).length>0&&s.jsxs(je,{variant:"secondary",children:[Object.keys(e.services).length," service",Object.keys(e.services).length!==1?"s":""]})]}),s.jsx("p",{className:"text-sm text-muted-foreground font-mono truncate",children:e.project_root})]})]}),Object.keys(e.services).length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Services"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(e.services).map(([i,o])=>s.jsx(Rie,{name:i,service:o},i))})]}),Object.keys(e.infrastructure).length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Infrastructure"}),s.jsx(He,{children:s.jsx(pt,{className:"pt-6",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.infrastructure.docker_compose&&s.jsx(qr,{label:"Docker Compose",value:e.infrastructure.docker_compose}),e.infrastructure.ci&&s.jsx(qr,{label:"CI/CD",value:e.infrastructure.ci}),e.infrastructure.deployment&&s.jsx(qr,{label:"Deployment",value:e.infrastructure.deployment}),e.infrastructure.docker_services&&e.infrastructure.docker_services.length>0&&s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Docker Services"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.infrastructure.docker_services.map(i=>s.jsx(je,{variant:"secondary",className:"text-xs",children:i},i))})]})]})})})]}),Object.keys(e.conventions).length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Conventions"}),s.jsx(He,{children:s.jsx(pt,{className:"pt-6",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.conventions.python_linting&&s.jsx(qr,{label:"Python Linting",value:e.conventions.python_linting}),e.conventions.js_linting&&s.jsx(qr,{label:"JS Linting",value:e.conventions.js_linting}),e.conventions.formatting&&s.jsx(qr,{label:"Formatting",value:e.conventions.formatting}),e.conventions.git_hooks&&s.jsx(qr,{label:"Git Hooks",value:e.conventions.git_hooks}),e.conventions.typescript&&s.jsx(qr,{label:"TypeScript",value:"Enabled"})]})})})]})]})]})})}function Mie(e){try{return new Date(e).toLocaleString()}catch{return e}}function Lie(e){try{return JSON.parse(e)}catch{try{const t=JSON.parse(e);if(typeof t=="object")return t}catch{return null}return null}}function Xi({icon:e,title:t,count:n}){return s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(e,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:t}),n!==void 0&&n>0&&s.jsx(je,{variant:"secondary",className:"text-xs px-1.5 py-0",children:n})]})}function ad({children:e,variant:t="default"}){const n=t==="success"?"text-success":t==="error"?"text-destructive":"text-muted-foreground";return s.jsx("li",{className:`text-sm ${n} py-1 pl-4 relative before:content-[''] before:absolute before:left-0 before:text-muted-foreground/50`,children:e})}function Iie({memory:e}){const t=kE[e.type]||kE.session_insight,[n,r]=y.useState(!1),i=y.useMemo(()=>Lie(e.content),[e.content]),o=y.useMemo(()=>{if(!i)return!1;const d=i.discoveries||{};return(i.what_worked?.length??0)>0||(i.what_failed?.length??0)>0||(i.recommendations_for_next_session?.length??0)>0||(d.patterns_discovered?.length??0)>0||(d.gotchas_discovered?.length??0)>0||(d.file_insights?.length??0)>0||(d.changed_files?.length??0)>0||d.approach_outcome?.approach_used},[i]),c=e.session_number?`Session #${e.session_number}`:i?.session_number?`Session #${i.session_number}`:null,l=i?.spec_id;return s.jsx(He,{className:"bg-muted/30 border-border/50 hover:border-border transition-colors",children:s.jsxs(pt,{className:"pt-4 pb-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 rounded-lg bg-accent/10",children:s.jsx(t,{className:"h-4 w-4 text-accent"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(je,{variant:"outline",className:"text-xs capitalize font-medium",children:e.type.replace(/_/g," ")}),c&&s.jsx("span",{className:"text-sm font-medium text-foreground",children:c})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Ci,{className:"h-3 w-3"}),Mie(e.timestamp)]}),l&&s.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",title:l,children:l})]})]})]}),o&&s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>r(!n),className:"shrink-0 gap-1",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"h-4 w-4"}),"Collapse"]}):s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"h-4 w-4"}),"Expand"]})})]}),n&&i&&s.jsxs("div",{className:"mt-4 space-y-4 pt-4 border-t border-border/50",children:[i.what_worked&&i.what_worked.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:rt,title:"What Worked",count:i.what_worked.length}),s.jsx("ul",{className:"space-y-0.5",children:i.what_worked.map((d,h)=>s.jsx(ad,{variant:"success",children:d},h))})]}),i.what_failed&&i.what_failed.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:uo,title:"What Failed",count:i.what_failed.length}),s.jsx("ul",{className:"space-y-0.5",children:i.what_failed.map((d,h)=>s.jsx(ad,{variant:"error",children:d},h))})]}),i.discoveries?.approach_outcome?.approach_used&&s.jsxs("div",{children:[s.jsx(Xi,{icon:i.discoveries.approach_outcome.success?rt:Is,title:"Approach"}),s.jsxs("div",{className:"pl-4 space-y-2",children:[s.jsx("p",{className:"text-sm text-foreground",children:i.discoveries.approach_outcome.approach_used}),i.discoveries.approach_outcome.why_it_worked&&s.jsx("p",{className:"text-sm text-success",children:i.discoveries.approach_outcome.why_it_worked}),i.discoveries.approach_outcome.why_it_failed&&s.jsx("p",{className:"text-sm text-destructive",children:i.discoveries.approach_outcome.why_it_failed})]})]}),((i.recommendations_for_next_session?.length??0)>0||(i.discoveries?.recommendations?.length??0)>0)&&s.jsxs("div",{children:[s.jsx(Xi,{icon:Ni,title:"Recommendations",count:(i.recommendations_for_next_session?.length??0)+(i.discoveries?.recommendations?.length??0)}),s.jsxs("ul",{className:"space-y-0.5",children:[i.recommendations_for_next_session?.map((d,h)=>s.jsx(ad,{children:d},`rec-${h}`)),i.discoveries?.recommendations?.map((d,h)=>s.jsx(ad,{children:d},`disc-rec-${h}`))]})]}),i.discoveries?.patterns_discovered&&i.discoveries.patterns_discovered.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:us,title:"Patterns",count:i.discoveries.patterns_discovered.length}),s.jsx("div",{className:"flex flex-wrap gap-2 pl-4",children:i.discoveries.patterns_discovered.map((d,h)=>{const m=typeof d=="string"?d:d.pattern;return m?s.jsx(je,{variant:"secondary",className:"text-xs",children:m},h):null})})]}),i.discoveries?.gotchas_discovered&&i.discoveries.gotchas_discovered.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:Is,title:"Gotchas",count:i.discoveries.gotchas_discovered.length}),s.jsx("ul",{className:"space-y-0.5",children:i.discoveries.gotchas_discovered.map((d,h)=>{const m=typeof d=="string"?d:d.gotcha;return m?s.jsx(ad,{variant:"error",children:m},h):null})})]}),i.discoveries?.changed_files&&i.discoveries.changed_files.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:ms,title:"Changed Files",count:i.discoveries.changed_files.length}),s.jsx("div",{className:"flex flex-wrap gap-1.5 pl-4",children:i.discoveries.changed_files.map((d,h)=>s.jsx(je,{variant:"outline",className:"text-xs font-mono",children:d},h))})]}),i.discoveries?.file_insights&&i.discoveries.file_insights.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:ms,title:"File Insights",count:i.discoveries.file_insights.length}),s.jsx("div",{className:"space-y-2 pl-4",children:i.discoveries.file_insights.map((d,h)=>s.jsxs("div",{className:"text-sm",children:[d.path&&s.jsx(je,{variant:"outline",className:"text-xs font-mono mb-1",children:d.path}),d.purpose&&s.jsx("p",{className:"text-muted-foreground",children:d.purpose}),d.changes_made&&s.jsx("p",{className:"text-foreground mt-0.5",children:d.changes_made})]},h))})]}),i.subtasks_completed&&i.subtasks_completed.length>0&&s.jsxs("div",{children:[s.jsx(Xi,{icon:rt,title:"Subtasks Completed",count:i.subtasks_completed.length}),s.jsx("div",{className:"flex flex-wrap gap-1.5 pl-4",children:i.subtasks_completed.map((d,h)=>s.jsx(je,{variant:"secondary",className:"text-xs font-mono",children:d},h))})]})]}),n&&!i&&s.jsx("pre",{className:"mt-4 text-xs text-muted-foreground whitespace-pre-wrap font-mono p-3 bg-background rounded-lg max-h-64 overflow-auto border border-border/50",children:e.content})]})})}function Oie({memoryStatus:e,memoryState:t,recentMemories:n,memoriesLoading:r,searchResults:i,searchLoading:o,onSearch:c}){const[l,d]=y.useState(""),h=()=>{l.trim()&&c(l)},m=f=>{f.key==="Enter"&&h()};return s.jsx(cs,{className:"h-full",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(On,{className:"text-base flex items-center gap-2",children:[s.jsx(hl,{className:"h-4 w-4"}),"Graph Memory Status"]}),e?.available?s.jsxs(je,{variant:"outline",className:"bg-success/10 text-success border-success/30",children:[s.jsx(ta,{className:"h-3 w-3 mr-1"}),"Connected"]}):s.jsxs(je,{variant:"outline",className:"bg-muted text-muted-foreground",children:[s.jsx(uo,{className:"h-3 w-3 mr-1"}),"Not Available"]})]})}),s.jsx(pt,{className:"space-y-3",children:e?.available?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-3 text-sm",children:[s.jsx(qr,{label:"Database",value:e.database||"auto_claude_memory"}),s.jsx(qr,{label:"Path",value:e.dbPath||"~/.auto-claude/graphs"}),t&&s.jsx(qr,{label:"Episodes",value:t.episode_count.toString()})]}),t?.last_session&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last session: #",t.last_session]})]}):s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:e?.reason||"Graphiti memory is not configured"}),s.jsxs("p",{className:"mt-2 text-xs",children:["To enable graph memory, set ",s.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"GRAPHITI_ENABLED=true"})," in project settings."]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Search Memories"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Je,{placeholder:"Search for patterns, insights, gotchas...",value:l,onChange:f=>d(f.target.value),onKeyDown:m}),s.jsx(te,{onClick:h,disabled:o,children:s.jsx(bi,{className:le("h-4 w-4",o&&"animate-pulse")})})]}),i.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," result",i.length!==1?"s":""," found"]}),i.map((f,g)=>s.jsx(He,{className:"bg-muted/50",children:s.jsxs(pt,{className:"pt-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(je,{variant:"outline",className:"text-xs capitalize",children:f.type.replace("_"," ")}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Score: ",f.score.toFixed(2)]})]}),s.jsx("pre",{className:"text-xs text-muted-foreground whitespace-pre-wrap font-mono max-h-40 overflow-auto",children:f.content})]})},g))]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Recent Memories"}),r&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Dt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!r&&n.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(oa,{className:"h-10 w-10 text-muted-foreground mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No memories recorded yet. Memories are created during AI agent sessions."})]}),n.length>0&&s.jsx("div",{className:"space-y-3",children:n.map(f=>s.jsx(Iie,{memory:f},f.id))})]})]})})}function Bie({projectId:e}){const{projectIndex:t,indexLoading:n,indexError:r,memoryStatus:i,memoryState:o,recentMemories:c,memoriesLoading:l,searchResults:d,searchLoading:h}=Ag(),[m,f]=y.useState("index");wie(e);const g=Sie(e),x=jie(e);return s.jsx("div",{className:"flex h-full flex-col overflow-hidden",children:s.jsxs(mg,{value:m,onValueChange:f,className:"flex flex-col h-full",children:[s.jsx("div",{className:"border-b border-border px-6 py-3",children:s.jsxs(Eh,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(Cn,{value:"index",className:"gap-2",children:[s.jsx(Qa,{className:"h-4 w-4"}),"Project Index"]}),s.jsxs(Cn,{value:"memories",className:"gap-2",children:[s.jsx(oa,{className:"h-4 w-4"}),"Memories"]})]})}),s.jsx(Pr,{value:"index",className:"flex-1 overflow-hidden m-0",children:s.jsx(Pie,{projectIndex:t,indexLoading:n,indexError:r,onRefresh:g})}),s.jsx(Pr,{value:"memories",className:"flex-1 overflow-hidden m-0",children:s.jsx(Oie,{memoryStatus:i,memoryState:o,recentMemories:c,memoriesLoading:l,searchResults:d,searchLoading:h,onSearch:x})})]})})}function EE({open:e,onOpenChange:t,onConfigured:n,title:r="Claude Authentication Required",description:i="A Claude Code OAuth token is required to use AI features like Ideation and Roadmap generation.",projectId:o}){const[c,l]=y.useState(""),[d,h]=y.useState(!1),[m,f]=y.useState(!1),[g,x]=y.useState(!1),[C,_]=y.useState(!0),[b,w]=y.useState(!1),[j,S]=y.useState(null),[N,T]=y.useState(!1),[E,D]=y.useState(null),[A,P]=y.useState(!1),[M,B]=y.useState([]),[F,U]=y.useState(null),[G,$]=y.useState(!0);y.useEffect(()=>{(async()=>{if(e){_(!0),$(!0),S(null),T(!1);try{const[z,ee]=await Promise.all([J.checkSourceToken(),J.getClaudeProfiles()]);if(z.success&&z.data?(D(z.data.sourcePath||null),P(z.data.hasToken),z.data.hasToken&&T(!0)):S(z.error||"Failed to check token status"),ee.success&&ee.data){const ie=ee.data.profiles.filter(re=>re.oauthToken||re.isDefault&&re.configDir);B(ie),ie.length>0&&!F&&U(ie[0].id)}}catch(z){S(z instanceof Error?z.message:"Unknown error")}finally{_(!1),$(!1)}}})()},[e]),y.useEffect(()=>e?J.onTerminalOAuthToken(async z=>{z.success&&(T(!0),P(!0),x(!1),setTimeout(()=>{n?.(),t(!1)},1500))}):void 0,[e,n,t]);const V=async()=>{if(F){w(!0),S(null);try{const q=M.find(ee=>ee.id===F);if(!q?.oauthToken){S("Selected profile does not have a valid token"),w(!1);return}const z=await J.updateSourceEnv({claudeOAuthToken:q.oauthToken});z.success?(T(!0),P(!0),setTimeout(()=>{n?.(),t(!1)},1500)):S(z.error||"Failed to save token")}catch(q){S(q instanceof Error?q.message:"Unknown error")}finally{w(!1)}}},Y=async()=>{if(!o){S("No project selected. Please select a project first.");return}x(!0),S(null);try{const q=await J.invokeClaudeSetup(o);q.success||(S(q.error||"Failed to start authentication"),x(!1))}catch(q){S(q instanceof Error?q.message:"Failed to start authentication"),x(!1)}},K=async()=>{if(!c.trim()){S("Please enter a token");return}w(!0),S(null);try{const q=await J.updateSourceEnv({claudeOAuthToken:c.trim()});q.success?(T(!0),P(!0),l(""),setTimeout(()=>{n?.(),t(!1)},1500)):S(q.error||"Failed to save token")}catch(q){S(q instanceof Error?q.message:"Unknown error")}finally{w(!1)}},O=()=>{navigator.clipboard.writeText("claude setup-token")},L=()=>{window.open("https://docs.anthropic.com/en/docs/claude-code","_blank")},I=()=>{b||(l(""),S(null),T(!1),t(!1))};return s.jsx(sn,{open:e,onOpenChange:I,children:s.jsxs(Xs,{className:"sm:max-w-[500px]",children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Xr,{className:"h-5 w-5"}),r]}),s.jsx(fs,{children:i})]}),C&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!C&&N&&s.jsx("div",{className:"py-4",children:s.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4 flex items-center gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-success shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-success",children:"Token configured successfully"}),s.jsx("p",{className:"text-xs text-success/80 mt-1",children:"You can now use AI features like Ideation and Roadmap generation."})]})]})}),!C&&!N&&s.jsxs("div",{className:"py-4 space-y-4",children:[j&&s.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:j})]}),!G&&M.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-success shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-foreground font-medium mb-1",children:"Use Existing Account"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["You have ",M.length," authenticated Claude account",M.length>1?"s":"",". Select one to use:"]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Select Account"}),s.jsx("div",{className:"space-y-2",children:M.map(q=>s.jsxs("button",{onClick:()=>U(q.id),className:le("w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-colors text-left",F===q.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[s.jsx("div",{className:le("h-4 w-4 rounded-full border-2 flex items-center justify-center shrink-0",F===q.id?"border-primary":"border-muted-foreground"),children:F===q.id&&s.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[q.name,q.isDefault&&s.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Default)"})]}),q.email&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:q.email})]}),s.jsx(rt,{className:le("h-4 w-4 shrink-0",F===q.id?"text-primary":"text-transparent")})]},q.id))})]}),s.jsx(te,{onClick:V,disabled:!F||b,className:"w-full",size:"lg",children:b?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-5 w-5 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xr,{className:"mr-2 h-5 w-5"}),"Use This Account"]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-border"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"or"})})]})]}),!G&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"rounded-lg bg-info/10 border border-info/30 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(sa,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-foreground font-medium mb-1",children:M.length>0?"Or Authenticate New Account":"Authenticate with Browser"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:M.length>0?"Add a new Claude account by logging in with your browser.":"Click below to open your browser and log in with your Claude account."})]})]})}),s.jsx(te,{onClick:Y,disabled:g,className:"w-full",size:"lg",variant:M.length>0?"outline":"default",children:g?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-5 w-5 animate-spin"}),"Waiting for authentication..."]}):s.jsxs(s.Fragment,{children:[s.jsx(z0,{className:"mr-2 h-5 w-5"}),M.length>0?"Authenticate New Account":"Authenticate with Browser"]})}),g&&s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"A browser window should open. Complete the authentication there, then return here."})]}),!G&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-border"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"or"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>f(!m),className:"w-full flex items-center justify-between text-sm text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx("span",{children:"Enter token manually"}),m?s.jsx(Gt,{className:"h-4 w-4"}):s.jsx(vs,{className:"h-4 w-4"})]}),m&&s.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-border",children:[s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{className:"font-medium text-foreground",children:"Steps:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[s.jsx("li",{children:"Install Claude Code CLI if you haven't already"}),s.jsxs("li",{children:["Run"," ",s.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:"claude setup-token"})," ",s.jsx("button",{onClick:O,className:"inline-flex items-center text-info hover:text-info/80",children:s.jsx(Ac,{className:"h-3 w-3 ml-1"})})]}),s.jsx("li",{children:"Copy the token and paste it below"})]}),s.jsxs("button",{onClick:L,className:"text-info hover:text-info/80 flex items-center gap-1 mt-2",children:[s.jsx(Fs,{className:"h-3 w-3"}),"View documentation"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"token",className:"text-sm font-medium text-foreground",children:"Claude Code OAuth Token"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{id:"token",type:d?"text":"password",value:c,onChange:q=>l(q.target.value),placeholder:"Enter your token...",className:"pr-10 font-mono text-sm",disabled:b||g}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})}),s.jsx(jt,{children:d?"Hide token":"Show token"})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["The token will be saved to"," ",s.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:E?`${E}/.env`:"auto-claude/.env"})]})]})]})]}),A&&s.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["A token is already configured. ",m?"Enter a new token above to replace it.":"Authenticate again to replace it."]})})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:I,disabled:b||g,children:N?"Close":"Cancel"}),!N&&m&&c.trim()&&s.jsx(te,{onClick:K,disabled:b||g,children:b?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xr,{className:"mr-2 h-4 w-4"}),"Save Token"]})})]})]})})}function zie(){const[e,t]=y.useState(null),[n,r]=y.useState(!0),[i,o]=y.useState(null),c=async()=>{r(!0),o(null);try{const l=await J.checkSourceToken();l.success&&l.data?t(l.data.hasToken):(t(!1),o(l.error||"Failed to check token"))}catch(l){t(!1),o(l instanceof Error?l.message:"Unknown error")}finally{r(!1)}};return y.useEffect(()=>{c()},[]),{hasToken:e,isLoading:n,error:i,checkToken:c}}function co({type:e}){switch(e){case"code_improvements":return s.jsx(ai,{className:"h-4 w-4"});case"ui_ux_improvements":return s.jsx(ah,{className:"h-4 w-4"});case"documentation_gaps":return s.jsx(rh,{className:"h-4 w-4"});case"security_hardening":return s.jsx(Uc,{className:"h-4 w-4"});case"performance_optimizations":return s.jsx(ih,{className:"h-4 w-4"});case"code_quality":return s.jsx(_p,{className:"h-4 w-4"});default:return s.jsx(Ni,{className:"h-4 w-4"})}}const eh=["code_improvements","ui_ux_improvements","documentation_gaps","security_hardening","performance_optimizations","code_quality"];function Fie({config:e,hasToken:t,isCheckingToken:n,onGenerate:r,onOpenConfig:i,onToggleIdeationType:o}){return s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs(He,{className:"w-full max-w-lg p-8 text-center",children:[s.jsx(Ni,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Ideas Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate AI-powered feature ideas based on your project's context, existing patterns, and target audience."}),s.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg text-left",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium",children:"Enabled Ideation Types"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(oh,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-2",children:eh.map(c=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(co,{type:c}),s.jsx("span",{className:"text-sm",children:no[c]})]}),s.jsx(Es,{checked:e.enabledTypes.includes(c),onCheckedChange:()=>o(c)})]},c))})]}),s.jsxs(te,{onClick:r,size:"lg",disabled:n,children:[s.jsx(us,{className:"h-4 w-4 mr-2"}),"Generate Ideas"]}),t===!1&&!n&&s.jsxs("p",{className:"mt-3 text-sm text-muted-foreground",children:[s.jsx(ct,{className:"h-4 w-4 inline-block mr-1 text-warning"}),"Claude token not configured. You'll be prompted to enter it when generating."]})]})})}function Hie({totalIdeas:e,ideaCountByType:t,showDismissed:n,showArchived:r,selectedCount:i,onToggleShowDismissed:o,onToggleShowArchived:c,onOpenConfig:l,onOpenAddMore:d,onDismissAll:h,onDeleteSelected:m,onSelectAll:f,onClearSelection:g,onRefresh:x,hasActiveIdeas:C,canAddMore:_}){const b=i>0;return s.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ni,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Ideation"}),s.jsxs(je,{variant:"outline",children:[e," ideas"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-generated feature ideas for your project"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[b?s.jsxs(s.Fragment,{children:[s.jsxs(je,{variant:"secondary",className:"mr-1",children:[i," selected"]}),s.jsxs(te,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:m,children:[s.jsx(Br,{className:"h-4 w-4 mr-1"}),"Delete"]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"icon",onClick:g,children:s.jsx(Ys,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Clear selection"})]}),s.jsx("div",{className:"w-px h-6 bg-border mx-1"})]}):C&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"icon",onClick:f,children:s.jsx(V0,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Select all"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:n?"secondary":"outline",size:"icon",onClick:o,children:n?s.jsx(zs,{className:"h-4 w-4"}):s.jsx(Ln,{className:"h-4 w-4"})})}),s.jsx(jt,{children:n?"Hide dismissed":"Show dismissed"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:r?"secondary":"outline",size:"icon",onClick:c,children:s.jsx(Jo,{className:"h-4 w-4"})})}),s.jsx(jt,{children:r?"Hide archived":"Show archived"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"outline",size:"icon",onClick:l,children:s.jsx(oh,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Configure"})]}),_&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"outline",onClick:d,children:[s.jsx(ys,{className:"h-4 w-4 mr-1"}),"Add More"]})}),s.jsx(jt,{children:"Add more ideation types"})]}),C&&!b&&s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"outline",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:h,children:s.jsx(Br,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Dismiss all ideas"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"outline",size:"icon",onClick:x,children:s.jsx(Dt,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Regenerate Ideas"})]})]})]}),s.jsx("div",{className:"mt-4 flex items-center gap-4",children:Object.entries(t).map(([w,j])=>s.jsxs(je,{variant:"outline",className:Ic[w],children:[s.jsx(co,{type:w}),s.jsx("span",{className:"ml-1",children:j})]},w))})]})}function Uie({activeTab:e,onTabChange:t,children:n}){return s.jsxs(mg,{value:e,onValueChange:t,className:"h-full flex flex-col",children:[s.jsxs(Eh,{className:"shrink-0 mx-4 mt-4 flex-wrap h-auto gap-1",children:[s.jsx(Cn,{value:"all",children:"All"}),s.jsxs(Cn,{value:"code_improvements",children:[s.jsx(ai,{className:"h-3 w-3 mr-1"}),"Code"]}),s.jsxs(Cn,{value:"ui_ux_improvements",children:[s.jsx(ah,{className:"h-3 w-3 mr-1"}),"UI/UX"]}),s.jsxs(Cn,{value:"documentation_gaps",children:[s.jsx(rh,{className:"h-3 w-3 mr-1"}),"Docs"]}),s.jsxs(Cn,{value:"security_hardening",children:[s.jsx(Uc,{className:"h-3 w-3 mr-1"}),"Security"]}),s.jsxs(Cn,{value:"performance_optimizations",children:[s.jsx(ih,{className:"h-3 w-3 mr-1"}),"Performance"]})]}),n]})}function AE({showConfigDialog:e,showAddMoreDialog:t,config:n,typesToAdd:r,availableTypesToAdd:i,onToggleIdeationType:o,onToggleTypeToAdd:c,onSetConfig:l,onCloseConfigDialog:d,onCloseAddMoreDialog:h,onConfirmAddMore:m}){return s.jsxs(s.Fragment,{children:[s.jsx(sn,{open:e,onOpenChange:d,children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:"Ideation Configuration"}),s.jsx(fs,{children:"Configure which types of ideas to generate"})]}),s.jsxs("div",{className:"py-4 space-y-4 max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Ideation Types"}),eh.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-md ${Ic[f]}`,children:s.jsx(co,{type:f})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:no[f]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Ub[f]})]})]}),s.jsx(Es,{checked:n.enabledTypes.includes(f),onCheckedChange:()=>o(f)})]},f))]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Context Sources"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Include Roadmap Context"}),s.jsx(Es,{checked:n.includeRoadmapContext,onCheckedChange:f=>l({includeRoadmapContext:f})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Include Kanban Context"}),s.jsx(Es,{checked:n.includeKanbanContext,onCheckedChange:f=>l({includeKanbanContext:f})})]})]})]}),s.jsx(Ts,{children:s.jsx(te,{variant:"outline",onClick:d,children:"Close"})})]})}),s.jsx(sn,{open:t,onOpenChange:h,children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsx(es,{children:"Add More Ideas"}),s.jsx(fs,{children:"Select additional ideation types to generate. Your existing ideas will be preserved."})]}),s.jsx("div",{className:"py-4 space-y-3 max-h-96 overflow-y-auto",children:i.length===0?s.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[s.jsx(rt,{className:"h-12 w-12 mx-auto mb-2 text-success"}),s.jsx("p",{children:"You've already generated all ideation types!"}),s.jsx("p",{className:"text-sm mt-1",children:'Use "Regenerate" to refresh existing ideas.'})]}):i.map(f=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${r.includes(f)?"bg-primary/10 border border-primary":"bg-muted/50 hover:bg-muted"}`,onClick:()=>c(f),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-md ${Ic[f]}`,children:s.jsx(co,{type:f})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:no[f]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Ub[f]})]})]}),s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r.includes(f)?"border-primary bg-primary":"border-muted-foreground"}`,children:r.includes(f)&&s.jsx(rt,{className:"h-4 w-4 text-primary-foreground"})})]},f))}),s.jsxs(Ts,{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:r.length>0&&`${r.length} selected`}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",onClick:h,children:"Cancel"}),s.jsxs(te,{onClick:m,disabled:r.length===0,children:[s.jsx(ys,{className:"h-4 w-4 mr-1"}),"Generate ",r.length>0?`${r.length} Types`:"Ideas"]})]})]})]})})]})}function TE({state:e}){switch(e){case"completed":return s.jsx(rt,{className:"h-4 w-4 text-success"});case"failed":return s.jsx(uo,{className:"h-4 w-4 text-destructive"});case"generating":return s.jsx(Ie,{className:"h-4 w-4 text-primary animate-spin"});case"pending":default:return s.jsx(dl,{className:"h-4 w-4 text-muted-foreground"})}}function DE(){return s.jsx(He,{className:"p-4 animate-pulse",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-5 w-24 bg-muted rounded"}),s.jsx("div",{className:"h-5 w-16 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 w-3/4 bg-muted rounded"}),s.jsx("div",{className:"h-3 w-full bg-muted rounded"}),s.jsx("div",{className:"h-3 w-2/3 bg-muted rounded"})]})})})}function C5(e){return e.type==="code_improvements"}function N5(e){return e.type==="ui_ux_improvements"}function k5(e){return e.type==="documentation_gaps"}function E5(e){return e.type==="security_hardening"}function A5(e){return e.type==="performance_optimizations"}function T5(e){return e.type==="code_quality"}function j0({idea:e,isSelected:t,onClick:n,onConvert:r,onGoToTask:i,onDismiss:o,onToggleSelect:c}){const l=e.status==="dismissed",d=e.status==="archived",h=e.status==="converted",m=l||d;return s.jsx(He,{className:`p-4 hover:bg-muted/50 cursor-pointer transition-colors ${m?"opacity-50":""} ${t?"ring-2 ring-primary bg-primary/5":""}`,onClick:n,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"pt-0.5",onClick:f=>{f.stopPropagation(),c(e.id)},children:s.jsx(ca,{checked:t,onCheckedChange:()=>c(e.id),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary"})}),s.jsxs("div",{className:"flex-1 flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs(je,{variant:"outline",className:Ic[e.type],children:[s.jsx(co,{type:e.type}),s.jsx("span",{className:"ml-1",children:no[e.type]})]}),e.status!=="draft"&&s.jsx(je,{variant:"outline",className:vR[e.status],children:e.status}),C5(e)&&s.jsx(je,{variant:"outline",className:Sh[e.estimatedEffort],children:e.estimatedEffort}),N5(e)&&s.jsx(je,{variant:"outline",children:bR[e.category]}),k5(e)&&s.jsx(je,{variant:"outline",children:wR[e.category]}),E5(e)&&s.jsx(je,{variant:"outline",className:yR[e.severity],children:e.severity}),A5(e)&&s.jsxs(je,{variant:"outline",className:Tw[e.impact],children:[e.impact," impact"]}),T5(e)&&s.jsx(je,{variant:"outline",className:SR[e.severity],children:e.severity})]}),s.jsx("h3",{className:`font-medium ${m?"line-through":""}`,children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),!m&&!h&&s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:f=>{f.stopPropagation(),r(e)},children:s.jsx(ei,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Convert to Task"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:f=>{f.stopPropagation(),o(e)},children:s.jsx(Ys,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Dismiss"})]})]}),d&&e.taskId&&i&&s.jsx("div",{className:"flex items-center gap-1 ml-2",children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-primary",onClick:f=>{f.stopPropagation(),i(e.taskId)},children:s.jsx(Fs,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Go to Task"})]})}),h&&e.taskId&&i&&s.jsx("div",{className:"flex items-center gap-1 ml-2",children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-primary",onClick:f=>{f.stopPropagation(),i(e.taskId)},children:s.jsx(Fs,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Go to Task"})]})})]})]})})}function $ie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Sh[e.estimatedEffort]}`,children:e.estimatedEffort}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:e.affectedFiles?.length??0}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Files"})]})]}),e.buildsUpon&&e.buildsUpon.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(gr,{className:"h-4 w-4"}),"Builds Upon"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.buildsUpon.map((t,n)=>s.jsx(je,{variant:"outline",className:"text-xs",children:t},n))})]}),e.implementationApproach&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(_p,{className:"h-4 w-4"}),"Implementation Approach"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.implementationApproach})]}),e.affectedFiles&&e.affectedFiles.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Files"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]}),e.existingPatterns&&e.existingPatterns.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Patterns to Follow"}),s.jsx("ul",{className:"space-y-1",children:e.existingPatterns.map((t,n)=>s.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[s.jsx(dl,{className:"h-3 w-3 mt-1.5 shrink-0"}),t]},n))})]})]})}function Vie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(je,{variant:"outline",className:"text-sm",children:bR[e.category]})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4"}),"Current State"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentState})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(rt,{className:"h-4 w-4"}),"Proposed Change"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.proposedChange})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4"}),"User Benefit"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.userBenefit})]}),e.affectedComponents&&e.affectedComponents.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Components"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedComponents.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]})]})}function Gie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:wR[e.category]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Category"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Sh[e.estimatedEffort]}`,children:e.estimatedEffort}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4"}),"Target Audience"]}),s.jsx(je,{variant:"outline",className:"capitalize",children:e.targetAudience})]}),e.currentDocumentation&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4"}),"Current Documentation"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentDocumentation})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(rt,{className:"h-4 w-4"}),"Proposed Content"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.proposedContent})]}),e.affectedAreas&&e.affectedAreas.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Areas"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedAreas.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Priority"}),s.jsx(je,{variant:"outline",className:Tw[e.priority],children:e.priority})]})]})}function qie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${yR[e.severity]}`,children:e.severity}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Severity"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:e.affectedFiles?.length??0}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Files"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Uc,{className:"h-4 w-4"}),"Category"]}),s.jsx(je,{variant:"outline",children:dW[e.category]})]}),e.vulnerability&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Is,{className:"h-4 w-4 text-warning"}),"Vulnerability"]}),s.jsx("p",{className:"text-sm font-mono text-muted-foreground",children:e.vulnerability})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4"}),"Current Risk"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentRisk})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(eo,{className:"h-4 w-4"}),"Remediation"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.remediation})]}),e.affectedFiles&&e.affectedFiles.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Files"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]}),e.references&&e.references.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Fs,{className:"h-4 w-4"}),"References"]}),s.jsx("ul",{className:"space-y-1",children:e.references.map((t,n)=>s.jsx("li",{className:"text-sm text-primary hover:underline",children:s.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})},n))})]}),e.compliance&&e.compliance.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Compliance"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.compliance.map((t,n)=>s.jsx(je,{variant:"outline",className:"text-xs",children:t},n))})]})]})}function Wie(e){switch(e){case"bundle_size":return s.jsx(PF,{className:"h-4 w-4"});case"database":return s.jsx(hl,{className:"h-4 w-4"});case"network":return s.jsx(x7,{className:"h-4 w-4"});case"memory":return s.jsx(VA,{className:"h-4 w-4"});default:return s.jsx(ih,{className:"h-4 w-4"})}}function Kie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Tw[e.impact]}`,children:e.impact}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Impact"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Sh[e.estimatedEffort]}`,children:e.estimatedEffort}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[Wie(e.category),"Category"]}),s.jsx(je,{variant:"outline",children:hW[e.category]})]}),e.currentMetric&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4"}),"Current State"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentMetric})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(gr,{className:"h-4 w-4 text-success"}),"Expected Improvement"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.expectedImprovement})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(eo,{className:"h-4 w-4"}),"Implementation"]}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:e.implementation})]}),e.affectedAreas&&e.affectedAreas.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Areas"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedAreas.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]}),e.tradeoffs&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Is,{className:"h-4 w-4 text-warning"}),"Tradeoffs"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.tradeoffs})]})]})}function Yie({idea:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${SR[e.severity]}`,children:e.severity}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Severity"})]}),s.jsxs(He,{className:"p-3 text-center",children:[s.jsx("div",{className:`text-lg font-semibold ${Sh[e.estimatedEffort]}`,children:e.estimatedEffort}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(_p,{className:"h-4 w-4"}),"Category"]}),s.jsx(je,{variant:"outline",children:fW[e.category]})]}),e.breakingChange&&s.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"h-4 w-4 text-destructive"}),s.jsx("span",{className:"text-sm font-medium text-destructive",children:"Breaking Change"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This refactoring may break existing code or tests."})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4"}),"Current State"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentState})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(gr,{className:"h-4 w-4 text-success"}),"Proposed Change"]}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:e.proposedChange})]}),e.codeExample&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Code Example"]}),s.jsx("pre",{className:"text-xs font-mono bg-muted/50 p-3 rounded-lg overflow-x-auto",children:e.codeExample})]}),e.metrics&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.metrics.lineCount&&s.jsxs(He,{className:"p-2 text-center",children:[s.jsx("div",{className:"text-sm font-semibold",children:e.metrics.lineCount}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Lines"})]}),e.metrics.complexity&&s.jsxs(He,{className:"p-2 text-center",children:[s.jsx("div",{className:"text-sm font-semibold",children:e.metrics.complexity}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"})]}),e.metrics.duplicateLines&&s.jsxs(He,{className:"p-2 text-center",children:[s.jsx("div",{className:"text-sm font-semibold",children:e.metrics.duplicateLines}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Duplicate Lines"})]}),e.metrics.testCoverage!==void 0&&s.jsxs(He,{className:"p-2 text-center",children:[s.jsxs("div",{className:"text-sm font-semibold",children:[e.metrics.testCoverage,"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Test Coverage"})]})]})]}),e.affectedFiles&&e.affectedFiles.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ms,{className:"h-4 w-4"}),"Affected Files"]}),s.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,n)=>s.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},n))})]}),e.bestPractice&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(rh,{className:"h-4 w-4"}),"Best Practice"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.bestPractice})]}),e.prerequisites&&e.prerequisites.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Ci,{className:"h-4 w-4"}),"Prerequisites"]}),s.jsx("ul",{className:"space-y-1",children:e.prerequisites.map((t,n)=>s.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:""}),t]},n))})]})]})}function D5({idea:e,onClose:t,onConvert:n,onGoToTask:r,onDismiss:i}){const o=e.status==="dismissed",c=e.status==="converted";return s.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-card border-l border-border shadow-lg flex flex-col z-50",children:[s.jsx("div",{className:"shrink-0 p-4 border-b border-border electron-no-drag",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(je,{variant:"outline",className:Ic[e.type],children:[s.jsx(co,{type:e.type}),s.jsx("span",{className:"ml-1",children:no[e.type]})]}),e.status!=="draft"&&s.jsx(je,{variant:"outline",className:vR[e.status],children:e.status})]}),s.jsx("h2",{className:"font-semibold",children:e.title})]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:t,children:s.jsx(vs,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Rationale"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.rationale})]}),C5(e)&&s.jsx($ie,{idea:e}),N5(e)&&s.jsx(Vie,{idea:e}),k5(e)&&s.jsx(Gie,{idea:e}),E5(e)&&s.jsx(qie,{idea:e}),A5(e)&&s.jsx(Kie,{idea:e}),T5(e)&&s.jsx(Yie,{idea:e})]}),!o&&!c&&s.jsxs("div",{className:"shrink-0 p-4 border-t border-border space-y-2",children:[s.jsxs(te,{className:"w-full",onClick:()=>n(e),children:[s.jsx(ei,{className:"h-4 w-4 mr-2"}),"Convert to Auto-Build Task"]}),s.jsxs(te,{variant:"outline",className:"w-full",onClick:()=>i(e),children:[s.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Dismiss Idea"]})]}),c&&e.taskId&&r&&s.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:s.jsxs(te,{className:"w-full",onClick:()=>r(e.taskId),children:[s.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Go to Task"]})})]})}function Xie({generationStatus:e,logs:t,typeStates:n,enabledTypes:r,session:i,onSelectIdea:o,selectedIdea:c,onConvert:l,onGoToTask:d,onDismiss:h,onStop:m}){const f=y.useRef(null),[g,x]=y.useState(!1),[C,_]=y.useState(!1),b=async()=>{if(!C){_(!0);try{await m()}catch(S){console.error("Failed to stop generation:",S)}finally{_(!1)}}};y.useEffect(()=>{f.current&&g&&f.current.scrollIntoView({behavior:"smooth"})},[t,g]);const w=S=>i?i.ideas.filter(N=>N.type===S&&N.status!=="dismissed"&&N.status!=="archived"):[];r.filter(S=>n[S]==="generating").length;const j=r.filter(S=>n[S]==="completed").length;return s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(us,{className:"h-5 w-5 text-primary animate-pulse"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Generating Ideas"}),s.jsxs(je,{variant:"outline",children:[j,"/",r.length," complete"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.message})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>x(!g),children:[s.jsx(ms,{className:"h-4 w-4 mr-1"}),g?"Hide":"Show"," Logs"]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"destructive",size:"sm",onClick:b,disabled:C,children:[s.jsx($c,{className:"h-4 w-4 mr-1"}),C?"Stopping...":"Stop"]})}),s.jsx(jt,{children:"Stop generation"})]})]})]}),s.jsx(ao,{value:e.progress,className:"mt-3"}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.map(S=>s.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs ${n[S]==="completed"?"bg-success/10 text-success":n[S]==="failed"?"bg-destructive/10 text-destructive":n[S]==="generating"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:[s.jsx(TE,{state:n[S]}),s.jsx(co,{type:S}),s.jsx("span",{children:no[S]}),n[S]==="completed"&&i&&s.jsxs("span",{className:"ml-1 font-medium",children:["(",w(S).length,")"]})]},S))})]}),g&&t.length>0&&s.jsx("div",{className:"shrink-0 border-b border-border p-4 bg-muted/20",children:s.jsx(cs,{className:"h-32 rounded-md border border-border bg-muted/30",children:s.jsxs("div",{className:"p-3 space-y-1 font-mono text-xs",children:[t.map((S,N)=>s.jsxs("div",{className:"text-muted-foreground leading-relaxed",children:[s.jsx("span",{className:"text-muted-foreground/50 mr-2 select-none",children:String(N+1).padStart(3,"0")}),S]},N)),s.jsx("div",{ref:f})]})})}),s.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[e.error&&s.jsx("div",{className:"mb-4 p-3 bg-destructive/10 rounded-md text-destructive text-sm",children:e.error}),s.jsx("div",{className:"space-y-6",children:r.map(S=>{const N=w(S),T=n[S];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:`p-1.5 rounded-md ${Ic[S]}`,children:s.jsx(co,{type:S})}),s.jsx("h3",{className:"font-medium",children:no[S]}),s.jsx(TE,{state:T}),N.length>0&&s.jsxs(je,{variant:"outline",className:"ml-auto",children:[N.length," ideas"]})]}),s.jsxs("div",{className:"grid gap-3",children:[N.map(E=>s.jsx(j0,{idea:E,isSelected:!1,onClick:()=>o(c?.id===E.id?null:E),onConvert:l,onGoToTask:d,onDismiss:h,onToggleSelect:()=>{}},E.id)),T==="generating"&&s.jsxs(s.Fragment,{children:[s.jsx(DE,{}),s.jsx(DE,{})]}),T==="pending"&&s.jsx("div",{className:"text-sm text-muted-foreground py-2",children:"Waiting to start..."}),T==="failed"&&N.length===0&&s.jsx("div",{className:"text-sm text-destructive py-2",children:"Failed to generate ideas for this category"}),T==="completed"&&N.length===0&&s.jsx("div",{className:"text-sm text-muted-foreground py-2",children:"No ideas generated for this category"})]})]},S)})})]}),c&&s.jsx(D5,{idea:c,onClose:()=>o(null),onConvert:l,onGoToTask:d,onDismiss:h})]})}const RE=300*1e3,gp=new Map;function wc(e){const t=gp.get(e);t&&(clearTimeout(t),gp.delete(e))}const PE={phase:"idle",progress:0,message:""},Zie={enabledTypes:[...lm.enabledTypes],includeRoadmapContext:lm.includeRoadmapContext,includeKanbanContext:lm.includeKanbanContext,maxIdeasPerType:lm.maxIdeasPerType},Qy={code_improvements:"pending",ui_ux_improvements:"pending",documentation_gaps:"pending",security_hardening:"pending",performance_optimizations:"pending",code_quality:"pending"},xs=xr(e=>({session:null,generationStatus:PE,config:Zie,logs:[],typeStates:{...Qy},selectedIds:new Set,isGenerating:!1,setSession:t=>e({session:t}),setIsGenerating:t=>e({isGenerating:t}),setGenerationStatus:t=>e({generationStatus:t}),setConfig:t=>e(n=>({config:{...n.config,...t}})),updateIdeaStatus:(t,n)=>e(r=>{if(!r.session)return r;const i=r.session.ideas.map(o=>o.id===t?{...o,status:n}:o);return{session:{...r.session,ideas:i,updatedAt:new Date}}}),setIdeaTaskId:(t,n)=>e(r=>{if(!r.session)return r;const i=r.session.ideas.map(o=>o.id===t?{...o,taskId:n,status:"archived"}:o);return{session:{...r.session,ideas:i,updatedAt:new Date}}}),dismissIdea:t=>e(n=>{if(!n.session)return n;const r=n.session.ideas.map(i=>i.id===t?{...i,status:"dismissed"}:i);return{session:{...n.session,ideas:r,updatedAt:new Date}}}),dismissAllIdeas:()=>e(t=>{if(!t.session)return t;const n=t.session.ideas.map(r=>r.status!=="dismissed"&&r.status!=="converted"&&r.status!=="archived"?{...r,status:"dismissed"}:r);return{session:{...t.session,ideas:n,updatedAt:new Date}}}),archiveIdea:t=>e(n=>{if(!n.session)return n;const r=n.session.ideas.map(i=>i.id===t?{...i,status:"archived"}:i);return{session:{...n.session,ideas:r,updatedAt:new Date}}}),deleteIdea:t=>e(n=>{if(!n.session)return n;const r=n.session.ideas.filter(o=>o.id!==t),i=new Set(n.selectedIds);return i.delete(t),{session:{...n.session,ideas:r,updatedAt:new Date},selectedIds:i}}),deleteMultipleIdeas:t=>e(n=>{if(!n.session)return n;const r=new Set(t),i=n.session.ideas.filter(c=>!r.has(c.id)),o=new Set(n.selectedIds);return t.forEach(c=>o.delete(c)),{session:{...n.session,ideas:i,updatedAt:new Date},selectedIds:o}}),clearSession:()=>e({session:null,generationStatus:PE,typeStates:{...Qy},selectedIds:new Set}),addLog:t=>e(n=>({logs:[...n.logs,t].slice(-100)})),clearLogs:()=>e({logs:[]}),toggleSelectIdea:t=>e(n=>{const r=new Set(n.selectedIds);return r.has(t)?r.delete(t):r.add(t),{selectedIds:r}}),selectAllIdeas:t=>e(()=>({selectedIds:new Set(t)})),clearSelection:()=>e(()=>({selectedIds:new Set})),initializeTypeStates:t=>e(n=>{const r={...Qy};return t.forEach(i=>{r[i]="generating"}),Object.keys(r).forEach(i=>{t.includes(i)||(r[i]="pending")}),{typeStates:r}}),setTypeState:(t,n)=>e(r=>({typeStates:{...r.typeStates,[t]:n}})),addIdeasForType:(t,n)=>e(r=>{const i={...r.typeStates};if(i[t]="completed",!r.session){const c=r.config;return{typeStates:i,session:{id:`session-${Date.now()}`,projectId:"",config:c,ideas:n,projectContext:{existingFeatures:[],techStack:[],plannedFeatures:[]},generatedAt:new Date,updatedAt:new Date}}}const o=r.session.ideas.filter(c=>c.type!==t);return{typeStates:i,session:{...r.session,ideas:[...o,...n],updatedAt:new Date}}}),resetGeneratingTypes:t=>e(n=>{const r={...n.typeStates};return Object.entries(r).forEach(([i,o])=>{o==="generating"&&(r[i]=t)}),{typeStates:r}})}));async function Qie(e){if(xs.getState().isGenerating)return;const t=await J.getIdeation(e);xs.getState().isGenerating||(t.success&&t.data?xs.getState().setSession(t.data):xs.getState().setSession(null))}function ME(e){const t=xs.getState(),n=t.config;window.DEBUG&&console.log("[Ideation] Starting generation:",{projectId:e,enabledTypes:n.enabledTypes,includeRoadmapContext:n.includeRoadmapContext,includeKanbanContext:n.includeKanbanContext,maxIdeasPerType:n.maxIdeasPerType}),wc(e),t.clearLogs(),t.clearSession(),t.setIsGenerating(!0),t.initializeTypeStates(n.enabledTypes),t.addLog("Starting ideation generation in parallel..."),t.setGenerationStatus({phase:"generating",progress:0,message:`Generating ${n.enabledTypes.length} ideation types in parallel...`});const r=setTimeout(()=>{const i=xs.getState();i.generationStatus.phase==="generating"&&(window.DEBUG&&console.warn("[Ideation] Generation timed out after",RE,"ms"),wc(e),i.setIsGenerating(!1),i.resetGeneratingTypes("failed"),i.setGenerationStatus({phase:"error",progress:0,message:"",error:"Generation timed out. Some ideas may have been generated - check the results."}),i.addLog(" Generation timed out"))},RE);gp.set(e,r),J.generateIdeation(e,n)}async function Jie(e){const t=xs.getState();window.DEBUG&&console.log("[Ideation] Stop requested:",{projectId:e}),t.setIsGenerating(!1),t.addLog("Stopping ideation generation..."),t.setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"});const n=await J.stopIdeation(e);return window.DEBUG&&console.log("[Ideation] Stop result:",{projectId:e,success:n.success}),n.success?t.addLog("Ideation generation stopped"):t.addLog("Process already stopped"),n.success}async function LE(e){const t=xs.getState(),n=t.config;await J.stopIdeation(e),t.clearLogs(),t.clearSession(),t.setIsGenerating(!0),t.initializeTypeStates(n.enabledTypes),t.addLog("Refreshing ideation in parallel..."),t.setGenerationStatus({phase:"generating",progress:0,message:`Refreshing ${n.enabledTypes.length} ideation types in parallel...`}),J.refreshIdeation(e,n)}async function eae(e){const t=xs.getState(),n=await J.dismissAllIdeas(e);return n.success&&(t.dismissAllIdeas(),t.addLog("All ideas dismissed")),n.success}async function tae(e,t){const n=xs.getState(),r=await J.deleteMultipleIdeas(e,t);return r.success&&(n.deleteMultipleIdeas(t),n.clearSelection(),n.addLog(`${t.length} ideas deleted`)),r.success}function IE(e,t){const n=xs.getState(),r=n.config;n.clearLogs(),n.setIsGenerating(!0),{...n.typeStates},t.forEach(o=>{}),n.initializeTypeStates(t),n.addLog(`Adding ${t.length} new ideation types...`),n.setGenerationStatus({phase:"generating",progress:0,message:`Generating ${t.length} additional ideation types...`});const i={...r,enabledTypes:t,append:!0};J.generateIdeation(e,i)}function sae(e,t){return e?e.ideas.filter(n=>n.type===t):[]}function nae(e){return e?e.ideas.filter(t=>t.status!=="dismissed"&&t.status!=="archived"):[]}function rae(e){return e?e.ideas.filter(t=>t.status==="archived"):[]}function iae(e){if(!e)return{totalIdeas:0,byType:{},byStatus:{}};const t=e.ideas.filter(i=>i.status!=="dismissed"&&i.status!=="archived"),n={},r={};return t.forEach(i=>{n[i.type]=(n[i.type]||0)+1,r[i.status]=(r[i.status]||0)+1}),{totalIdeas:t.length,byType:n,byStatus:r,lastGenerated:e.generatedAt}}function aae(){const e=xs.getState,t=J.onIdeationProgress((d,h)=>{window.DEBUG&&console.log("[Ideation] Progress update:",{projectId:d,phase:h.phase,progress:h.progress,message:h.message}),e().setGenerationStatus(h)}),n=J.onIdeationLog((d,h)=>{e().addLog(h)}),r=J.onIdeationTypeComplete((d,h,m)=>{window.DEBUG&&console.log("[Ideation] Type completed:",{projectId:d,ideationType:h,ideasCount:m.length,ideas:m.map(b=>({id:b.id,title:b.title,type:b.type}))}),e().addIdeasForType(h,m),e().addLog(` ${h} completed with ${m.length} ideas`);const f=e().typeStates,g=e().config,x=Object.entries(f).filter(([b,w])=>g.enabledTypes.includes(b)&&(w==="completed"||w==="failed")).length,C=g.enabledTypes.length,_=Math.round(x/C*100);e().setGenerationStatus({phase:"generating",progress:_,message:`${x}/${C} ideation types complete`})}),i=J.onIdeationTypeFailed((d,h)=>{window.DEBUG&&console.error("[Ideation] Type failed:",{projectId:d,ideationType:h}),e().setTypeState(h,"failed"),e().addLog(` ${h} failed`)}),o=J.onIdeationComplete((d,h)=>{window.DEBUG&&console.log("[Ideation] Generation complete:",{projectId:d,totalIdeas:h.ideas.length,ideaTypes:h.ideas.reduce((m,f)=>(m[f.type]=(m[f.type]||0)+1,m),{})}),wc(d),e().setIsGenerating(!1),e().setSession(h),e().resetGeneratingTypes("completed"),e().setGenerationStatus({phase:"complete",progress:100,message:"Ideation complete"}),e().addLog("Ideation generation complete!")}),c=J.onIdeationError((d,h)=>{window.DEBUG&&console.error("[Ideation] Error received:",{projectId:d,error:h}),wc(d),e().setIsGenerating(!1),e().resetGeneratingTypes("failed"),e().setGenerationStatus({phase:"error",progress:0,message:"",error:h}),e().addLog(`Error: ${h}`)}),l=J.onIdeationStopped(d=>{window.DEBUG&&console.log("[Ideation] Stopped:",{projectId:d}),wc(d),e().setIsGenerating(!1),e().resetGeneratingTypes("pending"),e().setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"}),e().addLog("Ideation generation stopped")});return()=>{for(const[d]of gp)wc(d);t(),n(),r(),i(),o(),c(),l()}}function oae(e,t={}){const{onGoToTask:n}=t,r=xs(ae=>ae.session),i=xs(ae=>ae.generationStatus),o=xs(ae=>ae.isGenerating),c=xs(ae=>ae.config),l=xs(ae=>ae.setConfig),d=xs(ae=>ae.logs),h=xs(ae=>ae.typeStates),m=xs(ae=>ae.selectedIds),f=xs(ae=>ae.toggleSelectIdea),g=xs(ae=>ae.selectAllIdeas),x=xs(ae=>ae.clearSelection),[C,_]=y.useState(null),[b,w]=y.useState("all"),[j,S]=y.useState(!1),[N,T]=y.useState(!1),[E,D]=y.useState(!1),[A,P]=y.useState(!1),[M,B]=y.useState(null),[F,U]=y.useState(!1),[G,$]=y.useState([]),{hasToken:V,isLoading:Y,checkToken:K}=zie();y.useEffect(()=>{const ae=aae();return Qie(e),ae},[e]);const O=async()=>{if(V===!1){B("generate"),P(!0);return}ME(e)},L=async()=>{if(V===!1){B("refresh"),P(!0);return}LE(e)},I=async()=>{await Jie(e)},q=async()=>{await eae(e)},z=()=>{K(),M==="generate"?ME(e):M==="refresh"?LE(e):M==="append"&&G.length>0&&(IE(e,G),$([])),B(null)},ee=()=>{if(!r)return eh;const ae=new Set(r.ideas.map(Ee=>Ee.type));return eh.filter(Ee=>!ae.has(Ee))},ie=()=>{if(G.length!==0){if(V===!1){B("append"),P(!0);return}IE(e,G),$([]),U(!1)}},re=ae=>{$(Ee=>Ee.includes(ae)?Ee.filter(Be=>Be!==ae):[...Ee,ae])},X=async ae=>{const Ee=await J.convertIdeaToTask(e,ae.id);Ee.success&&Ee.data&&(xs.getState().setIdeaTaskId(ae.id,Ee.data.id),mo(e))},W=y.useCallback(ae=>{n&&n(ae)},[n]),Q=async ae=>{(await J.dismissIdea(e,ae.id)).success&&xs.getState().dismissIdea(ae.id)},se=ae=>{const Ee=c.enabledTypes,Be=Ee.includes(ae)?Ee.filter(et=>et!==ae):[...Ee,ae];Be.length>0&&l({enabledTypes:Be})},he=y.useCallback(async()=>{const ae=xs.getState().selectedIds;ae.size!==0&&await tae(e,Array.from(ae))},[e]),de=y.useCallback(ae=>{g(ae.map(Ee=>Ee.id))},[g]),Ne=iae(r),Re=rae(r),ge=y.useCallback(()=>{if(!r)return[];let ae=r.ideas;return!N&&!E?ae=nae(r):N&&!E?ae=ae.filter(Ee=>Ee.status!=="archived"):!N&&E&&(ae=ae.filter(Ee=>Ee.status!=="dismissed")),ae},[r,N,E])();return{session:r,generationStatus:i,isGenerating:o,config:c,logs:d,typeStates:h,selectedIdea:C,activeTab:b,showConfigDialog:j,showDismissed:N,showArchived:E,showEnvConfigModal:A,showAddMoreDialog:F,typesToAdd:G,hasToken:V,isCheckingToken:Y,summary:Ne,activeIdeas:ge,archivedIdeas:Re,selectedIds:m,setSelectedIdea:_,setActiveTab:w,setShowConfigDialog:S,setShowDismissed:T,setShowArchived:D,setShowEnvConfigModal:P,setShowAddMoreDialog:U,setTypesToAdd:$,setConfig:l,handleGenerate:O,handleRefresh:L,handleStop:I,handleDismissAll:q,handleDeleteSelected:he,handleSelectAll:de,handleEnvConfigured:z,getAvailableTypesToAdd:ee,handleAddMoreIdeas:ie,toggleTypeToAdd:re,handleConvertToTask:X,handleGoToTask:W,handleDismiss:Q,toggleIdeationType:se,toggleSelectIdea:f,clearSelection:x,getIdeasByType:ae=>sae(r,ae)}}function lae({projectId:e,onGoToTask:t}){const{session:n,generationStatus:r,isGenerating:i,config:o,logs:c,typeStates:l,selectedIdea:d,activeTab:h,showConfigDialog:m,showDismissed:f,showArchived:g,showEnvConfigModal:x,showAddMoreDialog:C,typesToAdd:_,hasToken:b,isCheckingToken:w,summary:j,activeIdeas:S,selectedIds:N,setSelectedIdea:T,setActiveTab:E,setShowConfigDialog:D,setShowDismissed:A,setShowArchived:P,setShowEnvConfigModal:M,setShowAddMoreDialog:B,setTypesToAdd:F,setConfig:U,handleGenerate:G,handleRefresh:$,handleStop:V,handleDismissAll:Y,handleDeleteSelected:K,handleSelectAll:O,handleEnvConfigured:L,getAvailableTypesToAdd:I,handleAddMoreIdeas:q,toggleTypeToAdd:z,handleConvertToTask:ee,handleGoToTask:ie,handleDismiss:re,toggleIdeationType:X,toggleSelectIdea:W,clearSelection:Q,getIdeasByType:se}=oae(e,{onGoToTask:t});return i?s.jsx(Xie,{generationStatus:r,logs:c,typeStates:l,enabledTypes:o.enabledTypes,session:n,onSelectIdea:T,selectedIdea:d,onConvert:ee,onGoToTask:ie,onDismiss:re,onStop:V}):n?s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(Hie,{totalIdeas:j.totalIdeas,ideaCountByType:j.byType,showDismissed:f,showArchived:g,selectedCount:N.size,onToggleShowDismissed:()=>A(!f),onToggleShowArchived:()=>P(!g),onOpenConfig:()=>D(!0),onOpenAddMore:()=>{F([]),B(!0)},onDismissAll:Y,onDeleteSelected:K,onSelectAll:()=>O(S),onClearSelection:Q,onRefresh:$,hasActiveIdeas:S.length>0,canAddMore:I().length>0}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs(Uie,{activeTab:h,onTabChange:E,children:[s.jsx(Pr,{value:"all",className:"flex-1 overflow-auto p-4",children:s.jsxs("div",{className:"grid gap-3",children:[S.map(he=>s.jsx(j0,{idea:he,isSelected:N.has(he.id),onClick:()=>T(d?.id===he.id?null:he),onConvert:ee,onGoToTask:ie,onDismiss:re,onToggleSelect:W},he.id)),S.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No ideas to display"})]})}),eh.map(he=>{const de=se(he).filter(Ne=>!(!f&&Ne.status==="dismissed"||!g&&Ne.status==="archived"));return s.jsxs(Pr,{value:he,className:"flex-1 overflow-auto p-4",children:[s.jsx("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:Ub[he]})}),s.jsx("div",{className:"grid gap-3",children:de.map(Ne=>s.jsx(j0,{idea:Ne,isSelected:N.has(Ne.id),onClick:()=>T(d?.id===Ne.id?null:Ne),onConvert:ee,onGoToTask:ie,onDismiss:re,onToggleSelect:W},Ne.id))})]},he)})]})}),d&&s.jsx(D5,{idea:d,onClose:()=>T(null),onConvert:ee,onGoToTask:ie,onDismiss:re}),s.jsx(AE,{showConfigDialog:m,showAddMoreDialog:C,config:o,typesToAdd:_,availableTypesToAdd:I(),onToggleIdeationType:X,onToggleTypeToAdd:z,onSetConfig:U,onCloseConfigDialog:()=>D(!1),onCloseAddMoreDialog:()=>B(!1),onConfirmAddMore:q}),s.jsx(EE,{open:x,onOpenChange:M,onConfigured:L,title:"Claude Authentication Required",description:"A Claude Code OAuth token is required to generate AI-powered feature ideas.",projectId:e})]}):s.jsxs(s.Fragment,{children:[s.jsx(Fie,{config:o,hasToken:b,isCheckingToken:w,onGenerate:G,onOpenConfig:()=>D(!0),onToggleIdeationType:X}),s.jsx(AE,{showConfigDialog:m,showAddMoreDialog:!1,config:o,typesToAdd:[],availableTypesToAdd:[],onToggleIdeationType:X,onToggleTypeToAdd:()=>{},onSetConfig:U,onCloseConfigDialog:()=>D(!1),onCloseAddMoreDialog:()=>{},onConfirmAddMore:()=>{}}),s.jsx(EE,{open:x,onOpenChange:M,onConfigured:L,title:"Claude Authentication Required",description:"A Claude Code OAuth token is required to generate AI-powered feature ideas.",projectId:e})]})}const OE={phase:"idle",message:""},un=xr((e,t)=>({session:null,sessions:[],status:OE,pendingMessage:"",streamingContent:"",currentTool:null,toolsUsed:[],isLoadingSessions:!1,setSession:n=>e({session:n}),setSessions:n=>e({sessions:n}),setStatus:n=>e({status:n}),setLoadingSessions:n=>e({isLoadingSessions:n}),setPendingMessage:n=>e({pendingMessage:n}),addMessage:n=>e(r=>r.session?{session:{...r.session,messages:[...r.session.messages,n],updatedAt:new Date}}:{session:{id:`session-${Date.now()}`,projectId:"",messages:[n],createdAt:new Date,updatedAt:new Date}}),updateLastAssistantMessage:n=>e(r=>{if(!r.session||r.session.messages.length===0)return r;const i=[...r.session.messages],o=i.length-1,c=i[o];return c.role==="assistant"&&(i[o]={...c,content:n}),{session:{...r.session,messages:i,updatedAt:new Date}}}),appendStreamingContent:n=>e(r=>({streamingContent:r.streamingContent+n})),clearStreamingContent:()=>e({streamingContent:""}),setCurrentTool:n=>e({currentTool:n}),addToolUsage:n=>e(r=>({toolsUsed:[...r.toolsUsed,{name:n.name,input:n.input,timestamp:new Date}]})),clearToolsUsed:()=>e({toolsUsed:[]}),finalizeStreamingMessage:n=>e(r=>{const i=r.streamingContent,o=r.toolsUsed.length>0?[...r.toolsUsed]:void 0;if(!i&&!n&&!o)return{streamingContent:"",toolsUsed:[]};const c={id:`msg-${Date.now()}`,role:"assistant",content:i,timestamp:new Date,suggestedTask:n,toolsUsed:o};return r.session?{streamingContent:"",toolsUsed:[],session:{...r.session,messages:[...r.session.messages,c],updatedAt:new Date}}:{streamingContent:"",toolsUsed:[],session:{id:`session-${Date.now()}`,projectId:"",messages:[c],createdAt:new Date,updatedAt:new Date}}}),clearSession:()=>e({session:null,status:OE,pendingMessage:"",streamingContent:"",currentTool:null,toolsUsed:[]})}));async function Tg(e){const t=un.getState();t.setLoadingSessions(!0);try{const n=await J.listInsightsSessions(e);n.success&&n.data?t.setSessions(n.data):t.setSessions([])}finally{t.setLoadingSessions(!1)}}async function R5(e){const t=await J.getInsightsSession(e);t.success&&t.data?un.getState().setSession(t.data):un.getState().setSession(null),await Tg(e)}function cae(e,t,n){const r=un.getState(),i=r.session,o={id:`msg-${Date.now()}`,role:"user",content:t,timestamp:new Date};r.addMessage(o),r.setPendingMessage(""),r.clearStreamingContent(),r.clearToolsUsed(),r.setStatus({phase:"thinking",message:"Processing your message..."});const c=i?.modelConfig;J.sendInsightsMessage(e,t,c)}async function uae(e){const t=await J.newInsightsSession(e);t.success&&t.data&&(un.getState().setSession(t.data),await Tg(e))}async function dae(e,t){const n=await J.switchInsightsSession(e,t);n.success&&n.data&&(un.getState().setSession(n.data),un.getState().clearStreamingContent(),un.getState().clearToolsUsed(),un.getState().setCurrentTool(null),un.getState().setStatus({phase:"idle",message:""}))}async function hae(e,t){return(await J.deleteInsightsSession(e,t)).success?(await R5(e),!0):!1}async function fae(e,t,n){return(await J.renameInsightsSession(e,t,n)).success?(await Tg(e),!0):!1}async function mae(e,t,n){if((await J.updateInsightsModelConfig(e,t,n)).success){const i=un.getState();return i.session?.id===t&&i.setSession({...i.session,modelConfig:n,updatedAt:new Date}),await Tg(e),!0}return!1}async function pae(e,t,n,r){const i=await J.createTaskFromInsights(e,t,n,r);return i.success&&i.data?i.data:null}function gae(){const e=un.getState,t=J.onInsightsStreamChunk((i,o)=>{switch(o.type){case"text":o.content&&(e().appendStreamingContent(o.content),e().setCurrentTool(null),e().setStatus({phase:"streaming",message:"Receiving response..."}));break;case"tool_start":o.tool&&(e().setCurrentTool({name:o.tool.name,input:o.tool.input}),e().addToolUsage({name:o.tool.name,input:o.tool.input}),e().setStatus({phase:"streaming",message:`Using ${o.tool.name}...`}));break;case"tool_end":e().setCurrentTool(null);break;case"task_suggestion":e().setCurrentTool(null),e().finalizeStreamingMessage(o.suggestedTask);break;case"done":e().setCurrentTool(null),e().finalizeStreamingMessage(),e().setStatus({phase:"complete",message:""});break;case"error":e().setCurrentTool(null),e().setStatus({phase:"error",error:o.error});break}}),n=J.onInsightsStatus((i,o)=>{e().setStatus(o)}),r=J.onInsightsError((i,o)=>{e().setStatus({phase:"error",error:o})});return()=>{t(),n(),r()}}function xae({sessions:e,currentSessionId:t,isLoading:n,onNewSession:r,onSelectSession:i,onDeleteSession:o,onRenameSession:c}){const[l,d]=y.useState(null),[h,m]=y.useState(""),[f,g]=y.useState(null),x=S=>{d(S.id),m(S.title)},C=async()=>{l&&h.trim()&&await c(l,h.trim()),d(null),m("")},_=()=>{d(null),m("")},b=async()=>{f&&(await o(f),g(null))},w=S=>{const N=new Date,T=new Date(S),E=N.getTime()-T.getTime(),D=Math.floor(E/(1e3*60*60*24));return D===0?"Today":D===1?"Yesterday":D<7?`${D} days ago`:T.toLocaleDateString(void 0,{month:"short",day:"numeric"})},j=e.reduce((S,N)=>{const T=w(N.updatedAt);return S[T]||(S[T]=[]),S[T].push(N),S},{});return s.jsxs("div",{className:"flex h-full w-64 flex-col border-r border-border bg-muted/30",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-border px-3 py-3",children:[s.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Chat History"}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:r,title:"New conversation",children:s.jsx(ys,{className:"h-4 w-4"})})]}),s.jsx(cs,{className:"flex-1",children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):e.length===0?s.jsx("div",{className:"px-3 py-8 text-center text-sm text-muted-foreground",children:"No conversations yet"}):s.jsx("div",{className:"py-2",children:Object.entries(j).map(([S,N])=>s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"px-3 py-1 text-[11px] font-medium uppercase tracking-wide text-muted-foreground",children:S}),N.map(T=>s.jsx(vae,{session:T,isActive:T.id===t,isEditing:l===T.id,editTitle:h,onSelect:()=>i(T.id),onStartEdit:()=>x(T),onSaveEdit:C,onCancelEdit:_,onEditTitleChange:m,onDelete:()=>g(T.id)},T.id))]},S))})}),s.jsx(po,{open:!!f,onOpenChange:()=>g(null),children:s.jsxs(da,{children:[s.jsxs(ha,{children:[s.jsx(ma,{children:"Delete conversation?"}),s.jsx(pa,{children:"This will permanently delete this conversation and all its messages. This action cannot be undone."})]}),s.jsxs(fa,{children:[s.jsx(go,{children:"Cancel"}),s.jsx(pl,{onClick:b,children:"Delete"})]})]})})]})}function vae({session:e,isActive:t,isEditing:n,editTitle:r,onSelect:i,onStartEdit:o,onSaveEdit:c,onCancelEdit:l,onEditTitleChange:d,onDelete:h}){const m=f=>{f.key==="Enter"?(f.preventDefault(),c()):f.key==="Escape"&&l()};return n?s.jsxs("div",{className:"group flex items-center gap-1 px-2 py-1",children:[s.jsx(Je,{value:r,onChange:f=>d(f.target.value),onKeyDown:m,className:"h-7 text-sm",autoFocus:!0}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:c,children:s.jsx(ts,{className:"h-3.5 w-3.5 text-success"})}),s.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:l,children:s.jsx(Ys,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}):s.jsxs("div",{className:le("group relative cursor-pointer px-2 py-2 transition-colors hover:bg-muted",t&&"bg-primary/10 hover:bg-primary/15"),onClick:i,children:[s.jsxs("div",{className:"flex items-center gap-1.5 pr-7",children:[s.jsx(qA,{className:le("h-4 w-4 shrink-0",t?"text-primary":"text-muted-foreground")}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:le("line-clamp-2 text-sm leading-tight break-words",t?"font-medium text-foreground":"text-foreground/80"),children:e.title}),s.jsxs("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:[e.messageCount," message",e.messageCount!==1?"s":""]})]})]}),s.jsxs(ll,{modal:!1,children:[s.jsx(cl,{asChild:!0,onClick:f=>f.stopPropagation(),children:s.jsx(te,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 opacity-0 group-hover:opacity-100 data-[state=open]:opacity-100 hover:bg-muted-foreground/20 transition-opacity",children:s.jsx(f8,{className:"h-3.5 w-3.5"})})}),s.jsxs(lo,{align:"end",sideOffset:5,className:"w-36 z-[100]",children:[s.jsxs(Pn,{onSelect:o,children:[s.jsx(ml,{className:"mr-2 h-3.5 w-3.5"}),"Rename"]}),s.jsxs(Pn,{onSelect:h,className:"text-destructive focus:text-destructive",children:[s.jsx(Br,{className:"mr-2 h-3.5 w-3.5"}),"Delete"]})]})]})]})}function yae({currentConfig:e,onSave:t,onClose:n,open:r=!0}){const{t:i}=rs("dialogs"),[o,c]=y.useState(e?.model||"sonnet"),[l,d]=y.useState(e?.thinkingLevel||"medium");y.useEffect(()=>{r&&(c(e?.model||"sonnet"),d(e?.thinkingLevel||"medium"))},[r,e]);const h=()=>{t({profileId:"custom",model:o,thinkingLevel:l})};return s.jsx(sn,{open:r,onOpenChange:n,children:s.jsxs(Xs,{className:"sm:max-w-md",children:[s.jsxs(Jt,{children:[s.jsx(es,{children:i("customModel.title")}),s.jsx(fs,{children:i("customModel.description")})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"model-select",children:i("customModel.model")}),s.jsxs(gt,{value:o,onValueChange:m=>c(m),children:[s.jsx(ft,{id:"model-select",children:s.jsx(xt,{})}),s.jsx(mt,{children:Yr.map(m=>s.jsx(Qe,{value:m.value,children:m.label},m.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"thinking-select",children:i("customModel.thinkingLevel")}),s.jsxs(gt,{value:l,onValueChange:m=>d(m),children:[s.jsx(ft,{id:"thinking-select",children:s.jsx(xt,{})}),s.jsx(mt,{children:Oc.map(m=>s.jsx(Qe,{value:m.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:m.label}),s.jsx("span",{className:"text-xs text-muted-foreground",children:m.description})]})},m.value))})]})]})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:n,children:i("customModel.cancel")}),s.jsx(te,{onClick:h,children:i("customModel.apply")})]})]})})}const BE={Brain:oa,Scale:Tc,Zap:ai,Sparkles:us};function bae({currentConfig:e,onConfigChange:t,disabled:n}){const[r,i]=y.useState(!1),o=e?.profileId||"balanced",c=o==="auto"?"balanced":o,l=Xn.find(g=>g.id===c),d=c==="custom"?Fm:l?.icon?BE[l.icon]:Tc,h=g=>{if(g==="custom"){i(!0);return}const x=Xn.find(C=>C.id===g);x&&t({profileId:x.id,model:x.model,thinkingLevel:x.thinkingLevel})},m=g=>{t(g),i(!1)},f=()=>c==="custom"&&e?`${Yr.find(x=>x.value===e.model)?.label||e.model} + ${e.thinkingLevel}`:l?.name||"Balanced";return s.jsxs(s.Fragment,{children:[s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"sm",className:"h-8 gap-2 px-2",disabled:n,title:`Model: ${f()}`,children:[s.jsx(d,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden text-xs text-muted-foreground sm:inline",children:f()})]})}),s.jsxs(lo,{align:"end",className:"w-64",children:[s.jsx(j5,{children:"Agent Profile"}),Xn.filter(g=>!g.isAutoProfile).map(g=>{const x=BE[g.icon||"Brain"],C=c===g.id,_=Yr.find(b=>b.value===g.model)?.label;return s.jsxs(Pn,{onClick:()=>h(g.id),className:"flex cursor-pointer items-center gap-2",children:[s.jsx(x,{className:"h-4 w-4 shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium",children:g.name}),s.jsxs("div",{className:"truncate text-xs text-muted-foreground",children:[_," + ",g.thinkingLevel]})]}),C&&s.jsx(ts,{className:"h-4 w-4 shrink-0 text-primary"})]},g.id)}),s.jsx(Za,{}),s.jsxs(Pn,{onClick:()=>h("custom"),className:"flex cursor-pointer items-center gap-2",children:[s.jsx(Fm,{className:"h-4 w-4 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:"Custom..."}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Choose model & thinking level"})]}),c==="custom"&&s.jsx(ts,{className:"h-4 w-4 shrink-0 text-primary"})]})]})]}),s.jsx(yae,{open:r,currentConfig:e,onSave:m,onClose:()=>i(!1)})]})}function wae({projectId:e}){const t=un(B=>B.session),n=un(B=>B.sessions),r=un(B=>B.status),i=un(B=>B.streamingContent),o=un(B=>B.currentTool),c=un(B=>B.isLoadingSessions),[l,d]=y.useState(""),[h,m]=y.useState(null),[f,g]=y.useState(new Set),[x,C]=y.useState(!0),_=y.useRef(null),b=y.useRef(null);y.useEffect(()=>(R5(e),gae()),[e]),y.useEffect(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[t?.messages,i]),y.useEffect(()=>{b.current?.focus()},[]),y.useEffect(()=>{g(new Set)},[t?.id]);const w=()=>{const B=l.trim();!B||r.phase==="thinking"||r.phase==="streaming"||(d(""),cae(e,B))},j=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),w())},S=async()=>{await uae(e),g(new Set),b.current?.focus()},N=async B=>{B!==t?.id&&await dae(e,B)},T=async B=>await hae(e,B),E=async(B,F)=>await fae(e,B,F),D=async B=>{if(B.suggestedTask){m(B.id);try{await pae(e,B.suggestedTask.title,B.suggestedTask.description,B.suggestedTask.metadata)&&(g(U=>new Set(U).add(B.id)),mo(e))}finally{m(null)}}},A=async B=>{t?.id&&await mae(e,t.id,B)},P=r.phase==="thinking"||r.phase==="streaming",M=t?.messages||[];return s.jsxs("div",{className:"flex h-full",children:[x&&s.jsx(xae,{sessions:n,currentSessionId:t?.id||null,isLoading:c,onNewSession:S,onSelectSession:N,onDeleteSession:T,onRenameSession:E}),s.jsxs("div",{className:"flex flex-1 flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>C(!x),title:x?"Hide sidebar":"Show sidebar",children:x?s.jsx(jH,{className:"h-4 w-4"}):s.jsx(CH,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:s.jsx(us,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-foreground",children:"Insights"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ask questions about your codebase"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bae,{currentConfig:t?.modelConfig,onConfigChange:A,disabled:P}),s.jsxs(te,{variant:"outline",size:"sm",onClick:S,children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),"New Chat"]})]})]}),s.jsx(cs,{className:"flex-1 px-6 py-4",children:M.length===0&&!i?s.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:s.jsx(qA,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"mb-2 text-lg font-medium text-foreground",children:"Start a Conversation"}),s.jsx("p",{className:"max-w-md text-sm text-muted-foreground",children:"Ask questions about your codebase, get suggestions for improvements, or discuss features you'd like to implement."}),s.jsx("div",{className:"mt-6 flex flex-wrap justify-center gap-2",children:["What is the architecture of this project?","Suggest improvements for code quality","What features could I add next?","Are there any security concerns?"].map(B=>s.jsx(te,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{d(B),b.current?.focus()},children:B},B))})]}):s.jsxs("div",{className:"space-y-6",children:[M.map(B=>s.jsx(Sae,{message:B,onCreateTask:()=>D(B),isCreatingTask:h===B.id,taskCreated:f.has(B.id)},B.id)),(i||o)&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:s.jsx(Bm,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"mb-1 text-sm font-medium text-foreground",children:"Assistant"}),i&&s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:i})}),o&&s.jsx(_ae,{name:o.name,input:o.input})]})]}),r.phase==="thinking"&&!i&&!o&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:s.jsx(Bm,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Thinking..."]})]}),r.phase==="error"&&r.error&&s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm text-destructive",children:[s.jsx(ct,{className:"h-4 w-4 shrink-0"}),r.error]}),s.jsx("div",{ref:_})]})}),s.jsxs("div",{className:"border-t border-border p-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_i,{ref:b,value:l,onChange:B=>d(B.target.value),onKeyDown:j,placeholder:"Ask about your codebase...",className:"min-h-[80px] resize-none",disabled:P}),s.jsx(te,{onClick:w,disabled:!l.trim()||P,className:"self-end",children:P?s.jsx(Ie,{className:"h-4 w-4 animate-spin"}):s.jsx(UH,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Press Enter to send, Shift+Enter for new line"})]})]})]})}function Sae({message:e,onCreateTask:t,isCreatingTask:n,taskCreated:r}){const i=e.role==="user";return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:le("flex h-8 w-8 shrink-0 items-center justify-center rounded-full",i?"bg-muted":"bg-primary/10"),children:i?s.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Bm,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"text-sm font-medium text-foreground",children:i?"You":"Assistant"}),s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:e.content})}),!i&&e.toolsUsed&&e.toolsUsed.length>0&&s.jsx(jae,{tools:e.toolsUsed}),e.suggestedTask&&s.jsx(He,{className:"mt-3 border-primary/20 bg-primary/5",children:s.jsxs(pt,{className:"p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx(us,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Suggested Task"})]}),s.jsx("h4",{className:"mb-2 font-medium text-foreground",children:e.suggestedTask.title}),s.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:e.suggestedTask.description}),e.suggestedTask.metadata&&s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[e.suggestedTask.metadata.category&&s.jsx(je,{variant:"outline",className:le("text-xs",kw[e.suggestedTask.metadata.category]),children:yh[e.suggestedTask.metadata.category]||e.suggestedTask.metadata.category}),e.suggestedTask.metadata.complexity&&s.jsx(je,{variant:"outline",className:le("text-xs",Ew[e.suggestedTask.metadata.complexity]),children:bh[e.suggestedTask.metadata.complexity]||e.suggestedTask.metadata.complexity})]}),s.jsx(te,{size:"sm",onClick:t,disabled:n||r,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):r?s.jsxs(s.Fragment,{children:[s.jsx(rt,{className:"mr-2 h-4 w-4"}),"Task Created"]}):s.jsxs(s.Fragment,{children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),"Create Task"]})})]})})]})]})}function jae({tools:e}){const[t,n]=y.useState(!1);if(e.length===0)return null;const r=e.reduce((c,l)=>(c[l.name]=(c[l.name]||0)+1,c),{}),i=c=>{switch(c){case"Read":return pr;case"Glob":return B0;case"Grep":return bi;default:return pr}},o=c=>{switch(c){case"Read":return"text-blue-500";case"Glob":return"text-amber-500";case"Grep":return"text-green-500";default:return"text-muted-foreground"}};return s.jsxs("div",{className:"mt-2",children:[s.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx("span",{className:"flex items-center gap-1",children:Object.entries(r).map(([c,l])=>{const d=i(c);return s.jsxs("span",{className:le("flex items-center gap-0.5",o(c)),children:[s.jsx(d,{className:"h-3 w-3"}),s.jsx("span",{children:l})]},c)})}),s.jsxs("span",{children:[e.length," tool",e.length!==1?"s":""," used"]}),s.jsx("span",{className:"text-[10px]",children:t?"":""})]}),t&&s.jsx("div",{className:"mt-2 space-y-1 rounded-md border border-border bg-muted/30 p-2",children:e.map((c,l)=>{const d=i(c.name);return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(d,{className:le("h-3 w-3 shrink-0",o(c.name))}),s.jsx("span",{className:"font-medium",children:c.name}),c.input&&s.jsx("span",{className:"text-muted-foreground truncate max-w-[250px]",children:c.input})]},`${c.name}-${l}`)})})]})}function _ae({name:e,input:t}){const n=c=>{switch(c){case"Read":return{icon:pr,label:"Reading file",color:"text-blue-500 bg-blue-500/10"};case"Glob":return{icon:B0,label:"Searching files",color:"text-amber-500 bg-amber-500/10"};case"Grep":return{icon:bi,label:"Searching code",color:"text-green-500 bg-green-500/10"};default:return{icon:Ie,label:c,color:"text-primary bg-primary/10"}}},{icon:r,label:i,color:o}=n(e);return s.jsxs("div",{className:le("mt-2 inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm",o),children:[s.jsx(r,{className:"h-4 w-4 animate-pulse"}),s.jsx("span",{className:"font-medium",children:i}),t&&s.jsx("span",{className:"text-muted-foreground truncate max-w-[300px]",children:t})]})}function Cae(e){const{issues:t,syncStatus:n,isLoading:r,error:i,selectedIssueNumber:o,filterState:c,selectIssue:l,setFilterState:d,getFilteredIssues:h,getOpenIssuesCount:m}=Ah(),f=y.useRef(!1);y.useEffect(()=>{e&&(x0(e),f.current=!0)},[e]),y.useEffect(()=>{e&&n?.connected&&Hy(e,c)},[e,c,n?.connected]);const g=y.useCallback(()=>{e&&(x0(e),Hy(e,c))},[e,c]),x=y.useCallback(C=>{d(C),e&&Hy(e,C)},[e,d]);return{issues:t,syncStatus:n,isLoading:r,error:i,selectedIssueNumber:o,filterState:c,selectIssue:l,getFilteredIssues:h,getOpenIssuesCount:m,handleRefresh:g,handleFilterChange:x}}function Nae(e){const{investigationStatus:t,lastInvestigationResult:n,setInvestigationStatus:r,setInvestigationResult:i,setError:o}=Ah();y.useEffect(()=>{if(!e)return;const d=J.onGitHubInvestigationProgress((f,g)=>{f===e&&r(g)}),h=J.onGitHubInvestigationComplete((f,g)=>{f===e&&(i(g),g.success&&g.taskId&&mo(e))}),m=J.onGitHubInvestigationError((f,g)=>{f===e&&(o(g),r({phase:"error",progress:0,message:g}))});return()=>{d(),h(),m()}},[e,r,i,o]);const c=y.useCallback((d,h)=>{e&&Hte(e,d.number,h)},[e]),l=y.useCallback(()=>{r({phase:"idle",progress:0,message:""})},[r]);return{investigationStatus:t,lastInvestigationResult:n,startInvestigation:c,resetInvestigationStatus:l}}function P5(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function kae(e,t){if(!t)return e;const n=t.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(n)||r.body?.toLowerCase().includes(n))}function Eae(e){const[t,n]=y.useState(""),r=y.useMemo(()=>kae(e,t),[e,t]);return{searchQuery:t,setSearchQuery:n,filteredIssues:r}}function Aae({issue:e,isSelected:t,onClick:n,onInvestigate:r}){return s.jsx("div",{className:`group p-3 rounded-lg cursor-pointer transition-colors ${t?"bg-accent/50 border border-accent":"hover:bg-muted/50 border border-transparent"}`,onClick:n,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(je,{variant:"outline",className:`text-xs ${CR[e.state]}`,children:_R[e.state]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",e.number]})]}),s.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:e.title}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ja,{className:"h-3 w-3"}),e.author.login]}),e.commentsCount>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(H0,{className:"h-3 w-3"}),e.commentsCount]}),e.labels.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Nb,{className:"h-3 w-3"}),e.labels.length]})]})]}),s.jsx(te,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:i=>{i.stopPropagation(),r()},children:s.jsx(us,{className:"h-4 w-4"})})]})})}function Tae({issue:e,onInvestigate:t,investigationResult:n,linkedTaskId:r,onViewTask:i}){const o=r||(n?.success?n.taskId:void 0),c=!!o,l=()=>{o&&i&&i(o)};return s.jsx(cs,{className:"flex-1",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(je,{variant:"outline",className:`${CR[e.state]}`,children:_R[e.state]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",e.number]})]}),s.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:e.htmlUrl,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Fs,{className:"h-4 w-4"})})})]}),s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e.title})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ja,{className:"h-4 w-4"}),e.author.login]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ci,{className:"h-4 w-4"}),P5(e.createdAt)]}),e.commentsCount>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(H0,{className:"h-4 w-4"}),e.commentsCount," comments"]})]}),e.labels.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:e.labels.map(d=>s.jsx(je,{variant:"outline",style:{backgroundColor:`#${d.color}20`,borderColor:`#${d.color}50`,color:`#${d.color}`},children:d.name},d.id))}),s.jsx("div",{className:"flex items-center gap-2",children:c?s.jsxs(te,{onClick:l,className:"flex-1",variant:"secondary",children:[s.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Task"]}):s.jsxs(te,{onClick:t,className:"flex-1",children:[s.jsx(us,{className:"h-4 w-4 mr-2"}),"Create Task"]})}),c&&s.jsxs(He,{className:"bg-success/5 border-success/30",children:[s.jsx(In,{className:"pb-2",children:s.jsxs(On,{className:"text-sm flex items-center gap-2 text-success",children:[s.jsx(rt,{className:"h-4 w-4"}),"Task Linked"]})}),s.jsx(pt,{className:"text-sm space-y-2",children:n?.success?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-foreground",children:n.analysis.summary}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(je,{className:jW[n.analysis.estimatedComplexity],children:n.analysis.estimatedComplexity}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Task ID: ",o]})]})]}):s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Task ID: ",o]})})})]}),s.jsxs(He,{children:[s.jsx(In,{className:"pb-2",children:s.jsx(On,{className:"text-sm",children:"Description"})}),s.jsx(pt,{children:e.body?s.jsx("div",{className:"prose prose-sm prose-invert max-w-none",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-muted-foreground font-sans",children:e.body})}):s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No description provided."})})]}),e.assignees.length>0&&s.jsxs(He,{children:[s.jsx(In,{className:"pb-2",children:s.jsx(On,{className:"text-sm",children:"Assignees"})}),s.jsx(pt,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.assignees.map(d=>s.jsxs(je,{variant:"outline",children:[s.jsx(Ja,{className:"h-3 w-3 mr-1"}),d.login]},d.login))})})]}),e.milestone&&s.jsxs(He,{children:[s.jsx(In,{className:"pb-2",children:s.jsx(On,{className:"text-sm",children:"Milestone"})}),s.jsx(pt,{children:s.jsx(je,{variant:"outline",children:e.milestone.title})})]})]})})}function Dae({open:e,onOpenChange:t,selectedIssue:n,investigationStatus:r,onStartInvestigation:i,onClose:o,projectId:c}){const[l,d]=y.useState([]),[h,m]=y.useState([]),[f,g]=y.useState(!1),[x,C]=y.useState(null);y.useEffect(()=>{if(e&&n&&c){let j=!0;return g(!0),d([]),m([]),C(null),J.getIssueComments(c,n.number).then(S=>{j&&S.success&&S.data&&(d(S.data),m(S.data.map(N=>N.id)))}).catch(S=>{j&&(console.error("Failed to fetch comments:",S),C(S instanceof Error?S.message:"Failed to load comments"))}).finally(()=>{j&&g(!1)}),()=>{j=!1}}},[e,n,c]);const _=j=>{m(S=>S.includes(j)?S.filter(N=>N!==j):[...S,j])},b=()=>{h.length===l.length?m([]):m(l.map(j=>j.id))},w=()=>{i(h)};return s.jsx(sn,{open:e,onOpenChange:t,children:s.jsxs(Xs,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(us,{className:"h-5 w-5 text-info"}),"Create Task from Issue"]}),s.jsx(fs,{children:n&&s.jsxs("span",{children:["Issue #",n.number,": ",n.title]})})]}),r.phase==="idle"?s.jsxs("div",{className:"space-y-4 flex-1 min-h-0 flex flex-col",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a task from this GitHub issue. The task will be added to your Kanban board in the Backlog column."}),f?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):x?s.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-4",children:[s.jsx("p",{className:"text-sm text-destructive font-medium",children:"Failed to load comments"}),s.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:x})]}):l.length>0?s.jsxs("div",{className:"space-y-2 flex-1 min-h-0 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(H0,{className:"h-4 w-4"}),"Select Comments to Include (",h.length,"/",l.length,")"]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:b,className:"text-xs",children:h.length===l.length?"Deselect All":"Select All"})]}),s.jsx(cs,{className:"flex-1 min-h-0 border rounded-md",children:s.jsx("div",{className:"p-2 space-y-2",children:l.map(j=>s.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>_(j.id),children:[s.jsx(ca,{checked:h.includes(j.id),onCheckedChange:()=>_(j.id),onClick:S=>S.stopPropagation()}),s.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:j.user.login}),s.jsx("span",{children:""}),s.jsx("span",{children:P5(j.created_at)})]}),s.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words line-clamp-3",children:j.body})]})]},j.id))})})]}):s.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"The task will include:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:" Issue title and description"}),s.jsx("li",{children:" Link back to the GitHub issue"}),s.jsx("li",{children:" Labels and metadata from the issue"}),s.jsx("li",{children:" No comments (this issue has no comments)"})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:r.message}),s.jsxs("span",{className:"text-foreground",children:[r.progress,"%"]})]}),s.jsx(ao,{value:r.progress,className:"h-2"})]}),r.phase==="error"&&s.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:r.error}),r.phase==="complete"&&s.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-3 flex items-center gap-2 text-sm text-success",children:[s.jsx(rt,{className:"h-4 w-4"}),"Task created! View it in your Kanban board."]})]}),s.jsxs(Ts,{children:[r.phase==="idle"&&s.jsxs(s.Fragment,{children:[s.jsx(te,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(te,{onClick:w,children:[s.jsx(us,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),r.phase!=="idle"&&r.phase!=="complete"&&s.jsxs(te,{variant:"outline",disabled:!0,children:[s.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}),r.phase==="complete"&&s.jsx(te,{onClick:o,children:"Done"})]})]})})}function M5({searchQuery:e,icon:t=Yn,message:n}){return s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:s.jsx(t,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"No issues match your search":n})]})}function Rae({error:e,onOpenSettings:t}){return s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:s.jsx(Yn,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"GitHub Not Connected"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md",children:e||"Configure your GitHub token and repository in project settings to sync issues."}),t&&s.jsxs(te,{onClick:t,variant:"outline",children:[s.jsx(oh,{className:"h-4 w-4 mr-2"}),"Open Settings"]})]})}function Pae({repoFullName:e,openIssuesCount:t,isLoading:n,searchQuery:r,filterState:i,onSearchChange:o,onFilterChange:c,onRefresh:l}){return s.jsxs("div",{className:"shrink-0 p-4 border-b border-border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(Yn,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"GitHub Issues"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(je,{variant:"outline",className:"text-xs",children:[t," open"]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:l,disabled:n,children:s.jsx(Dt,{className:`h-4 w-4 ${n?"animate-spin":""}`})})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Je,{placeholder:"Search issues...",value:r,onChange:d=>o(d.target.value),className:"pl-9"})]}),s.jsxs(gt,{value:i,onValueChange:c,children:[s.jsxs(ft,{className:"w-32",children:[s.jsx($A,{className:"h-4 w-4 mr-2"}),s.jsx(xt,{})]}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"open",children:"Open"}),s.jsx(Qe,{value:"closed",children:"Closed"}),s.jsx(Qe,{value:"all",children:"All"})]})]})]})]})}function Mae({issues:e,selectedIssueNumber:t,isLoading:n,error:r,onSelectIssue:i,onInvestigate:o}){return r?s.jsx("div",{className:"p-4 bg-destructive/10 border-b border-destructive/30",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[s.jsx(ct,{className:"h-4 w-4"}),r]})}):n?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx(Ie,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.length===0?s.jsx(M5,{message:"No issues found"}):s.jsx(cs,{className:"flex-1",children:s.jsx("div",{className:"p-2 space-y-1",children:e.map(c=>s.jsx(Aae,{issue:c,isSelected:t===c.number,onClick:()=>i(c.number),onInvestigate:()=>o(c)},c.id))})})}function Lae({onOpenSettings:e,onNavigateToTask:t}){const n=Et(Y=>Y.projects),r=Et(Y=>Y.selectedProjectId),i=n.find(Y=>Y.id===r),o=Ks(Y=>Y.tasks),{issues:c,syncStatus:l,isLoading:d,error:h,selectedIssueNumber:m,filterState:f,selectIssue:g,getFilteredIssues:x,getOpenIssuesCount:C,handleRefresh:_,handleFilterChange:b}=Cae(i?.id),{investigationStatus:w,lastInvestigationResult:j,startInvestigation:S,resetInvestigationStatus:N}=Nae(i?.id),{searchQuery:T,setSearchQuery:E,filteredIssues:D}=Eae(x()),[A,P]=y.useState(!1),[M,B]=y.useState(null),F=y.useMemo(()=>{const Y=new Map;for(const K of o)K.metadata?.githubIssueNumber&&Y.set(K.metadata.githubIssueNumber,K.specId||K.id);return Y},[o]),U=y.useCallback(Y=>{B(Y),P(!0)},[]),G=y.useCallback(Y=>{M&&S(M,Y)},[M,S]),$=y.useCallback(()=>{P(!1),N()},[N]),V=c.find(Y=>Y.number===m);return l?.connected?s.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[s.jsx(Pae,{repoFullName:l.repoFullName??"",openIssuesCount:C(),isLoading:d,searchQuery:T,filterState:f,onSearchChange:E,onFilterChange:b,onRefresh:_}),s.jsxs("div",{className:"flex-1 flex min-h-0",children:[s.jsx("div",{className:"w-1/2 border-r border-border flex flex-col",children:s.jsx(Mae,{issues:D,selectedIssueNumber:m,isLoading:d,error:h,onSelectIssue:g,onInvestigate:U})}),s.jsx("div",{className:"w-1/2 flex flex-col",children:V?s.jsx(Tae,{issue:V,onInvestigate:()=>U(V),investigationResult:j?.issueNumber===V.number?j:null,linkedTaskId:F.get(V.number),onViewTask:t}):s.jsx(M5,{message:"Select an issue to view details"})})]}),s.jsx(Dae,{open:A,onOpenChange:P,selectedIssue:M,investigationStatus:w,onStartInvestigation:G,onClose:$,projectId:i?.id})]}):s.jsx(Rae,{error:l?.error||null,onOpenSettings:e})}function Iae({step:e,onRefresh:t}){return s.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-4",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Changelog Generator"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e===1?"Step 1: Select completed tasks to include":e===2?"Step 2: Configure and generate changelog":"Step 3: Release and archive tasks"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[s.jsx(Jy,{step:1,currentStep:e,label:"Select"}),s.jsx("div",{className:"w-6 h-px bg-border"}),s.jsx(Jy,{step:2,currentStep:e,label:"Generate"}),s.jsx("div",{className:"w-6 h-px bg-border"}),s.jsx(Jy,{step:3,currentStep:e,label:"Release"})]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:t,children:[s.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]})}function Jy({step:e,currentStep:t,label:n}){const r=e===t,i=e<t;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:le("flex h-6 w-6 items-center justify-center rounded-full text-xs font-medium transition-colors",i||r?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:i?s.jsx(ts,{className:"h-3 w-3"}):e}),s.jsx("span",{className:le("text-sm",r?"text-foreground font-medium":"text-muted-foreground"),children:n})]})}var HS="Radio",[Oae,L5]=An(HS),[Bae,zae]=Oae(HS),I5=y.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:o,disabled:c,value:l="on",onCheck:d,form:h,...m}=e,[f,g]=y.useState(null),x=dt(t,b=>g(b)),C=y.useRef(!1),_=f?h||!!f.closest("form"):!0;return s.jsxs(Bae,{scope:n,checked:i,disabled:c,children:[s.jsx(tt.button,{type:"button",role:"radio","aria-checked":i,"data-state":F5(i),"data-disabled":c?"":void 0,disabled:c,value:l,...m,ref:x,onClick:Oe(e.onClick,b=>{i||d?.(),_&&(C.current=b.isPropagationStopped(),C.current||b.stopPropagation())})}),_&&s.jsx(z5,{control:f,bubbles:!C.current,name:r,value:l,checked:i,required:o,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});I5.displayName=HS;var O5="RadioIndicator",B5=y.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,o=zae(O5,n);return s.jsx(wn,{present:r||o.checked,children:s.jsx(tt.span,{"data-state":F5(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})})});B5.displayName=O5;var Fae="RadioBubbleInput",z5=y.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...i},o)=>{const c=y.useRef(null),l=dt(c,o),d=og(n),h=Vp(t);return y.useEffect(()=>{const m=c.current;if(!m)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==n&&x){const C=new Event("click",{bubbles:r});x.call(m,n),m.dispatchEvent(C)}},[d,n,r]),s.jsx(tt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});z5.displayName=Fae;function F5(e){return e?"checked":"unchecked"}var Hae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Dg="RadioGroup",[Uae]=An(Dg,[ru,L5]),H5=ru(),U5=L5(),[$ae,Vae]=Uae(Dg),$5=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:o,required:c=!1,disabled:l=!1,orientation:d,dir:h,loop:m=!0,onValueChange:f,...g}=e,x=H5(n),C=Jc(h),[_,b]=ii({prop:o,defaultProp:i??null,onChange:f,caller:Dg});return s.jsx($ae,{scope:n,name:r,required:c,disabled:l,value:_,onValueChange:b,children:s.jsx(xS,{asChild:!0,...x,orientation:d,dir:C,loop:m,children:s.jsx(tt.div,{role:"radiogroup","aria-required":c,"aria-orientation":d,"data-disabled":l?"":void 0,dir:C,...g,ref:t})})})});$5.displayName=Dg;var V5="RadioGroupItem",G5=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,o=Vae(V5,n),c=o.disabled||r,l=H5(n),d=U5(n),h=y.useRef(null),m=dt(t,h),f=o.value===i.value,g=y.useRef(!1);return y.useEffect(()=>{const x=_=>{Hae.includes(_.key)&&(g.current=!0)},C=()=>g.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",C)}},[]),s.jsx(vS,{asChild:!0,...l,focusable:!c,active:f,children:s.jsx(I5,{disabled:c,required:o.required,checked:f,...d,...i,name:o.name,ref:m,onCheck:()=>o.onValueChange(i.value),onKeyDown:Oe(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Oe(i.onFocus,()=>{g.current&&h.current?.click()})})})});G5.displayName=V5;var Gae="RadioGroupIndicator",q5=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=U5(n);return s.jsx(B5,{...i,...r,ref:t})});q5.displayName=Gae;var W5=$5,K5=G5,qae=q5;const Y5=y.forwardRef(({className:e,...t},n)=>s.jsx(W5,{className:le("grid gap-2",e),...t,ref:n}));Y5.displayName=W5.displayName;const Pm=y.forwardRef(({className:e,...t},n)=>s.jsx(K5,{ref:n,className:le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background","focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(qae,{className:"flex items-center justify-center",children:s.jsx(dl,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Pm.displayName=K5.displayName;function Wae({sourceMode:e,onSourceModeChange:t,doneTasksCount:n,branches:r,tags:i,defaultBranch:o,isLoadingGitData:c,isLoadingCommits:l,gitHistoryType:d,gitHistoryCount:h,gitHistorySinceDate:m,gitHistoryFromTag:f,gitHistoryToTag:g,gitHistorySinceVersion:x,includeMergeCommits:C,onGitHistoryTypeChange:_,onGitHistoryCountChange:b,onGitHistorySinceDateChange:w,onGitHistoryFromTagChange:j,onGitHistoryToTagChange:S,onGitHistorySinceVersionChange:N,onIncludeMergeCommitsChange:T,baseBranch:E,compareBranch:D,onBaseBranchChange:A,onCompareBranchChange:P,onLoadCommitsPreview:M}){const B=r.filter(F=>!F.isRemote);return s.jsx("div",{className:"w-80 shrink-0 border-r border-border overflow-y-auto",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{className:"text-sm font-medium",children:"Changelog Source"}),s.jsxs(Y5,{value:e,onValueChange:F=>t(F),className:"space-y-2",children:[s.jsxs("label",{className:le("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="tasks"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[s.jsx(Pm,{value:"tasks",className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium text-sm",children:wy.tasks}),s.jsx(je,{variant:"secondary",className:"ml-auto text-xs",children:n})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Sy.tasks})]})]}),s.jsxs("label",{className:le("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="git-history"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[s.jsx(Pm,{value:"git-history",className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_b,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium text-sm",children:wy["git-history"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Sy["git-history"]})]})]}),s.jsxs("label",{className:le("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="branch-diff"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[s.jsx(Pm,{value:"branch-diff",className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium text-sm",children:wy["branch-diff"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Sy["branch-diff"]})]})]})]})]}),e==="git-history"&&s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsx(On,{className:"text-sm",children:"Git History Options"})}),s.jsxs(pt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"History Type"}),s.jsxs(gt,{value:d,onValueChange:F=>_(F),children:[s.jsx(ft,{children:s.jsx(xt,{})}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"since-version",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nb,{className:"h-3 w-3"}),"Since Version"]})}),s.jsx(Qe,{value:"recent",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_b,{className:"h-3 w-3"}),"Recent Commits"]})}),s.jsx(Qe,{value:"since-date",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(HA,{className:"h-3 w-3"}),"Since Date"]})}),s.jsx(Qe,{value:"tag-range",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nb,{className:"h-3 w-3"}),"Tag Range"]})})]})]})]}),d==="recent"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"Number of Commits"}),s.jsx(Je,{type:"number",min:1,max:500,value:h,onChange:F=>b(parseInt(F.target.value)||25)})]}),d==="since-date"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"Since Date"}),s.jsx(Je,{type:"date",value:m,onChange:F=>w(F.target.value)})]}),d==="tag-range"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"From Tag"}),s.jsxs(gt,{value:f,onValueChange:j,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"Select tag..."})}),s.jsx(mt,{children:i.map(F=>s.jsx(Qe,{value:F.name,children:F.name},F.name))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"To Tag (optional)"}),s.jsxs(gt,{value:g||"HEAD",onValueChange:F=>S(F==="HEAD"?"":F),children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"HEAD (latest)"})}),s.jsxs(mt,{children:[s.jsx(Qe,{value:"HEAD",children:"HEAD (latest)"}),i.map(F=>s.jsx(Qe,{value:F.name,children:F.name},F.name))]})]})]})]}),d==="since-version"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"Last Version"}),s.jsxs(gt,{value:x,onValueChange:N,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"Select version..."})}),s.jsx(mt,{children:i.map(F=>s.jsx(Qe,{value:F.name,children:F.name},F.name))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All commits since this version will be included"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ca,{id:"merge-commits",checked:C,onCheckedChange:F=>T(F)}),s.jsx(we,{htmlFor:"merge-commits",className:"text-xs cursor-pointer",children:"Include merge commits"})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:M,disabled:l||c,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Load Commits"]})})]})]}),e==="branch-diff"&&s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsx(On,{className:"text-sm",children:"Branch Comparison"})}),s.jsxs(pt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"Base Branch"}),s.jsxs(gt,{value:E,onValueChange:A,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"Select base branch..."})}),s.jsx(mt,{children:B.map(F=>s.jsx(Qe,{value:F.name,children:s.jsxs("div",{className:"flex items-center gap-2",children:[F.name,F.name===o&&s.jsx(je,{variant:"outline",className:"text-xs",children:"default"})]})},F.name))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"The branch you're merging into"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-xs",children:"Compare Branch"}),s.jsxs(gt,{value:D,onValueChange:P,children:[s.jsx(ft,{children:s.jsx(xt,{placeholder:"Select compare branch..."})}),s.jsx(mt,{children:B.map(F=>s.jsx(Qe,{value:F.name,children:s.jsxs("div",{className:"flex items-center gap-2",children:[F.name,F.isCurrent&&s.jsx(je,{variant:"secondary",className:"text-xs",children:"current"})]})},F.name))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"The branch with your changes"})]}),E&&D&&E===D&&s.jsxs("div",{className:"flex items-center gap-2 text-destructive text-xs",children:[s.jsx(ct,{className:"h-3 w-3"}),"Branches must be different"]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:M,disabled:l||c||!E||!D||E===D,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Load Commits"]})})]})]})]})})}function Kae({task:e,isSelected:t,onToggle:n}){const r=new Date(e.completedAt).toLocaleDateString();return s.jsx("label",{className:le("flex flex-col rounded-lg border p-4 cursor-pointer transition-all",t?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50 hover:bg-muted/30"),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ca,{checked:t,onCheckedChange:n,className:"mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-sm leading-tight",children:e.title}),e.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.hasSpecs&&s.jsx(je,{variant:"secondary",className:"text-xs",children:"Has Specs"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:r})]})]})]})})}function Yae({commit:e}){const t=new Date(e.date).toLocaleDateString();return s.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-border p-3 bg-background",children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted",children:s.jsx(Cp,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"text-sm font-medium leading-tight line-clamp-2",children:e.subject}),s.jsx("code",{className:"text-xs text-muted-foreground font-mono shrink-0",children:e.hash})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:e.author}),s.jsx("span",{children:t}),e.filesChanged!==void 0&&s.jsxs("span",{children:[e.filesChanged," file",e.filesChanged!==1?"s":""]})]})]})]})}function Xae({sourceMode:e,doneTasks:t,selectedTaskIds:n,onToggleTask:r,onSelectAll:i,onDeselectAll:o,previewCommits:c,isLoadingCommits:l,onContinue:d,canContinue:h}){const m=()=>{switch(e){case"tasks":return n.length;case"git-history":case"branch-diff":return c.length;default:return 0}},f=()=>{switch(e){case"tasks":return"task";case"git-history":case"branch-diff":return"commit";default:return"item"}};return s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e==="tasks"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between border-b border-border px-6 py-3 bg-muted/30",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm font-medium",children:[n.length," of ",t.length," tasks selected"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:i,className:"h-7 px-2 text-xs",children:"Select All"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:o,className:"h-7 px-2 text-xs",children:"Clear"})]})]})}),s.jsx(cs,{className:"flex-1 p-6",children:t.length===0?s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Completed Tasks"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:'Complete tasks in the Kanban board and mark them as "Done" to include them in your changelog.'})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(g=>s.jsx(Kae,{task:g,isSelected:n.includes(g.id),onToggle:()=>r(g.id)},g.id))})})]}),(e==="git-history"||e==="branch-diff")&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between border-b border-border px-6 py-3 bg-muted/30",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm font-medium",children:[c.length," commit",c.length!==1?"s":""," found"]}),l&&s.jsx(Ie,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})}),s.jsx(cs,{className:"flex-1 p-6",children:l?s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ie,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),s.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading commits..."})]})}):c.length===0?s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cp,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Commits Found"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:e==="git-history"?'Configure the history options and click "Load Commits" to preview.':'Select both branches and click "Load Commits" to see the changes.'})]})}):s.jsx("div",{className:"space-y-2",children:c.map(g=>s.jsx(Yae,{commit:g},g.fullHash))})})]}),s.jsx("div",{className:"flex items-center justify-end border-t border-border px-6 py-4 bg-background",children:s.jsxs(te,{onClick:d,disabled:!h,size:"lg",children:["Continue",s.jsx(L0,{className:"ml-2 h-4 w-4"}),h&&s.jsxs(je,{variant:"secondary",className:"ml-2",children:[m()," ",f(),m()!==1?"s":""]})]})})]})}function Zae(e,t,n,r){switch(e){case"tasks":return{count:t.length,label:"task",details:n.slice(0,3).map(i=>i.title).join(", ")+(n.length>3?` +${n.length-3} more`:"")};case"git-history":case"branch-diff":return{count:r.length,label:"commit",details:r.slice(0,3).map(i=>i.subject.substring(0,40)).join(", ")+(r.length>3?` +${r.length-3} more`:"")};default:return{count:0,label:"item",details:""}}}function Qae(e){return e.startsWith("v")?e:`v${e}`}function Jae(e){if(!e)return null;switch(e){case"breaking":return"Major version bump (breaking changes detected)";case"feature":return"Minor version bump (new features detected)";default:return"Patch version bump (fixes/improvements)"}}function eoe({sourceMode:e,summaryInfo:t,existingChangelog:n,version:r,versionReason:i,date:o,format:c,audience:l,emojiLevel:d,customInstructions:h,generationProgress:m,isGenerating:f,error:g,showAdvanced:x,canGenerate:C,onBack:_,onVersionChange:b,onDateChange:w,onFormatChange:j,onAudienceChange:S,onEmojiLevelChange:N,onCustomInstructionsChange:T,onShowAdvancedChange:E,onGenerate:D}){const A=Jae(i);return s.jsx("div",{className:"w-80 shrink-0 border-r border-border overflow-y-auto",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs(te,{variant:"ghost",size:"sm",onClick:_,className:"-ml-2",children:[s.jsx(NF,{className:"mr-2 h-4 w-4"}),"Back to Selection"]}),s.jsxs("div",{className:"rounded-lg bg-muted/50 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e==="tasks"?s.jsx(pr,{className:"h-4 w-4"}):s.jsx(Cp,{className:"h-4 w-4"}),"Including ",t.count," ",t.label,t.count!==1?"s":""]}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.details})]})]}),s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsx(On,{className:"text-sm",children:"Release Info"})}),s.jsxs(pt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"version",children:"Version"}),s.jsx(Je,{id:"version",value:r,onChange:P=>b(P.target.value),placeholder:"1.0.0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"date",children:"Date"}),s.jsx(Je,{id:"date",type:"date",value:o,onChange:P=>w(P.target.value)})]}),(n?.lastVersion||A)&&s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n?.lastVersion&&s.jsxs("p",{children:["Previous: ",n.lastVersion]}),A&&s.jsx("p",{className:"text-primary/70",children:A})]})]})]}),s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsx(On,{className:"text-sm",children:"Output Style"})}),s.jsxs(pt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Format"}),s.jsxs(gt,{value:c,onValueChange:P=>j(P),children:[s.jsx(ft,{children:s.jsx(xt,{})}),s.jsx(mt,{children:Object.entries(mW).map(([P,M])=>s.jsx(Qe,{value:P,children:s.jsxs("div",{children:[s.jsx("div",{children:M}),s.jsx("div",{className:"text-xs text-muted-foreground",children:pW[P]})]})},P))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Audience"}),s.jsxs(gt,{value:l,onValueChange:P=>S(P),children:[s.jsx(ft,{children:s.jsx(xt,{})}),s.jsx(mt,{children:Object.entries(gW).map(([P,M])=>s.jsx(Qe,{value:P,children:s.jsxs("div",{children:[s.jsx("div",{children:M}),s.jsx("div",{className:"text-xs text-muted-foreground",children:xW[P]})]})},P))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Emojis"}),s.jsxs(gt,{value:d,onValueChange:P=>N(P),children:[s.jsx(ft,{children:s.jsx(xt,{})}),s.jsx(mt,{children:Object.entries(vW).map(([P,M])=>s.jsx(Qe,{value:P,children:s.jsxs("div",{children:[s.jsx("div",{children:M}),s.jsx("div",{className:"text-xs text-muted-foreground",children:yW[P]})]})},P))})]})]})]})]}),s.jsxs(yo,{open:x,onOpenChange:E,children:[s.jsx(bo,{asChild:!0,children:s.jsxs(te,{variant:"ghost",className:"w-full justify-between",children:["Advanced Options",x?s.jsx(Or,{className:"h-4 w-4"}):s.jsx(Gt,{className:"h-4 w-4"})]})}),s.jsx(wo,{className:"pt-2",children:s.jsx(He,{children:s.jsx(pt,{className:"pt-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"instructions",children:"Custom Instructions"}),s.jsx(_i,{id:"instructions",value:h,onChange:P=>T(P.target.value),placeholder:"Add any special instructions for the AI...",rows:3}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional. Guide the AI on tone, specific details to include, etc."})]})})})})]}),s.jsx(te,{className:"w-full",onClick:D,disabled:!C,size:"lg",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(us,{className:"mr-2 h-4 w-4"}),"Generate Changelog"]})}),m&&f&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:bW[m.stage]}),s.jsxs("span",{children:[m.progress,"%"]})]}),s.jsx(ao,{value:m.progress})]}),g&&s.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),s.jsx("span",{className:"text-destructive",children:g})]})})]})})}function toe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const soe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,noe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,roe={};function zE(e,t){return(roe.jsx?noe:soe).test(e)}const ioe=/[ \t\n\f\r]/g;function aoe(e){return typeof e=="object"?e.type==="text"?FE(e.value):!1:FE(e)}function FE(e){return e.replace(ioe,"")===""}class Rh{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Rh.prototype.normal={};Rh.prototype.property={};Rh.prototype.space=void 0;function X5(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Rh(n,r,t)}function _0(e){return e.toLowerCase()}class Qn{constructor(t,n){this.attribute=n,this.property=t}}Qn.prototype.attribute="";Qn.prototype.booleanish=!1;Qn.prototype.boolean=!1;Qn.prototype.commaOrSpaceSeparated=!1;Qn.prototype.commaSeparated=!1;Qn.prototype.defined=!1;Qn.prototype.mustUseProperty=!1;Qn.prototype.number=!1;Qn.prototype.overloadedBoolean=!1;Qn.prototype.property="";Qn.prototype.spaceSeparated=!1;Qn.prototype.space=void 0;let ooe=0;const wt=vl(),qs=vl(),C0=vl(),Pe=vl(),gs=vl(),Ec=vl(),or=vl();function vl(){return 2**++ooe}const N0=Object.freeze(Object.defineProperty({__proto__:null,boolean:wt,booleanish:qs,commaOrSpaceSeparated:or,commaSeparated:Ec,number:Pe,overloadedBoolean:C0,spaceSeparated:gs},Symbol.toStringTag,{value:"Module"})),eb=Object.keys(N0);class US extends Qn{constructor(t,n,r,i){let o=-1;if(super(t,n),HE(this,"space",i),typeof r=="number")for(;++o<eb.length;){const c=eb[o];HE(this,eb[o],(r&N0[c])===N0[c])}}}US.prototype.defined=!0;function HE(e,t,n){n&&(e[t]=n)}function au(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new US(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[_0(r)]=r,n[_0(o.attribute)]=r}return new Rh(t,n,e.space)}const Z5=au({properties:{ariaActiveDescendant:null,ariaAtomic:qs,ariaAutoComplete:null,ariaBusy:qs,ariaChecked:qs,ariaColCount:Pe,ariaColIndex:Pe,ariaColSpan:Pe,ariaControls:gs,ariaCurrent:null,ariaDescribedBy:gs,ariaDetails:null,ariaDisabled:qs,ariaDropEffect:gs,ariaErrorMessage:null,ariaExpanded:qs,ariaFlowTo:gs,ariaGrabbed:qs,ariaHasPopup:null,ariaHidden:qs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gs,ariaLevel:Pe,ariaLive:null,ariaModal:qs,ariaMultiLine:qs,ariaMultiSelectable:qs,ariaOrientation:null,ariaOwns:gs,ariaPlaceholder:null,ariaPosInSet:Pe,ariaPressed:qs,ariaReadOnly:qs,ariaRelevant:null,ariaRequired:qs,ariaRoleDescription:gs,ariaRowCount:Pe,ariaRowIndex:Pe,ariaRowSpan:Pe,ariaSelected:qs,ariaSetSize:Pe,ariaSort:null,ariaValueMax:Pe,ariaValueMin:Pe,ariaValueNow:Pe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Q5(e,t){return t in e?e[t]:t}function J5(e,t){return Q5(e,t.toLowerCase())}const loe=au({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ec,acceptCharset:gs,accessKey:gs,action:null,allow:null,allowFullScreen:wt,allowPaymentRequest:wt,allowUserMedia:wt,alt:null,as:null,async:wt,autoCapitalize:null,autoComplete:gs,autoFocus:wt,autoPlay:wt,blocking:gs,capture:null,charSet:null,checked:wt,cite:null,className:gs,cols:Pe,colSpan:null,content:null,contentEditable:qs,controls:wt,controlsList:gs,coords:Pe|Ec,crossOrigin:null,data:null,dateTime:null,decoding:null,default:wt,defer:wt,dir:null,dirName:null,disabled:wt,download:C0,draggable:qs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:wt,formTarget:null,headers:gs,height:Pe,hidden:C0,high:Pe,href:null,hrefLang:null,htmlFor:gs,httpEquiv:gs,id:null,imageSizes:null,imageSrcSet:null,inert:wt,inputMode:null,integrity:null,is:null,isMap:wt,itemId:null,itemProp:gs,itemRef:gs,itemScope:wt,itemType:gs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:wt,low:Pe,manifest:null,max:null,maxLength:Pe,media:null,method:null,min:null,minLength:Pe,multiple:wt,muted:wt,name:null,nonce:null,noModule:wt,noValidate:wt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:wt,optimum:Pe,pattern:null,ping:gs,placeholder:null,playsInline:wt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:wt,referrerPolicy:null,rel:gs,required:wt,reversed:wt,rows:Pe,rowSpan:Pe,sandbox:gs,scope:null,scoped:wt,seamless:wt,selected:wt,shadowRootClonable:wt,shadowRootDelegatesFocus:wt,shadowRootMode:null,shape:null,size:Pe,sizes:null,slot:null,span:Pe,spellCheck:qs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Pe,step:null,style:null,tabIndex:Pe,target:null,title:null,translate:null,type:null,typeMustMatch:wt,useMap:null,value:qs,width:Pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gs,axis:null,background:null,bgColor:null,border:Pe,borderColor:null,bottomMargin:Pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:wt,declare:wt,event:null,face:null,frame:null,frameBorder:null,hSpace:Pe,leftMargin:Pe,link:null,longDesc:null,lowSrc:null,marginHeight:Pe,marginWidth:Pe,noResize:wt,noHref:wt,noShade:wt,noWrap:wt,object:null,profile:null,prompt:null,rev:null,rightMargin:Pe,rules:null,scheme:null,scrolling:qs,standby:null,summary:null,text:null,topMargin:Pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:wt,disableRemotePlayback:wt,prefix:null,property:null,results:Pe,security:null,unselectable:null},space:"html",transform:J5}),coe=au({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:or,accentHeight:Pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Pe,amplitude:Pe,arabicForm:null,ascent:Pe,attributeName:null,attributeType:null,azimuth:Pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Pe,by:null,calcMode:null,capHeight:Pe,className:gs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Pe,diffuseConstant:Pe,direction:null,display:null,dur:null,divisor:Pe,dominantBaseline:null,download:wt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Pe,enableBackground:null,end:null,event:null,exponent:Pe,externalResourcesRequired:null,fill:null,fillOpacity:Pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ec,g2:Ec,glyphName:Ec,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Pe,horizOriginX:Pe,horizOriginY:Pe,id:null,ideographic:Pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Pe,k:Pe,k1:Pe,k2:Pe,k3:Pe,k4:Pe,kernelMatrix:or,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Pe,overlineThickness:Pe,paintOrder:null,panose1:null,path:null,pathLength:Pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Pe,pointsAtY:Pe,pointsAtZ:Pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:or,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:or,rev:or,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:or,requiredFeatures:or,requiredFonts:or,requiredFormats:or,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Pe,specularExponent:Pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Pe,strikethroughThickness:Pe,string:null,stroke:null,strokeDashArray:or,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Pe,strokeOpacity:Pe,strokeWidth:null,style:null,surfaceScale:Pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:or,tabIndex:Pe,tableValues:null,target:null,targetX:Pe,targetY:Pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:or,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Pe,underlineThickness:Pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Pe,values:null,vAlphabetic:Pe,vMathematical:Pe,vectorEffect:null,vHanging:Pe,vIdeographic:Pe,version:null,vertAdvY:Pe,vertOriginX:Pe,vertOriginY:Pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Q5}),eL=au({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),tL=au({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:J5}),sL=au({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),uoe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},doe=/[A-Z]/g,UE=/-[a-z]/g,hoe=/^data[-\w.:]+$/i;function foe(e,t){const n=_0(t);let r=t,i=Qn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hoe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(UE,poe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!UE.test(o)){let c=o.replace(doe,moe);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}i=US}return new i(r,t)}function moe(e){return"-"+e.toLowerCase()}function poe(e){return e.charAt(1).toUpperCase()}const goe=X5([Z5,loe,eL,tL,sL],"html"),$S=X5([Z5,coe,eL,tL,sL],"svg");function xoe(e){return e.join(" ").trim()}var uc={},tb,$E;function voe(){if($E)return tb;$E=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,l=/^\s+|\s+$/g,d=`
`,h="/",m="*",f="",g="comment",x="declaration";function C(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var j=1,S=1;function N(G){var $=G.match(t);$&&(j+=$.length);var V=G.lastIndexOf(d);S=~V?G.length-V:S+G.length}function T(){var G={line:j,column:S};return function($){return $.position=new E(G),P(),$}}function E(G){this.start=G,this.end={line:j,column:S},this.source=w.source}E.prototype.content=b;function D(G){var $=new Error(w.source+":"+j+":"+S+": "+G);if($.reason=G,$.filename=w.source,$.line=j,$.column=S,$.source=b,!w.silent)throw $}function A(G){var $=G.exec(b);if($){var V=$[0];return N(V),b=b.slice(V.length),$}}function P(){A(n)}function M(G){var $;for(G=G||[];$=B();)$!==!1&&G.push($);return G}function B(){var G=T();if(!(h!=b.charAt(0)||m!=b.charAt(1))){for(var $=2;f!=b.charAt($)&&(m!=b.charAt($)||h!=b.charAt($+1));)++$;if($+=2,f===b.charAt($-1))return D("End of comment missing");var V=b.slice(2,$-2);return S+=2,N(V),b=b.slice($),S+=2,G({type:g,comment:V})}}function F(){var G=T(),$=A(r);if($){if(B(),!A(i))return D("property missing ':'");var V=A(o),Y=G({type:x,property:_($[0].replace(e,f)),value:V?_(V[0].replace(e,f)):f});return A(c),Y}}function U(){var G=[];M(G);for(var $;$=F();)$!==!1&&(G.push($),M(G));return G}return P(),U()}function _(b){return b?b.replace(l,f):f}return tb=C,tb}var VE;function yoe(){if(VE)return uc;VE=1;var e=uc&&uc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(uc,"__esModule",{value:!0}),uc.default=n;const t=e(voe());function n(r,i){let o=null;if(!r||typeof r!="string")return o;const c=(0,t.default)(r),l=typeof i=="function";return c.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:m}=d;l?i(h,m,d):m&&(o=o||{},o[h]=m)}),o}return uc}var od={},GE;function boe(){if(GE)return od;GE=1,Object.defineProperty(od,"__esModule",{value:!0}),od.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(h){return!h||n.test(h)||e.test(h)},c=function(h,m){return m.toUpperCase()},l=function(h,m){return"".concat(m,"-")},d=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(i,l):h=h.replace(r,l),h.replace(t,c))};return od.camelCase=d,od}var ld,qE;function woe(){if(qE)return ld;qE=1;var e=ld&&ld.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(yoe()),n=boe();function r(i,o){var c={};return!i||typeof i!="string"||(0,t.default)(i,function(l,d){l&&d&&(c[(0,n.camelCase)(l,o)]=d)}),c}return r.default=r,ld=r,ld}var Soe=woe();const joe=nh(Soe),nL=rL("end"),VS=rL("start");function rL(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function _oe(e){const t=VS(e),n=nL(e);if(t&&n)return{start:t,end:n}}function kd(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?WE(e.position):"start"in e||"end"in e?WE(e):"line"in e||"column"in e?k0(e):""}function k0(e){return KE(e&&e.line)+":"+KE(e&&e.column)}function WE(e){return k0(e&&e.start)+"-"+k0(e&&e.end)}function KE(e){return e&&typeof e=="number"?e:1}class Tn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},c=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(c=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?o.ruleId=r:(o.source=r.slice(0,d),o.ruleId=r.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const l=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=kd(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=c&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Tn.prototype.file="";Tn.prototype.name="";Tn.prototype.reason="";Tn.prototype.message="";Tn.prototype.stack="";Tn.prototype.column=void 0;Tn.prototype.line=void 0;Tn.prototype.ancestors=void 0;Tn.prototype.cause=void 0;Tn.prototype.fatal=void 0;Tn.prototype.place=void 0;Tn.prototype.ruleId=void 0;Tn.prototype.source=void 0;const GS={}.hasOwnProperty,Coe=new Map,Noe=/[A-Z]/g,koe=new Set(["table","tbody","thead","tfoot","tr"]),Eoe=new Set(["td","th"]),iL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Aoe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Ooe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Ioe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?$S:goe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=aL(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function aL(e,t,n){if(t.type==="element")return Toe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Doe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Poe(e,t,n);if(t.type==="mdxjsEsm")return Roe(e,t);if(t.type==="root")return Moe(e,t,n);if(t.type==="text")return Loe(e,t)}function Toe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$S,e.schema=i),e.ancestors.push(t);const o=lL(e,t.tagName,!1),c=Boe(e,t);let l=WS(e,t);return koe.has(t.tagName)&&(l=l.filter(function(d){return typeof d=="string"?!aoe(d):!0})),oL(e,c,o,t),qS(c,l),e.ancestors.pop(),e.schema=r,e.create(t,o,c,n)}function Doe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}th(e,t.position)}function Roe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);th(e,t.position)}function Poe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=$S,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:lL(e,t.name,!0),c=zoe(e,t),l=WS(e,t);return oL(e,c,o,t),qS(c,l),e.ancestors.pop(),e.schema=r,e.create(t,o,c,n)}function Moe(e,t,n){const r={};return qS(r,WS(e,t)),e.create(t,e.Fragment,r,n)}function Loe(e,t){return t.value}function oL(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function qS(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Ioe(e,t,n){return r;function r(i,o,c,l){const h=Array.isArray(c.children)?n:t;return l?h(o,c,l):h(o,c)}}function Ooe(e,t){return n;function n(r,i,o,c){const l=Array.isArray(o.children),d=VS(r);return t(i,o,c,l,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function Boe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&GS.call(t.properties,i)){const o=Foe(e,i,t.properties[i]);if(o){const[c,l]=o;e.tableCellAlignToStyle&&c==="align"&&typeof l=="string"&&Eoe.has(t.tagName)?r=l:n[c]=l}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function zoe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const c=o.expression;c.type;const l=c.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else th(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,o=e.evaluater.evaluateExpression(l.expression)}else th(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function WS(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Coe;for(;++r<t.children.length;){const o=t.children[r];let c;if(e.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const h=i.get(d)||0;c=d+"-"+h,i.set(d,h+1)}}const l=aL(e,o,c);l!==void 0&&n.push(l)}return n}function Foe(e,t,n){const r=foe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?toe(n):xoe(n)),r.property==="style"){let i=typeof n=="object"?n:Hoe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Uoe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?uoe[r.property]||r.property:r.attribute,n]}}function Hoe(e,t){try{return joe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Tn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=iL+"#cannot-parse-style-attribute",i}}function lL(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,c;for(;++o<i.length;){const l=zE(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};c=c?{type:"MemberExpression",object:c,property:l,computed:!!(o&&l.type==="Literal"),optional:!1}:l}r=c}else r=zE(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return GS.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);th(e)}function th(e,t){const n=new Tn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=iL+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Uoe(e){const t={};let n;for(n in e)GS.call(e,n)&&(t[$oe(n)]=e[n]);return t}function $oe(e){let t=e.replace(Noe,Voe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Voe(e){return"-"+e.toLowerCase()}const sb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Goe={};function KS(e,t){const n=Goe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return cL(e,r,i)}function cL(e,t,n){if(qoe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return YE(e.children,t,n)}return Array.isArray(e)?YE(e,t,n):""}function YE(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=cL(e[i],t,n);return r.join("")}function qoe(e){return!!(e&&typeof e=="object")}const XE=document.createElement("i");function YS(e){const t="&"+e+";";XE.innerHTML=t;const n=XE.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mr(e,t,n,r){const i=e.length;let o=0,c;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)c=Array.from(r),c.unshift(t,n),e.splice(...c);else for(n&&e.splice(t,n);o<r.length;)c=r.slice(o,o+1e4),c.unshift(t,0),e.splice(...c),o+=1e4,t+=1e4}function Dr(e,t){return e.length>0?(mr(e,e.length,0,t),e):t}const ZE={}.hasOwnProperty;function uL(e){const t={};let n=-1;for(;++n<e.length;)Woe(t,e[n]);return t}function Woe(e,t){let n;for(n in t){const i=(ZE.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let c;if(o)for(c in o){ZE.call(i,c)||(i[c]=[]);const l=o[c];Koe(i[c],Array.isArray(l)?l:l?[l]:[])}}}function Koe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mr(e,0,0,r)}function dL(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Qr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Mn=So(/[A-Za-z]/),kn=So(/[\dA-Za-z]/),Yoe=So(/[#-'*+\--9=?A-Z^-~]/);function xp(e){return e!==null&&(e<32||e===127)}const E0=So(/\d/),Xoe=So(/[\dA-Fa-f]/),Zoe=So(/[!-/:-@[-`{-~]/);function it(e){return e!==null&&e<-2}function ps(e){return e!==null&&(e<0||e===32)}function It(e){return e===-2||e===-1||e===32}const Rg=So(new RegExp("\\p{P}|\\p{S}","u")),ul=So(/\s/);function So(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ou(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let c="";if(o===37&&kn(e.charCodeAt(n+1))&&kn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(c=String.fromCharCode(o));else if(o>55295&&o<57344){const l=e.charCodeAt(n+1);o<56320&&l>56319&&l<57344?(c=String.fromCharCode(o,l),i=1):c=""}else c=String.fromCharCode(o);c&&(t.push(e.slice(r,n),encodeURIComponent(c)),r=n+i+1,c=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Vt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return c;function c(d){return It(d)?(e.enter(n),l(d)):t(d)}function l(d){return It(d)&&o++<i?(e.consume(d),l):(e.exit(n),t(d))}}const Qoe={tokenize:Joe};function Joe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Vt(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),o(l)}function o(l){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,c(l)}function c(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return it(l)?(e.consume(l),e.exit("chunkText"),o):(e.consume(l),c)}}const ele={tokenize:tle},QE={tokenize:sle};function tle(e){const t=this,n=[];let r=0,i,o,c;return l;function l(S){if(r<n.length){const N=n[r];return t.containerState=N[1],e.attempt(N[0].continuation,d,h)(S)}return h(S)}function d(S){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&j();const N=t.events.length;let T=N,E;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){E=t.events[T][1].end;break}w(r);let D=N;for(;D<t.events.length;)t.events[D][1].end={...E},D++;return mr(t.events,T+1,0,t.events.slice(N)),t.events.length=D,h(S)}return l(S)}function h(S){if(r===n.length){if(!i)return g(S);if(i.currentConstruct&&i.currentConstruct.concrete)return C(S);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(QE,m,f)(S)}function m(S){return i&&j(),w(r),g(S)}function f(S){return t.parser.lazy[t.now().line]=r!==n.length,c=t.now().offset,C(S)}function g(S){return t.containerState={},e.attempt(QE,x,C)(S)}function x(S){return r++,n.push([t.currentConstruct,t.containerState]),g(S)}function C(S){if(S===null){i&&j(),w(0),e.consume(S);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),_(S)}function _(S){if(S===null){b(e.exit("chunkFlow"),!0),w(0),e.consume(S);return}return it(S)?(e.consume(S),b(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(S),_)}function b(S,N){const T=t.sliceStream(S);if(N&&T.push(null),S.previous=o,o&&(o.next=S),o=S,i.defineSkip(S.start),i.write(T),t.parser.lazy[S.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<c&&(!i.events[E][1].end||i.events[E][1].end.offset>c))return;const D=t.events.length;let A=D,P,M;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(P){M=t.events[A][1].end;break}P=!0}for(w(r),E=D;E<t.events.length;)t.events[E][1].end={...M},E++;mr(t.events,A+1,0,t.events.slice(D)),t.events.length=E}}function w(S){let N=n.length;for(;N-- >S;){const T=n[N];t.containerState=T[1],T[0].exit.call(t,e)}n.length=S}function j(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function sle(e,t,n){return Vt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Hc(e){if(e===null||ps(e)||ul(e))return 1;if(Rg(e))return 2}function Pg(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const A0={name:"attention",resolveAll:nle,tokenize:rle};function nle(e,t){let n=-1,r,i,o,c,l,d,h,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},g={...e[n][1].start};JE(f,-d),JE(g,d),c={type:d>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},o={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:d>1?"strong":"emphasis",start:{...c.start},end:{...l.end}},e[r][1].end={...c.start},e[n][1].start={...l.end},h=[],e[r][1].end.offset-e[r][1].start.offset&&(h=Dr(h,[["enter",e[r][1],t],["exit",e[r][1],t]])),h=Dr(h,[["enter",i,t],["enter",c,t],["exit",c,t],["enter",o,t]]),h=Dr(h,Pg(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),h=Dr(h,[["exit",o,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,h=Dr(h,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,mr(e,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function rle(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Hc(r);let o;return c;function c(d){return o=d,e.enter("attentionSequence"),l(d)}function l(d){if(d===o)return e.consume(d),l;const h=e.exit("attentionSequence"),m=Hc(d),f=!m||m===2&&i||n.includes(d),g=!i||i===2&&m||n.includes(r);return h._open=!!(o===42?f:f&&(i||!g)),h._close=!!(o===42?g:g&&(m||!f)),t(d)}}function JE(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ile={name:"autolink",tokenize:ale};function ale(e,t,n){let r=0;return i;function i(x){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(x){return Mn(x)?(e.consume(x),c):x===64?n(x):h(x)}function c(x){return x===43||x===45||x===46||kn(x)?(r=1,l(x)):h(x)}function l(x){return x===58?(e.consume(x),r=0,d):(x===43||x===45||x===46||kn(x))&&r++<32?(e.consume(x),l):(r=0,h(x))}function d(x){return x===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):x===null||x===32||x===60||xp(x)?n(x):(e.consume(x),d)}function h(x){return x===64?(e.consume(x),m):Yoe(x)?(e.consume(x),h):n(x)}function m(x){return kn(x)?f(x):n(x)}function f(x){return x===46?(e.consume(x),r=0,m):x===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):g(x)}function g(x){if((x===45||kn(x))&&r++<63){const C=x===45?g:f;return e.consume(x),C}return n(x)}}const Ph={partial:!0,tokenize:ole};function ole(e,t,n){return r;function r(o){return It(o)?Vt(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||it(o)?t(o):n(o)}}const hL={continuation:{tokenize:cle},exit:ule,name:"blockQuote",tokenize:lle};function lle(e,t,n){const r=this;return i;function i(c){if(c===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),o}return n(c)}function o(c){return It(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function cle(e,t,n){const r=this;return i;function i(c){return It(c)?Vt(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):o(c)}function o(c){return e.attempt(hL,t,n)(c)}}function ule(e){e.exit("blockQuote")}const fL={name:"characterEscape",tokenize:dle};function dle(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return Zoe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const mL={name:"characterReference",tokenize:hle};function hle(e,t,n){const r=this;let i=0,o,c;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),d}function d(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),o=31,c=kn,m(f))}function h(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,c=Xoe,m):(e.enter("characterReferenceValue"),o=7,c=E0,m(f))}function m(f){if(f===59&&i){const g=e.exit("characterReferenceValue");return c===kn&&!YS(r.sliceSerialize(g))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(f)&&i++<o?(e.consume(f),m):n(f)}}const eA={partial:!0,tokenize:mle},tA={concrete:!0,name:"codeFenced",tokenize:fle};function fle(e,t,n){const r=this,i={partial:!0,tokenize:T};let o=0,c=0,l;return d;function d(E){return h(E)}function h(E){const D=r.events[r.events.length-1];return o=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,l=E,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(E)}function m(E){return E===l?(c++,e.consume(E),m):c<3?n(E):(e.exit("codeFencedFenceSequence"),It(E)?Vt(e,f,"whitespace")(E):f(E))}function f(E){return E===null||it(E)?(e.exit("codeFencedFence"),r.interrupt?t(E):e.check(eA,_,N)(E)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===null||it(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(E)):It(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Vt(e,x,"whitespace")(E)):E===96&&E===l?n(E):(e.consume(E),g)}function x(E){return E===null||it(E)?f(E):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),C(E))}function C(E){return E===null||it(E)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(E)):E===96&&E===l?n(E):(e.consume(E),C)}function _(E){return e.attempt(i,N,b)(E)}function b(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),w}function w(E){return o>0&&It(E)?Vt(e,j,"linePrefix",o+1)(E):j(E)}function j(E){return E===null||it(E)?e.check(eA,_,N)(E):(e.enter("codeFlowValue"),S(E))}function S(E){return E===null||it(E)?(e.exit("codeFlowValue"),j(E)):(e.consume(E),S)}function N(E){return e.exit("codeFenced"),t(E)}function T(E,D,A){let P=0;return M;function M($){return E.enter("lineEnding"),E.consume($),E.exit("lineEnding"),B}function B($){return E.enter("codeFencedFence"),It($)?Vt(E,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):F($)}function F($){return $===l?(E.enter("codeFencedFenceSequence"),U($)):A($)}function U($){return $===l?(P++,E.consume($),U):P>=c?(E.exit("codeFencedFenceSequence"),It($)?Vt(E,G,"whitespace")($):G($)):A($)}function G($){return $===null||it($)?(E.exit("codeFencedFence"),D($)):A($)}}}function mle(e,t,n){const r=this;return i;function i(c){return c===null?n(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),o)}function o(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}const nb={name:"codeIndented",tokenize:gle},ple={partial:!0,tokenize:xle};function gle(e,t,n){const r=this;return i;function i(h){return e.enter("codeIndented"),Vt(e,o,"linePrefix",5)(h)}function o(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?c(h):n(h)}function c(h){return h===null?d(h):it(h)?e.attempt(ple,c,d)(h):(e.enter("codeFlowValue"),l(h))}function l(h){return h===null||it(h)?(e.exit("codeFlowValue"),c(h)):(e.consume(h),l)}function d(h){return e.exit("codeIndented"),t(h)}}function xle(e,t,n){const r=this;return i;function i(c){return r.parser.lazy[r.now().line]?n(c):it(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),i):Vt(e,o,"linePrefix",5)(c)}function o(c){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(c):it(c)?i(c):n(c)}}const vle={name:"codeText",previous:ble,resolve:yle,tokenize:wle};function yle(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function ble(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function wle(e,t,n){let r=0,i,o;return c;function c(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),d(f))}function d(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),d):f===96?(o=e.enter("codeTextSequence"),i=0,m(f)):it(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||it(f)?(e.exit("codeTextData"),d(f)):(e.consume(f),h)}function m(f){return f===96?(e.consume(f),i++,m):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",h(f))}}class Sle{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&cd(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),cd(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),cd(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);cd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);cd(this.left,n.reverse())}}}function cd(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function pL(e){const t={};let n=-1,r,i,o,c,l,d,h;const m=new Sle(e);for(;++n<m.length;){for(;n in t;)n=t[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,jle(m,n)),n=t[n],h=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(c=m.get(o),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),c[1].type="lineEnding",i=o);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},l=m.slice(i,n),l.unshift(r),m.splice(i,n-i+1,l))}}return mr(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function jle(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let c=n._tokenizer;c||(c=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const l=c.events,d=[],h={};let m,f,g=-1,x=n,C=0,_=0;const b=[_];for(;x;){for(;e.get(++i)[1]!==x;);o.push(i),x._tokenizer||(m=r.sliceStream(x),x.next||m.push(null),f&&c.defineSkip(x.start),x._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(m),x._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),f=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(_=g+1,b.push(_),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(c.events=[],x?(x._tokenizer=void 0,x.previous=void 0):b.pop(),g=b.length;g--;){const w=l.slice(b[g],b[g+1]),j=o.pop();d.push([j,j+w.length-1]),e.splice(j,2,w)}for(d.reverse(),g=-1;++g<d.length;)h[C+d[g][0]]=C+d[g][1],C+=d[g][1]-d[g][0]-1;return h}const _le={resolve:Nle,tokenize:kle},Cle={partial:!0,tokenize:Ele};function Nle(e){return pL(e),e}function kle(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?o(l):it(l)?e.check(Cle,c,o)(l):(e.consume(l),i)}function o(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function c(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Ele(e,t,n){const r=this;return i;function i(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Vt(e,o,"linePrefix")}function o(c){if(c===null||it(c))return n(c);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(c):e.interrupt(r.parser.constructs.flow,n,t)(c)}}function gL(e,t,n,r,i,o,c,l,d){const h=d||Number.POSITIVE_INFINITY;let m=0;return f;function f(w){return w===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(w),e.exit(o),g):w===null||w===32||w===41||xp(w)?n(w):(e.enter(r),e.enter(c),e.enter(l),e.enter("chunkString",{contentType:"string"}),_(w))}function g(w){return w===62?(e.enter(o),e.consume(w),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),x(w))}function x(w){return w===62?(e.exit("chunkString"),e.exit(l),g(w)):w===null||w===60||it(w)?n(w):(e.consume(w),w===92?C:x)}function C(w){return w===60||w===62||w===92?(e.consume(w),x):x(w)}function _(w){return!m&&(w===null||w===41||ps(w))?(e.exit("chunkString"),e.exit(l),e.exit(c),e.exit(r),t(w)):m<h&&w===40?(e.consume(w),m++,_):w===41?(e.consume(w),m--,_):w===null||w===32||w===40||xp(w)?n(w):(e.consume(w),w===92?b:_)}function b(w){return w===40||w===41||w===92?(e.consume(w),_):_(w)}}function xL(e,t,n,r,i,o){const c=this;let l=0,d;return h;function h(x){return e.enter(r),e.enter(i),e.consume(x),e.exit(i),e.enter(o),m}function m(x){return l>999||x===null||x===91||x===93&&!d||x===94&&!l&&"_hiddenFootnoteSupport"in c.parser.constructs?n(x):x===93?(e.exit(o),e.enter(i),e.consume(x),e.exit(i),e.exit(r),t):it(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===null||x===91||x===93||it(x)||l++>999?(e.exit("chunkString"),m(x)):(e.consume(x),d||(d=!It(x)),x===92?g:f)}function g(x){return x===91||x===92||x===93?(e.consume(x),l++,f):f(x)}}function vL(e,t,n,r,i,o){let c;return l;function l(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),c=g===40?41:g,d):n(g)}function d(g){return g===c?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(o),h(g))}function h(g){return g===c?(e.exit(o),d(c)):g===null?n(g):it(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),Vt(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===c||g===null||it(g)?(e.exit("chunkString"),h(g)):(e.consume(g),g===92?f:m)}function f(g){return g===c||g===92?(e.consume(g),m):m(g)}}function Ed(e,t){let n;return r;function r(i){return it(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):It(i)?Vt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Ale={name:"definition",tokenize:Dle},Tle={partial:!0,tokenize:Rle};function Dle(e,t,n){const r=this;let i;return o;function o(x){return e.enter("definition"),c(x)}function c(x){return xL.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=Qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),d):n(x)}function d(x){return ps(x)?Ed(e,h)(x):h(x)}function h(x){return gL(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function m(x){return e.attempt(Tle,f,f)(x)}function f(x){return It(x)?Vt(e,g,"whitespace")(x):g(x)}function g(x){return x===null||it(x)?(e.exit("definition"),r.parser.defined.push(i),t(x)):n(x)}}function Rle(e,t,n){return r;function r(l){return ps(l)?Ed(e,i)(l):n(l)}function i(l){return vL(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function o(l){return It(l)?Vt(e,c,"whitespace")(l):c(l)}function c(l){return l===null||it(l)?t(l):n(l)}}const Ple={name:"hardBreakEscape",tokenize:Mle};function Mle(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return it(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const Lle={name:"headingAtx",resolve:Ile,tokenize:Ole};function Ile(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mr(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function Ole(e,t,n){let r=0;return i;function i(m){return e.enter("atxHeading"),o(m)}function o(m){return e.enter("atxHeadingSequence"),c(m)}function c(m){return m===35&&r++<6?(e.consume(m),c):m===null||ps(m)?(e.exit("atxHeadingSequence"),l(m)):n(m)}function l(m){return m===35?(e.enter("atxHeadingSequence"),d(m)):m===null||it(m)?(e.exit("atxHeading"),t(m)):It(m)?Vt(e,l,"whitespace")(m):(e.enter("atxHeadingText"),h(m))}function d(m){return m===35?(e.consume(m),d):(e.exit("atxHeadingSequence"),l(m))}function h(m){return m===null||m===35||ps(m)?(e.exit("atxHeadingText"),l(m)):(e.consume(m),h)}}const Ble=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sA=["pre","script","style","textarea"],zle={concrete:!0,name:"htmlFlow",resolveTo:Ule,tokenize:$le},Fle={partial:!0,tokenize:Gle},Hle={partial:!0,tokenize:Vle};function Ule(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function $le(e,t,n){const r=this;let i,o,c,l,d;return h;function h(z){return m(z)}function m(z){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(z),f}function f(z){return z===33?(e.consume(z),g):z===47?(e.consume(z),o=!0,_):z===63?(e.consume(z),i=3,r.interrupt?t:L):Mn(z)?(e.consume(z),c=String.fromCharCode(z),b):n(z)}function g(z){return z===45?(e.consume(z),i=2,x):z===91?(e.consume(z),i=5,l=0,C):Mn(z)?(e.consume(z),i=4,r.interrupt?t:L):n(z)}function x(z){return z===45?(e.consume(z),r.interrupt?t:L):n(z)}function C(z){const ee="CDATA[";return z===ee.charCodeAt(l++)?(e.consume(z),l===ee.length?r.interrupt?t:F:C):n(z)}function _(z){return Mn(z)?(e.consume(z),c=String.fromCharCode(z),b):n(z)}function b(z){if(z===null||z===47||z===62||ps(z)){const ee=z===47,ie=c.toLowerCase();return!ee&&!o&&sA.includes(ie)?(i=1,r.interrupt?t(z):F(z)):Ble.includes(c.toLowerCase())?(i=6,ee?(e.consume(z),w):r.interrupt?t(z):F(z)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(z):o?j(z):S(z))}return z===45||kn(z)?(e.consume(z),c+=String.fromCharCode(z),b):n(z)}function w(z){return z===62?(e.consume(z),r.interrupt?t:F):n(z)}function j(z){return It(z)?(e.consume(z),j):M(z)}function S(z){return z===47?(e.consume(z),M):z===58||z===95||Mn(z)?(e.consume(z),N):It(z)?(e.consume(z),S):M(z)}function N(z){return z===45||z===46||z===58||z===95||kn(z)?(e.consume(z),N):T(z)}function T(z){return z===61?(e.consume(z),E):It(z)?(e.consume(z),T):S(z)}function E(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(e.consume(z),d=z,D):It(z)?(e.consume(z),E):A(z)}function D(z){return z===d?(e.consume(z),d=null,P):z===null||it(z)?n(z):(e.consume(z),D)}function A(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||ps(z)?T(z):(e.consume(z),A)}function P(z){return z===47||z===62||It(z)?S(z):n(z)}function M(z){return z===62?(e.consume(z),B):n(z)}function B(z){return z===null||it(z)?F(z):It(z)?(e.consume(z),B):n(z)}function F(z){return z===45&&i===2?(e.consume(z),V):z===60&&i===1?(e.consume(z),Y):z===62&&i===4?(e.consume(z),I):z===63&&i===3?(e.consume(z),L):z===93&&i===5?(e.consume(z),O):it(z)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Fle,q,U)(z)):z===null||it(z)?(e.exit("htmlFlowData"),U(z)):(e.consume(z),F)}function U(z){return e.check(Hle,G,q)(z)}function G(z){return e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),$}function $(z){return z===null||it(z)?U(z):(e.enter("htmlFlowData"),F(z))}function V(z){return z===45?(e.consume(z),L):F(z)}function Y(z){return z===47?(e.consume(z),c="",K):F(z)}function K(z){if(z===62){const ee=c.toLowerCase();return sA.includes(ee)?(e.consume(z),I):F(z)}return Mn(z)&&c.length<8?(e.consume(z),c+=String.fromCharCode(z),K):F(z)}function O(z){return z===93?(e.consume(z),L):F(z)}function L(z){return z===62?(e.consume(z),I):z===45&&i===2?(e.consume(z),L):F(z)}function I(z){return z===null||it(z)?(e.exit("htmlFlowData"),q(z)):(e.consume(z),I)}function q(z){return e.exit("htmlFlow"),t(z)}}function Vle(e,t,n){const r=this;return i;function i(c){return it(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),o):n(c)}function o(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}function Gle(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ph,t,n)}}const qle={name:"htmlText",tokenize:Wle};function Wle(e,t,n){const r=this;let i,o,c;return l;function l(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),d}function d(L){return L===33?(e.consume(L),h):L===47?(e.consume(L),T):L===63?(e.consume(L),S):Mn(L)?(e.consume(L),A):n(L)}function h(L){return L===45?(e.consume(L),m):L===91?(e.consume(L),o=0,C):Mn(L)?(e.consume(L),j):n(L)}function m(L){return L===45?(e.consume(L),x):n(L)}function f(L){return L===null?n(L):L===45?(e.consume(L),g):it(L)?(c=f,Y(L)):(e.consume(L),f)}function g(L){return L===45?(e.consume(L),x):f(L)}function x(L){return L===62?V(L):L===45?g(L):f(L)}function C(L){const I="CDATA[";return L===I.charCodeAt(o++)?(e.consume(L),o===I.length?_:C):n(L)}function _(L){return L===null?n(L):L===93?(e.consume(L),b):it(L)?(c=_,Y(L)):(e.consume(L),_)}function b(L){return L===93?(e.consume(L),w):_(L)}function w(L){return L===62?V(L):L===93?(e.consume(L),w):_(L)}function j(L){return L===null||L===62?V(L):it(L)?(c=j,Y(L)):(e.consume(L),j)}function S(L){return L===null?n(L):L===63?(e.consume(L),N):it(L)?(c=S,Y(L)):(e.consume(L),S)}function N(L){return L===62?V(L):S(L)}function T(L){return Mn(L)?(e.consume(L),E):n(L)}function E(L){return L===45||kn(L)?(e.consume(L),E):D(L)}function D(L){return it(L)?(c=D,Y(L)):It(L)?(e.consume(L),D):V(L)}function A(L){return L===45||kn(L)?(e.consume(L),A):L===47||L===62||ps(L)?P(L):n(L)}function P(L){return L===47?(e.consume(L),V):L===58||L===95||Mn(L)?(e.consume(L),M):it(L)?(c=P,Y(L)):It(L)?(e.consume(L),P):V(L)}function M(L){return L===45||L===46||L===58||L===95||kn(L)?(e.consume(L),M):B(L)}function B(L){return L===61?(e.consume(L),F):it(L)?(c=B,Y(L)):It(L)?(e.consume(L),B):P(L)}function F(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,U):it(L)?(c=F,Y(L)):It(L)?(e.consume(L),F):(e.consume(L),G)}function U(L){return L===i?(e.consume(L),i=void 0,$):L===null?n(L):it(L)?(c=U,Y(L)):(e.consume(L),U)}function G(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||ps(L)?P(L):(e.consume(L),G)}function $(L){return L===47||L===62||ps(L)?P(L):n(L)}function V(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function Y(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),K}function K(L){return It(L)?Vt(e,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):O(L)}function O(L){return e.enter("htmlTextData"),c(L)}}const XS={name:"labelEnd",resolveAll:Zle,resolveTo:Qle,tokenize:Jle},Kle={tokenize:ece},Yle={tokenize:tce},Xle={tokenize:sce};function Zle(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&mr(e,0,e.length,n),e}function Qle(e,t){let n=e.length,r=0,i,o,c,l;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(c){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(c=n);const d={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[o][1].start},end:{...e[c][1].end}},m={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[c-2][1].start}};return l=[["enter",d,t],["enter",h,t]],l=Dr(l,e.slice(o+1,o+r+3)),l=Dr(l,[["enter",m,t]]),l=Dr(l,Pg(t.parser.constructs.insideSpan.null,e.slice(o+r+4,c-3),t)),l=Dr(l,[["exit",m,t],e[c-2],e[c-1],["exit",h,t]]),l=Dr(l,e.slice(c+1)),l=Dr(l,[["exit",d,t]]),mr(e,o,e.length,l),e}function Jle(e,t,n){const r=this;let i=r.events.length,o,c;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return l;function l(g){return o?o._inactive?f(g):(c=r.parser.defined.includes(Qr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(Kle,m,c?m:f)(g):g===91?e.attempt(Yle,m,c?h:f)(g):c?m(g):f(g)}function h(g){return e.attempt(Xle,m,f)(g)}function m(g){return t(g)}function f(g){return o._balanced=!0,n(g)}}function ece(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ps(f)?Ed(e,o)(f):o(f)}function o(f){return f===41?m(f):gL(e,c,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function c(f){return ps(f)?Ed(e,d)(f):m(f)}function l(f){return n(f)}function d(f){return f===34||f===39||f===40?vL(e,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):m(f)}function h(f){return ps(f)?Ed(e,m)(f):m(f)}function m(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function tce(e,t,n){const r=this;return i;function i(l){return xL.call(r,e,o,c,"reference","referenceMarker","referenceString")(l)}function o(l){return r.parser.defined.includes(Qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function c(l){return n(l)}}function sce(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const nce={name:"labelStartImage",resolveAll:XS.resolveAll,tokenize:rce};function rce(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),o}function o(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),c):n(l)}function c(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ice={name:"labelStartLink",resolveAll:XS.resolveAll,tokenize:ace};function ace(e,t,n){const r=this;return i;function i(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),o}function o(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const rb={name:"lineEnding",tokenize:oce};function oce(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Vt(e,t,"linePrefix")}}const Mm={name:"thematicBreak",tokenize:lce};function lce(e,t,n){let r=0,i;return o;function o(h){return e.enter("thematicBreak"),c(h)}function c(h){return i=h,l(h)}function l(h){return h===i?(e.enter("thematicBreakSequence"),d(h)):r>=3&&(h===null||it(h))?(e.exit("thematicBreak"),t(h)):n(h)}function d(h){return h===i?(e.consume(h),r++,d):(e.exit("thematicBreakSequence"),It(h)?Vt(e,l,"whitespace")(h):l(h))}}const Kn={continuation:{tokenize:hce},exit:mce,name:"list",tokenize:dce},cce={partial:!0,tokenize:pce},uce={partial:!0,tokenize:fce};function dce(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,c=0;return l;function l(x){const C=r.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!r.containerState.marker||x===r.containerState.marker:E0(x)){if(r.containerState.type||(r.containerState.type=C,e.enter(C,{_container:!0})),C==="listUnordered")return e.enter("listItemPrefix"),x===42||x===45?e.check(Mm,n,h)(x):h(x);if(!r.interrupt||x===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(x)}return n(x)}function d(x){return E0(x)&&++c<10?(e.consume(x),d):(!r.interrupt||c<2)&&(r.containerState.marker?x===r.containerState.marker:x===41||x===46)?(e.exit("listItemValue"),h(x)):n(x)}function h(x){return e.enter("listItemMarker"),e.consume(x),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||x,e.check(Ph,r.interrupt?n:m,e.attempt(cce,g,f))}function m(x){return r.containerState.initialBlankLine=!0,o++,g(x)}function f(x){return It(x)?(e.enter("listItemPrefixWhitespace"),e.consume(x),e.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(x)}}function hce(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ph,i,o);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Vt(e,t,"listItemIndent",r.containerState.size+1)(l)}function o(l){return r.containerState.furtherBlankLines||!It(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,c(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(uce,t,c)(l))}function c(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Vt(e,e.attempt(Kn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function fce(e,t,n){const r=this;return Vt(e,i,"listItemIndent",r.containerState.size+1);function i(o){const c=r.events[r.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===r.containerState.size?t(o):n(o)}}function mce(e){e.exit(this.containerState.type)}function pce(e,t,n){const r=this;return Vt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const c=r.events[r.events.length-1];return!It(o)&&c&&c[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const nA={name:"setextUnderline",resolveTo:gce,tokenize:xce};function gce(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const c={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",c,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=c,e.push(["exit",c,t]),e}function xce(e,t,n){const r=this;let i;return o;function o(h){let m=r.events.length,f;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){f=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=h,c(h)):n(h)}function c(h){return e.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===i?(e.consume(h),l):(e.exit("setextHeadingLineSequence"),It(h)?Vt(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||it(h)?(e.exit("setextHeadingLine"),t(h)):n(h)}}const vce={tokenize:yce};function yce(e){const t=this,n=e.attempt(Ph,r,e.attempt(this.parser.constructs.flowInitial,i,Vt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(_le,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const bce={resolveAll:bL()},wce=yL("string"),Sce=yL("text");function yL(e){return{resolveAll:bL(e==="text"?jce:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,c,l);return c;function c(m){return h(m)?o(m):l(m)}function l(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),d}function d(m){return h(m)?(n.exit("data"),o(m)):(n.consume(m),d)}function h(m){if(m===null)return!0;const f=i[m];let g=-1;if(f)for(;++g<f.length;){const x=f[g];if(!x.previous||x.previous.call(r,r.previous))return!0}return!1}}}function bL(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function jce(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,c=-1,l=0,d;for(;o--;){const h=i[o];if(typeof h=="string"){for(c=h.length;h.charCodeAt(c-1)===32;)l++,c--;if(c)break;c=-1}else if(h===-2)d=!0,l++;else if(h!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const h={type:n===e.length||d||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?c:r.start._bufferIndex+c,_index:r.start._index+o,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(e.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return e}const _ce={42:Kn,43:Kn,45:Kn,48:Kn,49:Kn,50:Kn,51:Kn,52:Kn,53:Kn,54:Kn,55:Kn,56:Kn,57:Kn,62:hL},Cce={91:Ale},Nce={[-2]:nb,[-1]:nb,32:nb},kce={35:Lle,42:Mm,45:[nA,Mm],60:zle,61:nA,95:Mm,96:tA,126:tA},Ece={38:mL,92:fL},Ace={[-5]:rb,[-4]:rb,[-3]:rb,33:nce,38:mL,42:A0,60:[ile,qle],91:ice,92:[Ple,fL],93:XS,95:A0,96:vle},Tce={null:[A0,bce]},Dce={null:[42,95]},Rce={null:[]},Pce=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Dce,contentInitial:Cce,disable:Rce,document:_ce,flow:kce,flowInitial:Nce,insideSpan:Tce,string:Ece,text:Ace},Symbol.toStringTag,{value:"Module"}));function Mce(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let c=[],l=[];const d={attempt:D(T),check:D(E),consume:j,enter:S,exit:N,interrupt:D(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:_,events:[],now:C,parser:e,previous:null,sliceSerialize:g,sliceStream:x,write:f};let m=t.tokenize.call(h,d);return t.resolveAll&&o.push(t),h;function f(B){return c=Dr(c,B),b(),c[c.length-1]!==null?[]:(A(t,0),h.events=Pg(o,h.events,h),h.events)}function g(B,F){return Ice(x(B),F)}function x(B){return Lce(c,B)}function C(){const{_bufferIndex:B,_index:F,line:U,column:G,offset:$}=r;return{_bufferIndex:B,_index:F,line:U,column:G,offset:$}}function _(B){i[B.line]=B.column,M()}function b(){let B;for(;r._index<c.length;){const F=c[r._index];if(typeof F=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<F.length;)w(F.charCodeAt(r._bufferIndex));else w(F)}}function w(B){m=m(B)}function j(B){it(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,M()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===c[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=B}function S(B,F){const U=F||{};return U.type=B,U.start=C(),h.events.push(["enter",U,h]),l.push(U),U}function N(B){const F=l.pop();return F.end=C(),h.events.push(["exit",F,h]),F}function T(B,F){A(B,F.from)}function E(B,F){F.restore()}function D(B,F){return U;function U(G,$,V){let Y,K,O,L;return Array.isArray(G)?q(G):"tokenize"in G?q([G]):I(G);function I(re){return X;function X(W){const Q=W!==null&&re[W],se=W!==null&&re.null,he=[...Array.isArray(Q)?Q:Q?[Q]:[],...Array.isArray(se)?se:se?[se]:[]];return q(he)(W)}}function q(re){return Y=re,K=0,re.length===0?V:z(re[K])}function z(re){return X;function X(W){return L=P(),O=re,re.partial||(h.currentConstruct=re),re.name&&h.parser.constructs.disable.null.includes(re.name)?ie():re.tokenize.call(F?Object.assign(Object.create(h),F):h,d,ee,ie)(W)}}function ee(re){return B(O,L),$}function ie(re){return L.restore(),++K<Y.length?z(Y[K]):V}}}function A(B,F){B.resolveAll&&!o.includes(B)&&o.push(B),B.resolve&&mr(h.events,F,h.events.length-F,B.resolve(h.events.slice(F),h)),B.resolveTo&&(h.events=B.resolveTo(h.events,h))}function P(){const B=C(),F=h.previous,U=h.currentConstruct,G=h.events.length,$=Array.from(l);return{from:G,restore:V};function V(){r=B,h.previous=F,h.currentConstruct=U,h.events.length=G,l=$,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Lce(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let c;if(n===i)c=[e[n].slice(r,o)];else{if(c=e.slice(n,i),r>-1){const l=c[0];typeof l=="string"?c[0]=l.slice(r):c.shift()}o>0&&c.push(e[i].slice(0,o))}return c}function Ice(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let c;if(typeof o=="string")c=o;else switch(o){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&i)continue;c=" ";break}default:c=String.fromCharCode(o)}i=o===-2,r.push(c)}return r.join("")}function Oce(e){const r={constructs:uL([Pce,...(e||{}).extensions||[]]),content:i(Qoe),defined:[],document:i(ele),flow:i(vce),lazy:{},string:i(wce),text:i(Sce)};return r;function i(o){return c;function c(l){return Mce(r,o,l)}}}function Bce(e){for(;!pL(e););return e}const rA=/[\0\t\n\r]/g;function zce(){let e=1,t="",n=!0,r;return i;function i(o,c,l){const d=[];let h,m,f,g,x;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(c||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(rA.lastIndex=f,h=rA.exec(o),g=h&&h.index!==void 0?h.index:o.length,x=o.charCodeAt(g),!h){t=o.slice(f);break}if(x===10&&f===g&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),f<g&&(d.push(o.slice(f,g)),e+=g-f),x){case 0:{d.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,d.push(-2);e++<m;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}f=g+1}return l&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const Fce=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Hce(e){return e.replace(Fce,Uce)}function Uce(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return dL(n.slice(o?2:1),o?16:10)}return YS(n)||e}const wL={}.hasOwnProperty;function $ce(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Vce(n)(Bce(Oce(n).document().write(zce()(e,t,!0))))}function Vce(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Be),autolinkProtocol:P,autolinkEmail:P,atxHeading:o(ce),blockQuote:o(se),characterEscape:P,characterReference:P,codeFenced:o(he),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:o(he,c),codeText:o(de,c),codeTextData:P,data:P,codeFlowValue:P,definition:o(Ne),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:o(Re),hardBreakEscape:o(ge),hardBreakTrailing:o(ge),htmlFlow:o(ae,c),htmlFlowData:P,htmlText:o(ae,c),htmlTextData:P,image:o(Ee),label:c,link:o(Be),listItem:o(De),listItemValue:g,listOrdered:o(et,f),listUnordered:o(et),paragraph:o(Me),reference:z,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:o(ce),strong:o(qe),thematicBreak:o(_t)},exit:{atxHeading:d(),atxHeadingSequence:T,autolink:d(),autolinkEmail:Q,autolinkProtocol:W,blockQuote:d(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ie,characterReferenceMarkerNumeric:ie,characterReferenceValue:re,characterReference:X,codeFenced:d(b),codeFencedFence:_,codeFencedFenceInfo:x,codeFencedFenceMeta:C,codeFlowValue:M,codeIndented:d(w),codeText:d($),codeTextData:M,data:M,definition:d(),definitionDestinationString:N,definitionLabelString:j,definitionTitleString:S,emphasis:d(),hardBreakEscape:d(F),hardBreakTrailing:d(F),htmlFlow:d(U),htmlFlowData:M,htmlText:d(G),htmlTextData:M,image:d(Y),label:O,labelText:K,lineEnding:B,link:d(V),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ee,resourceDestinationString:L,resourceTitleString:I,resource:q,setextHeading:d(A),setextHeadingLineSequence:D,setextHeadingText:E,strong:d(),thematicBreak:d()}};SL(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(fe){let Ae={type:"root",children:[]};const Le={stack:[Ae],tokenStack:[],config:t,enter:l,exit:h,buffer:c,resume:m,data:n},We=[];let ve=-1;for(;++ve<fe.length;)if(fe[ve][1].type==="listOrdered"||fe[ve][1].type==="listUnordered")if(fe[ve][0]==="enter")We.push(ve);else{const Fe=We.pop();ve=i(fe,Fe,ve)}for(ve=-1;++ve<fe.length;){const Fe=t[fe[ve][0]];wL.call(Fe,fe[ve][1].type)&&Fe[fe[ve][1].type].call(Object.assign({sliceSerialize:fe[ve][2].sliceSerialize},Le),fe[ve][1])}if(Le.tokenStack.length>0){const Fe=Le.tokenStack[Le.tokenStack.length-1];(Fe[1]||iA).call(Le,void 0,Fe[0])}for(Ae.position={start:Ua(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:Ua(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<t.transforms.length;)Ae=t.transforms[ve](Ae)||Ae;return Ae}function i(fe,Ae,Le){let We=Ae-1,ve=-1,Fe=!1,Ue,Ct,Ot,Ke;for(;++We<=Le;){const Xe=fe[We];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?ve++:ve--,Ke=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(Ue&&!Ke&&!ve&&!Ot&&(Ot=We),Ke=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ke=void 0}if(!ve&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||ve===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(Ue){let Ft=We;for(Ct=void 0;Ft--;){const js=fe[Ft];if(js[1].type==="lineEnding"||js[1].type==="lineEndingBlank"){if(js[0]==="exit")continue;Ct&&(fe[Ct][1].type="lineEndingBlank",Fe=!0),js[1].type="lineEnding",Ct=Ft}else if(!(js[1].type==="linePrefix"||js[1].type==="blockQuotePrefix"||js[1].type==="blockQuotePrefixWhitespace"||js[1].type==="blockQuoteMarker"||js[1].type==="listItemIndent"))break}Ot&&(!Ct||Ot<Ct)&&(Ue._spread=!0),Ue.end=Object.assign({},Ct?fe[Ct][1].start:Xe[1].end),fe.splice(Ct||We,0,["exit",Ue,Xe[2]]),We++,Le++}if(Xe[1].type==="listItemPrefix"){const Ft={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};Ue=Ft,fe.splice(We,0,["enter",Ft,Xe[2]]),We++,Le++,Ot=void 0,Ke=!0}}}return fe[Ae][1]._spread=Fe,Le}function o(fe,Ae){return Le;function Le(We){l.call(this,fe(We),We),Ae&&Ae.call(this,We)}}function c(){this.stack.push({type:"fragment",children:[]})}function l(fe,Ae,Le){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([Ae,Le||void 0]),fe.position={start:Ua(Ae.start),end:void 0}}function d(fe){return Ae;function Ae(Le){fe&&fe.call(this,Le),h.call(this,Le)}}function h(fe,Ae){const Le=this.stack.pop(),We=this.tokenStack.pop();if(We)We[0].type!==fe.type&&(Ae?Ae.call(this,fe,We[0]):(We[1]||iA).call(this,fe,We[0]));else throw new Error("Cannot close `"+fe.type+"` ("+kd({start:fe.start,end:fe.end})+"): its not open");Le.position.end=Ua(fe.end)}function m(){return KS(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function g(fe){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function x(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=fe}function C(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=fe}function _(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=fe.replace(/(\r?\n|\r)$/g,"")}function j(fe){const Ae=this.resume(),Le=this.stack[this.stack.length-1];Le.label=Ae,Le.identifier=Qr(this.sliceSerialize(fe)).toLowerCase()}function S(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=fe}function N(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=fe}function T(fe){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const Le=this.sliceSerialize(fe).length;Ae.depth=Le}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function D(fe){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function P(fe){const Le=this.stack[this.stack.length-1].children;let We=Le[Le.length-1];(!We||We.type!=="text")&&(We=st(),We.position={start:Ua(fe.start),end:void 0},Le.push(We)),this.stack.push(We)}function M(fe){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(fe),Ae.position.end=Ua(fe.end)}function B(fe){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Le=Ae.children[Ae.children.length-1];Le.position.end=Ua(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(P.call(this,fe),M.call(this,fe))}function F(){this.data.atHardBreak=!0}function U(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=fe}function G(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=fe}function $(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=fe}function V(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Ae,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function Y(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Ae,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function K(fe){const Ae=this.sliceSerialize(fe),Le=this.stack[this.stack.length-2];Le.label=Hce(Ae),Le.identifier=Qr(Ae).toLowerCase()}function O(){const fe=this.stack[this.stack.length-1],Ae=this.resume(),Le=this.stack[this.stack.length-1];if(this.data.inReference=!0,Le.type==="link"){const We=fe.children;Le.children=We}else Le.alt=Ae}function L(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=fe}function I(){const fe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=fe}function q(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function ee(fe){const Ae=this.resume(),Le=this.stack[this.stack.length-1];Le.label=Ae,Le.identifier=Qr(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function ie(fe){this.data.characterReferenceType=fe.type}function re(fe){const Ae=this.sliceSerialize(fe),Le=this.data.characterReferenceType;let We;Le?(We=dL(Ae,Le==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):We=YS(Ae);const ve=this.stack[this.stack.length-1];ve.value+=We}function X(fe){const Ae=this.stack.pop();Ae.position.end=Ua(fe.end)}function W(fe){M.call(this,fe);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(fe)}function Q(fe){M.call(this,fe);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(fe)}function se(){return{type:"blockquote",children:[]}}function he(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function Ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function ce(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function ae(){return{type:"html",value:""}}function Ee(){return{type:"image",title:null,url:"",alt:null}}function Be(){return{type:"link",title:null,url:"",children:[]}}function et(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function De(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function Me(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function st(){return{type:"text",value:""}}function _t(){return{type:"thematicBreak"}}}function Ua(e){return{line:e.line,column:e.column,offset:e.offset}}function SL(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?SL(e,r):Gce(e,r)}}function Gce(e,t){let n;for(n in t)if(wL.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function iA(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+kd({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+kd({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+kd({start:t.start,end:t.end})+") is still open")}function qce(e){const t=this;t.parser=n;function n(r){return $ce(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Wce(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Kce(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Yce(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function Xce(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zce(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qce(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=ou(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let c,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),c=e.footnoteOrder.length):c=o+1,l+=1,e.footnoteCounts.set(r,l);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function Jce(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eue(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function jL(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const c=i[i.length-1];return c&&c.type==="text"?c.value+=r:i.push({type:"text",value:r}),i}function tue(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return jL(e,t);const i={src:ou(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function sue(e,t){const n={src:ou(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function nue(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function rue(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return jL(e,t);const i={href:ou(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function iue(e,t){const n={href:ou(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function aue(e,t,n){const r=e.all(t),i=n?oue(n):_L(t),o={},c=[];if(typeof t.checked=="boolean"){const m=r[0];let f;m&&m.type==="element"&&m.tagName==="p"?f=m:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const m=r[l];(i||l!==0||m.type!=="element"||m.tagName!=="p")&&c.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!i?c.push(...m.children):c.push(m)}const d=r[r.length-1];d&&(i||d.type!=="element"||d.tagName!=="p")&&c.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:c};return e.patch(t,h),e.applyData(t,h)}function oue(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=_L(n[r])}return t}function _L(e){const t=e.spread;return t??e.children.length>1}function lue(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const c=r[i];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function cue(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uue(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function due(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hue(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],c),i.push(c)}if(n.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=VS(t.children[1]),d=nL(t.children[t.children.length-1]);l&&d&&(c.position={start:l,end:d}),i.push(c)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function fue(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",c=n&&n.type==="table"?n.align:void 0,l=c?c.length:t.children.length;let d=-1;const h=[];for(;++d<l;){const f=t.children[d],g={},x=c?c[d]:void 0;x&&(g.align=x);let C={type:"element",tagName:o,properties:g,children:[]};f&&(C.children=e.all(f),e.patch(f,C),C=e.applyData(f,C)),h.push(C)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,m),e.applyData(t,m)}function mue(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const aA=9,oA=32;function pue(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(lA(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(lA(t.slice(i),i>0,!1)),o.join("")}function lA(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===aA||o===oA;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===aA||o===oA;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function gue(e,t){const n={type:"text",value:pue(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function xue(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const vue={blockquote:Wce,break:Kce,code:Yce,delete:Xce,emphasis:Zce,footnoteReference:Qce,heading:Jce,html:eue,imageReference:tue,image:sue,inlineCode:nue,linkReference:rue,link:iue,listItem:aue,list:lue,paragraph:cue,root:uue,strong:due,table:hue,tableCell:mue,tableRow:fue,text:gue,thematicBreak:xue,toml:pm,yaml:pm,definition:pm,footnoteDefinition:pm};function pm(){}const CL=-1,Mg=0,Ad=1,vp=2,ZS=3,QS=4,JS=5,e1=6,NL=7,kL=8,cA=typeof self=="object"?self:globalThis,yue=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,c]=t[i];switch(o){case Mg:case CL:return n(c,i);case Ad:{const l=n([],i);for(const d of c)l.push(r(d));return l}case vp:{const l=n({},i);for(const[d,h]of c)l[r(d)]=r(h);return l}case ZS:return n(new Date(c),i);case QS:{const{source:l,flags:d}=c;return n(new RegExp(l,d),i)}case JS:{const l=n(new Map,i);for(const[d,h]of c)l.set(r(d),r(h));return l}case e1:{const l=n(new Set,i);for(const d of c)l.add(r(d));return l}case NL:{const{name:l,message:d}=c;return n(new cA[l](d),i)}case kL:return n(BigInt(c),i);case"BigInt":return n(Object(BigInt(c)),i);case"ArrayBuffer":return n(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:l}=new Uint8Array(c);return n(new DataView(l),c)}}return n(new cA[o](c),i)};return r},uA=e=>yue(new Map,e)(0),dc="",{toString:bue}={},{keys:wue}=Object,ud=e=>{const t=typeof e;if(t!=="object"||!e)return[Mg,t];const n=bue.call(e).slice(8,-1);switch(n){case"Array":return[Ad,dc];case"Object":return[vp,dc];case"Date":return[ZS,dc];case"RegExp":return[QS,dc];case"Map":return[JS,dc];case"Set":return[e1,dc];case"DataView":return[Ad,n]}return n.includes("Array")?[Ad,n]:n.includes("Error")?[NL,n]:[vp,n]},gm=([e,t])=>e===Mg&&(t==="function"||t==="symbol"),Sue=(e,t,n,r)=>{const i=(c,l)=>{const d=r.push(c)-1;return n.set(l,d),d},o=c=>{if(n.has(c))return n.get(c);let[l,d]=ud(c);switch(l){case Mg:{let m=c;switch(d){case"bigint":l=kL,m=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);m=null;break;case"undefined":return i([CL],c)}return i([l,m],c)}case Ad:{if(d){let g=c;return d==="DataView"?g=new Uint8Array(c.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(c)),i([d,[...g]],c)}const m=[],f=i([l,m],c);for(const g of c)m.push(o(g));return f}case vp:{if(d)switch(d){case"BigInt":return i([d,c.toString()],c);case"Boolean":case"Number":case"String":return i([d,c.valueOf()],c)}if(t&&"toJSON"in c)return o(c.toJSON());const m=[],f=i([l,m],c);for(const g of wue(c))(e||!gm(ud(c[g])))&&m.push([o(g),o(c[g])]);return f}case ZS:return i([l,c.toISOString()],c);case QS:{const{source:m,flags:f}=c;return i([l,{source:m,flags:f}],c)}case JS:{const m=[],f=i([l,m],c);for(const[g,x]of c)(e||!(gm(ud(g))||gm(ud(x))))&&m.push([o(g),o(x)]);return f}case e1:{const m=[],f=i([l,m],c);for(const g of c)(e||!gm(ud(g)))&&m.push(o(g));return f}}const{message:h}=c;return i([l,{name:d,message:h}],c)};return o},dA=(e,{json:t,lossy:n}={})=>{const r=[];return Sue(!(t||n),!!t,new Map,r)(e),r},yp=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?uA(dA(e,t)):structuredClone(e):(e,t)=>uA(dA(e,t));function jue(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function _ue(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Cue(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||jue,r=e.options.footnoteBackLabel||_ue,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const m=e.all(h),f=String(h.identifier).toUpperCase(),g=ou(f.toLowerCase());let x=0;const C=[],_=e.footnoteCounts.get(f);for(;_!==void 0&&++x<=_;){C.length>0&&C.push({type:"text",value:" "});let j=typeof n=="string"?n:n(d,x);typeof j=="string"&&(j={type:"text",value:j}),C.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,x),className:["data-footnote-backref"]},children:Array.isArray(j)?j:[j]})}const b=m[m.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const j=b.children[b.children.length-1];j&&j.type==="text"?j.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...C)}else m.push(...C);const w={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(m,!0)};e.patch(h,w),l.push(w)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...yp(c),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Lg=(function(e){if(e==null)return Aue;if(typeof e=="function")return Ig(e);if(typeof e=="object")return Array.isArray(e)?Nue(e):kue(e);if(typeof e=="string")return Eue(e);throw new Error("Expected function, string, or object as test")});function Nue(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Lg(e[n]);return Ig(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function kue(e){const t=e;return Ig(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function Eue(e){return Ig(t);function t(n){return n&&n.type===e}}function Ig(e){return t;function t(n,r,i){return!!(Tue(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Aue(){return!0}function Tue(e){return e!==null&&typeof e=="object"&&"type"in e}const EL=[],Due=!0,T0=!1,Rue="skip";function AL(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Lg(i),c=r?-1:1;l(e,void 0,[])();function l(d,h,m){const f=d&&typeof d=="object"?d:{};if(typeof f.type=="string"){const x=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=EL,C,_,b;if((!t||o(d,h,m[m.length-1]||void 0))&&(x=Pue(n(d,m)),x[0]===T0))return x;if("children"in d&&d.children){const w=d;if(w.children&&x[0]!==Rue)for(_=(r?w.children.length:-1)+c,b=m.concat(w);_>-1&&_<w.children.length;){const j=w.children[_];if(C=l(j,_,b)(),C[0]===T0)return C;_=typeof C[1]=="number"?C[1]:_+c}}return x}}}function Pue(e){return Array.isArray(e)?e:typeof e=="number"?[Due,e]:e==null?EL:[e]}function t1(e,t,n,r){let i,o,c;typeof t=="function"&&typeof n!="function"?(o=void 0,c=t,i=n):(o=t,c=n,i=r),AL(e,o,l,i);function l(d,h){const m=h[h.length-1],f=m?m.children.indexOf(d):void 0;return c(d,f,m)}}const D0={}.hasOwnProperty,Mue={};function Lue(e,t){const n=t||Mue,r=new Map,i=new Map,o=new Map,c={...vue,...n.handlers},l={all:h,applyData:Oue,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:c,one:d,options:n,patch:Iue,wrap:zue};return t1(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const f=m.type==="definition"?r:i,g=String(m.identifier).toUpperCase();f.has(g)||f.set(g,m)}}),l;function d(m,f){const g=m.type,x=l.handlers[g];if(D0.call(l.handlers,g)&&x)return x(l,m,f);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in m){const{children:_,...b}=m,w=yp(b);return w.children=l.all(m),w}return yp(m)}return(l.options.unknownHandler||Bue)(l,m,f)}function h(m){const f=[];if("children"in m){const g=m.children;let x=-1;for(;++x<g.length;){const C=l.one(g[x],m);if(C){if(x&&g[x-1].type==="break"&&(!Array.isArray(C)&&C.type==="text"&&(C.value=hA(C.value)),!Array.isArray(C)&&C.type==="element")){const _=C.children[0];_&&_.type==="text"&&(_.value=hA(_.value))}Array.isArray(C)?f.push(...C):f.push(C)}}}return f}}function Iue(e,t){e.position&&(t.position=_oe(e))}function Oue(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const c="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:c}}n.type==="element"&&o&&Object.assign(n.properties,yp(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Bue(e,t){const n=t.data||{},r="value"in t&&!(D0.call(n,"hProperties")||D0.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function zue(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function hA(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function fA(e,t){const n=Lue(e,t),r=n.one(e,void 0),i=Cue(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function Fue(e,t){return e&&"run"in e?async function(n,r){const i=fA(n,{file:r,...t});await e.run(i,r)}:function(n,r){return fA(n,{file:r,...e||t})}}function mA(e){if(e)throw e}var ib,pA;function Hue(){if(pA)return ib;pA=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},o=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var m=e.call(h,"constructor"),f=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!f)return!1;var g;for(g in h);return typeof g>"u"||e.call(h,g)},c=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},l=function(h,m){if(m==="__proto__")if(e.call(h,m)){if(r)return r(h,m).value}else return;return h[m]};return ib=function d(){var h,m,f,g,x,C,_=arguments[0],b=1,w=arguments.length,j=!1;for(typeof _=="boolean"&&(j=_,_=arguments[1]||{},b=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});b<w;++b)if(h=arguments[b],h!=null)for(m in h)f=l(_,m),g=l(h,m),_!==g&&(j&&g&&(o(g)||(x=i(g)))?(x?(x=!1,C=f&&i(f)?f:[]):C=f&&o(f)?f:{},c(_,{name:m,newValue:d(j,C,g)})):typeof g<"u"&&c(_,{name:m,newValue:g}));return _},ib}var Uue=Hue();const ab=nh(Uue);function R0(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $ue(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const c=i.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);l(null,...i);function l(d,...h){const m=e[++o];let f=-1;if(d){c(d);return}for(;++f<i.length;)(h[f]===null||h[f]===void 0)&&(h[f]=i[f]);i=h,m?Vue(m,l)(...h):c(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Vue(e,t){let n;return r;function r(...c){const l=e.length>c.length;let d;l&&c.push(i);try{d=e.apply(this,c)}catch(h){const m=h;if(l&&n)throw m;return i(m)}l||(d&&d.then&&typeof d.then=="function"?d.then(o,i):d instanceof Error?i(d):o(d))}function i(c,...l){n||(n=!0,t(c,...l))}function o(c){i(null,c)}}const hi={basename:Gue,dirname:que,extname:Wue,join:Kue,sep:"/"};function Gue(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Mh(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let c=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else c<0&&(o=!0,c=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=c));return n===r?r=c:r<0&&(r=e.length),e.slice(n,r)}function que(e){if(Mh(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Wue(e){Mh(e);let t=e.length,n=-1,r=0,i=-1,o=0,c;for(;t--;){const l=e.codePointAt(t);if(l===47){if(c){r=t+1;break}continue}n<0&&(c=!0,n=t+1),l===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Kue(...e){let t=-1,n;for(;++t<e.length;)Mh(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Yue(n)}function Yue(e){Mh(e);const t=e.codePointAt(0)===47;let n=Xue(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Xue(e,t){let n="",r=0,i=-1,o=0,c=-1,l,d;for(;++c<=e.length;){if(c<e.length)l=e.codePointAt(c);else{if(l===47)break;l=47}if(l===47){if(!(i===c-1||o===1))if(i!==c-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),i=c,o=0;continue}}else if(n.length>0){n="",r=0,i=c,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,c):n=e.slice(i+1,c),r=c-i-1;i=c,o=0}else l===46&&o>-1?o++:o=-1}return n}function Mh(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Zue={cwd:Que};function Que(){return"/"}function P0(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Jue(e){if(typeof e=="string")e=new URL(e);else if(!P0(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ede(e)}function ede(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const ob=["history","path","basename","stem","extname","dirname"];class TL{constructor(t){let n;t?P0(t)?n={path:t}:typeof t=="string"||tde(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Zue.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ob.length;){const o=ob[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)ob.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?hi.basename(this.path):void 0}set basename(t){cb(t,"basename"),lb(t,"basename"),this.path=hi.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hi.dirname(this.path):void 0}set dirname(t){gA(this.basename,"dirname"),this.path=hi.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hi.extname(this.path):void 0}set extname(t){if(lb(t,"extname"),gA(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hi.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){P0(t)&&(t=Jue(t)),cb(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hi.basename(this.path,this.extname):void 0}set stem(t){cb(t,"stem"),lb(t,"stem"),this.path=hi.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Tn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function lb(e,t){if(e&&e.includes(hi.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hi.sep+"`")}function cb(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gA(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function tde(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const sde=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),nde={}.hasOwnProperty;class s1 extends sde{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$ue()}copy(){const t=new s1;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ab(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(hb("data",this.frozen),this.namespace[t]=n,this):nde.call(this.namespace,t)&&this.namespace[t]||void 0:t?(hb("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=xm(t),r=this.parser||this.Parser;return ub("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),ub("process",this.parser||this.Parser),db("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,c){const l=xm(t),d=r.parse(l);r.run(d,l,function(m,f,g){if(m||!f||!g)return h(m);const x=f,C=r.stringify(x,g);ade(C)?g.value=C:g.result=C,h(m,g)});function h(m,f){m||!f?c(m):o?o(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),ub("processSync",this.parser||this.Parser),db("processSync",this.compiler||this.Compiler),this.process(t,i),vA("processSync","process",n),r;function i(o,c){n=!0,mA(o),r=c}}run(t,n,r){xA(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(c,l){const d=xm(n);i.run(t,d,h);function h(m,f,g){const x=f||t;m?l(m):c?c(x):r(void 0,x,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),vA("runSync","run",r),i;function o(c,l){mA(c),i=l,r=!0}}stringify(t,n){this.freeze();const r=xm(n),i=this.compiler||this.Compiler;return db("stringify",i),xA(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(hb("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...f]=h;d(m,f)}else c(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function c(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(i.settings=ab(!0,i.settings,h.settings))}function l(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const f=h[m];o(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,m){let f=-1,g=-1;for(;++f<r.length;)if(r[f][0]===h){g=f;break}if(g===-1)r.push([h,...m]);else if(m.length>0){let[x,...C]=m;const _=r[g][1];R0(_)&&R0(x)&&(x=ab(!0,_,x)),r[g]=[h,x,...C]}}}}const rde=new s1().freeze();function ub(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function db(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function hb(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xA(e){if(!R0(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function vA(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function xm(e){return ide(e)?e:new TL(e)}function ide(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function ade(e){return typeof e=="string"||ode(e)}function ode(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lde="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",yA=[],bA={allowDangerousHtml:!0},cde=/^(https?|ircs?|mailto|xmpp)$/i,ude=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dde(e){const t=hde(e),n=fde(e);return mde(t.runSync(t.parse(n),n),e)}function hde(e){const t=e.rehypePlugins||yA,n=e.remarkPlugins||yA,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...bA}:bA;return rde().use(qce).use(n).use(Fue,r).use(t)}function fde(e){const t=e.children||"",n=new TL;return typeof t=="string"&&(n.value=t),n}function mde(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,c=t.skipHtml,l=t.unwrapDisallowed,d=t.urlTransform||pde;for(const m of ude)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+lde+m.id,void 0);return t1(e,h),Aoe(e,{Fragment:s.Fragment,components:i,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function h(m,f,g){if(m.type==="raw"&&g&&typeof f=="number")return c?g.children.splice(f,1):g.children[f]={type:"text",value:m.value},f;if(m.type==="element"){let x;for(x in sb)if(Object.hasOwn(sb,x)&&Object.hasOwn(m.properties,x)){const C=m.properties[x],_=sb[x];(_===null||_.includes(m.tagName))&&(m.properties[x]=d(String(C||""),x,m))}}if(m.type==="element"){let x=n?!n.includes(m.tagName):o?o.includes(m.tagName):!1;if(!x&&r&&typeof f=="number"&&(x=!r(m,f,g)),x&&g&&typeof f=="number")return l&&m.children?g.children.splice(f,1,...m.children):g.children.splice(f,1),f}}}function pde(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||cde.test(e.slice(0,t))?e:""}function wA(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function gde(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function xde(e,t,n){const i=Lg((n||{}).ignore||[]),o=vde(t);let c=-1;for(;++c<o.length;)AL(e,"text",l);function l(h,m){let f=-1,g;for(;++f<m.length;){const x=m[f],C=g?g.children:void 0;if(i(x,C?C.indexOf(x):void 0,g))return;g=x}if(g)return d(h,m)}function d(h,m){const f=m[m.length-1],g=o[c][0],x=o[c][1];let C=0;const b=f.children.indexOf(h);let w=!1,j=[];g.lastIndex=0;let S=g.exec(h.value);for(;S;){const N=S.index,T={index:S.index,input:S.input,stack:[...m,h]};let E=x(...S,T);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?g.lastIndex=N+1:(C!==N&&j.push({type:"text",value:h.value.slice(C,N)}),Array.isArray(E)?j.push(...E):E&&j.push(E),C=N+S[0].length,w=!0),!g.global)break;S=g.exec(h.value)}return w?(C<h.value.length&&j.push({type:"text",value:h.value.slice(C)}),f.children.splice(b,1,...j)):j=[h],b+j.length}}function vde(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([yde(i[0]),bde(i[1])])}return t}function yde(e){return typeof e=="string"?new RegExp(gde(e),"g"):e}function bde(e){return typeof e=="function"?e:function(){return e}}const fb="phrasing",mb=["autolink","link","image","label"];function wde(){return{transforms:[Ede],enter:{literalAutolink:jde,literalAutolinkEmail:pb,literalAutolinkHttp:pb,literalAutolinkWww:pb},exit:{literalAutolink:kde,literalAutolinkEmail:Nde,literalAutolinkHttp:_de,literalAutolinkWww:Cde}}}function Sde(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:fb,notInConstruct:mb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:fb,notInConstruct:mb},{character:":",before:"[ps]",after:"\\/",inConstruct:fb,notInConstruct:mb}]}}function jde(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function pb(e){this.config.enter.autolinkProtocol.call(this,e)}function _de(e){this.config.exit.autolinkProtocol.call(this,e)}function Cde(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Nde(e){this.config.exit.autolinkEmail.call(this,e)}function kde(e){this.exit(e)}function Ede(e){xde(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ade],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Tde]],{ignore:["link","linkReference"]})}function Ade(e,t,n,r,i){let o="";if(!DL(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!Dde(n)))return!1;const c=Rde(n+r);if(!c[0])return!1;const l={type:"link",title:null,url:o+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[l,{type:"text",value:c[1]}]:l}function Tde(e,t,n,r){return!DL(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Dde(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Rde(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=wA(e,"(");let o=wA(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function DL(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ul(n)||Rg(n))&&(!t||n!==47)}RL.peek=Hde;function Pde(){this.buffer()}function Mde(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Lde(){this.buffer()}function Ide(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Ode(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Bde(e){this.exit(e)}function zde(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Fde(e){this.exit(e)}function Hde(){return"["}function RL(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const c=n.enter("footnoteReference"),l=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),c(),o+=i.move("]"),o}function Ude(){return{enter:{gfmFootnoteCallString:Pde,gfmFootnoteCall:Mde,gfmFootnoteDefinitionLabelString:Lde,gfmFootnoteDefinition:Ide},exit:{gfmFootnoteCallString:Ode,gfmFootnoteCall:Bde,gfmFootnoteDefinitionLabelString:zde,gfmFootnoteDefinition:Fde}}}function $de(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:RL},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,c){const l=o.createTracker(c);let d=l.move("[^");const h=o.enter("footnoteDefinition"),m=o.enter("label");return d+=l.move(o.safe(o.associationId(r),{before:d,after:"]"})),m(),d+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),d+=l.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,l.current()),t?PL:Vde))),h(),d}}function Vde(e,t,n){return t===0?e:PL(e,t,n)}function PL(e,t,n){return(n?"":"    ")+e}const Gde=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ML.peek=Xde;function qde(){return{canContainEols:["delete"],enter:{strikethrough:Kde},exit:{strikethrough:Yde}}}function Wde(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Gde}],handlers:{delete:ML}}}function Kde(e){this.enter({type:"delete",children:[]},e)}function Yde(e){this.exit(e)}function ML(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let c=i.move("~~");return c+=n.containerPhrasing(e,{...i.current(),before:c,after:"~"}),c+=i.move("~~"),o(),c}function Xde(){return"~"}function Zde(e){return e.length}function Qde(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Zde,o=[],c=[],l=[],d=[];let h=0,m=-1;for(;++m<e.length;){const _=[],b=[];let w=-1;for(e[m].length>h&&(h=e[m].length);++w<e[m].length;){const j=Jde(e[m][w]);if(n.alignDelimiters!==!1){const S=i(j);b[w]=S,(d[w]===void 0||S>d[w])&&(d[w]=S)}_.push(j)}c[m]=_,l[m]=b}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<h;)o[f]=SA(r[f]);else{const _=SA(r);for(;++f<h;)o[f]=_}f=-1;const g=[],x=[];for(;++f<h;){const _=o[f];let b="",w="";_===99?(b=":",w=":"):_===108?b=":":_===114&&(w=":");let j=n.alignDelimiters===!1?1:Math.max(1,d[f]-b.length-w.length);const S=b+"-".repeat(j)+w;n.alignDelimiters!==!1&&(j=b.length+j+w.length,j>d[f]&&(d[f]=j),x[f]=j),g[f]=S}c.splice(1,0,g),l.splice(1,0,x),m=-1;const C=[];for(;++m<c.length;){const _=c[m],b=l[m];f=-1;const w=[];for(;++f<h;){const j=_[f]||"";let S="",N="";if(n.alignDelimiters!==!1){const T=d[f]-(b[f]||0),E=o[f];E===114?S=" ".repeat(T):E===99?T%2?(S=" ".repeat(T/2+.5),N=" ".repeat(T/2-.5)):(S=" ".repeat(T/2),N=S):N=" ".repeat(T)}n.delimiterStart!==!1&&!f&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&j==="")&&(n.delimiterStart!==!1||f)&&w.push(" "),n.alignDelimiters!==!1&&w.push(S),w.push(j),n.alignDelimiters!==!1&&w.push(N),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||f!==h-1)&&w.push("|")}C.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return C.join(`
`)}function Jde(e){return e==null?"":String(e)}function SA(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function ehe(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const c=n.indentLines(n.containerFlow(e,o.current()),the);return i(),c}function the(e,t,n){return">"+(n?"":" ")+e}function she(e,t){return jA(e,t.inConstruct,!0)&&!jA(e,t.notInConstruct,!1)}function jA(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function _A(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&she(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function nhe(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>c&&(c=o):o=1,i=r+t.length,r=n.indexOf(t,i);return c}function rhe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ihe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function ahe(e,t,n,r){const i=ihe(n),o=e.value||"",c=i==="`"?"GraveAccent":"Tilde";if(rhe(e,n)){const f=n.enter("codeIndented"),g=n.indentLines(o,ohe);return f(),g}const l=n.createTracker(r),d=i.repeat(Math.max(nhe(o,i)+1,3)),h=n.enter("codeFenced");let m=l.move(d);if(e.lang){const f=n.enter(`codeFencedLang${c}`);m+=l.move(n.safe(e.lang,{before:m,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${c}`);m+=l.move(" "),m+=l.move(n.safe(e.meta,{before:m,after:`
`,encode:["`"],...l.current()})),f()}return m+=l.move(`
`),o&&(m+=l.move(o+`
`)),m+=l.move(d),h(),m}function ohe(e,t,n){return(n?"":"    ")+e}function n1(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function lhe(e,t,n,r){const i=n1(n),o=i==='"'?"Quote":"Apostrophe",c=n.enter("definition");let l=n.enter("label");const d=n.createTracker(r);let h=d.move("[");return h+=d.move(n.safe(n.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(l=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),l(),e.title&&(l=n.enter(`title${o}`),h+=d.move(" "+i),h+=d.move(n.safe(e.title,{before:h,after:i,...d.current()})),h+=d.move(i),l()),c(),h}function che(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function sh(e){return"&#x"+e.toString(16).toUpperCase()+";"}function bp(e,t,n){const r=Hc(e),i=Hc(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}LL.peek=uhe;function LL(e,t,n,r){const i=che(n),o=n.enter("emphasis"),c=n.createTracker(r),l=c.move(i);let d=c.move(n.containerPhrasing(e,{after:i,before:l,...c.current()}));const h=d.charCodeAt(0),m=bp(r.before.charCodeAt(r.before.length-1),h,i);m.inside&&(d=sh(h)+d.slice(1));const f=d.charCodeAt(d.length-1),g=bp(r.after.charCodeAt(0),f,i);g.inside&&(d=d.slice(0,-1)+sh(f));const x=c.move(i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},l+d+x}function uhe(e,t,n){return n.options.emphasis||"*"}function dhe(e,t){let n=!1;return t1(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,T0}),!!((!e.depth||e.depth<3)&&KS(e)&&(t.options.setext||n))}function hhe(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(dhe(e,n)){const m=n.enter("headingSetext"),f=n.enter("phrasing"),g=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return f(),m(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const c="#".repeat(i),l=n.enter("headingAtx"),d=n.enter("phrasing");o.move(c+" ");let h=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(h)&&(h=sh(h.charCodeAt(0))+h.slice(1)),h=h?c+" "+h:c,n.options.closeAtx&&(h+=" "+c),d(),l(),h}IL.peek=fhe;function IL(e){return e.value||""}function fhe(){return"<"}OL.peek=mhe;function OL(e,t,n,r){const i=n1(n),o=i==='"'?"Quote":"Apostrophe",c=n.enter("image");let l=n.enter("label");const d=n.createTracker(r);let h=d.move("![");return h+=d.move(n.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(l=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),l(),e.title&&(l=n.enter(`title${o}`),h+=d.move(" "+i),h+=d.move(n.safe(e.title,{before:h,after:i,...d.current()})),h+=d.move(i),l()),h+=d.move(")"),c(),h}function mhe(){return"!"}BL.peek=phe;function BL(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let c=n.enter("label");const l=n.createTracker(r);let d=l.move("![");const h=n.safe(e.alt,{before:d,after:"]",...l.current()});d+=l.move(h+"]["),c();const m=n.stack;n.stack=[],c=n.enter("reference");const f=n.safe(n.associationId(e),{before:d,after:"]",...l.current()});return c(),n.stack=m,o(),i==="full"||!h||h!==f?d+=l.move(f+"]"):i==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function phe(){return"!"}zL.peek=ghe;function zL(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const c=n.unsafe[o],l=n.compilePattern(c);let d;if(c.atBreak)for(;d=l.exec(r);){let h=d.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(d.index+1)}}return i+r+i}function ghe(){return"`"}function FL(e,t){const n=KS(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}HL.peek=xhe;function HL(e,t,n,r){const i=n1(n),o=i==='"'?"Quote":"Apostrophe",c=n.createTracker(r);let l,d;if(FL(e,n)){const m=n.stack;n.stack=[],l=n.enter("autolink");let f=c.move("<");return f+=c.move(n.containerPhrasing(e,{before:f,after:">",...c.current()})),f+=c.move(">"),l(),n.stack=m,f}l=n.enter("link"),d=n.enter("label");let h=c.move("[");return h+=c.move(n.containerPhrasing(e,{before:h,after:"](",...c.current()})),h+=c.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(e.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(d=n.enter("destinationRaw"),h+=c.move(n.safe(e.url,{before:h,after:e.title?" ":")",...c.current()}))),d(),e.title&&(d=n.enter(`title${o}`),h+=c.move(" "+i),h+=c.move(n.safe(e.title,{before:h,after:i,...c.current()})),h+=c.move(i),d()),h+=c.move(")"),l(),h}function xhe(e,t,n){return FL(e,n)?"<":"["}UL.peek=vhe;function UL(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let c=n.enter("label");const l=n.createTracker(r);let d=l.move("[");const h=n.containerPhrasing(e,{before:d,after:"]",...l.current()});d+=l.move(h+"]["),c();const m=n.stack;n.stack=[],c=n.enter("reference");const f=n.safe(n.associationId(e),{before:d,after:"]",...l.current()});return c(),n.stack=m,o(),i==="full"||!h||h!==f?d+=l.move(f+"]"):i==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function vhe(){return"["}function r1(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function yhe(e){const t=r1(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function bhe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function $L(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function whe(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let c=e.ordered?bhe(n):r1(n);const l=e.ordered?c==="."?")":".":yhe(n);let d=t&&n.bulletLastUsed?c===n.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((c==="*"||c==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),$L(n)===c&&m){let f=-1;for(;++f<e.children.length;){const g=e.children[f];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(c=l),n.bulletCurrent=c;const h=n.containerFlow(e,r);return n.bulletLastUsed=c,n.bulletCurrent=o,i(),h}function She(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function jhe(e,t,n,r){const i=She(n);let o=n.bulletCurrent||r1(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let c=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(c=Math.ceil(c/4)*4);const l=n.createTracker(r);l.move(o+" ".repeat(c-o.length)),l.shift(c);const d=n.enter("listItem"),h=n.indentLines(n.containerFlow(e,l.current()),m);return d(),h;function m(f,g,x){return g?(x?"":" ".repeat(c))+f:(x?o:o+" ".repeat(c-o.length))+f}}function _he(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),c=n.containerPhrasing(e,r);return o(),i(),c}const Che=Lg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Nhe(e,t,n,r){return(e.children.some(function(c){return Che(c)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function khe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}VL.peek=Ehe;function VL(e,t,n,r){const i=khe(n),o=n.enter("strong"),c=n.createTracker(r),l=c.move(i+i);let d=c.move(n.containerPhrasing(e,{after:i,before:l,...c.current()}));const h=d.charCodeAt(0),m=bp(r.before.charCodeAt(r.before.length-1),h,i);m.inside&&(d=sh(h)+d.slice(1));const f=d.charCodeAt(d.length-1),g=bp(r.after.charCodeAt(0),f,i);g.inside&&(d=d.slice(0,-1)+sh(f));const x=c.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},l+d+x}function Ehe(e,t,n){return n.options.strong||"*"}function Ahe(e,t,n,r){return n.safe(e.value,r)}function The(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Dhe(e,t,n){const r=($L(n)+(n.options.ruleSpaces?" ":"")).repeat(The(n));return n.options.ruleSpaces?r.slice(0,-1):r}const GL={blockquote:ehe,break:_A,code:ahe,definition:lhe,emphasis:LL,hardBreak:_A,heading:hhe,html:IL,image:OL,imageReference:BL,inlineCode:zL,link:HL,linkReference:UL,list:whe,listItem:jhe,paragraph:_he,root:Nhe,strong:VL,text:Ahe,thematicBreak:Dhe};function Rhe(){return{enter:{table:Phe,tableData:CA,tableHeader:CA,tableRow:Lhe},exit:{codeText:Ihe,table:Mhe,tableData:gb,tableHeader:gb,tableRow:gb}}}function Phe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Mhe(e){this.exit(e),this.data.inTable=void 0}function Lhe(e){this.enter({type:"tableRow",children:[]},e)}function gb(e){this.exit(e)}function CA(e){this.enter({type:"tableCell",children:[]},e)}function Ihe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ohe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ohe(e,t){return t==="|"?t:e}function Bhe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:c,tableCell:d,tableRow:l}};function c(x,C,_,b){return h(m(x,_,b),x.align)}function l(x,C,_,b){const w=f(x,_,b),j=h([w]);return j.slice(0,j.indexOf(`
`))}function d(x,C,_,b){const w=_.enter("tableCell"),j=_.enter("phrasing"),S=_.containerPhrasing(x,{...b,before:o,after:o});return j(),w(),S}function h(x,C){return Qde(x,{align:C,alignDelimiters:r,padding:n,stringLength:i})}function m(x,C,_){const b=x.children;let w=-1;const j=[],S=C.enter("table");for(;++w<b.length;)j[w]=f(b[w],C,_);return S(),j}function f(x,C,_){const b=x.children;let w=-1;const j=[],S=C.enter("tableRow");for(;++w<b.length;)j[w]=d(b[w],x,C,_);return S(),j}function g(x,C,_){let b=GL.inlineCode(x,C,_);return _.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function zhe(){return{exit:{taskListCheckValueChecked:NA,taskListCheckValueUnchecked:NA,paragraph:Hhe}}}function Fhe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Uhe}}}function NA(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Hhe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,c;for(;++o<i.length;){const l=i[o];if(l.type==="paragraph"){c=l;break}}c===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Uhe(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",c="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(c);let d=GL.listItem(e,t,n,{...r,...l.current()});return o&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(m){return m+c}}function $he(){return[wde(),Ude(),qde(),Rhe(),zhe()]}function Vhe(e){return{extensions:[Sde(),$de(e),Wde(),Bhe(e),Fhe()]}}const Ghe={tokenize:Zhe,partial:!0},qL={tokenize:Qhe,partial:!0},WL={tokenize:Jhe,partial:!0},KL={tokenize:efe,partial:!0},qhe={tokenize:tfe,partial:!0},YL={name:"wwwAutolink",tokenize:Yhe,previous:ZL},XL={name:"protocolAutolink",tokenize:Xhe,previous:QL},ga={name:"emailAutolink",tokenize:Khe,previous:JL},Ai={};function Whe(){return{text:Ai}}let $o=48;for(;$o<123;)Ai[$o]=ga,$o++,$o===58?$o=65:$o===91&&($o=97);Ai[43]=ga;Ai[45]=ga;Ai[46]=ga;Ai[95]=ga;Ai[72]=[ga,XL];Ai[104]=[ga,XL];Ai[87]=[ga,YL];Ai[119]=[ga,YL];function Khe(e,t,n){const r=this;let i,o;return c;function c(f){return!M0(f)||!JL.call(r,r.previous)||i1(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return M0(f)?(e.consume(f),l):f===64?(e.consume(f),d):n(f)}function d(f){return f===46?e.check(qhe,m,h)(f):f===45||f===95||kn(f)?(o=!0,e.consume(f),d):m(f)}function h(f){return e.consume(f),i=!0,d}function m(f){return o&&i&&Mn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function Yhe(e,t,n){const r=this;return i;function i(c){return c!==87&&c!==119||!ZL.call(r,r.previous)||i1(r.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Ghe,e.attempt(qL,e.attempt(WL,o),n),n)(c))}function o(c){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(c)}}function Xhe(e,t,n){const r=this;let i="",o=!1;return c;function c(f){return(f===72||f===104)&&QL.call(r,r.previous)&&!i1(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),l):n(f)}function l(f){if(Mn(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const g=i.toLowerCase();if(g==="http"||g==="https")return e.consume(f),d}return n(f)}function d(f){return f===47?(e.consume(f),o?h:(o=!0,d)):n(f)}function h(f){return f===null||xp(f)||ps(f)||ul(f)||Rg(f)?n(f):e.attempt(qL,e.attempt(WL,m),n)(f)}function m(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Zhe(e,t,n){let r=0;return i;function i(c){return(c===87||c===119)&&r<3?(r++,e.consume(c),i):c===46&&r===3?(e.consume(c),o):n(c)}function o(c){return c===null?n(c):t(c)}}function Qhe(e,t,n){let r,i,o;return c;function c(h){return h===46||h===95?e.check(KL,d,l)(h):h===null||ps(h)||ul(h)||h!==45&&Rg(h)?d(h):(o=!0,e.consume(h),c)}function l(h){return h===95?r=!0:(i=r,r=void 0),e.consume(h),c}function d(h){return i||r||!o?n(h):t(h)}}function Jhe(e,t){let n=0,r=0;return i;function i(c){return c===40?(n++,e.consume(c),i):c===41&&r<n?o(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?e.check(KL,t,o)(c):c===null||ps(c)||ul(c)?t(c):(e.consume(c),i)}function o(c){return c===41&&r++,e.consume(c),i}}function efe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),o):l===93?(e.consume(l),i):l===60||l===null||ps(l)||ul(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||ps(l)||ul(l)?t(l):r(l)}function o(l){return Mn(l)?c(l):n(l)}function c(l){return l===59?(e.consume(l),r):Mn(l)?(e.consume(l),c):n(l)}}function tfe(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return kn(o)?n(o):t(o)}}function ZL(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ps(e)}function QL(e){return!Mn(e)}function JL(e){return!(e===47||M0(e))}function M0(e){return e===43||e===45||e===46||e===95||kn(e)}function i1(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const sfe={tokenize:ufe,partial:!0};function nfe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:ofe,continuation:{tokenize:lfe},exit:cfe}},text:{91:{name:"gfmFootnoteCall",tokenize:afe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:rfe,resolveTo:ife}}}}function rfe(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c;for(;i--;){const d=r.events[i][1];if(d.type==="labelImage"){c=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return l;function l(d){if(!c||!c._balanced)return n(d);const h=Qr(r.sliceSerialize({start:c.end,end:r.now()}));return h.codePointAt(0)!==94||!o.includes(h.slice(1))?n(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function ife(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",c,t],["exit",c,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function afe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,c;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),d}function d(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(f){if(o>999||f===93&&!c||f===null||f===91||ps(f))return n(f);if(f===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return i.includes(Qr(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return ps(f)||(c=!0),o++,e.consume(f),f===92?m:h}function m(f){return f===91||f===92||f===93?(e.consume(f),o++,h):h(f)}}function ofe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,c=0,l;return d;function d(C){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(C),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(C){return C===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(C),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(C)}function m(C){if(c>999||C===93&&!l||C===null||C===91||ps(C))return n(C);if(C===93){e.exit("chunkString");const _=e.exit("gfmFootnoteDefinitionLabelString");return o=Qr(r.sliceSerialize(_)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(C),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return ps(C)||(l=!0),c++,e.consume(C),C===92?f:m}function f(C){return C===91||C===92||C===93?(e.consume(C),c++,m):m(C)}function g(C){return C===58?(e.enter("definitionMarker"),e.consume(C),e.exit("definitionMarker"),i.includes(o)||i.push(o),Vt(e,x,"gfmFootnoteDefinitionWhitespace")):n(C)}function x(C){return t(C)}}function lfe(e,t,n){return e.check(Ph,t,e.attempt(sfe,t,n))}function cfe(e){e.exit("gfmFootnoteDefinition")}function ufe(e,t,n){const r=this;return Vt(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const c=r.events[r.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(o):n(o)}}function dfe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(c,l){let d=-1;for(;++d<c.length;)if(c[d][0]==="enter"&&c[d][1].type==="strikethroughSequenceTemporary"&&c[d][1]._close){let h=d;for(;h--;)if(c[h][0]==="exit"&&c[h][1].type==="strikethroughSequenceTemporary"&&c[h][1]._open&&c[d][1].end.offset-c[d][1].start.offset===c[h][1].end.offset-c[h][1].start.offset){c[d][1].type="strikethroughSequence",c[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},c[h][1].start),end:Object.assign({},c[d][1].end)},f={type:"strikethroughText",start:Object.assign({},c[h][1].end),end:Object.assign({},c[d][1].start)},g=[["enter",m,l],["enter",c[h][1],l],["exit",c[h][1],l],["enter",f,l]],x=l.parser.constructs.insideSpan.null;x&&mr(g,g.length,0,Pg(x,c.slice(h+1,d),l)),mr(g,g.length,0,[["exit",f,l],["enter",c[d][1],l],["exit",c[d][1],l],["exit",m,l]]),mr(c,h-1,d-h+3,g),d=h+g.length-2;break}}for(d=-1;++d<c.length;)c[d][1].type==="strikethroughSequenceTemporary"&&(c[d][1].type="data");return c}function o(c,l,d){const h=this.previous,m=this.events;let f=0;return g;function g(C){return h===126&&m[m.length-1][1].type!=="characterEscape"?d(C):(c.enter("strikethroughSequenceTemporary"),x(C))}function x(C){const _=Hc(h);if(C===126)return f>1?d(C):(c.consume(C),f++,x);if(f<2&&!n)return d(C);const b=c.exit("strikethroughSequenceTemporary"),w=Hc(C);return b._open=!w||w===2&&!!_,b._close=!_||_===2&&!!w,l(C)}}}class hfe{constructor(){this.map=[]}add(t,n,r){ffe(this,t,n,r)}consume(t){if(this.map.sort(function(o,c){return o[0]-c[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function ffe(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function mfe(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function pfe(){return{flow:{null:{name:"table",tokenize:gfe,resolveAll:xfe}}}}function gfe(e,t,n){const r=this;let i=0,o=0,c;return l;function l(M){let B=r.events.length-1;for(;B>-1;){const G=r.events[B][1].type;if(G==="lineEnding"||G==="linePrefix")B--;else break}const F=B>-1?r.events[B][1].type:null,U=F==="tableHead"||F==="tableRow"?E:d;return U===E&&r.parser.lazy[r.now().line]?n(M):U(M)}function d(M){return e.enter("tableHead"),e.enter("tableRow"),h(M)}function h(M){return M===124||(c=!0,o+=1),m(M)}function m(M){return M===null?n(M):it(M)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),x):n(M):It(M)?Vt(e,m,"whitespace")(M):(o+=1,c&&(c=!1,i+=1),M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),c=!0,m):(e.enter("data"),f(M)))}function f(M){return M===null||M===124||ps(M)?(e.exit("data"),m(M)):(e.consume(M),M===92?g:f)}function g(M){return M===92||M===124?(e.consume(M),f):f(M)}function x(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(e.enter("tableDelimiterRow"),c=!1,It(M)?Vt(e,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):C(M))}function C(M){return M===45||M===58?b(M):M===124?(c=!0,e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),_):T(M)}function _(M){return It(M)?Vt(e,b,"whitespace")(M):b(M)}function b(M){return M===58?(o+=1,c=!0,e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),w):M===45?(o+=1,w(M)):M===null||it(M)?N(M):T(M)}function w(M){return M===45?(e.enter("tableDelimiterFiller"),j(M)):T(M)}function j(M){return M===45?(e.consume(M),j):M===58?(c=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),S):(e.exit("tableDelimiterFiller"),S(M))}function S(M){return It(M)?Vt(e,N,"whitespace")(M):N(M)}function N(M){return M===124?C(M):M===null||it(M)?!c||i!==o?T(M):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(M)):T(M)}function T(M){return n(M)}function E(M){return e.enter("tableRow"),D(M)}function D(M){return M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),D):M===null||it(M)?(e.exit("tableRow"),t(M)):It(M)?Vt(e,D,"whitespace")(M):(e.enter("data"),A(M))}function A(M){return M===null||M===124||ps(M)?(e.exit("data"),D(M)):(e.consume(M),M===92?P:A)}function P(M){return M===92||M===124?(e.consume(M),A):A(M)}}function xfe(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],c=[0,0,0,0],l=!1,d=0,h,m,f;const g=new hfe;for(;++n<e.length;){const x=e[n],C=x[1];x[0]==="enter"?C.type==="tableHead"?(l=!1,d!==0&&(kA(g,t,d,h,m),m=void 0,d=0),h={type:"table",start:Object.assign({},C.start),end:Object.assign({},C.end)},g.add(n,0,[["enter",h,t]])):C.type==="tableRow"||C.type==="tableDelimiterRow"?(r=!0,f=void 0,o=[0,0,0,0],c=[0,n+1,0,0],l&&(l=!1,m={type:"tableBody",start:Object.assign({},C.start),end:Object.assign({},C.end)},g.add(n,0,[["enter",m,t]])),i=C.type==="tableDelimiterRow"?2:m?3:1):i&&(C.type==="data"||C.type==="tableDelimiterMarker"||C.type==="tableDelimiterFiller")?(r=!1,c[2]===0&&(o[1]!==0&&(c[0]=c[1],f=vm(g,t,o,i,void 0,f),o=[0,0,0,0]),c[2]=n)):C.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(c[0]=c[1],f=vm(g,t,o,i,void 0,f)),o=c,c=[o[1],n,0,0])):C.type==="tableHead"?(l=!0,d=n):C.type==="tableRow"||C.type==="tableDelimiterRow"?(d=n,o[1]!==0?(c[0]=c[1],f=vm(g,t,o,i,n,f)):c[1]!==0&&(f=vm(g,t,c,i,n,f)),i=0):i&&(C.type==="data"||C.type==="tableDelimiterMarker"||C.type==="tableDelimiterFiller")&&(c[3]=n)}for(d!==0&&kA(g,t,d,h,m),g.consume(t.events),n=-1;++n<t.events.length;){const x=t.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=mfe(t.events,n))}return e}function vm(e,t,n,r,i,o){const c=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},fc(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const d=fc(t.events,n[1]);if(o={type:c,start:Object.assign({},d),end:Object.assign({},d)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const h=fc(t.events,n[2]),m=fc(t.events,n[3]),f={type:l,start:Object.assign({},h),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const g=t.events[n[2]],x=t.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const C=n[2]+1,_=n[3]-n[2]-1;e.add(C,_,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(o.end=Object.assign({},fc(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function kA(e,t,n,r,i){const o=[],c=fc(t.events,n);i&&(i.end=Object.assign({},c),o.push(["exit",i,t])),r.end=Object.assign({},c),o.push(["exit",r,t]),e.add(n+1,0,o)}function fc(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const vfe={name:"tasklistCheck",tokenize:bfe};function yfe(){return{text:{91:vfe}}}function bfe(e,t,n){const r=this;return i;function i(d){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),o)}function o(d){return ps(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),c):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),c):n(d)}function c(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(d)}function l(d){return it(d)?t(d):It(d)?e.check({tokenize:wfe},t,n)(d):n(d)}}function wfe(e,t,n){return Vt(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Sfe(e){return uL([Whe(),nfe(),dfe(e),pfe(),yfe()])}const jfe={};function _fe(e){const t=this,n=e||jfe,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),c=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Sfe(n)),o.push($he()),c.push(Vhe(n))}function Cfe({src:e,alt:t,projectPath:n}){const[r,i]=y.useState(null),[o,c]=y.useState(!0),[l,d]=y.useState(null);return y.useEffect(()=>{if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")){i(e),c(!1);return}if(!n){d("Cannot load local image: no project path"),c(!1);return}(async()=>{try{c(!0),d(null);const m=e.startsWith("./")?e.slice(2):e,f=await J.readLocalImage(n,m);f.success&&f.data?i(f.data):d(f.error||"Failed to load image")}catch(m){d(m instanceof Error?m.message:"Failed to load image")}finally{c(!1)}})()},[e,n]),o?s.jsxs("span",{className:"inline-flex items-center gap-2 rounded border border-border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{children:"Loading image..."})]}):l||!r?s.jsxs("span",{className:"inline-flex items-center gap-2 rounded border border-destructive/50 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[s.jsx(Ji,{className:"h-4 w-4"}),s.jsx("span",{children:l||"Image not found"})]}):s.jsx("img",{src:r,alt:t,className:"max-w-full h-auto"})}function Nfe({generatedChangelog:e,saveSuccess:t,copySuccess:n,canSave:r,isDragOver:i,imageError:o,textareaRef:c,projectPath:l,onSave:d,onCopy:h,onChangelogEdit:m,onPaste:f,onDragOver:g,onDragLeave:x,onDrop:C}){const[_,b]=y.useState("markdown"),w=y.useMemo(()=>({img:({src:j,alt:S})=>s.jsx(Cfe,{src:j||"",alt:S||"",projectPath:l})}),[l]);return s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"font-medium",children:"Preview"}),s.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-border p-1",children:[s.jsx(te,{variant:_==="markdown"?"default":"ghost",size:"sm",onClick:()=>b("markdown"),className:"h-7 px-3 text-xs",children:"Markdown"}),s.jsx(te,{variant:_==="preview"?"default":"ghost",size:"sm",onClick:()=>b("preview"),className:"h-7 px-3 text-xs",children:"Preview"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",onClick:h,disabled:!r,children:[n?s.jsx(ta,{className:"mr-2 h-4 w-4 text-success"}):s.jsx(Ac,{className:"mr-2 h-4 w-4"}),n?"Copied!":"Copy"]})}),s.jsx(jt,{children:"Copy to clipboard"})]}),s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsxs(te,{variant:"default",size:"sm",onClick:d,disabled:!r,children:[t?s.jsx(ta,{className:"mr-2 h-4 w-4"}):s.jsx(WA,{className:"mr-2 h-4 w-4"}),t?"Saved!":"Save to CHANGELOG.md"]})}),s.jsx(jt,{children:"Prepend to CHANGELOG.md in project root"})]})]})]}),s.jsx("div",{className:`flex-1 overflow-hidden p-6 ${i?"bg-muted/50":""}`,onDragOver:g,onDragLeave:x,onDrop:C,children:e?s.jsxs(s.Fragment,{children:[i&&s.jsxs("div",{className:"mb-4 rounded-lg border-2 border-dashed border-primary/50 bg-primary/5 p-4 text-center",children:[s.jsx(Ji,{className:"mx-auto h-8 w-8 text-primary/50"}),s.jsx("p",{className:"mt-2 text-sm text-primary/70",children:"Drop images here to add to changelog"})]}),o&&s.jsx("div",{className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm text-destructive",children:o}),_==="markdown"?s.jsxs("div",{className:"flex h-full flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ji,{className:"h-3.5 w-3.5"}),s.jsx("span",{children:"Paste images into the description to save them to the changelog"})]}),s.jsx(_i,{ref:c,className:"flex-1 w-full resize-none font-mono text-sm",value:e,onChange:j=>m(j.target.value),onPaste:f,placeholder:"Generated changelog will appear here..."})]}):s.jsx("div",{className:"h-full overflow-auto",children:s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx(dde,{remarkPlugins:[_fe],components:w,children:e})})})]}):s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pr,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),s.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:'Click "Generate Changelog" to create release notes.'}),s.jsxs("p",{className:"mt-2 text-xs text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Ji,{className:"h-3.5 w-3.5"}),s.jsx("span",{children:"Paste images into the description to save them to the changelog"})]})]})})})]})}function kfe({projectId:e,version:t,generatedChangelog:n}){const[r,i]=y.useState(!1),[o,c]=y.useState(null),[l,d]=y.useState(null),h=t.startsWith("v")?t:`v${t}`,m=async()=>{i(!0),d(null);try{const f=await J.createGitHubRelease(e,t,n);f.success&&f.data?c(f.data.url):d(f.error||"Failed to create release")}catch(f){d(f instanceof Error?f.message:"Failed to create release")}finally{i(!1)}};return s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"h-5 w-5"}),s.jsx(On,{className:"text-base",children:"Create GitHub Release"})]})}),s.jsx(pt,{children:o?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-success",children:[s.jsx(ta,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Release created successfully!"})]}),s.jsxs(te,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(o,"_blank"),children:[s.jsx(Fs,{className:"mr-2 h-4 w-4"}),"View Release on GitHub"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Create a new release ",h," on GitHub with the changelog as release notes."]}),l&&s.jsxs("div",{className:"flex items-start gap-2 text-destructive text-sm",children:[s.jsx(ct,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:l})]}),s.jsx(te,{className:"w-full",onClick:m,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Release..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"mr-2 h-4 w-4"}),"Create Release ",h]})})]})})]})}function Efe({projectId:e,version:t,selectedTaskIds:n,selectedTasks:r}){const[i,o]=y.useState(!1),[c,l]=y.useState(!1),[d,h]=y.useState(null),m=async()=>{o(!0),h(null);try{const f=await J.archiveTasks(e,n,t);f.success?l(!0):h(f.error||"Failed to archive tasks")}catch(f){h(f instanceof Error?f.message:"Failed to archive tasks")}finally{o(!1)}};return s.jsxs(He,{children:[s.jsx(In,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jo,{className:"h-5 w-5"}),s.jsx(On,{className:"text-base",children:"Archive Completed Tasks"})]})}),s.jsx(pt,{children:c?s.jsxs("div",{className:"flex items-center gap-2 text-success",children:[s.jsx(ta,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-sm",children:[r.length," task",r.length!==1?"s":""," archived!"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Archive ",r.length," task",r.length!==1?"s":"",' to clean up your Kanban board. Archived tasks can be viewed using the "Show Archived" toggle.']}),d&&s.jsxs("div",{className:"flex items-start gap-2 text-destructive text-sm",children:[s.jsx(ct,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:d})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:m,disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),"Archiving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Jo,{className:"mr-2 h-4 w-4"}),"Archive ",r.length," Task",r.length!==1?"s":""]})})]})})]})}function Afe({projectId:e,version:t,selectedTaskIds:n,doneTasks:r,generatedChangelog:i,onDone:o}){const c=r.filter(d=>n.includes(d.id)),l=Qae(t);return s.jsx("div",{className:"flex flex-1 flex-col items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-lg w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:s.jsx(kH,{className:"h-8 w-8 text-success"})}),s.jsx("h2",{className:"text-2xl font-semibold",children:"Changelog Saved!"}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Version ",l," has been added to CHANGELOG.md"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(kfe,{projectId:e,version:t,generatedChangelog:i}),s.jsx(Efe,{projectId:e,version:t,selectedTaskIds:n,selectedTasks:c})]}),s.jsx("div",{className:"pt-4",children:s.jsxs(te,{className:"w-full",size:"lg",onClick:o,children:[s.jsx(ts,{className:"mr-2 h-4 w-4"}),"Done"]})})]})})}function Tfe({projectId:e,content:t,onContentChange:n}){const[r,i]=y.useState(!1),[o,c]=y.useState(null),l=y.useRef(null),d=y.useCallback(C=>{const _=l.current;if(_){const b=_.selectionStart,w=t.substring(0,b),j=t.substring(b),S=w+C+j;n(S),setTimeout(()=>{const N=b+C.length;_.setSelectionRange(N,N),_.focus()},0)}},[t,n]),h=y.useCallback(async C=>{if(e){if(!Wd(C.type)){c(`Invalid image type. Allowed: ${rl}`);return}try{const _=await Kd(C),b=C.name.split(".").pop()||C.type.split("/")[1]||"png",j=`changelog-${Date.now()}.${b}`,S=Fc(j,[]),N=await J.saveChangelogImage(e,_,S);if(N.success&&N.data){const T=`
![${S}](${N.data.relativePath})
`;d(T)}else c(N.error||"Failed to save image")}catch{c("Failed to process image")}}},[e,d]),m=y.useCallback(async C=>{if(!e)return;const b=Array.from(C.clipboardData.items).filter(w=>w.type.startsWith("image/"));if(b.length!==0){C.preventDefault(),c(null);for(const w of b){const j=w.getAsFile();j&&await h(j)}}},[e,h]),f=y.useCallback(C=>{C.preventDefault(),C.stopPropagation(),i(!0)},[]),g=y.useCallback(C=>{C.preventDefault(),C.stopPropagation(),i(!1)},[]),x=y.useCallback(async C=>{if(C.preventDefault(),C.stopPropagation(),i(!1),!e)return;const b=Array.from(C.dataTransfer.files).filter(w=>w.type.startsWith("image/"));if(b.length!==0){c(null);for(const w of b)await h(w)}},[e,h]);return{textareaRef:l,isDragOver:r,imageError:o,handlePaste:m,handleDragOver:f,handleDragLeave:g,handleDrop:x}}function Dfe(e){const{sourceMode:t,selectedTaskIds:n,doneTasks:r,previewCommits:i,generatedChangelog:o,onChangelogEdit:c}=e,l=Et(x=>x.selectedProjectId),h=Et(x=>x.projects).find(x=>x.id===l),m=r.filter(x=>n.includes(x.id)),f=Zae(t,n,m,i),g=Tfe({projectId:l,content:o,onContentChange:c});return s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx(eoe,{sourceMode:t,summaryInfo:f,existingChangelog:e.existingChangelog,version:e.version,versionReason:e.versionReason,date:e.date,format:e.format,audience:e.audience,emojiLevel:e.emojiLevel,customInstructions:e.customInstructions,generationProgress:e.generationProgress,isGenerating:e.isGenerating,error:e.error,showAdvanced:e.showAdvanced,canGenerate:e.canGenerate,onBack:e.onBack,onVersionChange:e.onVersionChange,onDateChange:e.onDateChange,onFormatChange:e.onFormatChange,onAudienceChange:e.onAudienceChange,onEmojiLevelChange:e.onEmojiLevelChange,onCustomInstructionsChange:e.onCustomInstructionsChange,onShowAdvancedChange:e.onShowAdvancedChange,onGenerate:e.onGenerate}),s.jsx(Nfe,{generatedChangelog:o,saveSuccess:e.saveSuccess,copySuccess:e.copySuccess,canSave:e.canSave,isDragOver:g.isDragOver,imageError:g.imageError,textareaRef:g.textareaRef,projectPath:h?.path,onSave:e.onSave,onCopy:e.onCopy,onChangelogEdit:c,onPaste:g.handlePaste,onDragOver:g.handleDragOver,onDragLeave:g.handleDragLeave,onDrop:g.handleDrop})]})}function Rfe(e){return s.jsx(Afe,{...e})}const eI=()=>new Date().toISOString().split("T")[0],EA={doneTasks:[],selectedTaskIds:[],loadedSpecs:[],existingChangelog:null,sourceMode:"tasks",branches:[],tags:[],currentBranch:"",defaultBranch:"main",previewCommits:[],isLoadingGitData:!1,isLoadingCommits:!1,gitHistoryType:"recent",gitHistoryCount:25,gitHistorySinceDate:"",gitHistoryFromTag:"",gitHistoryToTag:"",gitHistorySinceVersion:"",includeMergeCommits:!1,baseBranch:"",compareBranch:"",version:"1.0.0",date:eI(),format:"keep-a-changelog",audience:"user-facing",emojiLevel:"none",customInstructions:"",generationProgress:null,generatedChangelog:"",isGenerating:!1,error:null},Ye=xr((e,t)=>({...EA,setDoneTasks:n=>e({doneTasks:n}),setSelectedTaskIds:n=>e({selectedTaskIds:n}),toggleTaskSelection:n=>e(r=>({selectedTaskIds:r.selectedTaskIds.includes(n)?r.selectedTaskIds.filter(i=>i!==n):[...r.selectedTaskIds,n]})),selectAllTasks:()=>e(n=>({selectedTaskIds:n.doneTasks.map(r=>r.id)})),deselectAllTasks:()=>e({selectedTaskIds:[]}),setLoadedSpecs:n=>e({loadedSpecs:n}),setExistingChangelog:n=>{if(e({existingChangelog:n}),n?.lastVersion){const r=n.lastVersion.split(".").map(Number);if(r.length===3&&!r.some(isNaN)){const[i,o,c]=r;e({version:`${i}.${o}.${c+1}`})}}},setSourceMode:n=>{e({sourceMode:n,previewCommits:[],error:null})},setBranches:n=>e({branches:n}),setTags:n=>e({tags:n}),setCurrentBranch:n=>e({currentBranch:n}),setDefaultBranch:n=>{e({defaultBranch:n}),t().baseBranch||e({baseBranch:n})},setPreviewCommits:n=>e({previewCommits:n}),setIsLoadingGitData:n=>e({isLoadingGitData:n}),setIsLoadingCommits:n=>e({isLoadingCommits:n}),setGitHistoryType:n=>e({gitHistoryType:n,previewCommits:[]}),setGitHistoryCount:n=>e({gitHistoryCount:n}),setGitHistorySinceDate:n=>e({gitHistorySinceDate:n}),setGitHistoryFromTag:n=>e({gitHistoryFromTag:n}),setGitHistoryToTag:n=>e({gitHistoryToTag:n}),setGitHistorySinceVersion:n=>e({gitHistorySinceVersion:n}),setIncludeMergeCommits:n=>e({includeMergeCommits:n}),setBaseBranch:n=>e({baseBranch:n,previewCommits:[]}),setCompareBranch:n=>e({compareBranch:n,previewCommits:[]}),setVersion:n=>e({version:n}),setDate:n=>e({date:n}),setFormat:n=>{e({format:n}),Ya({changelogFormat:n})},setAudience:n=>{e({audience:n}),Ya({changelogAudience:n})},setEmojiLevel:n=>{e({emojiLevel:n}),Ya({changelogEmojiLevel:n})},setCustomInstructions:n=>e({customInstructions:n}),initializeFromSettings:()=>{const n=dn.getState().settings;e({format:n.changelogFormat||"keep-a-changelog",audience:n.changelogAudience||"user-facing",emojiLevel:n.changelogEmojiLevel||"none"})},setGenerationProgress:n=>e({generationProgress:n}),setGeneratedChangelog:n=>e({generatedChangelog:n}),setIsGenerating:n=>e({isGenerating:n}),setError:n=>e({error:n}),reset:()=>e({...EA,date:eI()}),updateGeneratedChangelog:n=>e({generatedChangelog:n})}));async function xb(e){const t=Ye.getState();try{const r=Ks.getState().tasks,i=await J.getChangelogDoneTasks(e,r);i.success&&i.data&&t.setDoneTasks(i.data);const o=await J.readExistingChangelog(e);o.success&&o.data&&t.setExistingChangelog(o.data)}catch(n){t.setError(n instanceof Error?n.message:"Failed to load changelog data")}}async function Pfe(e){const t=Ye.getState();t.setIsLoadingGitData(!0),t.setError(null);try{const[n,r]=await Promise.all([J.getChangelogBranches(e),J.getChangelogTags(e)]);if(n.success&&n.data){t.setBranches(n.data);const i=n.data.find(c=>c.isCurrent);i&&(t.setCurrentBranch(i.name),t.compareBranch||t.setCompareBranch(i.name));const o=n.data.find(c=>c.name==="main"||c.name==="master");o&&t.setDefaultBranch(o.name)}r.success&&r.data&&(t.setTags(r.data),r.data.length>0&&!t.gitHistoryFromTag&&t.setGitHistoryFromTag(r.data[0].name),r.data.length>1&&!t.gitHistoryToTag&&t.setGitHistoryToTag(r.data[1].name),r.data.length>0&&!t.gitHistorySinceVersion&&t.setGitHistorySinceVersion(r.data[0].name))}catch(n){t.setError(n instanceof Error?n.message:"Failed to load git data")}finally{t.setIsLoadingGitData(!1)}}async function Mfe(e){const t=Ye.getState();t.setIsLoadingCommits(!0),t.setError(null);try{let n,r;if(t.sourceMode==="git-history")r="git-history",n={type:t.gitHistoryType,count:t.gitHistoryCount,sinceDate:t.gitHistorySinceDate||void 0,fromTag:t.gitHistoryType==="since-version"?t.gitHistorySinceVersion||void 0:t.gitHistoryFromTag||void 0,toTag:t.gitHistoryToTag||void 0,includeMergeCommits:t.includeMergeCommits};else if(t.sourceMode==="branch-diff")r="branch-diff",n={baseBranch:t.baseBranch,compareBranch:t.compareBranch};else{t.setPreviewCommits([]),t.setIsLoadingCommits(!1);return}const i=await J.getChangelogCommitsPreview(e,n,r);i.success&&i.data?t.setPreviewCommits(i.data):(t.setError(i.error||"Failed to load commits"),t.setPreviewCommits([]))}catch(n){t.setError(n instanceof Error?n.message:"Failed to load commits preview"),t.setPreviewCommits([])}finally{t.setIsLoadingCommits(!1)}}function Lfe(e){const t=Ye.getState();if(t.sourceMode==="tasks"){if(t.selectedTaskIds.length===0){t.setError("Please select at least one task to include in the changelog");return}}else if(t.sourceMode==="git-history"){if(t.previewCommits.length===0){t.setError("No commits found for the selected options. Please adjust your filters.");return}}else if(t.sourceMode==="branch-diff"){if(!t.baseBranch||!t.compareBranch){t.setError("Please select both base and compare branches");return}if(t.baseBranch===t.compareBranch){t.setError("Base and compare branches must be different");return}if(t.previewCommits.length===0){t.setError("No commits found between the selected branches");return}}t.setIsGenerating(!0),t.setError(null),t.setGenerationProgress({stage:"loading_specs",progress:0,message:t.sourceMode==="tasks"?"Loading task specifications...":"Preparing commit data..."});const n={projectId:e,sourceMode:t.sourceMode,version:t.version,date:t.date,format:t.format,audience:t.audience,emojiLevel:t.emojiLevel!=="none"?t.emojiLevel:void 0,customInstructions:t.customInstructions||void 0};t.sourceMode==="tasks"?J.generateChangelog({...n,taskIds:t.selectedTaskIds}):t.sourceMode==="git-history"?J.generateChangelog({...n,gitHistory:{type:t.gitHistoryType,count:t.gitHistoryCount,sinceDate:t.gitHistorySinceDate||void 0,fromTag:t.gitHistoryType==="since-version"?t.gitHistorySinceVersion||void 0:t.gitHistoryFromTag||void 0,toTag:t.gitHistoryToTag||void 0,includeMergeCommits:t.includeMergeCommits}}):t.sourceMode==="branch-diff"&&J.generateChangelog({...n,branchDiff:{baseBranch:t.baseBranch,compareBranch:t.compareBranch}})}async function Ife(e,t="prepend"){const n=Ye.getState();if(!n.generatedChangelog)return n.setError("No changelog to save"),!1;try{const r=await J.saveChangelog({projectId:e,content:n.generatedChangelog,mode:t});return r.success?!0:(n.setError(r.error||"Failed to save changelog"),!1)}catch(r){return n.setError(r instanceof Error?r.message:"Failed to save changelog"),!1}}function Ofe(){const e=Ye.getState();if(!e.generatedChangelog)return e.setError("No changelog to copy"),!1;try{return navigator.clipboard.writeText(e.generatedChangelog),!0}catch{return e.setError("Failed to copy to clipboard"),!1}}function Bfe(){const e=Ye.getState();if(e.isGenerating)return!1;switch(e.sourceMode){case"tasks":return e.selectedTaskIds.length>0;case"git-history":return e.previewCommits.length>0;case"branch-diff":return e.baseBranch!==""&&e.compareBranch!==""&&e.baseBranch!==e.compareBranch&&e.previewCommits.length>0;default:return!1}}function zfe(){const e=Et(ye=>ye.selectedProjectId),t=Ye(ye=>ye.doneTasks),n=Ye(ye=>ye.selectedTaskIds),r=Ye(ye=>ye.existingChangelog),i=Ye(ye=>ye.sourceMode),o=Ye(ye=>ye.branches),c=Ye(ye=>ye.tags),l=Ye(ye=>ye.currentBranch),d=Ye(ye=>ye.defaultBranch),h=Ye(ye=>ye.previewCommits),m=Ye(ye=>ye.isLoadingGitData),f=Ye(ye=>ye.isLoadingCommits),g=Ye(ye=>ye.gitHistoryType),x=Ye(ye=>ye.gitHistoryCount),C=Ye(ye=>ye.gitHistorySinceDate),_=Ye(ye=>ye.gitHistoryFromTag),b=Ye(ye=>ye.gitHistoryToTag),w=Ye(ye=>ye.gitHistorySinceVersion),j=Ye(ye=>ye.includeMergeCommits),S=Ye(ye=>ye.baseBranch),N=Ye(ye=>ye.compareBranch),T=Ye(ye=>ye.version),E=Ye(ye=>ye.date),D=Ye(ye=>ye.format),A=Ye(ye=>ye.audience),P=Ye(ye=>ye.emojiLevel),M=Ye(ye=>ye.customInstructions),B=Ye(ye=>ye.generationProgress),F=Ye(ye=>ye.generatedChangelog),U=Ye(ye=>ye.isGenerating),G=Ye(ye=>ye.error),$=Ye(ye=>ye.toggleTaskSelection),V=Ye(ye=>ye.selectAllTasks),Y=Ye(ye=>ye.deselectAllTasks),K=Ye(ye=>ye.setSourceMode),O=Ye(ye=>ye.setGitHistoryType),L=Ye(ye=>ye.setGitHistoryCount),I=Ye(ye=>ye.setGitHistorySinceDate),q=Ye(ye=>ye.setGitHistoryFromTag),z=Ye(ye=>ye.setGitHistoryToTag),ee=Ye(ye=>ye.setGitHistorySinceVersion),ie=Ye(ye=>ye.setIncludeMergeCommits),re=Ye(ye=>ye.setBaseBranch),X=Ye(ye=>ye.setCompareBranch),W=Ye(ye=>ye.setVersion),Q=Ye(ye=>ye.setDate),se=Ye(ye=>ye.setFormat),he=Ye(ye=>ye.setAudience),de=Ye(ye=>ye.setEmojiLevel),Ne=Ye(ye=>ye.setCustomInstructions),Re=Ye(ye=>ye.updateGeneratedChangelog),ce=Ye(ye=>ye.setError),ge=Ye(ye=>ye.setIsGenerating),ae=Ye(ye=>ye.setGenerationProgress),Ee=Ye(ye=>ye.reset),[Be,et]=y.useState(1),[De,Me]=y.useState(!1),[qe,st]=y.useState(!1),[_t,fe]=y.useState(!1),[Ae,Le]=y.useState(null),We=Ye(ye=>ye.initializeFromSettings);y.useEffect(()=>{We()},[We]),y.useEffect(()=>{e&&(xb(e),Pfe(e))},[e]);const ve=y.useCallback(()=>{e&&(i==="git-history"||i==="branch-diff")&&Mfe(e)},[e,i]);y.useEffect(()=>{const ye=J.onChangelogGenerationProgress((Zt,Qt)=>{Zt===e&&ae(Qt)}),Jn=J.onChangelogGenerationComplete((Zt,Qt)=>{Zt===e&&(ge(!1),Qt.success?(Re(Qt.changelog),ae({stage:"complete",progress:100,message:"Changelog generated successfully!"})):ce(Qt.error||"Generation failed"))}),ds=J.onChangelogGenerationError((Zt,Qt)=>{Zt===e&&(ge(!1),ce(Qt),ae({stage:"error",progress:0,message:Qt,error:Qt}))});return()=>{ye(),Jn(),ds()}},[e,ce,ae,ge,Re]);const Fe=()=>{e&&Lfe(e)},Ue=async()=>{e&&await Ife(e,"prepend")&&(st(!0),setTimeout(()=>{st(!1),et(3)},1e3))},Ct=()=>{Ofe()&&(fe(!0),setTimeout(()=>fe(!1),2e3))},Ot=async()=>{if(e)try{if(i==="tasks"&&n.length>0){const ye=await J.suggestChangelogVersion(e,n);ye.success&&ye.data&&(W(ye.data.version),Le(ye.data.reason))}else if((i==="git-history"||i==="branch-diff")&&h.length>0){const ye=await J.suggestChangelogVersionFromCommits(e,h);ye.success&&ye.data&&(W(ye.data.version),Le(ye.data.reason))}}catch(ye){console.error("Failed to suggest version:",ye),Le(null)}et(2)},Ke=()=>{et(1)},Xe=async()=>{Ee(),et(1),e&&(await mo(e),xb(e))},Ft=Bfe(),js=F.length>0&&!U,vr=(()=>{switch(i){case"tasks":return n.length>0;case"git-history":return h.length>0;case"branch-diff":return S!==""&&N!==""&&S!==N&&h.length>0;default:return!1}})();return{selectedProjectId:e,doneTasks:t,selectedTaskIds:n,existingChangelog:r,sourceMode:i,branches:o,tags:c,currentBranch:l,defaultBranch:d,previewCommits:h,isLoadingGitData:m,isLoadingCommits:f,gitHistoryType:g,gitHistoryCount:x,gitHistorySinceDate:C,gitHistoryFromTag:_,gitHistoryToTag:b,gitHistorySinceVersion:w,includeMergeCommits:j,baseBranch:S,compareBranch:N,version:T,date:E,format:D,audience:A,emojiLevel:P,customInstructions:M,generationProgress:B,generatedChangelog:F,isGenerating:U,error:G,step:Be,showAdvanced:De,saveSuccess:qe,copySuccess:_t,versionReason:Ae,canGenerate:Ft,canSave:js,canContinue:vr,toggleTaskSelection:$,selectAllTasks:V,deselectAllTasks:Y,setSourceMode:K,setGitHistoryType:O,setGitHistoryCount:L,setGitHistorySinceDate:I,setGitHistoryFromTag:q,setGitHistoryToTag:z,setGitHistorySinceVersion:ee,setIncludeMergeCommits:ie,setBaseBranch:re,setCompareBranch:X,setVersion:W,setDate:Q,setFormat:se,setAudience:he,setEmojiLevel:de,setCustomInstructions:Ne,updateGeneratedChangelog:Re,setShowAdvanced:Me,setStep:et,handleLoadCommitsPreview:ve,handleGenerate:Fe,handleSave:Ue,handleCopy:Ct,handleContinue:Ot,handleBack:Ke,handleDone:Xe,handleRefresh:()=>e&&xb(e)}}function Ffe(){const{selectedProjectId:e,doneTasks:t,selectedTaskIds:n,existingChangelog:r,sourceMode:i,branches:o,tags:c,defaultBranch:l,previewCommits:d,isLoadingGitData:h,isLoadingCommits:m,gitHistoryType:f,gitHistoryCount:g,gitHistorySinceDate:x,gitHistoryFromTag:C,gitHistoryToTag:_,gitHistorySinceVersion:b,includeMergeCommits:w,baseBranch:j,compareBranch:S,version:N,date:T,format:E,audience:D,emojiLevel:A,customInstructions:P,generationProgress:M,generatedChangelog:B,isGenerating:F,error:U,step:G,showAdvanced:$,saveSuccess:V,copySuccess:Y,versionReason:K,canGenerate:O,canSave:L,canContinue:I,toggleTaskSelection:q,selectAllTasks:z,deselectAllTasks:ee,setSourceMode:ie,setGitHistoryType:re,setGitHistoryCount:X,setGitHistorySinceDate:W,setGitHistoryFromTag:Q,setGitHistoryToTag:se,setGitHistorySinceVersion:he,setIncludeMergeCommits:de,setBaseBranch:Ne,setCompareBranch:Re,setVersion:ce,setDate:ge,setFormat:ae,setAudience:Ee,setEmojiLevel:Be,setCustomInstructions:et,updateGeneratedChangelog:De,setShowAdvanced:Me,handleLoadCommitsPreview:qe,handleGenerate:st,handleSave:_t,handleCopy:fe,handleContinue:Ae,handleBack:Le,handleDone:We,handleRefresh:ve}=zfe();return e?s.jsx(Mc,{children:s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx(Iae,{step:G,onRefresh:ve}),G===1&&s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx(Wae,{sourceMode:i,onSourceModeChange:ie,doneTasksCount:t.length,branches:o,tags:c,defaultBranch:l,isLoadingGitData:h,isLoadingCommits:m,gitHistoryType:f,gitHistoryCount:g,gitHistorySinceDate:x,gitHistoryFromTag:C,gitHistoryToTag:_,gitHistorySinceVersion:b,includeMergeCommits:w,onGitHistoryTypeChange:re,onGitHistoryCountChange:X,onGitHistorySinceDateChange:W,onGitHistoryFromTagChange:Q,onGitHistoryToTagChange:se,onGitHistorySinceVersionChange:he,onIncludeMergeCommitsChange:de,baseBranch:j,compareBranch:S,onBaseBranchChange:Ne,onCompareBranchChange:Re,onLoadCommitsPreview:qe}),s.jsx(Xae,{sourceMode:i,doneTasks:t,selectedTaskIds:n,onToggleTask:q,onSelectAll:z,onDeselectAll:ee,previewCommits:d,isLoadingCommits:m,onContinue:Ae,canContinue:I})]}),G===2&&s.jsx(Dfe,{sourceMode:i,selectedTaskIds:n,doneTasks:t,previewCommits:d,existingChangelog:r,version:N,versionReason:K,date:T,format:E,audience:D,emojiLevel:A,customInstructions:P,generationProgress:M,generatedChangelog:B,isGenerating:F,error:U,showAdvanced:$,saveSuccess:V,copySuccess:Y,canGenerate:O,canSave:L,onBack:Le,onVersionChange:ce,onDateChange:ge,onFormatChange:ae,onAudienceChange:Ee,onEmojiLevelChange:Be,onCustomInstructionsChange:et,onShowAdvancedChange:Me,onGenerate:st,onSave:_t,onCopy:fe,onChangelogEdit:De}),G===3&&e&&s.jsx(Rfe,{projectId:e,version:N,selectedTaskIds:n,doneTasks:t,generatedChangelog:B,onDone:We})]})}):s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pr,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Project Selected"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Select a project from the sidebar to generate changelogs."})]})})}function Hfe({projectId:e}){const n=Et(G=>G.projects).find(G=>G.id===e),r=Ks(G=>G.tasks),[i,o]=y.useState([]),[c,l]=y.useState(!1),[d,h]=y.useState(null),[m,f]=y.useState(!1),[g,x]=y.useState(null),[C,_]=y.useState(!1),[b,w]=y.useState(null),[j,S]=y.useState(!1),[N,T]=y.useState(null),[E,D]=y.useState(!1),A=y.useCallback(async()=>{if(e){l(!0),h(null);try{const G=await J.listWorktrees(e);G.success&&G.data?o(G.data.worktrees):h(G.error||"Failed to load worktrees")}catch(G){h(G instanceof Error?G.message:"Failed to load worktrees")}finally{l(!1)}}},[e]);y.useEffect(()=>{A()},[A]);const P=G=>r.find($=>$.specId===G),M=async()=>{if(!g)return;const G=P(g.specName);if(!G){h("Task not found for this worktree");return}_(!0);try{const $=await J.mergeWorktree(G.id);$.success&&$.data?(w($.data),$.data.success&&await A()):w({success:!1,message:$.error||"Merge failed"})}catch($){w({success:!1,message:$ instanceof Error?$.message:"Merge failed"})}finally{_(!1)}},B=async()=>{if(!N)return;const G=P(N.specName);if(!G){h("Task not found for this worktree");return}D(!0);try{const $=await J.discardWorktree(G.id);$.success?(await A(),S(!1),T(null)):h($.error||"Failed to delete worktree")}catch($){h($ instanceof Error?$.message:"Failed to delete worktree")}finally{D(!1)}},F=G=>{x(G),w(null),f(!0)},U=G=>{T(G),S(!0)};return n?s.jsxs("div",{className:"flex h-full flex-col p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[s.jsx(bn,{className:"h-6 w-6"}),"Worktrees"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage isolated workspaces for your Auto Claude tasks"})]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:A,disabled:c,children:[s.jsx(Dt,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),"Refresh"]})]}),d&&s.jsx("div",{className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-destructive",children:"Error"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:d})]})]})}),c&&i.length===0&&s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx(Ie,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!c&&i.length===0&&s.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:s.jsx(bn,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Worktrees"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-md",children:"Worktrees are created automatically when Auto Claude builds features. They provide isolated workspaces for each task."})]}),i.length>0&&s.jsx(cs,{className:"flex-1 -mx-2",children:s.jsx("div",{className:"space-y-4 px-2",children:i.map(G=>{const $=P(G.specName);return s.jsxs(He,{className:"overflow-hidden",children:[s.jsx(In,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(On,{className:"text-base flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 text-info shrink-0"}),s.jsx("span",{className:"truncate",children:G.branch})]}),$&&s.jsx(Mw,{className:"mt-1 truncate",children:$.title})]}),s.jsx(je,{variant:"outline",className:"shrink-0 ml-2",children:G.specName})]})}),s.jsxs(pt,{className:"pt-0",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[s.jsx(ms,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[G.filesChanged," files changed"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[s.jsx(vs,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[G.commitCount," commits ahead"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-success",children:[s.jsx(ys,{className:"h-3.5 w-3.5"}),s.jsx("span",{children:G.additions})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-destructive",children:[s.jsx(U0,{className:"h-3.5 w-3.5"}),s.jsx("span",{children:G.deletions})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-4 bg-muted/50 rounded-md p-2",children:[s.jsx("span",{className:"font-mono",children:G.baseBranch}),s.jsx(vs,{className:"h-3 w-3"}),s.jsx("span",{className:"font-mono text-info",children:G.branch})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(te,{variant:"default",size:"sm",onClick:()=>F(G),disabled:!$,children:[s.jsx(Ko,{className:"h-3.5 w-3.5 mr-1.5"}),"Merge to ",G.baseBranch]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(G.path)},children:[s.jsx(fl,{className:"h-3.5 w-3.5 mr-1.5"}),"Copy Path"]}),s.jsxs(te,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>U(G),disabled:!$,children:[s.jsx(Br,{className:"h-3.5 w-3.5 mr-1.5"}),"Delete"]})]})]})]},G.specName)})})}),s.jsx(sn,{open:m,onOpenChange:f,children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Ko,{className:"h-5 w-5"}),"Merge Worktree"]}),s.jsx(fs,{children:"Merge changes from this worktree into the base branch."})]}),g&&!b&&s.jsx("div",{className:"py-4",children:s.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Source Branch"}),s.jsx("span",{className:"font-mono text-info",children:g.branch})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(vs,{className:"h-4 w-4 text-muted-foreground rotate-90"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Target Branch"}),s.jsx("span",{className:"font-mono",children:g.baseBranch})]}),s.jsx("div",{className:"border-t border-border pt-3 mt-3",children:s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-muted-foreground",children:"Changes"}),s.jsxs("span",{children:[g.commitCount," commits, ",g.filesChanged," files"]})]})})]})}),b&&s.jsx("div",{className:"py-4",children:s.jsx("div",{className:`rounded-lg p-4 text-sm ${b.success?"bg-success/10 border border-success/30":"bg-destructive/10 border border-destructive/30"}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[b.success?s.jsx(ts,{className:"h-4 w-4 text-success mt-0.5"}):s.jsx(Ys,{className:"h-4 w-4 text-destructive mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:`font-medium ${b.success?"text-success":"text-destructive"}`,children:b.success?"Merge Successful":"Merge Failed"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:b.message}),b.conflictFiles&&b.conflictFiles.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium",children:"Conflicting files:"}),s.jsx("ul",{className:"list-disc list-inside text-xs mt-1",children:b.conflictFiles.map(G=>s.jsx("li",{className:"font-mono",children:G},G))})]})]})]})})}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:()=>{f(!1),w(null)},children:b?"Close":"Cancel"}),!b&&s.jsx(te,{onClick:M,disabled:C,children:C?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Merge"]})})]})]})}),s.jsx(po,{open:j,onOpenChange:S,children:s.jsxs(da,{children:[s.jsxs(ha,{children:[s.jsx(ma,{children:"Delete Worktree?"}),s.jsxs(pa,{children:["This will permanently delete the worktree and all uncommitted changes.",N&&s.jsx("span",{className:"block mt-2 font-mono text-sm",children:N.branch}),"This action cannot be undone."]})]}),s.jsxs(fa,{children:[s.jsx(go,{disabled:E,children:"Cancel"}),s.jsx(pl,{onClick:B,disabled:E,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:E?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Select a project to view worktrees"})})}function Ufe({projects:e,onNewProject:t,onOpenProject:n,onSelectProject:r}){const{t:i}=rs(["welcome","common"]),o=[...e].sort((l,d)=>new Date(d.updatedAt).getTime()-new Date(l.updatedAt).getTime()).slice(0,10),c=l=>{const h=new Date().getTime()-new Date(l).getTime(),m=Math.floor(h/6e4),f=Math.floor(m/60),g=Math.floor(f/24);return m<1?i("common:time.justNow"):m<60?i("common:time.minutesAgo",{count:m}):f<24?i("common:time.hoursAgo",{count:f}):g<7?i("common:time.daysAgo",{count:g}):new Date(l).toLocaleDateString()};return s.jsx("div",{className:"flex h-full items-center justify-center p-8",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:i("welcome:hero.title")}),s.jsx("p",{className:"mt-3 text-muted-foreground",children:i("welcome:hero.subtitle")})]}),s.jsxs("div",{className:"flex gap-4 justify-center mb-10",children:[s.jsxs(te,{size:"lg",onClick:t,className:"gap-2 px-6",children:[s.jsx(UA,{className:"h-5 w-5"}),i("welcome:actions.newProject")]}),s.jsxs(te,{size:"lg",variant:"secondary",onClick:n,className:"gap-2 px-6",children:[s.jsx(fl,{className:"h-5 w-5"}),i("welcome:actions.openProject")]})]}),o.length>0&&s.jsxs(He,{className:"border border-border bg-card/50 backdrop-blur-sm",children:[s.jsx("div",{className:"p-4 pb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[s.jsx(Ci,{className:"h-4 w-4"}),i("welcome:recentProjects.title")]})}),s.jsx(En,{}),s.jsx(cs,{className:"max-h-[320px]",children:s.jsx("div",{className:"p-2",children:o.map((l,d)=>s.jsxs("button",{onClick:()=>r(l.id),className:"w-full flex items-center gap-3 rounded-lg px-3 py-3 text-left transition-colors hover:bg-accent/50 group",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-accent/20 text-accent-foreground shrink-0",children:s.jsx(Dd,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-foreground truncate",children:l.name}),l.autoBuildPath&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-success/20 text-success shrink-0",children:"Initialized"})]}),s.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:l.path})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:c(l.updatedAt)}),s.jsx(vs,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},l.id))})})]}),e.length===0&&s.jsxs(He,{className:"border border-dashed border-border bg-card/30 p-8 text-center",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-accent/20 mx-auto mb-4",children:s.jsx(Dd,{className:"h-6 w-6 text-accent-foreground"})}),s.jsx("h3",{className:"font-medium text-foreground mb-1",children:i("welcome:recentProjects.empty")}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("welcome:recentProjects.emptyDescription")})]})]})})}const $fe="https://claude.ai/upgrade";function Vfe(){const{t:e}=rs("common"),{isModalOpen:t,rateLimitInfo:n,hideRateLimitModal:r,clearPendingRateLimit:i}=zd(),{profiles:o,activeProfileId:c,isSwitching:l}=bg(),[d,h]=y.useState(null),[m,f]=y.useState(!1),[g,x]=y.useState(!1),[C,_]=y.useState(!1),[b,w]=y.useState("");y.useEffect(()=>{t&&(oo(),j(),n?.suggestedProfileId&&h(n.suggestedProfileId))},[t,n?.suggestedProfileId]),y.useEffect(()=>{t||(h(null),_(!1),w(""))},[t]);const j=async()=>{try{const G=await J.getAutoSwitchSettings();G.success&&G.data&&f(G.data.autoSwitchOnRateLimit)}catch(G){console.error("Failed to load auto-switch settings:",G)}},S=async G=>{x(!0);try{await J.updateAutoSwitchSettings({enabled:G,autoSwitchOnRateLimit:G}),f(G)}catch($){console.error("Failed to update auto-switch settings:",$)}finally{x(!1)}},N=()=>{window.open($fe,"_blank")},T=async()=>{if(b.trim()){_(!0);try{const G=b.trim(),$=G.toLowerCase().replace(/\s+/g,"-"),V=await J.saveClaudeProfile({id:`profile-${Date.now()}`,name:G,configDir:`~/.claude-profiles/${$}`,isDefault:!1,createdAt:new Date});if(V.success&&V.data){const Y=await J.initializeClaudeProfile(V.data.id);Y.success?(oo(),w(""),r(),alert(`A terminal has been opened to authenticate "${G}".

Steps to complete:
1. Check the "Agent Terminals" section in the sidebar
2. Complete the OAuth login in your browser
3. The token will be saved automatically

Once done, return here and the account will be available.`)):alert(`Failed to start authentication: ${Y.error||"Please try again."}`)}}catch(G){console.error("Failed to add profile:",G),alert("Failed to add profile. Please try again.")}finally{_(!1)}}},E=async()=>{if(!d||!n?.terminalId)return;await wte(n.terminalId,d)&&i()},D=n?.profileId||c,A=o.filter(G=>G.id!==D),P=o.length>1,M=d?o.find(G=>G.id===d):null,B=o.find(G=>G.id===D),F=n?.suggestedProfileId?o.find(G=>G.id===n.suggestedProfileId):null,U=n?.autoSwitchEnabled&&F;return s.jsx(sn,{open:t,onOpenChange:G=>!G&&r(),children:s.jsxs(Xs,{className:"sm:max-w-[520px]",children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2 text-warning",children:[s.jsx(ct,{className:"h-5 w-5"}),e("rateLimit.modalTitle")]}),s.jsxs(fs,{children:[e("rateLimit.modalDescription"),B&&!B.isDefault&&s.jsxs("span",{className:"text-muted-foreground",children:[" (",e("rateLimit.profile",{name:B.name}),")"]})]})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[U&&s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-green-500/30 bg-green-500/10 p-4",children:[s.jsx(ai,{className:"h-5 w-5 text-green-500 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:e("rateLimit.autoSwitching",{name:F?.name})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("rateLimit.autoSwitchingDescription")})]})]}),n?.resetTime&&!U&&s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/50 p-4",children:[s.jsx(Ci,{className:"h-5 w-5 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:e("rateLimit.resetsTime",{time:n.resetTime})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("rateLimit.usageRestored")})]})]}),!U&&s.jsxs("div",{className:"rounded-lg border border-accent/50 bg-accent/10 p-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[s.jsx(Ja,{className:"h-4 w-4"}),e(P?"rateLimit.switchAccount":"rateLimit.useAnotherAccount")]}),P?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:F?e("rateLimit.recommended",{name:F.name}):e("rateLimit.otherSubscriptions")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs(te,{variant:"outline",className:"flex-1 justify-between",children:[s.jsxs("span",{className:"truncate flex items-center gap-2",children:[M?.name||e("rateLimit.selectAccount"),d===n?.suggestedProfileId&&s.jsx(el,{className:"h-3 w-3 text-yellow-500"})]}),s.jsx(Gt,{className:"h-4 w-4 shrink-0 ml-2"})]})}),s.jsxs(lo,{align:"start",className:"w-[220px] bg-popover border border-border shadow-lg",children:[A.map(G=>s.jsxs(Pn,{onClick:()=>h(G.id),className:"flex items-center justify-between",children:[s.jsxs("span",{className:"truncate flex items-center gap-2",children:[G.name,G.id===n?.suggestedProfileId&&s.jsx(el,{className:"h-3 w-3 text-yellow-500","aria-label":"Recommended"})]}),d===G.id&&s.jsx(ts,{className:"h-4 w-4 shrink-0"})]},G.id)),s.jsx(Za,{}),s.jsxs(Pn,{onClick:()=>{const G=document.querySelector('input[placeholder*="Account name"]');G&&G.focus()},className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ys,{className:"h-4 w-4"}),e("rateLimit.addNewAccount")]})]})]}),s.jsx(te,{variant:"default",size:"sm",onClick:E,disabled:!d||l,className:"gap-2 shrink-0",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"h-4 w-4 animate-spin"}),e("rateLimit.switching")]}):s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"h-4 w-4"}),e("buttons.switch")]})})]}),M?.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:M.description}),A.length>0&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[s.jsx(we,{htmlFor:"auto-switch",className:"text-xs text-muted-foreground cursor-pointer",children:e("rateLimit.autoSwitchOnRateLimit")}),s.jsx(Es,{id:"auto-switch",checked:m,onCheckedChange:S,disabled:g})]})]}):s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e("rateLimit.addAnotherSubscription")}),s.jsxs("div",{className:P?"mt-4 pt-3 border-t border-border/50":"",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e(P?"rateLimit.addAnotherAccount":"rateLimit.connectAccount")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{placeholder:e("rateLimit.accountNamePlaceholder"),value:b,onChange:G=>w(G.target.value),className:"flex-1 h-8 text-sm",onKeyDown:G=>{G.key==="Enter"&&b.trim()&&T()}}),s.jsxs(te,{variant:"outline",size:"sm",onClick:T,disabled:!b.trim()||C,className:"gap-1 shrink-0",children:[C?s.jsx(Dt,{className:"h-3 w-3 animate-spin"}):s.jsx(ys,{className:"h-3 w-3"}),e("buttons.add")]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e("rateLimit.willOpenLogin")})]})]}),s.jsxs("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:e("rateLimit.upgradeTitle")}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e("rateLimit.upgradeDescription")}),s.jsxs(te,{variant:"outline",size:"sm",className:"gap-2",onClick:N,children:[s.jsx(Fs,{className:"h-4 w-4"}),e("rateLimit.upgradeSubscription")]})]})]}),s.jsx(Ts,{children:s.jsx(te,{variant:"outline",onClick:r,children:e(U?"buttons.continue":P?"buttons.close":"buttons.gotIt")})})]})})}const AA="https://claude.ai/upgrade";function Gfe(e){switch(e){case"changelog":return"Changelog Generation";case"task":return"Task Execution";case"roadmap":return"Roadmap Generation";case"ideation":return"Ideation";case"title-generator":return"Title Generation";default:return"Claude Operation"}}function qfe(e){switch(e){case"changelog":return pr;case"task":return ym;case"roadmap":return F0;case"ideation":return Ni;default:return ct}}function Wfe(){const{isSDKModalOpen:e,sdkRateLimitInfo:t,hideSDKRateLimitModal:n,clearPendingRateLimit:r}=zd(),{profiles:i,isSwitching:o,setSwitching:c}=bg(),[l,d]=y.useState(null),[h,m]=y.useState(!1),[f,g]=y.useState(!1),[x,C]=y.useState(!1),[_,b]=y.useState(!1),[w,j]=y.useState(""),[S,N]=y.useState(null);y.useEffect(()=>{e&&(oo(),T(),t?.suggestedProfile?.id&&d(t.suggestedProfile.id),t&&N({wasAutoSwapped:t.wasAutoSwapped??!1,swapReason:t.swapReason,swappedFrom:i.find(K=>K.id===t.profileId)?.name,swappedTo:t.swappedToProfile?.name}))},[e,t,i]),y.useEffect(()=>{e||(d(null),C(!1),b(!1),j(""))},[e]);const T=async()=>{try{const K=await J.getAutoSwitchSettings();K.success&&K.data&&m(K.data.autoSwitchOnRateLimit)}catch(K){console.error("Failed to load auto-switch settings:",K)}},E=async K=>{g(!0);try{await J.updateAutoSwitchSettings({enabled:K,autoSwitchOnRateLimit:K}),m(K)}catch(O){console.error("Failed to update auto-switch settings:",O)}finally{g(!1)}},D=()=>{window.open(AA,"_blank")},A=async()=>{if(w.trim()){b(!0);try{const K=w.trim(),O=K.toLowerCase().replace(/\s+/g,"-"),L=await J.saveClaudeProfile({id:`profile-${Date.now()}`,name:K,configDir:`~/.claude-profiles/${O}`,isDefault:!1,createdAt:new Date});if(L.success&&L.data){const I=await J.initializeClaudeProfile(L.data.id);I.success?(oo(),j(""),n(),alert(`A terminal has been opened to authenticate "${K}".

Steps to complete:
1. Check the "Agent Terminals" section in the sidebar
2. Complete the OAuth login in your browser
3. The token will be saved automatically

Once done, return here and the account will be available.`)):alert(`Failed to start authentication: ${I.error||"Please try again."}`)}}catch(K){console.error("Failed to add profile:",K),alert("Failed to add profile. Please try again.")}finally{b(!1)}}},P=async()=>{if(!(!l||!t?.projectId)){C(!0),c(!0);try{await J.setActiveClaudeProfile(l),(await J.retryWithProfile({source:t.source,projectId:t.projectId,taskId:t.taskId,profileId:l})).success&&r()}catch(K){console.error("Failed to retry with profile:",K)}finally{C(!1),c(!1)}}};if(!t)return null;const M=t.profileId,B=i.filter(K=>K.id!==M),F=i.length>1,U=l?i.find(K=>K.id===l):null,G=i.find(K=>K.id===M),$=t.suggestedProfile?i.find(K=>K.id===t.suggestedProfile?.id):null,V=qfe(t.source),Y=Gfe(t.source);return s.jsx(sn,{open:e,onOpenChange:K=>!K&&n(),children:s.jsxs(Xs,{className:"sm:max-w-[520px]",children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2 text-warning",children:[s.jsx(ct,{className:"h-5 w-5"}),"Claude Code Rate Limit"]}),s.jsxs(fs,{className:"flex items-center gap-2",children:[s.jsx(V,{className:"h-4 w-4"}),Y," was interrupted due to usage limits.",G&&s.jsxs("span",{className:"text-muted-foreground",children:[" (Profile: ",G.name,")"]})]})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsx("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:S?.wasAutoSwapped?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium mb-1",children:S.swapReason==="proactive"?" Proactive Swap":" Reactive Swap"}),s.jsx("p",{children:S.swapReason==="proactive"?`Automatically switched from ${S.swappedFrom} to ${S.swappedTo} before hitting rate limit.`:`Rate limit hit on ${S.swappedFrom}. Automatically switched to ${S.swappedTo} and restarted.`}),s.jsx("p",{className:"mt-2 text-[10px]",children:"Your work continued without interruption."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium mb-1",children:"Rate limit reached"}),s.jsxs("p",{children:["The operation was stopped because ",G?.name||"your account"," reached its usage limit.",F?" Switch to another account below to continue.":" Add another Claude account to continue working."]})]})}),s.jsxs(te,{variant:"default",size:"sm",className:"gap-2 w-full",onClick:()=>window.open(AA,"_blank"),children:[s.jsx(ai,{className:"h-4 w-4"}),"Upgrade to Pro for Higher Limits"]}),t.resetTime&&s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/50 p-4",children:[s.jsx(Ci,{className:"h-5 w-5 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:["Resets ",t.resetTime]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.limitType==="weekly"?"Weekly limit - resets in about a week":"Session limit - resets in a few hours"})]})]}),s.jsxs("div",{className:"rounded-lg border border-accent/50 bg-accent/10 p-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[s.jsx(Ja,{className:"h-4 w-4"}),F?"Switch Account & Retry":"Use Another Account"]}),F?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:$?s.jsxs(s.Fragment,{children:["Recommended: ",s.jsx("strong",{children:$.name})," has more capacity available."]}):"Switch to another Claude account and retry the operation:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ll,{children:[s.jsx(cl,{asChild:!0,children:s.jsxs(te,{variant:"outline",className:"flex-1 justify-between",children:[s.jsxs("span",{className:"truncate flex items-center gap-2",children:[U?.name||"Select account...",l===t.suggestedProfile?.id&&s.jsx(el,{className:"h-3 w-3 text-yellow-500"})]}),s.jsx(Gt,{className:"h-4 w-4 shrink-0 ml-2"})]})}),s.jsxs(lo,{align:"start",className:"w-[220px] bg-popover border border-border shadow-lg",children:[B.map(K=>s.jsxs(Pn,{onClick:()=>d(K.id),className:"flex items-center justify-between",children:[s.jsxs("span",{className:"truncate flex items-center gap-2",children:[K.name,K.id===t.suggestedProfile?.id&&s.jsx(el,{className:"h-3 w-3 text-yellow-500","aria-label":"Recommended"})]}),l===K.id&&s.jsx(ts,{className:"h-4 w-4 shrink-0"})]},K.id)),s.jsx(Za,{}),s.jsxs(Pn,{onClick:()=>{const K=document.querySelector('input[placeholder*="Account name"]');K&&K.focus()},className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ys,{className:"h-4 w-4"}),"Add new account..."]})]})]}),s.jsx(te,{variant:"default",size:"sm",onClick:P,disabled:!l||x||o,className:"gap-2 shrink-0",children:x||o?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"h-4 w-4 animate-spin"}),"Retrying..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"h-4 w-4"}),"Retry"]})})]}),U?.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:U.description}),B.length>0&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[s.jsx(we,{htmlFor:"sdk-auto-switch",className:"text-xs text-muted-foreground cursor-pointer",children:"Auto-switch & retry on rate limit"}),s.jsx(Es,{id:"sdk-auto-switch",checked:h,onCheckedChange:E,disabled:f})]})]}):s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add another Claude subscription to automatically switch when you hit rate limits."}),s.jsxs("div",{className:F?"mt-4 pt-3 border-t border-border/50":"",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:F?"Add another account:":"Connect a Claude account:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{placeholder:"Account name (e.g., Work, Personal)",value:w,onChange:K=>j(K.target.value),className:"flex-1 h-8 text-sm",onKeyDown:K=>{K.key==="Enter"&&w.trim()&&A()}}),s.jsxs(te,{variant:"outline",size:"sm",onClick:A,disabled:!w.trim()||_,className:"gap-1 shrink-0",children:[_?s.jsx(Dt,{className:"h-3 w-3 animate-spin"}):s.jsx(ys,{className:"h-3 w-3"}),"Add"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This will open Claude login to authenticate the new account."})]})]}),s.jsxs("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Upgrade for more usage"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Upgrade your Claude subscription for higher usage limits."}),s.jsxs(te,{variant:"outline",size:"sm",className:"gap-2",onClick:D,children:[s.jsx(Fs,{className:"h-4 w-4"}),"Upgrade Subscription"]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[s.jsx("p",{className:"font-medium mb-1",children:"What happened:"}),s.jsxs("p",{children:["The ",Y.toLowerCase()," operation was stopped because your Claude account (",G?.name||"Default",") reached its usage limit.",F?" You can switch to another account and retry, or add more accounts above.":" Add another Claude account above to continue working, or wait for the limit to reset."]})]})]}),s.jsx(Ts,{children:s.jsx(te,{variant:"outline",onClick:n,children:"Close"})})]})})}function Kfe(){const[e,t]=y.useState("");return y.useEffect(()=>{fetch("/api/version").then(n=>n.json()).then(n=>{n.success&&n.data?.commit&&t(n.data.commit)}).catch(()=>{})},[]),e?s.jsx("div",{style:{position:"fixed",bottom:"8px",right:"8px",zIndex:9999,background:"rgba(0, 0, 0, 0.7)",color:"#fff",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontFamily:"monospace",pointerEvents:"none",userSelect:"none"},children:e}):null}function Yfe({currentStep:e,steps:t}){return s.jsx("div",{className:"flex items-center justify-center",children:t.map((n,r)=>{const i=n.completed,o=r===e,c=r>e;return s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:le("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold transition-all duration-200",i&&"border-primary bg-primary text-primary-foreground",o&&!i&&"border-primary bg-background text-primary",c&&"border-muted-foreground/40 bg-background text-muted-foreground"),children:i?s.jsx(ts,{className:"h-5 w-5"}):s.jsx("span",{children:r+1})}),s.jsx("span",{className:le("mt-2 text-xs font-medium text-center max-w-[80px] truncate",i&&"text-primary",o&&!i&&"text-primary",c&&"text-muted-foreground"),children:n.label})]}),r<t.length-1&&s.jsx("div",{className:le("mx-2 h-0.5 w-12 transition-colors duration-200",n.completed?"bg-primary":"bg-muted-foreground/40")})]},n.id)})})}function Xfe({icon:e,title:t,description:n}){return s.jsx(He,{className:"border border-border bg-card/50 backdrop-blur-sm",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:t}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]})})})}function Zfe({onGetStarted:e,onSkip:t}){const{t:n}=rs("onboarding"),r=[{icon:s.jsx(us,{className:"h-5 w-5"}),title:n("welcome.features.aiPowered.title"),description:n("welcome.features.aiPowered.description")},{icon:s.jsx(ms,{className:"h-5 w-5"}),title:n("welcome.features.specDriven.title"),description:n("welcome.features.specDriven.description")},{icon:s.jsx(oa,{className:"h-5 w-5"}),title:n("welcome.features.memory.title"),description:n("welcome.features.memory.description")},{icon:s.jsx(ai,{className:"h-5 w-5"}),title:n("welcome.features.parallel.title"),description:n("welcome.features.parallel.description")}];return s.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:n("welcome.title")}),s.jsx("p",{className:"mt-3 text-muted-foreground text-lg",children:n("welcome.subtitle")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-10",children:r.map((i,o)=>s.jsx(Xfe,{icon:i.icon,title:i.title,description:i.description},o))}),s.jsx("div",{className:"text-center mb-8",children:s.jsx("p",{className:"text-muted-foreground",children:n("wizard.helpText")})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(te,{size:"lg",onClick:e,className:"gap-2 px-8",children:[s.jsx(us,{className:"h-5 w-5"}),n("welcome.getStarted")]}),s.jsx(te,{size:"lg",variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:n("welcome.skip")})]})]})})}function Qfe({onNext:e,onBack:t,onSkip:n}){const[r,i]=y.useState([]),[o,c]=y.useState(null),[l,d]=y.useState(!0),[h,m]=y.useState(""),[f,g]=y.useState(!1),[x,C]=y.useState(null),[_,b]=y.useState(null),[w,j]=y.useState(""),[S,N]=y.useState(null),[T,E]=y.useState(null),[D,A]=y.useState(""),[P,M]=y.useState(""),[B,F]=y.useState(!1),[U,G]=y.useState(null),[$,V]=y.useState(null),Y=r.some(Q=>Q.oauthToken),K=async()=>{d(!0),V(null);try{const Q=await J.getClaudeProfiles();Q.success&&Q.data&&(i(Q.data.profiles),c(Q.data.activeProfileId),await oo())}catch(Q){V(Q instanceof Error?Q.message:"Failed to load profiles")}finally{d(!1)}};y.useEffect(()=>{K()},[]),y.useEffect(()=>J.onTerminalOAuthToken(async se=>{se.success&&se.profileId&&(await K(),alert(` Profile authenticated successfully!

${se.email?`Account: ${se.email}`:"Authentication complete."}

You can now use this profile.`))}),[]);const O=async()=>{if(h.trim()){g(!0),V(null);try{const Q=h.trim(),se=Q.toLowerCase().replace(/\s+/g,"-"),he=await J.saveClaudeProfile({id:`profile-${Date.now()}`,name:Q,configDir:`~/.claude-profiles/${se}`,isDefault:!1,createdAt:new Date});if(he.success&&he.data){const de=he.data.id,Ne=await J.initializeClaudeProfile(de);console.log("[OAuthStep] initializeClaudeProfile response:",Ne),Ne.success?(await K(),m(""),Ne.data?.requiresManualToken?E(de):(console.log("[OAuthStep] requiresManualToken NOT detected, showing alert. Data:",Ne.data),alert(`Authenticating "${Q}"...

A browser window will open for you to log in with your Claude account.

The authentication will be saved automatically once complete.`))):(await K(),V(Ne.error||"Failed to start authentication"))}}catch(Q){V(Q instanceof Error?Q.message:"Failed to add profile")}finally{g(!1)}}},L=async Q=>{C(Q),V(null);try{(await J.deleteClaudeProfile(Q)).success&&await K()}catch(se){V(se instanceof Error?se.message:"Failed to delete profile")}finally{C(null)}},I=Q=>{b(Q.id),j(Q.name)},q=()=>{b(null),j("")},z=async()=>{if(!(!_||!w.trim())){V(null);try{(await J.renameClaudeProfile(_,w.trim())).success&&await K()}catch(Q){V(Q instanceof Error?Q.message:"Failed to rename profile")}finally{b(null),j("")}}},ee=async Q=>{V(null);try{(await J.setActiveClaudeProfile(Q)).success&&(c(Q),await oo())}catch(se){V(se instanceof Error?se.message:"Failed to set active profile")}},ie=async Q=>{N(Q),V(null);try{const se=await J.initializeClaudeProfile(Q);se.success?se.data?.requiresManualToken?E(Q):alert(`Authenticating profile...

A browser window will open for you to log in with your Claude account.

The authentication will be saved automatically once complete.`):V(se.error||"Failed to start authentication")}catch(se){V(se instanceof Error?se.message:"Failed to authenticate profile")}finally{N(null)}},re=Q=>{T===Q?(E(null),A(""),M(""),F(!1)):(E(Q),A(""),M(""),F(!1))},X=async Q=>{if(D.trim()){G(Q),V(null);try{const se=await J.setClaudeProfileToken(Q,D.trim(),P.trim()||void 0);se.success?(await K(),E(null),A(""),M(""),F(!1)):alert(`Failed to save token: ${se.error||"Please try again."}`)}catch(se){V(se instanceof Error?se.message:"Failed to save token"),alert("Failed to save token. Please try again.")}finally{G(null)}}},W=()=>{e()};return s.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:s.jsx(wi,{className:"h-7 w-7"})})}),s.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:"Configure Claude Authentication"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Add your Claude accounts to enable AI features"})]}),l&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Ie,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!l&&s.jsxs("div",{className:"space-y-6",children:[$&&s.jsx(He,{className:"border border-destructive/30 bg-destructive/10",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:$})]})})}),s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(sa,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add multiple Claude subscriptions to automatically switch between them when you hit rate limits."})})]})})}),s.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4",children:[r.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-border p-4 text-center mb-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No accounts configured yet"})}):s.jsx("div",{className:"space-y-2 mb-4",children:r.map(Q=>s.jsxs("div",{className:le("rounded-lg border transition-colors",Q.id===o?"border-primary bg-primary/5":"border-border bg-background"),children:[s.jsxs("div",{className:le("flex items-center justify-between p-3",T!==Q.id&&"hover:bg-muted/50"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:le("h-7 w-7 rounded-full flex items-center justify-center text-xs font-medium shrink-0",Q.id===o?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(_===Q.id?w:Q.name).charAt(0).toUpperCase()}),s.jsx("div",{className:"min-w-0",children:_===Q.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{value:w,onChange:se=>j(se.target.value),className:"h-7 text-sm w-40",autoFocus:!0,onKeyDown:se=>{se.key==="Enter"&&z(),se.key==="Escape"&&q()}}),s.jsx(te,{variant:"ghost",size:"icon",onClick:z,className:"h-7 w-7 text-success hover:text-success hover:bg-success/10",children:s.jsx(ts,{className:"h-3 w-3"})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:q,className:"h-7 w-7 text-muted-foreground hover:text-foreground",children:s.jsx(Ys,{className:"h-3 w-3"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:Q.name}),Q.isDefault&&s.jsx("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:"Default"}),Q.id===o&&s.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(el,{className:"h-3 w-3"}),"Active"]}),Q.oauthToken?s.jsxs("span",{className:"text-xs bg-success/20 text-success px-1.5 py-0.5 rounded flex items-center gap-1",children:[s.jsx(ts,{className:"h-3 w-3"}),"Authenticated"]}):s.jsx("span",{className:"text-xs bg-warning/20 text-warning px-1.5 py-0.5 rounded",children:"Needs Auth"})]}),Q.email&&s.jsx("span",{className:"text-xs text-muted-foreground",children:Q.email})]})})]}),_!==Q.id&&s.jsxs("div",{className:"flex items-center gap-1",children:[!Q.oauthToken&&s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>ie(Q.id),disabled:S===Q.id,className:"gap-1 h-7 text-xs",children:[S===Q.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(z0,{className:"h-3 w-3"}),"Authenticate"]}),Q.id!==o&&s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>ee(Q.id),className:"gap-1 h-7 text-xs",children:[s.jsx(ts,{className:"h-3 w-3"}),"Set Active"]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>re(Q.id),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:T===Q.id?"Hide token entry":"Enter token manually",children:T===Q.id?s.jsx(Gt,{className:"h-3 w-3"}):s.jsx(vs,{className:"h-3 w-3"})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>I(Q),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Rename profile",children:s.jsx(ml,{className:"h-3 w-3"})}),!Q.isDefault&&s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>L(Q.id),disabled:x===Q.id,className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-destructive/10",title:"Delete profile",children:x===Q.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(Br,{className:"h-3 w-3"})})]})]}),T===Q.id&&s.jsx("div",{className:"px-3 pb-3 pt-0 border-t border-border/50 mt-0",children:s.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mt-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(we,{className:"text-xs font-medium text-muted-foreground",children:"Manual Token Entry"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Run ",s.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono text-xs",children:"claude setup-token"})," to get your token"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Je,{type:B?"text":"password",placeholder:"sk-ant-oat01-...",value:D,onChange:se=>A(se.target.value),className:"pr-10 font-mono text-xs h-8"}),s.jsx("button",{type:"button",onClick:()=>F(!B),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:B?s.jsx(Ln,{className:"h-3 w-3"}):s.jsx(zs,{className:"h-3 w-3"})})]}),s.jsx(Je,{type:"email",placeholder:"Email (optional, for display)",value:P,onChange:se=>M(se.target.value),className:"text-xs h-8"})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>re(Q.id),className:"h-7 text-xs",children:"Cancel"}),s.jsxs(te,{size:"sm",onClick:()=>X(Q.id),disabled:!D.trim()||U===Q.id,className:"h-7 text-xs gap-1",children:[U===Q.id?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(ts,{className:"h-3 w-3"}),"Save Token"]})]})]})})]},Q.id))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{placeholder:"Account name (e.g., Work, Personal)",value:h,onChange:Q=>m(Q.target.value),className:"flex-1 h-8 text-sm",onKeyDown:Q=>{Q.key==="Enter"&&h.trim()&&O()}}),s.jsxs(te,{onClick:O,disabled:!h.trim()||f,size:"sm",className:"gap-1 shrink-0",children:[f?s.jsx(Ie,{className:"h-3 w-3 animate-spin"}):s.jsx(ys,{className:"h-3 w-3"}),"Add"]})]})]}),Y&&s.jsx(He,{className:"border border-success/30 bg-success/10",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-success shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-success",children:"You have at least one authenticated Claude account. You can continue to the next step."})]})})})]}),s.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[s.jsx(te,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:"Back"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(te,{variant:"ghost",onClick:n,className:"text-muted-foreground hover:text-foreground",children:"Skip"}),s.jsx(te,{onClick:W,disabled:!Y,children:"Continue"})]})]})]})})}const Jfe=[{id:"ollama",name:"Ollama (Local)",description:"Free, local embeddings",requiresApiKey:!1},{id:"openai",name:"OpenAI",description:"text-embedding-3-small",requiresApiKey:!0},{id:"voyage",name:"Voyage AI",description:"voyage-3 (high quality)",requiresApiKey:!0},{id:"google",name:"Google AI",description:"text-embedding-004",requiresApiKey:!0},{id:"azure_openai",name:"Azure OpenAI",description:"Enterprise deployment",requiresApiKey:!0}];function eme({onNext:e,onBack:t}){const{settings:n,updateSettings:r}=dn(),[i,o]=y.useState({database:"auto_claude_memory",embeddingProvider:"ollama",openaiApiKey:n.globalOpenAIApiKey||"",azureOpenaiApiKey:"",azureOpenaiBaseUrl:"",azureOpenaiEmbeddingDeployment:"",voyageApiKey:"",googleApiKey:n.globalGoogleApiKey||"",ollamaBaseUrl:n.ollamaBaseUrl||"http://localhost:11434",ollamaEmbeddingModel:"embeddinggemma",ollamaEmbeddingDim:768}),[c,l]=y.useState({}),[d,h]=y.useState(!1),[m,f]=y.useState(null),[g,x]=y.useState(!0),[C,_]=y.useState(null);y.useEffect(()=>{(async()=>{x(!0);try{const D=await J.getMemoryInfrastructureStatus();_(!!(D?.success&&D?.data?.memory?.kuzuInstalled))}catch{_(!1)}finally{x(!1)}})()},[]);const b=E=>{l(D=>({...D,[E]:!D[E]}))},w=()=>{const{embeddingProvider:E}=i;return E==="ollama"?!!i.ollamaEmbeddingModel.trim():!(E==="openai"&&!i.openaiApiKey.trim()||E==="voyage"&&!i.voyageApiKey.trim()||E==="google"&&!i.googleApiKey.trim()||E==="azure_openai"&&(!i.azureOpenaiApiKey.trim()||!i.azureOpenaiBaseUrl.trim()||!i.azureOpenaiEmbeddingDeployment.trim()))},j=async()=>{h(!0),f(null),console.log("[MemoryStep.handleSave] About to call api.saveSettings, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasSaveSettings:typeof J?.saveSettings,api:J,windowAPI:window.__claudeAPI});try{const E={};i.openaiApiKey.trim()&&(E.globalOpenAIApiKey=i.openaiApiKey.trim()),i.googleApiKey.trim()&&(E.globalGoogleApiKey=i.googleApiKey.trim()),i.ollamaBaseUrl.trim()&&(E.ollamaBaseUrl=i.ollamaBaseUrl.trim()),console.log("[MemoryStep.handleSave] Calling api.saveSettings with:",E);const D=await J.saveSettings(E);if(console.log("[MemoryStep.handleSave] api.saveSettings returned:",D),D?.success){const A={};i.openaiApiKey.trim()&&(A.globalOpenAIApiKey=i.openaiApiKey.trim()),i.googleApiKey.trim()&&(A.globalGoogleApiKey=i.googleApiKey.trim()),i.ollamaBaseUrl.trim()&&(A.ollamaBaseUrl=i.ollamaBaseUrl.trim()),r(A),e()}else f(D?.error||"Failed to save memory configuration")}catch(E){f(E instanceof Error?E.message:"Unknown error occurred")}finally{h(!1)}},S=()=>{j()},N=(E,D)=>{o(A=>({...A,ollamaEmbeddingModel:E,ollamaEmbeddingDim:D}))},T=()=>{const{embeddingProvider:E}=i;return E==="ollama"?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Select Embedding Model"}),s.jsx(cM,{selectedModel:i.ollamaEmbeddingModel,onModelSelect:N,disabled:d})]})}):E==="openai"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"openai-key",className:"text-sm font-medium text-foreground",children:"OpenAI API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{id:"openai-key",type:c.openai?"text":"password",value:i.openaiApiKey,onChange:D=>o(A=>({...A,openaiApiKey:D.target.value})),placeholder:"sk-...",className:"pr-10 font-mono text-sm",disabled:d}),s.jsx("button",{type:"button",onClick:()=>b("openai"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c.openai?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"OpenAI"})]})]}):E==="voyage"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"voyage-key",className:"text-sm font-medium text-foreground",children:"Voyage API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{id:"voyage-key",type:c.voyage?"text":"password",value:i.voyageApiKey,onChange:D=>o(A=>({...A,voyageApiKey:D.target.value})),placeholder:"pa-...",className:"pr-10 font-mono text-sm",disabled:d}),s.jsx("button",{type:"button",onClick:()=>b("voyage"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c.voyage?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://dash.voyageai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Voyage AI"})]})]}):E==="google"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"google-key",className:"text-sm font-medium text-foreground",children:"Google API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{id:"google-key",type:c.google?"text":"password",value:i.googleApiKey,onChange:D=>o(A=>({...A,googleApiKey:D.target.value})),placeholder:"AIza...",className:"pr-10 font-mono text-sm",disabled:d}),s.jsx("button",{type:"button",onClick:()=>b("google"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c.google?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",s.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Google AI Studio"})]})]}):E==="azure_openai"?s.jsxs("div",{className:"space-y-3 p-3 rounded-md bg-muted/50",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Azure OpenAI Settings"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"azure-key",className:"text-xs text-muted-foreground",children:"API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{id:"azure-key",type:c.azure?"text":"password",value:i.azureOpenaiApiKey,onChange:D=>o(A=>({...A,azureOpenaiApiKey:D.target.value})),placeholder:"Azure API key",className:"pr-10 font-mono text-sm",disabled:d}),s.jsx("button",{type:"button",onClick:()=>b("azure"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c.azure?s.jsx(Ln,{className:"h-4 w-4"}):s.jsx(zs,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"azure-url",className:"text-xs text-muted-foreground",children:"Base URL"}),s.jsx(Je,{id:"azure-url",type:"text",value:i.azureOpenaiBaseUrl,onChange:D=>o(A=>({...A,azureOpenaiBaseUrl:D.target.value})),placeholder:"https://your-resource.openai.azure.com",className:"font-mono text-sm",disabled:d})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"azure-embedding-deployment",className:"text-xs text-muted-foreground",children:"Embedding Deployment Name"}),s.jsx(Je,{id:"azure-embedding-deployment",type:"text",value:i.azureOpenaiEmbeddingDeployment,onChange:D=>o(A=>({...A,azureOpenaiEmbeddingDeployment:D.target.value})),placeholder:"text-embedding-ada-002",className:"font-mono text-sm",disabled:d})]})]}):null};return s.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:s.jsx(oa,{className:"h-7 w-7"})})}),s.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:"Memory"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Auto Claude Memory helps remember context across your coding sessions"})]}),g&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Ie,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!g&&s.jsxs("div",{className:"space-y-6",children:[m&&s.jsx(He,{className:"border border-destructive/30 bg-destructive/10",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive whitespace-pre-line",children:m})]})})}),C===!1&&s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(sa,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-info",children:"Database will be created automatically"}),s.jsx("p",{className:"text-sm text-info/80 mt-1",children:"Memory uses an embedded database - no Docker required. It will be created when you first use memory features."})]})]})})}),s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(sa,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"What does Memory do?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Memory stores discoveries, patterns, and insights about your codebase so future sessions start with context already loaded."}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5 list-disc list-inside",children:[s.jsx("li",{children:"Remembers patterns across sessions"}),s.jsx("li",{children:"Understands your codebase over time"}),s.jsx("li",{children:"Works offline - no cloud required"})]})]})]})})}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/50",children:[s.jsx(hl,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Memory Database"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Stored in ~/.auto-claude/memories/"})]}),C&&s.jsx(rt,{className:"h-4 w-4 text-success ml-auto"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{className:"text-sm font-medium text-foreground",children:"Embedding Provider (for semantic search)"}),s.jsxs(gt,{value:i.embeddingProvider,onValueChange:E=>{o(D=>({...D,embeddingProvider:E}))},disabled:d,children:[s.jsx(ft,{children:s.jsx(xt,{})}),s.jsx(mt,{children:Jfe.map(E=>s.jsx(Qe,{value:E.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:E.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:E.description})]})},E.id))})]})]}),T()]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"No embedding provider? Memory still works with keyword search. Semantic search is an upgrade."})]}),s.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[s.jsx(te,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:"Back"}),s.jsx(te,{onClick:S,disabled:g||!w()||d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin mr-2"}),"Saving..."]}):"Save & Continue"})]})]})})}function tme({onNext:e,onBack:t}){const{t:n}=rs("onboarding"),[r,i]=y.useState(""),[o,c]=y.useState(""),[l,d]=y.useState(null),[h,m]=y.useState(!1),[f,g]=y.useState(!1),[x,C]=y.useState(null),[_,b]=y.useState(!1),[w,j]=y.useState(!1),[S,N]=y.useState("idle"),[T,E]=y.useState(null),D=async()=>{if(!o.trim()){C("Please enter your email first");return}m(!0),C(null);try{const B=await fetch("/api/settings/ssh/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim()})}).then(F=>F.json());B.success?d(B.data):C(B.error||"Failed to generate SSH key")}catch(B){C(B instanceof Error?B.message:"Failed to generate SSH key")}finally{m(!1)}},A=async()=>{if(l)try{await navigator.clipboard.writeText(l.publicKey),b(!0),setTimeout(()=>b(!1),2e3)}catch{C("Failed to copy to clipboard")}},P=async()=>{j(!0),N("idle"),C(null);try{const B=await fetch("/api/settings/ssh/test-github",{method:"POST",headers:{"Content-Type":"application/json"}}).then(F=>F.json());N(B.success?"success":"failed"),B.success&&B.data?.username&&E(B.data.username),!B.success&&B.data?.message&&C(B.data.message)}catch{N("failed"),C("Failed to test connection")}finally{j(!1)}},M=async()=>{if(!r.trim()||!o.trim()){C("Please fill in all fields");return}g(!0),C(null);try{const B=await fetch("/api/settings/git/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:r.trim(),userEmail:o.trim()})}).then(F=>F.json());if(!B.success){C(B.error||"Failed to save git configuration");return}T&&await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({githubUsername:T})}),e()}catch(B){C(B instanceof Error?B.message:"Failed to save configuration")}finally{g(!1)}};return s.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:s.jsx(bn,{className:"h-8 w-8 text-primary"})})}),s.jsx("h2",{className:"text-2xl font-bold",children:"Git Configuration"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure your git identity and SSH key for repository operations"})]}),s.jsxs("div",{className:"space-y-4 bg-card border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Git Identity"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This information will be used for git commits and repository operations."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(we,{htmlFor:"git-name",children:"Full Name"}),s.jsx(Je,{id:"git-name",placeholder:"John Doe",value:r,onChange:B=>i(B.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(we,{htmlFor:"git-email",children:"Email Address"}),s.jsx(Je,{id:"git-email",type:"email",placeholder:"john@example.com",value:o,onChange:B=>c(B.target.value),className:"mt-1"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use the same email as your GitHub account"})]})]})]}),s.jsxs("div",{className:"space-y-4 bg-card border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"SSH Key"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate an SSH key to authenticate with GitHub and other git services."}),l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(we,{children:"Public Key"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("textarea",{readOnly:!0,value:l.publicKey,className:"w-full h-24 px-3 py-2 text-xs font-mono bg-muted border rounded resize-none"}),s.jsx(te,{size:"sm",variant:"ghost",className:"absolute top-2 right-2",onClick:A,children:_?s.jsx(rt,{className:"h-4 w-4 text-success"}):s.jsx(Ac,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Fingerprint: ",l.fingerprint]})]}),s.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Next Steps:"}),s.jsxs("ol",{className:"text-sm space-y-1 ml-4 list-decimal",children:[s.jsx("li",{children:"Copy the public key above"}),s.jsxs("li",{children:["Go to"," ",s.jsx("a",{href:"https://github.com/settings/ssh/new",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"GitHub SSH Settings"})]}),s.jsx("li",{children:"Paste the key and save"}),s.jsx("li",{children:"Test the connection below"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",onClick:P,disabled:w,className:"flex-1",children:w?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test GitHub Connection"}),S==="success"&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-success/10 text-success rounded",children:[s.jsx(rt,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-sm font-medium",children:["Connected",T&&` as ${T}`]})]}),S==="failed"&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-destructive/10 text-destructive rounded",children:[s.jsx(uo,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Failed"})]})]})]}):s.jsx(te,{onClick:D,disabled:!o.trim()||h,className:"w-full",children:h?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate SSH Key"})]}),x&&s.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-sm text-destructive",children:x}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(te,{variant:"outline",onClick:t,disabled:f,className:"flex-1",children:"Back"}),s.jsx(te,{onClick:M,disabled:!r.trim()||!o.trim()||f,className:"flex-1",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save and Continue"})]}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"You can skip SSH key generation and add it later in settings, but it's required for cloning private repositories and pushing changes."})]})}function sme({icon:e,title:t,description:n,action:r,actionLabel:i}){return s.jsx(He,{className:"border border-border bg-card/50 backdrop-blur-sm",children:s.jsx(pt,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-foreground",children:t}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n}),r&&i&&s.jsxs(te,{variant:"link",size:"sm",onClick:r,className:"mt-2 h-auto p-0 text-primary hover:text-primary/80",children:[i,s.jsx(L0,{className:"ml-1 h-3 w-3"})]})]})]})})})}function nme({onFinish:e,onOpenTaskCreator:t,onOpenSettings:n}){const{t:r}=rs("onboarding"),i=[{icon:s.jsx(pr,{className:"h-5 w-5"}),title:r("completion.createTask.title"),description:r("completion.createTask.description"),action:t,actionLabel:r("completion.createTask.action")},{icon:s.jsx(kp,{className:"h-5 w-5"}),title:r("completion.customizeSettings.title"),description:r("completion.customizeSettings.description"),action:n,actionLabel:r("completion.customizeSettings.action")},{icon:s.jsx(rh,{className:"h-5 w-5"}),title:r("completion.exploreDocs.title"),description:r("completion.exploreDocs.description")}];return s.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-success/20 text-success",children:s.jsx(rt,{className:"h-10 w-10"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground",children:s.jsx(sy,{className:"h-4 w-4"})})]})}),s.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:r("completion.title")}),s.jsx("p",{className:"mt-3 text-muted-foreground text-lg",children:r("completion.subtitle")})]}),s.jsx(He,{className:"border border-success/30 bg-success/10 mb-8",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(rt,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-success",children:r("completion.setupComplete")}),s.jsx("p",{className:"mt-1 text-sm text-success/80",children:r("completion.setupCompleteDescription")})]})]})})}),s.jsxs("div",{className:"space-y-4 mb-10",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[s.jsx(sy,{className:"h-4 w-4"}),r("completion.whatsNext")]}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:i.map((o,c)=>s.jsx(sme,{icon:o.icon,title:o.title,description:o.description,action:o.action,actionLabel:o.actionLabel},c))})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs(te,{size:"lg",onClick:e,className:"gap-2 px-10",children:[s.jsx(sy,{className:"h-5 w-5"}),r("completion.finish")]}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:r("completion.rerunHint")})]})]})})}const vb=[{id:"welcome",labelKey:"steps.welcome"},{id:"oauth",labelKey:"steps.auth"},{id:"memory",labelKey:"steps.memory"},{id:"git",labelKey:"steps.git"},{id:"completion",labelKey:"steps.done"}];function rme({open:e,onOpenChange:t,onOpenTaskCreator:n,onOpenSettings:r}){const{t:i}=rs("onboarding"),{updateSettings:o}=dn(),[c,l]=y.useState(0),[d,h]=y.useState(new Set),m=vb[c].id,f=vb.map((T,E)=>({id:T.id,label:i(T.labelKey),completed:d.has(T.id)||E<c})),g=y.useCallback(()=>{h(T=>new Set(T).add(m)),c<vb.length-1&&l(T=>T+1)},[c,m]),x=y.useCallback(()=>{c>0&&l(T=>T-1)},[c]),C=y.useCallback(()=>{l(0),h(new Set)},[]),_=y.useCallback(async()=>{try{const T=await J.saveSettings({onboardingCompleted:!0});T?.success||console.error("Failed to save onboarding completion:",T?.error)}catch(T){console.error("Error saving onboarding completion:",T)}o({onboardingCompleted:!0}),t(!1),C()},[o,t,C]),b=y.useCallback(async()=>{console.log("[finishWizard] About to call api.saveSettings, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasSaveSettings:typeof J?.saveSettings,api:J,windowAPI:window.__claudeAPI});try{const T=await J.saveSettings({onboardingCompleted:!0});T?.success||console.error("Failed to save onboarding completion:",T?.error)}catch(T){console.error("Error saving onboarding completion:",T)}o({onboardingCompleted:!0}),t(!1),C()},[o,t,C]),w=y.useCallback(()=>{n&&(t(!1),n())},[n,t]),j=y.useCallback(()=>{r&&(b(),r())},[r,b]),S=()=>{switch(m){case"welcome":return s.jsx(Zfe,{onGetStarted:g,onSkip:_});case"oauth":return s.jsx(Qfe,{onNext:g,onBack:x,onSkip:_});case"memory":return s.jsx(eme,{onNext:g,onBack:x});case"git":return s.jsx(tme,{onNext:g,onBack:x});case"completion":return s.jsx(nme,{onFinish:b,onOpenTaskCreator:w,onOpenSettings:j});default:return null}},N=y.useCallback(T=>{T?t(T):_()},[_,t]);return s.jsx(eM,{open:e,onOpenChange:N,children:s.jsxs(NS,{children:[s.jsxs(kS,{children:[s.jsxs(AS,{className:"flex items-center gap-3",children:[s.jsx(p7,{className:"h-6 w-6"}),i("wizard.title")]}),s.jsx(TS,{children:i("wizard.description")}),m!=="welcome"&&m!=="completion"&&s.jsx("div",{className:"mt-6",children:s.jsx(Yfe,{currentStep:c,steps:f})})]}),s.jsx(ES,{children:s.jsx(cs,{className:"h-full",children:S()})})]})})}function ime({onSuccess:e,onCancel:t}){const[n,r]=y.useState("ready"),[i,o]=y.useState(null),[c,l]=y.useState(),d=y.useRef(!1),h=y.useRef(null);y.useEffect(()=>{h.current&&(clearTimeout(h.current),h.current=null);const g=J.onTerminalOAuthToken(x=>{console.warn("[ClaudeOAuth] Token event received:",{success:x.success,hasEmail:!!x.email,profileId:x.profileId}),x.success?(l(x.email),r("success"),h.current=setTimeout(()=>{h.current=null,e()},1500)):(o(x.message||"Failed to save OAuth token"),r("error"))});return()=>{g?.(),h.current&&(clearTimeout(h.current),h.current=null)}},[e]);const m=async()=>{if(d.current){console.warn("[ClaudeOAuth] Auth already started, ignoring duplicate call");return}d.current=!0,console.warn("[ClaudeOAuth] Starting Claude authentication"),r("authenticating"),o(null);try{const g=await J.getClaudeProfiles();if(!g.success||!g.data)throw new Error("Failed to get Claude profiles");const x=g.data.activeProfileId;console.warn("[ClaudeOAuth] Initializing profile:",x);const C=await J.initializeClaudeProfile(x);if(!C.success)throw new Error(C.error||"Failed to start authentication");console.warn("[ClaudeOAuth] Authentication started, waiting for token...")}catch(g){console.error("[ClaudeOAuth] Authentication failed:",g),o(g instanceof Error?g.message:"Authentication failed"),r("error"),d.current=!1}},f=()=>{d.current=!1,r("ready"),o(null)};return s.jsxs("div",{className:"space-y-4",children:[n==="ready"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Xr,{className:"h-6 w-6 text-info shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticate with Claude"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto Claude requires Claude AI authentication for AI-powered features like Roadmap generation, Task automation, and Ideation."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This will open a browser window to authenticate with your Claude account. Your credentials are stored securely and are valid for 1 year."})]})]})})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(te,{onClick:m,size:"lg",className:"gap-2",children:[s.jsx(Xr,{className:"h-5 w-5"}),"Authenticate with Claude"]})})]}),n==="authenticating"&&s.jsx(He,{className:"border border-info/30 bg-info/10",children:s.jsx(pt,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ie,{className:"h-6 w-6 animate-spin text-info shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticating..."}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"A terminal window has opened. Please complete the authentication in your browser."})]})]}),s.jsx("div",{className:"rounded-lg bg-background/50 p-3 space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(sa,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{className:"font-medium",children:"What's happening:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["A terminal opened and ran ",s.jsx("code",{className:"px-1 bg-muted rounded",children:"claude setup-token"})]}),s.jsx("li",{children:"Your browser should open to authenticate with Claude"}),s.jsx("li",{children:"Complete the OAuth flow in your browser"}),s.jsx("li",{children:"The terminal will display your token (starts with sk-ant-oat01-...)"}),s.jsx("li",{children:"Auto Claude will automatically detect and save it"})]})]})]})})]})})}),n==="success"&&s.jsx(He,{className:"border border-success/30 bg-success/10",children:s.jsx(pt,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(rt,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-success",children:"Successfully Authenticated!"}),s.jsx("p",{className:"text-sm text-success/80 mt-1",children:c?`Connected as ${c}`:"Your Claude credentials have been saved"}),s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-success/70",children:[s.jsx(us,{className:"h-3 w-3"}),s.jsx("span",{children:"You can now use all Auto Claude AI features"})]})]})]})})}),n==="error"&&i&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(He,{className:"border border-destructive/30 bg-destructive/10",children:s.jsx(pt,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ct,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Authentication Failed"}),s.jsx("p",{className:"text-sm text-destructive/80 mt-1",children:i})]})]})})}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx(te,{onClick:f,variant:"outline",children:"Retry"}),t&&s.jsx(te,{onClick:t,variant:"ghost",children:"Cancel"})]})]}),(n==="ready"||n==="authenticating")&&t&&s.jsx("div",{className:"flex justify-center pt-2",children:s.jsx(te,{onClick:t,variant:"ghost",size:"sm",children:"Skip for now"})})]})}function ame({open:e,onOpenChange:t,project:n,onComplete:r,onSkip:i}){const{t:o}=rs("dialogs"),[c,l]=y.useState("github-auth"),[d,h]=y.useState(null),[m,f]=y.useState(null),[g,x]=y.useState(null),[C,_]=y.useState([]),[b,w]=y.useState(null),[j,S]=y.useState(null),[N,T]=y.useState(!1),[E,D]=y.useState(!1),[A,P]=y.useState(null),[M,B]=y.useState(null),[F,U]=y.useState(""),[G,$]=y.useState(!0),[V,Y]=y.useState(""),[K,O]=y.useState(!1),[L,I]=y.useState(null),[q,z]=y.useState([]),[ee,ie]=y.useState(null),[re,X]=y.useState(!1);y.useEffect(()=>{e&&(h(null),f(null),x(null),_([]),w(null),S(null),P(null),B(null),U(n.name.replace(/[^A-Za-z0-9_.-]/g,"-")),$(!0),Y(""),O(!1),I(null),z([]),ie(null),X(!1),(async()=>{try{const Me=await J.getGitHubToken(),qe=Me.success&&Me.data?.token,st=await J.getClaudeProfiles();let _t=!1;if(st.success&&st.data){const fe=st.data.profiles.find(Ae=>Ae.id===st.data.activeProfileId);_t=!!(fe?.oauthToken||fe?.isDefault&&fe?.configDir)}qe&&_t?(h(Me.data.token),l("repo"),await Q()):qe?(h(Me.data.token),l("claude-auth")):l("github-auth")}catch(Me){console.error("Failed to check existing auth:",Me),l("github-auth")}})())},[e]);const W=async()=>{X(!0);try{const De=await J.getGitHubUser();De.success&&De.data&&(I(De.data.username),ie(De.data.username));const Me=await J.listGitHubOrgs();Me.success&&Me.data&&z(Me.data.orgs)}catch(De){console.error("Failed to load user/orgs:",De)}finally{X(!1)}},Q=async()=>{D(!0),P(null);try{const De=await J.detectGitHubRepo(n.id);De.success&&De.data?(x(De.data),f(De.data),l("repo-confirm")):(await W(),l("repo"))}catch(De){P(De instanceof Error?De.message:"Failed to detect repository"),await W(),l("repo")}finally{D(!1)}},se=async De=>{T(!0),P(null);try{const Me=await J.getGitHubBranches(De,d);if(Me.success&&Me.data){_(Me.data);const qe=he(Me.data);S(qe),w(qe)}else P(Me.error||"Failed to load branches")}catch(Me){P(Me instanceof Error?Me.message:"Failed to load branches")}finally{T(!1)}},he=De=>{const Me=["main","master","develop","dev"];for(const qe of Me)if(De.includes(qe))return qe;return De[0]||null},de=async De=>{h(De);try{const Me=await J.getClaudeProfiles();if(Me.success&&Me.data){const qe=Me.data.profiles.find(st=>st.id===Me.data.activeProfileId);if(qe?.oauthToken||qe?.isDefault&&qe?.configDir){await Q();return}}}catch(Me){console.error("Failed to check Claude profiles:",Me)}l("claude-auth")},Ne=async()=>{await Q()},Re=async()=>{if(!F.trim()){P("Please enter a repository name");return}if(!ee){P("Please select an owner for the repository");return}O(!0),P(null);try{const De=await J.createGitHubRepo(F.trim(),{isPrivate:G,projectPath:n.path,owner:ee!==L?ee:void 0});De.success&&De.data?(f(De.data.fullName),x(De.data.fullName),l("branch"),await se(De.data.fullName)):P(De.error||"Failed to create repository")}catch(De){P(De instanceof Error?De.message:"Failed to create repository")}finally{O(!1)}},ce=async()=>{g&&(l("branch"),await se(g))},ge=async()=>{await W(),l("repo")},ae=async()=>{if(!V.trim()){P("Please enter a repository name (owner/repo format)");return}if(!/^[A-Za-z0-9_.-]+\/[A-Za-z0-9_.-]+$/.test(V.trim())){P("Invalid format. Use owner/repo (e.g., username/my-project)");return}O(!0),P(null);try{const De=await J.addGitRemote(n.path,V.trim());De.success?(f(V.trim()),x(V.trim()),l("branch"),await se(V.trim())):P(De.error||"Failed to add remote")}catch(De){P(De instanceof Error?De.message:"Failed to add remote")}finally{O(!1)}},Ee=()=>{d&&m&&b&&r({githubToken:d,githubRepo:m,mainBranch:b})},Be=()=>{switch(c){case"github-auth":return s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"h-5 w-5"}),o("githubSetup.connectTitle")]}),s.jsx(fs,{children:o("githubSetup.connectDescription")})]}),s.jsx("div",{className:"py-4",children:s.jsx(uM,{onSuccess:de,onCancel:i})})]});case"claude-auth":return s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-5 w-5"}),o("githubSetup.claudeTitle")]}),s.jsx(fs,{children:o("githubSetup.claudeDescription")})]}),s.jsx("div",{className:"py-4",children:s.jsx(ime,{onSuccess:Ne,onCancel:i})})]});case"repo-confirm":return s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"h-5 w-5"}),"Confirm Repository"]}),s.jsx(fs,{children:"We detected a GitHub repository for this project. Please confirm or change it."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-6 w-6 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Repository Detected"}),s.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:g})]})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o("githubSetup.repoDescription")}),A&&s.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:A})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:ge,children:"Use Different Repository"}),s.jsxs(te,{onClick:ce,children:[s.jsx(rt,{className:"mr-2 h-4 w-4"}),"Confirm & Continue"]})]})]});case"repo":return s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"h-5 w-5"}),"Connect to GitHub"]}),s.jsx(fs,{children:"Your project needs a GitHub repository. Create a new one or link to an existing repository."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[!M&&s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>B("create"),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-dashed hover:border-primary hover:bg-primary/5 transition-colors",children:[s.jsx(ys,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Create New Repo"}),s.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Create a new repository on GitHub"})]}),s.jsxs("button",{onClick:()=>B("link"),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-dashed hover:border-primary hover:bg-primary/5 transition-colors",children:[s.jsx(NN,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Link Existing"}),s.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Connect to an existing repository"})]})]}),M==="create"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("button",{onClick:()=>B(null),className:"text-primary hover:underline",children:" Back"}),s.jsx("span",{children:"Create a new repository"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Owner"}),re?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ie,{className:"h-4 w-4 animate-spin"}),"Loading accounts..."]}):s.jsxs("div",{className:"flex flex-wrap gap-2",children:[L&&s.jsxs("button",{onClick:()=>ie(L),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${ee===L?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:K,children:[s.jsx(Ja,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:L})]}),q.map(De=>s.jsxs("button",{onClick:()=>ie(De.login),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${ee===De.login?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:K,children:[s.jsx(OF,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:De.login})]},De.login))]}),q.length>0&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Select your personal account or an organization"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"repo-name",children:"Repository Name"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[ee||"..."," /"]}),s.jsx(Je,{id:"repo-name",value:F,onChange:De=>U(De.target.value),placeholder:"my-project",disabled:K,className:"flex-1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Visibility"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>$(!0),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${G?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:K,children:[s.jsx(zm,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Private"})]}),s.jsxs("button",{onClick:()=>$(!1),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${G?"border-muted hover:border-primary/50":"border-primary bg-primary/10 text-primary"}`,disabled:K,children:[s.jsx(Jr,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Public"})]})]})]})]}),M==="link"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("button",{onClick:()=>B(null),className:"text-primary hover:underline",children:" Back"}),s.jsx("span",{children:"Link to existing repository"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{htmlFor:"existing-repo",children:"Repository"}),s.jsx(Je,{id:"existing-repo",value:V,onChange:De=>Y(De.target.value),placeholder:"username/repository",disabled:K}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the full repository path (e.g., octocat/hello-world)"})]})]}),A&&s.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:A})]}),s.jsxs(Ts,{children:[i&&s.jsx(te,{variant:"outline",onClick:i,disabled:K,children:"Skip for now"}),M==="create"&&s.jsx(te,{onClick:Re,disabled:K||!F.trim(),children:K?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),"Create Repository"]})}),M==="link"&&s.jsx(te,{onClick:ae,disabled:K||!V.trim(),children:K?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Linking..."]}):s.jsxs(s.Fragment,{children:[s.jsx(NN,{className:"mr-2 h-4 w-4"}),"Link Repository"]})}),!M&&s.jsx(te,{variant:"outline",onClick:Q,disabled:E,children:E?s.jsxs(s.Fragment,{children:[s.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):"Retry Detection"})]})]});case"branch":return s.jsxs(s.Fragment,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5"}),"Select Base Branch"]}),s.jsx(fs,{children:"Choose which branch Auto Claude should use as the base for creating task branches."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[g&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Repository:"}),s.jsx("code",{className:"px-2 py-0.5 bg-muted rounded font-mono text-xs",children:g}),s.jsx(rt,{className:"h-4 w-4 text-success"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(we,{children:"Base Branch"}),s.jsxs(gt,{value:b||"",onValueChange:w,disabled:N||C.length===0,children:[s.jsx(ft,{children:N?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{className:"h-3 w-3 animate-spin"}),s.jsx("span",{children:"Loading branches..."})]}):s.jsx(xt,{placeholder:"Select a branch"})}),s.jsx(mt,{children:C.map(De=>s.jsx(Qe,{value:De,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:De}),De===j&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-success",children:[s.jsx(us,{className:"h-3 w-3"}),"Recommended"]})]})},De))})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["All tasks will be created from branches like"," ",s.jsx("code",{className:"px-1 bg-muted rounded",children:"auto-claude/task-name"}),b&&s.jsxs(s.Fragment,{children:[" based on ",s.jsx("code",{className:"px-1 bg-muted rounded",children:b})]})]})]}),s.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(us,{className:"h-4 w-4 text-info mt-0.5"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground",children:"Why select a branch?"}),s.jsx("p",{className:"mt-1",children:"Auto Claude creates isolated workspaces for each task. Selecting the right base branch ensures your tasks start with the latest code from your main development line."})]})]})}),A&&s.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:A})]}),s.jsxs(Ts,{children:[i&&s.jsx(te,{variant:"outline",onClick:i,children:"Skip for now"}),s.jsxs(te,{onClick:Ee,disabled:!b||N,children:[s.jsx(rt,{className:"mr-2 h-4 w-4"}),"Complete Setup"]})]})]});case"complete":return s.jsxs(s.Fragment,{children:[s.jsx(Jt,{children:s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(rt,{className:"h-5 w-5 text-success"}),"Setup Complete"]})}),s.jsxs("div",{className:"py-8 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center mb-4",children:s.jsx(rt,{className:"h-8 w-8 text-success"})}),s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Auto Claude is ready to use! You can now create tasks that will be automatically based on ",s.jsx("code",{className:"px-1 bg-muted rounded",children:b}),"."]})]})]})}},et=()=>{const De=[{label:"Authenticate"},{label:"Configure"}];if(c==="complete")return null;const Me=c==="github-auth"||c==="claude-auth"||c==="repo"?0:1;return s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:De.map((qe,st)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`flex items-center justify-center w-6 h-6 rounded-full text-xs font-medium ${st<Me?"bg-success text-success-foreground":st===Me?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:st<Me?s.jsx(rt,{className:"h-4 w-4"}):st+1}),s.jsx("span",{className:`ml-2 text-xs ${st===Me?"text-foreground font-medium":"text-muted-foreground"}`,children:qe.label}),st<De.length-1&&s.jsx(vs,{className:"h-4 w-4 mx-2 text-muted-foreground"})]},st))})};return s.jsx(sn,{open:e,onOpenChange:t,children:s.jsxs(Xs,{className:"sm:max-w-md",children:[et(),Be()]})})}console.log("[useIpc MODULE LOAD] api imported:",{type:typeof J,isUndefined:J===void 0,hasOnTaskProgress:typeof J?.onTaskProgress,moduleId:J?.__moduleId,stackTrace:new Error().stack});function ome(){const e=Ks(o=>o.updateTaskFromPlan),t=Ks(o=>o.updateTaskStatus),n=Ks(o=>o.updateExecutionProgress),r=Ks(o=>o.appendLog),i=Ks(o=>o.setError);y.useEffect(()=>{if(console.log("[useIpc] useEffect running, api =",{type:typeof J,isUndefined:J===void 0,isNull:J===null,hasOnTaskProgress:typeof J?.onTaskProgress,moduleId:J?.__moduleId,windowAPI:window.__claudeAPI,windowModuleId:window.__claudeAPIModuleId}),!J){console.error("[useIpc] API is falsy!",J);return}const o=J.onTaskProgress((S,N)=>{e(S,N)}),c=J.onTaskError((S,N)=>{i(`Task ${S}: ${N}`),r(S,`[ERROR] ${N}`)}),l=J.onTaskLog((S,N)=>{r(S,N)}),d=J.onTaskStatusChange((S,N)=>{t(S,N)}),h=J.onTaskExecutionProgress((S,N)=>{n(S,N)}),m=S=>Ss.getState().currentProjectId===S,f=J.onRoadmapProgress((S,N)=>{window.DEBUG&&console.log("[Roadmap] Progress update:",{projectId:S,currentProjectId:Ss.getState().currentProjectId,phase:N.phase,progress:N.progress,message:N.message}),m(S)&&Ss.getState().setGenerationStatus(N)}),g=J.onRoadmapComplete((S,N)=>{window.DEBUG&&console.log("[Roadmap] Generation complete:",{projectId:S,currentProjectId:Ss.getState().currentProjectId,featuresCount:N.features?.length||0,phasesCount:N.phases?.length||0}),m(S)&&(Ss.getState().setRoadmap(N),Ss.getState().setGenerationStatus({phase:"complete",progress:100,message:"Roadmap ready"}))}),x=J.onRoadmapError((S,N)=>{window.DEBUG&&console.error("[Roadmap] Error received:",{projectId:S,currentProjectId:Ss.getState().currentProjectId,error:N}),m(S)&&Ss.getState().setGenerationStatus({phase:"error",progress:0,message:"Generation failed",error:N})}),C=J.onRoadmapStopped(S=>{window.DEBUG&&console.log("[Roadmap] Generation stopped:",{projectId:S,currentProjectId:Ss.getState().currentProjectId}),m(S)&&Ss.getState().setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"})}),_=zd.getState().showRateLimitModal,b=J.onTerminalRateLimit(S=>{_({...S,detectedAt:typeof S.detectedAt=="string"?new Date(S.detectedAt):S.detectedAt})}),w=zd.getState().showSDKRateLimitModal,j=J.onSDKRateLimit(S=>{w({...S,detectedAt:typeof S.detectedAt=="string"?new Date(S.detectedAt):S.detectedAt})});return()=>{o(),c(),l(),d(),h(),f(),g(),x(),C(),b(),j()}},[e,t,n,r,i])}const lme=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0,TA=lme?"":"Ctrl+";function cme({project:e,isActive:t,canClose:n,tabIndex:r,onSelect:i,onClose:o}){const c=r<9?`${TA}${r+1}`:"",l=`${TA}W`,{attributes:d,listeners:h,setNodeRef:m,transform:f,transition:g,isDragging:x}=J0({id:e.id}),C={transform:Si.Transform.toString(f),transition:g,zIndex:x?50:void 0};return s.jsxs("div",{ref:m,style:C,className:le("group relative flex items-center min-w-0 max-w-[200px]","border-r border-border last:border-r-0","touch-none transition-all duration-200",x&&"opacity-60 scale-[0.98] shadow-lg"),...d,children:[s.jsxs(At,{delayDuration:200,children:[s.jsx(Tt,{asChild:!0,children:s.jsxs("div",{className:le("flex-1 flex items-center gap-2 px-4 py-2.5 text-sm","min-w-0 truncate hover:bg-muted/50 transition-colors","border-b-2 border-transparent cursor-pointer",t&&["bg-background border-b-primary text-foreground","hover:bg-background"],!t&&["text-muted-foreground","hover:text-foreground"]),onClick:i,children:[s.jsx("div",{...h,className:le("opacity-0 group-hover:opacity-60 transition-opacity","cursor-grab active:cursor-grabbing","w-1 h-4 bg-muted-foreground rounded-full")}),s.jsx("span",{className:"truncate font-medium",children:e.name})]})}),s.jsxs(jt,{side:"bottom",className:"flex items-center gap-2",children:[s.jsx("span",{children:e.name}),c&&s.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted rounded border border-border font-mono",children:c})]})]}),n&&s.jsxs(At,{delayDuration:200,children:[s.jsx(Tt,{asChild:!0,children:s.jsx("button",{className:le("h-6 w-6 p-0 mr-1 opacity-0 group-hover:opacity-100","transition-opacity duration-200 rounded","hover:bg-destructive hover:text-destructive-foreground","flex items-center justify-center",t&&"opacity-100"),onClick:o,children:s.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),s.jsxs(jt,{side:"bottom",className:"flex items-center gap-2",children:[s.jsx("span",{children:"Close tab"}),s.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted rounded border border-border font-mono",children:l})]})]})]})}function ume({projects:e,activeProjectId:t,onProjectSelect:n,onProjectClose:r,onAddProject:i,className:o}){return y.useEffect(()=>{const c=l=>{if(!(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement||l.target?.isContentEditable||!(l.metaKey||l.ctrlKey))){if(l.key>="1"&&l.key<="9"){l.preventDefault();const h=parseInt(l.key)-1;h<e.length&&n(e[h].id);return}if(l.key==="Tab"){l.preventDefault();const h=e.findIndex(f=>f.id===t);if(h===-1||e.length===0)return;const m=l.shiftKey?(h-1+e.length)%e.length:(h+1)%e.length;n(e[m].id);return}l.key==="w"&&t&&e.length>1&&(l.preventDefault(),r(t))}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,t,n,r]),e.length===0?null:s.jsxs("div",{className:le("flex items-center border-b border-border bg-background","overflow-x-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",o),children:[s.jsx("div",{className:"flex items-center flex-1 min-w-0",children:e.map((c,l)=>s.jsx(cme,{project:c,isActive:t===c.id,canClose:e.length>1,tabIndex:l,onSelect:()=>n(c.id),onClose:d=>{d.stopPropagation(),r(c.id)}},c.id))}),s.jsx("div",{className:"flex items-center px-2 py-1",children:s.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:i,title:"Add Project",children:s.jsx(ys,{className:"h-4 w-4"})})})]})}function dme(){ome();const e=Et(ve=>ve.projects),t=Et(ve=>ve.selectedProjectId),n=Et(ve=>ve.activeProjectId),r=Et(ve=>ve.getProjectTabs),i=Et(ve=>ve.openProjectIds),o=Et(ve=>ve.openProjectTab),c=Et(ve=>ve.closeProjectTab),l=Et(ve=>ve.setActiveProject),d=Et(ve=>ve.reorderTabs),h=Ks(ve=>ve.tasks),m=dn(ve=>ve.settings),f=dn(ve=>ve.isLoading),[g,x]=y.useState(null),[C,_]=y.useState(!1),[b,w]=y.useState(!1),[j,S]=y.useState(void 0),[N,T]=y.useState(void 0),[E,D]=y.useState("kanban"),[A,P]=y.useState(!1),[M,B]=y.useState(!1),[F,U]=y.useState(!1),[G,$]=y.useState(null),[V,Y]=y.useState(!1),[K,O]=y.useState(!1),[L,I]=y.useState(null),[q,z]=y.useState(null),[ee,ie]=y.useState(!1),[re,X]=y.useState(null),W=Rp(Dc(Wc,{activationConstraint:{distance:8}})),[Q,se]=y.useState(null),he=r(),de=e.find(ve=>ve.id===(n||t));y.useEffect(()=>{Fb(),NR()},[]),y.useEffect(()=>{if(console.log("[App] Tab restore useEffect triggered:",{projectsCount:e.length,openProjectIds:i,activeProjectId:n,selectedProjectId:t,projectTabsCount:he.length,projectTabIds:he.map(ve=>ve.id)}),e.length>0){if(i.length===0){const ve=n||t||e[0].id;console.log("[App] No tabs persisted, opening project:",ve),e.some(Fe=>Fe.id===ve)?(o(ve),l(ve)):(console.log("[App] Project not found, falling back to first project:",e[0].id),o(e[0].id),l(e[0].id));return}console.log("[App] Tabs already persisted, checking active project"),n&&!he.some(ve=>ve.id===n)?(console.log("[App] Active project has no tab, opening:",n),o(n)):t&&!n?(console.log("[App] No active project, using selected:",t),l(t),o(t)):console.log("[App] Tab state is valid, no action needed")}},[e,n,t,i,he,o,l]);const[Ne,Re]=y.useState(!1);y.useEffect(()=>{!f&&!Ne&&Re(!0)},[f,Ne]),y.useEffect(()=>{Ne&&m.onboardingCompleted===!1&&P(!0)},[Ne,m.onboardingCompleted]);const{t:ce,i18n:ge}=rs("dialogs");y.useEffect(()=>{m.language&&m.language!==ge.language&&ge.changeLanguage(m.language)},[m.language,ge]),y.useEffect(()=>{const ve=Fe=>{const Ct=Fe.detail;Ct&&S(Ct),w(!0)};return window.addEventListener("open-app-settings",ve),()=>{window.removeEventListener("open-app-settings",ve)}},[]),y.useEffect(()=>{const ve=J.onAppUpdateDownloaded(()=>{console.warn("[App] Update downloaded, opening settings to updates section"),S("updates"),w(!0)});return()=>{ve()}},[]),y.useEffect(()=>{O(!1),I(null)},[t]),y.useEffect(()=>{V||K||de&&!de.autoBuildPath&&q!==de.id&&($(de),I(null),O(!1),U(!0))},[de,q,V,K]),y.useEffect(()=>{const ve=Fe=>{Fe.target instanceof HTMLInputElement||Fe.target instanceof HTMLTextAreaElement||Fe.target?.isContentEditable||(Fe.ctrlKey||Fe.metaKey)&&Fe.key==="t"&&E!=="terminals"&&(Fe.preventDefault(),B(!0))};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[E]),y.useEffect(()=>{const ve=n||t;ve?(mo(ve),x(null)):Ks.getState().clearTasks(),Ns.getState().terminals.forEach(Ue=>{J.destroyTerminal(Ue.id)}),Ns.getState().clearAllTerminals(),de?.path&&sne(de.path).catch(Ue=>{console.error("[App] Failed to restore sessions:",Ue)})},[n,t,de?.path,de?.name]),y.useEffect(()=>{const ve=document.documentElement,Fe=()=>{m.theme==="dark"?ve.classList.add("dark"):m.theme==="light"?ve.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?ve.classList.add("dark"):ve.classList.remove("dark")},Ue=jR.map(Ft=>Ft.id),Ct=m.colorTheme??"default",Ot=Ue.includes(Ct)?Ct:"default";Ot==="default"?ve.removeAttribute("data-theme"):ve.setAttribute("data-theme",Ot),Fe();const Ke=window.matchMedia("(prefers-color-scheme: dark)"),Xe=()=>{m.theme==="system"&&Fe()};return Ke.addEventListener("change",Xe),()=>{Ke.removeEventListener("change",Xe)}},[m.theme,m.colorTheme]),y.useEffect(()=>{const ve=document.documentElement,Fe=m.uiScale??ea,Ue=Math.max(Cm,Math.min(Nm,Fe));ve.setAttribute("data-ui-scale",Ue.toString())},[m.uiScale]),y.useEffect(()=>{if(g){const ve=h.find(Fe=>Fe.id===g.id||Fe.specId===g.specId);ve&&x(ve)}},[h,g?.id,g?.specId,g]);const ae=ve=>{x(ve)},Ee=()=>{x(null)},Be=()=>{B(!0)},et=(ve,Fe)=>{o(ve.id),Fe&&($(ve),I(null),O(!1),U(!0))},De=ve=>{l(ve)},Me=ve=>{c(ve)},qe=ve=>{const{active:Fe}=ve,Ue=he.find(Ct=>Ct.id===Fe.id);Ue&&se(Ue)},st=ve=>{const{active:Fe,over:Ue}=ve;if(se(null),!Ue)return;const Ct=he.findIndex(Ke=>Ke.id===Fe.id),Ot=he.findIndex(Ke=>Ke.id===Ue.id);Ct!==Ot&&Ct!==-1&&Ot!==-1&&d(Ct,Ot)},_t=async()=>{if(!G)return;const ve=G.id;console.log("[InitDialog] Starting initialization for project:",ve),Y(!0),O(!1),I(null);try{const Fe=await ng(ve);if(console.log("[InitDialog] Initialization result:",Fe),Fe?.success){console.log("[InitDialog] Initialization successful, closing dialog");const Ue=Et.getState().projects.find(Ct=>Ct.id===ve);console.log("[InitDialog] Updated project:",Ue),O(!0),Y(!1),U(!1),$(null),Ue&&(X(Ue),ie(!0))}else{console.log("[InitDialog] Initialization failed, showing error");const Ue=Fe?.error||"Failed to initialize Auto Claude. Please try again.";I(Ue),Y(!1)}}catch(Fe){console.error("[InitDialog] Unexpected error during initialization:",Fe);const Ue=Fe instanceof Error?Fe.message:"An unexpected error occurred";I(Ue),Y(!1)}},fe=async ve=>{if(re){try{await J.updateProjectEnv(re.id,{githubEnabled:!0,githubToken:ve.githubToken,githubRepo:ve.githubRepo}),await J.updateProjectSettings(re.id,{mainBranch:ve.mainBranch}),await Fb()}catch(Fe){console.error("Failed to save GitHub settings:",Fe)}ie(!1),X(null)}},Ae=()=>{ie(!1),X(null)},Le=()=>{console.log("[InitDialog] User skipped initialization"),G&&z(G.id),U(!1),$(null),I(null),O(!1)},We=ve=>{D("kanban");const Fe=h.find(Ue=>Ue.id===ve||Ue.specId===ve);Fe&&x(Fe)};return s.jsx(Mc,{children:s.jsxs("div",{className:"flex h-screen bg-background",children:[s.jsx(DW,{onSettingsClick:()=>w(!0),onNewTaskClick:()=>_(!0),activeView:E,onViewChange:D}),s.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[he.length>0&&s.jsxs(Op,{sensors:W,collisionDetection:X7,onDragStart:qe,onDragEnd:st,children:[s.jsx(Q0,{items:he.map(ve=>ve.id),strategy:u9,children:s.jsx(ume,{projects:he,activeProjectId:n,onProjectSelect:De,onProjectClose:Me,onAddProject:Be})}),s.jsx(zp,{children:Q&&s.jsxs("div",{className:"flex items-center gap-2 bg-card border border-border rounded-md px-4 py-2.5 shadow-lg max-w-[200px]",children:[s.jsx("div",{className:"w-1 h-4 bg-muted-foreground rounded-full"}),s.jsx("span",{className:"truncate font-medium text-sm",children:Q.name})]})})]}),s.jsxs("header",{className:"electron-drag flex h-14 items-center justify-between border-b border-border bg-card/50 backdrop-blur-sm px-6",children:[s.jsx("div",{className:"electron-no-drag",children:de?s.jsx("h1",{className:"font-semibold text-foreground",children:de.name}):s.jsx("div",{className:"text-muted-foreground",children:"Select a project to get started"})}),de&&s.jsx("div",{className:"electron-no-drag flex items-center gap-3",children:s.jsxs(At,{children:[s.jsx(Tt,{asChild:!0,children:s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>w(!0),children:s.jsx(oh,{className:"h-4 w-4"})})}),s.jsx(jt,{children:"Settings"})]})})]}),s.jsx("main",{className:"flex-1 overflow-hidden",children:de?s.jsxs(s.Fragment,{children:[E==="kanban"&&s.jsx(DQ,{tasks:h,onTaskClick:ae,onNewTaskClick:()=>_(!0)}),s.jsx("div",{className:E==="terminals"?"h-full":"hidden",children:s.jsx(Hre,{projectPath:de?.path,onNewTaskClick:()=>_(!0),isActive:E==="terminals"})}),E==="roadmap"&&(n||t)&&s.jsx(xie,{projectId:n||t,onGoToTask:We}),E==="context"&&(n||t)&&s.jsx(Bie,{projectId:n||t}),E==="ideation"&&(n||t)&&s.jsx(lae,{projectId:n||t,onGoToTask:We}),E==="insights"&&(n||t)&&s.jsx(wae,{projectId:n||t}),E==="github-issues"&&(n||t)&&s.jsx(Lae,{onOpenSettings:()=>{T("github"),w(!0)},onNavigateToTask:We}),E==="changelog"&&(n||t)&&s.jsx(Ffe,{}),E==="worktrees"&&(n||t)&&s.jsx(Hfe,{projectId:n||t}),E==="agent-tools"&&s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Agent Tools"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Configure and manage agent tools - Coming soon"})]})})]}):s.jsx(Ufe,{projects:e,onNewProject:Be,onOpenProject:Be,onSelectProject:ve=>{o(ve)}})})]}),s.jsx(Iee,{open:!!g,task:g,onOpenChange:ve=>!ve&&Ee()}),(n||t)&&s.jsx(ite,{projectId:n||t,open:C,onOpenChange:_}),s.jsx(vse,{open:b,onOpenChange:ve=>{w(ve),ve||(S(void 0),T(void 0))},initialSection:j,initialProjectSection:N,onRerunWizard:()=>{dn.getState().updateSettings({onboardingCompleted:!1}),w(!1),P(!0)}}),s.jsx(sn,{open:F,onOpenChange:ve=>{console.log("[InitDialog] onOpenChange called",{open:ve,pendingProject:!!G,isInitializing:V,initSuccess:K}),!ve&&G&&!V&&!K&&Le()},children:s.jsxs(Xs,{children:[s.jsxs(Jt,{children:[s.jsxs(es,{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"h-5 w-5"}),ce("initialize.title")]}),s.jsx(fs,{children:ce("initialize.description")})]}),s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:ce("initialize.willDo")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[s.jsx("li",{children:ce("initialize.createFolder")}),s.jsx("li",{children:ce("initialize.copyFramework")}),s.jsx("li",{children:ce("initialize.setupSpecs")})]})]}),!m.autoBuildPath&&s.jsx("div",{className:"mt-4 rounded-lg border border-warning/50 bg-warning/10 p-4 text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-warning",children:ce("initialize.sourcePathNotConfigured")}),s.jsx("p",{className:"text-muted-foreground mt-1",children:ce("initialize.sourcePathNotConfiguredDescription")})]})]})}),L&&s.jsx("div",{className:"mt-4 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ct,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-destructive",children:ce("initialize.initFailed")}),s.jsx("p",{className:"text-muted-foreground mt-1",children:L})]})]})})]}),s.jsxs(Ts,{children:[s.jsx(te,{variant:"outline",onClick:Le,disabled:V,children:ce("common:buttons.skip",{ns:"common"})}),s.jsx(te,{onClick:_t,disabled:V||!m.autoBuildPath,children:V?s.jsxs(s.Fragment,{children:[s.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),ce("common:labels.initializing",{ns:"common"})]}):s.jsxs(s.Fragment,{children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),ce("common:buttons.initialize",{ns:"common"})]})})]})]})}),re&&s.jsx(ame,{open:ee,onOpenChange:ie,project:re,onComplete:fe,onSkip:Ae}),s.jsx(Vfe,{}),s.jsx(Wfe,{}),s.jsx(rme,{open:A,onOpenChange:P,onOpenTaskCreator:()=>{P(!1),_(!0)},onOpenSettings:()=>{P(!1),w(!0)}}),s.jsx(Dw,{open:M,onOpenChange:B,onProjectAdded:et}),s.jsx(Kfe,{})]})})}const hme={timestamp:new Date().toISOString(),userAgent:navigator.userAgent};console.log("=".repeat(80));console.log("AUTO-CLAUDE WEB CLIENT");console.log("=".repeat(80));console.log("Build Info:",hme);console.log("Git Commit:","dev");console.log("=".repeat(80));xF.createRoot(document.getElementById("root")).render(s.jsx(Lt.StrictMode,{children:s.jsx(dme,{})}));
//# sourceMappingURL=main-Bqnb6bK6.js.map
